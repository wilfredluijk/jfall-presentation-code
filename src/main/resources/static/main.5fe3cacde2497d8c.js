(self.webpackChunkquiz_game=self.webpackChunkquiz_game||[]).push([[179],{6304:(N,M,S)=>{"use strict";S.d(M,{Dh:()=>pe,GT:()=>Y,cc:()=>tt,hO:()=>at,on:()=>ce,pX:()=>W,xv:()=>Ce});var P=S(5879),c=S(7142),B=S(8186);N=S.hmd(N);const R=["ngOnDestroy"],W=($e,xt,It,Ie={})=>new Proxy($e,{get:(Vt,Ue)=>It.runOutsideAngular(()=>{var Ye;if($e[Ue])return!(null===(Ye=Ie?.spy)||void 0===Ye)&&Ye.get&&Ie.spy.get(Ue,$e[Ue]),$e[Ue];if(R.indexOf(Ue)>-1)return()=>{};const pt=xt.toPromise().then(kt=>{const Oe=kt&&kt[Ue];return"function"==typeof Oe?Oe.bind(kt):Oe&&Oe.then?Oe.then(We=>It.run(()=>We)):It.run(()=>Oe)});return new Proxy(()=>{},{get:(kt,Oe)=>pt[Oe],apply:(kt,Oe,We)=>pt.then(Fe=>{var Mt;const Pt=Fe&&Fe(...We);return!(null===(Mt=Ie?.spy)||void 0===Mt)&&Mt.apply&&Ie.spy.apply(Ue,We,Pt),Pt})})})}),Y=($e,xt)=>{xt.forEach(It=>{Object.getOwnPropertyNames(It.prototype||It).forEach(Ie=>{Object.defineProperty($e.prototype,Ie,Object.getOwnPropertyDescriptor(It.prototype||It,Ie))})})};class Q{constructor(xt){return xt}}const pe=new P.OlP("angularfire2.app.options"),Ce=new P.OlP("angularfire2.app.name");function ce($e,xt,It){const Vt="object"==typeof It&&It||{};Vt.name=Vt.name||"string"==typeof It&&It||"[DEFAULT]";const Ye=c.Z.apps.filter(pt=>pt&&pt.name===Vt.name)[0]||xt.runOutsideAngular(()=>c.Z.initializeApp($e,Vt));try{JSON.stringify($e)!==JSON.stringify(Ye.options)&&me("error",`${Ye.name} Firebase App already initialized with different options${N.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Q(Ye)}const me=($e,...xt)=>{(0,P.X6Q)()&&typeof console<"u"&&console[$e](...xt)},Ne={provide:Q,useFactory:ce,deps:[pe,P.R0b,[new P.FiY,Ce]]};let at=(()=>{class $e{constructor(It){c.Z.registerVersion("angularfire",B.q4.full,"core"),c.Z.registerVersion("angularfire",B.q4.full,"app-compat"),c.Z.registerVersion("angular",P.q4F.full,It.toString())}static initializeApp(It,Ie){return{ngModule:$e,providers:[{provide:pe,useValue:It},{provide:Ce,useValue:Ie}]}}}return $e.\u0275fac=function(It){return new(It||$e)(P.LFG(P.Lbi))},$e.\u0275mod=P.oAB({type:$e}),$e.\u0275inj=P.cJS({providers:[Ne]}),$e})();function tt($e,xt,It,Ie,Vt){const[,Ue,Ye]=globalThis.\u0275AngularfireInstanceCache.find(pt=>pt[0]===$e)||[];if(Ue)return function wt($e,xt){try{return $e.toString()===xt.toString()}catch{return $e===xt}}(Vt,Ye)||(le("error",`${xt} was already initialized on the ${It} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),le("warn",{is:Vt,was:Ye})),Ue;{const pt=Ie();return globalThis.\u0275AngularfireInstanceCache.push([$e,pt,Vt]),pt}}const lt=!!N.hot,le=($e,...xt)=>{(0,P.X6Q)()&&typeof console<"u"&&console[$e](...xt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8186:(N,M,S)=>{"use strict";S.d(M,{q4:()=>pu,iC:()=>fu,HU:()=>dh,vb:()=>ts,JM:()=>ch,u3:()=>Ca});var P=S(5879),c=S(3182),B=S(5861),R=S(534),W=S(9058),Y=S(4537),Q=S(7879);const pe=(L,$)=>$.some(ee=>L instanceof ee);let Ce,ce;const at=new WeakMap,tt=new WeakMap,wt=new WeakMap,lt=new WeakMap,le=new WeakMap;let It={get(L,$,ee){if(L instanceof IDBTransaction){if("done"===$)return tt.get(L);if("objectStoreNames"===$)return L.objectStoreNames||wt.get(L);if("store"===$)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return Ye(L[$])},set:(L,$,ee)=>(L[$]=ee,!0),has:(L,$)=>L instanceof IDBTransaction&&("done"===$||"store"===$)||$ in L};function Ue(L){return"function"==typeof L?function Vt(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(L)?function(...$){return L.apply(pt(this),$),Ye(at.get(this))}:function(...$){return Ye(L.apply(pt(this),$))}:function($,...ee){const ue=L.call(pt(this),$,...ee);return wt.set(ue,$.sort?$.sort():[$]),Ye(ue)}}(L):(L instanceof IDBTransaction&&function xt(L){if(tt.has(L))return;const $=new Promise((ee,ue)=>{const De=()=>{L.removeEventListener("complete",Pe),L.removeEventListener("error",qe),L.removeEventListener("abort",qe)},Pe=()=>{ee(),De()},qe=()=>{ue(L.error||new DOMException("AbortError","AbortError")),De()};L.addEventListener("complete",Pe),L.addEventListener("error",qe),L.addEventListener("abort",qe)});tt.set(L,$)}(L),pe(L,function me(){return Ce||(Ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(L,It):L)}function Ye(L){if(L instanceof IDBRequest)return function $e(L){const $=new Promise((ee,ue)=>{const De=()=>{L.removeEventListener("success",Pe),L.removeEventListener("error",qe)},Pe=()=>{ee(Ye(L.result)),De()},qe=()=>{ue(L.error),De()};L.addEventListener("success",Pe),L.addEventListener("error",qe)});return $.then(ee=>{ee instanceof IDBCursor&&at.set(ee,L)}).catch(()=>{}),le.set($,L),$}(L);if(lt.has(L))return lt.get(L);const $=Ue(L);return $!==L&&(lt.set(L,$),le.set($,L)),$}const pt=L=>le.get(L),We=["get","getKey","getAll","getAllKeys","count"],Fe=["put","add","delete","clear"],Mt=new Map;function Pt(L,$){if(!(L instanceof IDBDatabase)||$ in L||"string"!=typeof $)return;if(Mt.get($))return Mt.get($);const ee=$.replace(/FromIndex$/,""),ue=$!==ee,De=Fe.includes(ee);if(!(ee in(ue?IDBIndex:IDBObjectStore).prototype)||!De&&!We.includes(ee))return;const Pe=function(){var qe=(0,B.Z)(function*(Rt,...Dt){const jt=this.transaction(Rt,De?"readwrite":"readonly");let yn=jt.store;return ue&&(yn=yn.index(Dt.shift())),(yield Promise.all([yn[ee](...Dt),De&&jt.done]))[0]});return function(Dt){return qe.apply(this,arguments)}}();return Mt.set($,Pe),Pe}!function Ie(L){It=L(It)}(L=>({...L,get:($,ee,ue)=>Pt($,ee)||L.get($,ee,ue),has:($,ee)=>!!Pt($,ee)||L.has($,ee)}));const St="@firebase/installations",Yt="0.6.4",Yn=1e4,hi=`w:${Yt}`,vn="FIS_v2",ft="https://firebaseinstallations.googleapis.com/v1",Nt=36e5,fn=new W.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pn(L){return L instanceof W.ZR&&L.code.includes("request-failed")}function Kr({projectId:L}){return`${ft}/projects/${L}/installations`}function lo(L){return{token:L.token,requestStatus:2,expiresIn:er(L.expiresIn),creationTime:Date.now()}}function ei(L,$){return _r.apply(this,arguments)}function _r(){return(_r=(0,B.Z)(function*(L,$){const ue=(yield $.json()).error;return fn.create("request-failed",{requestName:L,serverCode:ue.code,serverMessage:ue.message,serverStatus:ue.status})})).apply(this,arguments)}function Rs({apiKey:L}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L})}function ds(L){return uo.apply(this,arguments)}function uo(){return(uo=(0,B.Z)(function*(L){const $=yield L();return $.status>=500&&$.status<600?L():$})).apply(this,arguments)}function er(L){return Number(L.replace("s","000"))}function ni(){return(ni=(0,B.Z)(function*({appConfig:L,heartbeatServiceProvider:$},{fid:ee}){const ue=Kr(L),De=Rs(L),Pe=$.getImmediate({optional:!0});if(Pe){const jt=yield Pe.getHeartbeatsHeader();jt&&De.append("x-firebase-client",jt)}const Rt={method:"POST",headers:De,body:JSON.stringify({fid:ee,authVersion:vn,appId:L.appId,sdkVersion:hi})},Dt=yield ds(()=>fetch(ue,Rt));if(Dt.ok){const jt=yield Dt.json();return{fid:jt.fid||ee,registrationStatus:2,refreshToken:jt.refreshToken,authToken:lo(jt.authToken)}}throw yield ei("Create Installation",Dt)})).apply(this,arguments)}function Yi(L){return new Promise($=>{setTimeout($,L)})}const Vr=/^[cdef][\w-]{21}$/,Ft="";function ze(){try{const L=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(L),L[0]=112+L[0]%16;const ee=function Gt(L){return function Et(L){return btoa(String.fromCharCode(...L)).replace(/\+/g,"-").replace(/\//g,"_")}(L).substr(0,22)}(L);return Vr.test(ee)?ee:Ft}catch{return Ft}}function Ut(L){return`${L.appName}!${L.appId}`}const Tt=new Map;function Io(L,$){const ee=Ut(L);ji(ee,$),function Wr(L,$){const ee=function Wn(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=L=>{ji(L.data.key,L.data.fid)}),Qn}();ee&&ee.postMessage({key:L,fid:$}),function rn(){0===Tt.size&&Qn&&(Qn.close(),Qn=null)}()}(ee,$)}function ji(L,$){const ee=Tt.get(L);if(ee)for(const ue of ee)ue($)}let Qn=null;const ll="firebase-installations-database",tr=1,Ao="firebase-installations-store";let pi=null;function Oi(){return pi||(pi=function kt(L,$,{blocked:ee,upgrade:ue,blocking:De,terminated:Pe}={}){const qe=indexedDB.open(L,$),Rt=Ye(qe);return ue&&qe.addEventListener("upgradeneeded",Dt=>{ue(Ye(qe.result),Dt.oldVersion,Dt.newVersion,Ye(qe.transaction))}),ee&&qe.addEventListener("blocked",()=>ee()),Rt.then(Dt=>{Pe&&Dt.addEventListener("close",()=>Pe()),De&&Dt.addEventListener("versionchange",()=>De())}).catch(()=>{}),Rt}(ll,tr,{upgrade:(L,$)=>{0===$&&L.createObjectStore(Ao)}})),pi}function Mo(L,$){return ri.apply(this,arguments)}function ri(){return(ri=(0,B.Z)(function*(L,$){const ee=Ut(L),De=(yield Oi()).transaction(Ao,"readwrite"),Pe=De.objectStore(Ao),qe=yield Pe.get(ee);return yield Pe.put($,ee),yield De.done,(!qe||qe.fid!==$.fid)&&Io(L,$.fid),$})).apply(this,arguments)}function Xi(L){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,B.Z)(function*(L){const $=Ut(L),ue=(yield Oi()).transaction(Ao,"readwrite");yield ue.objectStore(Ao).delete($),yield ue.done})).apply(this,arguments)}function No(L,$){return nr.apply(this,arguments)}function nr(){return(nr=(0,B.Z)(function*(L,$){const ee=Ut(L),De=(yield Oi()).transaction(Ao,"readwrite"),Pe=De.objectStore(Ao),qe=yield Pe.get(ee),Rt=$(qe);return void 0===Rt?yield Pe.delete(ee):yield Pe.put(Rt,ee),yield De.done,Rt&&(!qe||qe.fid!==Rt.fid)&&Io(L,Rt.fid),Rt})).apply(this,arguments)}function Ee(L){return be.apply(this,arguments)}function be(){return be=(0,B.Z)(function*(L){let $;const ee=yield No(L.appConfig,ue=>{const De=function Me(L){return xr(L||{fid:ze(),registrationStatus:0})}(ue),Pe=function nt(L,$){if(0===$.registrationStatus){if(!navigator.onLine)return{installationEntry:$,registrationPromise:Promise.reject(fn.create("app-offline"))};const ee={fid:$.fid,registrationStatus:1,registrationTime:Date.now()},ue=function je(L,$){return Ht.apply(this,arguments)}(L,ee);return{installationEntry:ee,registrationPromise:ue}}return 1===$.registrationStatus?{installationEntry:$,registrationPromise:on(L)}:{installationEntry:$}}(L,De);return $=Pe.registrationPromise,Pe.installationEntry});return ee.fid===Ft?{installationEntry:yield $}:{installationEntry:ee,registrationPromise:$}}),be.apply(this,arguments)}function Ht(){return Ht=(0,B.Z)(function*(L,$){try{const ee=yield function al(L,$){return ni.apply(this,arguments)}(L,$);return Mo(L.appConfig,ee)}catch(ee){throw pn(ee)&&409===ee.customData.serverCode?yield Xi(L.appConfig):yield Mo(L.appConfig,{fid:$.fid,registrationStatus:0}),ee}}),Ht.apply(this,arguments)}function on(L){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,B.Z)(function*(L){let $=yield rr(L.appConfig);for(;1===$.registrationStatus;)yield Yi(100),$=yield rr(L.appConfig);if(0===$.registrationStatus){const{installationEntry:ee,registrationPromise:ue}=yield Ee(L);return ue||ee}return $})).apply(this,arguments)}function rr(L){return No(L,$=>{if(!$)throw fn.create("installation-not-found");return xr($)})}function xr(L){return function mn(L){return 1===L.registrationStatus&&L.registrationTime+Yn<Date.now()}(L)?{fid:L.fid,registrationStatus:0}:L}function pr(){return(pr=(0,B.Z)(function*({appConfig:L,heartbeatServiceProvider:$},ee){const ue=function hs(L,{fid:$}){return`${Kr(L)}/${$}/authTokens:generate`}(L,ee),De=function Do(L,{refreshToken:$}){const ee=Rs(L);return ee.append("Authorization",function ti(L){return`${vn} ${L}`}($)),ee}(L,ee),Pe=$.getImmediate({optional:!0});if(Pe){const jt=yield Pe.getHeartbeatsHeader();jt&&De.append("x-firebase-client",jt)}const Rt={method:"POST",headers:De,body:JSON.stringify({installation:{sdkVersion:hi,appId:L.appId}})},Dt=yield ds(()=>fetch(ue,Rt));if(Dt.ok)return lo(yield Dt.json());throw yield ei("Generate Auth Token",Dt)})).apply(this,arguments)}function Oo(L){return ve.apply(this,arguments)}function ve(){return ve=(0,B.Z)(function*(L,$=!1){let ee;const ue=yield No(L.appConfig,Pe=>{if(!Ln(Pe))throw fn.create("not-registered");const qe=Pe.authToken;if(!$&&function Rn(L){return 2===L.requestStatus&&!function Dr(L){const $=Date.now();return $<L.creationTime||L.creationTime+L.expiresIn<$+Nt}(L)}(qe))return Pe;if(1===qe.requestStatus)return ee=function Ze(L,$){return He.apply(this,arguments)}(L,$),Pe;{if(!navigator.onLine)throw fn.create("app-offline");const Rt=function Sn(L){const $={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},L),{authToken:$})}(Pe);return ee=function Qt(L,$){return wn.apply(this,arguments)}(L,Rt),Rt}});return ee?yield ee:ue.authToken}),ve.apply(this,arguments)}function He(){return(He=(0,B.Z)(function*(L,$){let ee=yield mt(L.appConfig);for(;1===ee.authToken.requestStatus;)yield Yi(100),ee=yield mt(L.appConfig);const ue=ee.authToken;return 0===ue.requestStatus?Oo(L,$):ue})).apply(this,arguments)}function mt(L){return No(L,$=>{if(!Ln($))throw fn.create("not-registered");return function Bn(L){return 1===L.requestStatus&&L.requestTime+Yn<Date.now()}($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}function wn(){return wn=(0,B.Z)(function*(L,$){try{const ee=yield function Fn(L,$){return pr.apply(this,arguments)}(L,$),ue=Object.assign(Object.assign({},$),{authToken:ee});return yield Mo(L.appConfig,ue),ee}catch(ee){if(!pn(ee)||401!==ee.customData.serverCode&&404!==ee.customData.serverCode){const ue=Object.assign(Object.assign({},$),{authToken:{requestStatus:0}});yield Mo(L.appConfig,ue)}else yield Xi(L.appConfig);throw ee}}),wn.apply(this,arguments)}function Ln(L){return void 0!==L&&2===L.registrationStatus}function co(){return(co=(0,B.Z)(function*(L){const $=L,{installationEntry:ee,registrationPromise:ue}=yield Ee($);return ue?ue.catch(console.error):Oo($).catch(console.error),ee.fid})).apply(this,arguments)}function vi(){return vi=(0,B.Z)(function*(L,$=!1){const ee=L;return yield function ks(L){return Po.apply(this,arguments)}(ee),(yield Oo(ee,$)).token}),vi.apply(this,arguments)}function Po(){return(Po=(0,B.Z)(function*(L){const{registrationPromise:$}=yield Ee(L);$&&(yield $)})).apply(this,arguments)}function zr(L){return fn.create("missing-app-config-values",{valueName:L})}const Hi="installations",ps=L=>{const $=L.getProvider("app").getImmediate(),ee=function bi(L){if(!L||!L.options)throw zr("App Configuration");if(!L.name)throw zr("App Name");const $=["projectId","apiKey","appId"];for(const ee of $)if(!L.options[ee])throw zr(ee);return{appName:L.name,projectId:L.options.projectId,apiKey:L.options.apiKey,appId:L.options.appId}}($);return{app:$,appConfig:ee,heartbeatServiceProvider:(0,R._getProvider)($,"heartbeat"),_delete:()=>Promise.resolve()}},Uc=L=>{const $=L.getProvider("app").getImmediate(),ee=(0,R._getProvider)($,Hi).getImmediate();return{getId:()=>function Pa(L){return co.apply(this,arguments)}(ee),getToken:De=>function Wd(L){return vi.apply(this,arguments)}(ee,De)}};(function cl(){(0,R._registerComponent)(new Y.wA(Hi,ps,"PUBLIC")),(0,R._registerComponent)(new Y.wA("installations-internal",Uc,"PRIVATE"))})(),(0,R.registerVersion)(St,Yt),(0,R.registerVersion)(St,Yt,"esm2017");const dl="@firebase/remote-config",sr=new W.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fs{constructor($,ee,ue,De){this.client=$,this.storage=ee,this.storageCache=ue,this.logger=De}isCachedDataFresh($,ee){if(!ee)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ue=Date.now()-ee,De=ue<=$;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ue}. Cache max age millis (minimumFetchIntervalMillis setting): ${$}. Is cache hit: ${De}.`),De}fetch($){var ee=this;return(0,B.Z)(function*(){const[ue,De]=yield Promise.all([ee.storage.getLastSuccessfulFetchTimestampMillis(),ee.storage.getLastSuccessfulFetchResponse()]);if(De&&ee.isCachedDataFresh($.cacheMaxAgeMillis,ue))return De;$.eTag=De&&De.eTag;const Pe=yield ee.client.fetch($),qe=[ee.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Pe.status&&qe.push(ee.storage.setLastSuccessfulFetchResponse(Pe)),yield Promise.all(qe),Pe})()}}function ua(L=navigator){return L.languages&&L.languages[0]||L.language}class vr{constructor($,ee,ue,De,Pe,qe){this.firebaseInstallations=$,this.sdkVersion=ee,this.namespace=ue,this.projectId=De,this.apiKey=Pe,this.appId=qe}fetch($){var ee=this;return(0,B.Z)(function*(){const[ue,De]=yield Promise.all([ee.firebaseInstallations.getId(),ee.firebaseInstallations.getToken()]),qe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ee.projectId}/namespaces/${ee.namespace}:fetch?key=${ee.apiKey}`,Rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":$.eTag||"*"},Dt={sdk_version:ee.sdkVersion,app_instance_id:ue,app_instance_id_token:De,app_id:ee.appId,language_code:ua()},jt={method:"POST",headers:Rt,body:JSON.stringify(Dt)},yn=fetch(qe,jt),hn=new Promise((rs,ea)=>{$.signal.addEventListener(()=>{const gu=new Error("The operation was aborted.");gu.name="AbortError",ea(gu)})});let gn;try{yield Promise.race([yn,hn]),gn=yield yn}catch(rs){let ea="fetch-client-network";throw"AbortError"===rs?.name&&(ea="fetch-timeout"),sr.create(ea,{originalErrorMessage:rs?.message})}let kr=gn.status;const xs=gn.headers.get("ETag")||void 0;let _c,ns;if(200===gn.status){let rs;try{rs=yield gn.json()}catch(ea){throw sr.create("fetch-client-parse",{originalErrorMessage:ea?.message})}_c=rs.entries,ns=rs.state}if("INSTANCE_STATE_UNSPECIFIED"===ns?kr=500:"NO_CHANGE"===ns?kr=304:("NO_TEMPLATE"===ns||"EMPTY_CONFIG"===ns)&&(_c={}),304!==kr&&200!==kr)throw sr.create("fetch-status",{httpStatus:kr});return{status:kr,eTag:xs,config:_c}})()}}class ms{constructor($,ee){this.client=$,this.storage=ee}fetch($){var ee=this;return(0,B.Z)(function*(){const ue=(yield ee.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ee.attemptFetch($,ue)})()}attemptFetch($,{throttleEndTimeMillis:ee,backoffCount:ue}){var De=this;return(0,B.Z)(function*(){yield function st(L,$){return new Promise((ee,ue)=>{const De=Math.max($-Date.now(),0),Pe=setTimeout(ee,De);L.addEventListener(()=>{clearTimeout(Pe),ue(sr.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}($.signal,ee);try{const Pe=yield De.client.fetch($);return yield De.storage.deleteThrottleMetadata(),Pe}catch(Pe){if(!function ko(L){if(!(L instanceof W.ZR&&L.customData))return!1;const $=Number(L.customData.httpStatus);return 429===$||500===$||503===$||504===$}(Pe))throw Pe;const qe={throttleEndTimeMillis:Date.now()+(0,W.$s)(ue),backoffCount:ue+1};return yield De.storage.setThrottleMetadata(qe),De.attemptFetch($,qe)}})()}}class Gu{constructor($,ee,ue,De,Pe){this.app=$,this._client=ee,this._storageCache=ue,this._storage=De,this._logger=Pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ji(L,$){const ee=L.target.error||void 0;return sr.create($,{originalErrorMessage:ee&&ee?.message})}const Mr="app_namespace_store";class Ym{constructor($,ee,ue,De=function Vn(){return new Promise((L,$)=>{try{const ee=indexedDB.open("firebase_remote_config",1);ee.onerror=ue=>{$(Ji(ue,"storage-open"))},ee.onsuccess=ue=>{L(ue.target.result)},ee.onupgradeneeded=ue=>{0===ue.oldVersion&&ue.target.result.createObjectStore(Mr,{keyPath:"compositeKey"})}}catch(ee){$(sr.create("storage-open",{originalErrorMessage:ee?.message}))}})}()){this.appId=$,this.appName=ee,this.namespace=ue,this.openDbPromise=De}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus($){return this.set("last_fetch_status",$)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis($){return this.set("last_successful_fetch_timestamp_millis",$)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse($){return this.set("last_successful_fetch_response",$)}getActiveConfig(){return this.get("active_config")}setActiveConfig($){return this.set("active_config",$)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag($){return this.set("active_config_etag",$)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata($){return this.set("throttle_metadata",$)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get($){var ee=this;return(0,B.Z)(function*(){const ue=yield ee.openDbPromise;return new Promise((De,Pe)=>{const Rt=ue.transaction([Mr],"readonly").objectStore(Mr),Dt=ee.createCompositeKey($);try{const jt=Rt.get(Dt);jt.onerror=yn=>{Pe(Ji(yn,"storage-get"))},jt.onsuccess=yn=>{const hn=yn.target.result;De(hn?hn.value:void 0)}}catch(jt){Pe(sr.create("storage-get",{originalErrorMessage:jt?.message}))}})})()}set($,ee){var ue=this;return(0,B.Z)(function*(){const De=yield ue.openDbPromise;return new Promise((Pe,qe)=>{const Dt=De.transaction([Mr],"readwrite").objectStore(Mr),jt=ue.createCompositeKey($);try{const yn=Dt.put({compositeKey:jt,value:ee});yn.onerror=hn=>{qe(Ji(hn,"storage-set"))},yn.onsuccess=()=>{Pe()}}catch(yn){qe(sr.create("storage-set",{originalErrorMessage:yn?.message}))}})})()}delete($){var ee=this;return(0,B.Z)(function*(){const ue=yield ee.openDbPromise;return new Promise((De,Pe)=>{const Rt=ue.transaction([Mr],"readwrite").objectStore(Mr),Dt=ee.createCompositeKey($);try{const jt=Rt.delete(Dt);jt.onerror=yn=>{Pe(Ji(yn,"storage-delete"))},jt.onsuccess=()=>{De()}}catch(jt){Pe(sr.create("storage-delete",{originalErrorMessage:jt?.message}))}})})()}createCompositeKey($){return[this.appId,this.appName,this.namespace,$].join()}}class eu{constructor($){this.storage=$}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var $=this;return(0,B.Z)(function*(){const ee=$.storage.getLastFetchStatus(),ue=$.storage.getLastSuccessfulFetchTimestampMillis(),De=$.storage.getActiveConfig(),Pe=yield ee;Pe&&($.lastFetchStatus=Pe);const qe=yield ue;qe&&($.lastSuccessfulFetchTimestampMillis=qe);const Rt=yield De;Rt&&($.activeConfig=Rt)})()}setLastFetchStatus($){return this.lastFetchStatus=$,this.storage.setLastFetchStatus($)}setLastSuccessfulFetchTimestampMillis($){return this.lastSuccessfulFetchTimestampMillis=$,this.storage.setLastSuccessfulFetchTimestampMillis($)}setActiveConfig($){return this.activeConfig=$,this.storage.setActiveConfig($)}}function Zo(){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,B.Z)(function*(){if(!(0,W.hl)())return!1;try{return yield(0,W.eu)()}catch{return!1}})).apply(this,arguments)}!function tu(){(0,R._registerComponent)(new Y.wA("remote-config",function L($,{instanceIdentifier:ee}){const ue=$.getProvider("app").getImmediate(),De=$.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw sr.create("registration-window");if(!(0,W.hl)())throw sr.create("indexed-db-unavailable");const{projectId:Pe,apiKey:qe,appId:Rt}=ue.options;if(!Pe)throw sr.create("registration-project-id");if(!qe)throw sr.create("registration-api-key");if(!Rt)throw sr.create("registration-app-id");const Dt=new Ym(Rt,ue.name,ee=ee||"firebase"),jt=new eu(Dt),yn=new Q.Yd(dl);yn.logLevel=Q.in.ERROR;const hn=new vr(De,R.SDK_VERSION,ee,Pe,qe,Rt),gn=new ms(hn,Dt),kr=new fs(gn,Dt,jt,yn),xs=new Gu(ue,kr,jt,Dt,yn);return function ln(L){const $=(0,W.m9)(L);$._initializePromise||($._initializePromise=$._storageCache.loadFromStorage().then(()=>{$._isInitializationComplete=!0}))}(xs),xs},"PUBLIC").setMultipleInstances(!0)),(0,R.registerVersion)(dl,"0.4.4"),(0,R.registerVersion)(dl,"0.4.4","esm2017")}();const mi=(L,$)=>$.some(ee=>L instanceof ee);let qu,Pi;const Ir=new WeakMap,Ri=new WeakMap,ki=new WeakMap,ca=new WeakMap,fo=new WeakMap;let Hc={get(L,$,ee){if(L instanceof IDBTransaction){if("done"===$)return Ri.get(L);if("objectStoreNames"===$)return L.objectStoreNames||ki.get(L);if("store"===$)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return da(L[$])},set:(L,$,ee)=>(L[$]=ee,!0),has:(L,$)=>L instanceof IDBTransaction&&("done"===$||"store"===$)||$ in L};function Zd(L){return"function"==typeof L?function Xm(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ku(){return Pi||(Pi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(L)?function(...$){return L.apply(Yd(this),$),da(Ir.get(this))}:function(...$){return da(L.apply(Yd(this),$))}:function($,...ee){const ue=L.call(Yd(this),$,...ee);return ki.set(ue,$.sort?$.sort():[$]),da(ue)}}(L):(L instanceof IDBTransaction&&function jc(L){if(Ri.has(L))return;const $=new Promise((ee,ue)=>{const De=()=>{L.removeEventListener("complete",Pe),L.removeEventListener("error",qe),L.removeEventListener("abort",qe)},Pe=()=>{ee(),De()},qe=()=>{ue(L.error||new DOMException("AbortError","AbortError")),De()};L.addEventListener("complete",Pe),L.addEventListener("error",qe),L.addEventListener("abort",qe)});Ri.set(L,$)}(L),mi(L,function Nn(){return qu||(qu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(L,Hc):L)}function da(L){if(L instanceof IDBRequest)return function qd(L){const $=new Promise((ee,ue)=>{const De=()=>{L.removeEventListener("success",Pe),L.removeEventListener("error",qe)},Pe=()=>{ee(da(L.result)),De()},qe=()=>{ue(L.error),De()};L.addEventListener("success",Pe),L.addEventListener("error",qe)});return $.then(ee=>{ee instanceof IDBCursor&&Ir.set(ee,L)}).catch(()=>{}),fo.set($,L),$}(L);if(ca.has(L))return ca.get(L);const $=Zd(L);return $!==L&&(ca.set(L,$),fo.set($,L)),$}const Yd=L=>fo.get(L);function Xd(L,$,{blocked:ee,upgrade:ue,blocking:De,terminated:Pe}={}){const qe=indexedDB.open(L,$),Rt=da(qe);return ue&&qe.addEventListener("upgradeneeded",Dt=>{ue(da(qe.result),Dt.oldVersion,Dt.newVersion,da(qe.transaction))}),ee&&qe.addEventListener("blocked",()=>ee()),Rt.then(Dt=>{Pe&&Dt.addEventListener("close",()=>Pe()),De&&Dt.addEventListener("versionchange",()=>De())}).catch(()=>{}),Rt}function Us(L,{blocked:$}={}){const ee=indexedDB.deleteDatabase(L);return $&&ee.addEventListener("blocked",()=>$()),da(ee).then(()=>{})}const Nf=["get","getKey","getAll","getAllKeys","count"],sp=["put","add","delete","clear"],Ba=new Map;function Qm(L,$){if(!(L instanceof IDBDatabase)||$ in L||"string"!=typeof $)return;if(Ba.get($))return Ba.get($);const ee=$.replace(/FromIndex$/,""),ue=$!==ee,De=sp.includes(ee);if(!(ee in(ue?IDBIndex:IDBObjectStore).prototype)||!De&&!Nf.includes(ee))return;const Pe=function(){var qe=(0,B.Z)(function*(Rt,...Dt){const jt=this.transaction(Rt,De?"readwrite":"readonly");let yn=jt.store;return ue&&(yn=yn.index(Dt.shift())),(yield Promise.all([yn[ee](...Dt),De&&jt.done]))[0]});return function(Dt){return qe.apply(this,arguments)}}();return Ba.set($,Pe),Pe}!function Kd(L){Hc=L(Hc)}(L=>({...L,get:($,ee,ue)=>Qm($,ee)||L.get($,ee,ue),has:($,ee)=>!!Qm($,ee)||L.has($,ee)}));const ap="/firebase-messaging-sw.js",mo="/firebase-cloud-messaging-push-scope",Lr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fl="https://fcmregistrations.googleapis.com/v1",ar="google.c.a.c_id",Jm="google.c.a.c_l",oi="google.c.a.ts";var Va=(()=>((Va=Va||{}).PUSH_RECEIVED="push-received",Va.NOTIFICATION_CLICKED="notification-clicked",Va))();function $i(L){const $=new Uint8Array(L);return btoa(String.fromCharCode(...$)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qd(L){const ee=(L+"=".repeat((4-L.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ue=atob(ee),De=new Uint8Array(ue.length);for(let Pe=0;Pe<ue.length;++Pe)De[Pe]=ue.charCodeAt(Pe);return De}const gl="fcm_token_details_db",$c=5,Lo="fcm_token_object_Store";function Jd(){return Jd=(0,B.Z)(function*(L){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Pe=>Pe.name).includes(gl))return null;let $=null;return(yield Xd(gl,$c,{upgrade:(ue=(0,B.Z)(function*(De,Pe,qe,Rt){var Dt;if(Pe<2||!De.objectStoreNames.contains(Lo))return;const jt=Rt.objectStore(Lo),yn=yield jt.index("fcmSenderId").get(L);if(yield jt.clear(),yn)if(2===Pe){const hn=yn;if(!hn.auth||!hn.p256dh||!hn.endpoint)return;$={token:hn.fcmToken,createTime:null!==(Dt=hn.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:hn.auth,p256dh:hn.p256dh,endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:"string"==typeof hn.vapidKey?hn.vapidKey:$i(hn.vapidKey)}}}else if(3===Pe){const hn=yn;$={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:$i(hn.auth),p256dh:$i(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:$i(hn.vapidKey)}}}else if(4===Pe){const hn=yn;$={token:hn.fcmToken,createTime:hn.createTime,subscriptionOptions:{auth:$i(hn.auth),p256dh:$i(hn.p256dh),endpoint:hn.endpoint,swScope:hn.swScope,vapidKey:$i(hn.vapidKey)}}}}),function(Pe,qe,Rt,Dt){return ue.apply(this,arguments)})})).close(),yield Us(gl),yield Us("fcm_vapid_details_db"),yield Us("undefined"),function go(L){if(!L||!L.subscriptionOptions)return!1;const{subscriptionOptions:$}=L;return"number"==typeof L.createTime&&L.createTime>0&&"string"==typeof L.token&&L.token.length>0&&"string"==typeof $.auth&&$.auth.length>0&&"string"==typeof $.p256dh&&$.p256dh.length>0&&"string"==typeof $.endpoint&&$.endpoint.length>0&&"string"==typeof $.swScope&&$.swScope.length>0&&"string"==typeof $.vapidKey&&$.vapidKey.length>0}($)?$:null;var ue}),Jd.apply(this,arguments)}const Ua="firebase-messaging-database",gi=1,Yo="firebase-messaging-store";let _l=null;function yl(){return _l||(_l=Xd(Ua,gi,{upgrade:(L,$)=>{0===$&&L.createObjectStore(Yo)}})),_l}function nu(L){return js.apply(this,arguments)}function js(){return js=(0,B.Z)(function*(L){const $=ru(L),ue=yield(yield yl()).transaction(Yo).objectStore(Yo).get($);if(ue)return ue;{const De=yield function Of(L){return Jd.apply(this,arguments)}(L.appConfig.senderId);if(De)return yield za(L,De),De}}),js.apply(this,arguments)}function za(L,$){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,B.Z)(function*(L,$){const ee=ru(L),De=(yield yl()).transaction(Yo,"readwrite");return yield De.objectStore(Yo).put($,ee),yield De.done,$})).apply(this,arguments)}function ja(){return(ja=(0,B.Z)(function*(L){const $=ru(L),ue=(yield yl()).transaction(Yo,"readwrite");yield ue.objectStore(Yo).delete($),yield ue.done})).apply(this,arguments)}function ru({appConfig:L}){return L.appId}const Hn=new W.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lp(L,$){return th.apply(this,arguments)}function th(){return(th=(0,B.Z)(function*(L,$){const ee=yield qc(L),ue=vl($),De={method:"POST",headers:ee,body:JSON.stringify(ue)};let Pe;try{Pe=yield(yield fetch(Ha(L.appConfig),De)).json()}catch(qe){throw Hn.create("token-subscribe-failed",{errorInfo:qe?.toString()})}if(Pe.error)throw Hn.create("token-subscribe-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw Hn.create("token-subscribe-no-token");return Pe.token})).apply(this,arguments)}function Zu(){return(Zu=(0,B.Z)(function*(L,$){const ee=yield qc(L),ue=vl($.subscriptionOptions),De={method:"PATCH",headers:ee,body:JSON.stringify(ue)};let Pe;try{Pe=yield(yield fetch(`${Ha(L.appConfig)}/${$.token}`,De)).json()}catch(qe){throw Hn.create("token-update-failed",{errorInfo:qe?.toString()})}if(Pe.error)throw Hn.create("token-update-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw Hn.create("token-update-no-token");return Pe.token})).apply(this,arguments)}function Gc(L,$){return rh.apply(this,arguments)}function rh(){return(rh=(0,B.Z)(function*(L,$){const ue={method:"DELETE",headers:yield qc(L)};try{const Pe=yield(yield fetch(`${Ha(L.appConfig)}/${$}`,ue)).json();if(Pe.error)throw Hn.create("token-unsubscribe-failed",{errorInfo:Pe.error.message})}catch(De){throw Hn.create("token-unsubscribe-failed",{errorInfo:De?.toString()})}})).apply(this,arguments)}function Ha({projectId:L}){return`${fl}/projects/${L}/registrations`}function qc(L){return ou.apply(this,arguments)}function ou(){return(ou=(0,B.Z)(function*({appConfig:L,installations:$}){const ee=yield $.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":L.apiKey,"x-goog-firebase-installations-auth":`FIS ${ee}`})})).apply(this,arguments)}function vl({p256dh:L,auth:$,endpoint:ee,vapidKey:ue}){const De={web:{endpoint:ee,auth:$,p256dh:L}};return ue!==Lr&&(De.web.applicationPubKey=ue),De}const $a=6048e5;function Wa(){return Wa=(0,B.Z)(function*(L){const $=yield function up(L,$){return Xo.apply(this,arguments)}(L.swRegistration,L.vapidKey),ee={vapidKey:L.vapidKey,swScope:L.swRegistration.scope,endpoint:$.endpoint,auth:$i($.getKey("auth")),p256dh:$i($.getKey("p256dh"))},ue=yield nu(L.firebaseDependencies);if(ue){if(function eo(L,$){return $.vapidKey===L.vapidKey&&$.endpoint===L.endpoint&&$.auth===L.auth&&$.p256dh===L.p256dh}(ue.subscriptionOptions,ee))return Date.now()>=ue.createTime+$a?function _s(L,$){return su.apply(this,arguments)}(L,{token:ue.token,createTime:Date.now(),subscriptionOptions:ee}):ue.token;try{yield Gc(L.firebaseDependencies,ue.token)}catch(De){console.warn(De)}return ih(L.firebaseDependencies,ee)}return ih(L.firebaseDependencies,ee)}),Wa.apply(this,arguments)}function Hs(){return Hs=(0,B.Z)(function*(L){const $=yield nu(L.firebaseDependencies);$&&(yield Gc(L.firebaseDependencies,$.token),yield function eh(L){return ja.apply(this,arguments)}(L.firebaseDependencies));const ee=yield L.swRegistration.pushManager.getSubscription();return!ee||ee.unsubscribe()}),Hs.apply(this,arguments)}function su(){return su=(0,B.Z)(function*(L,$){try{const ee=yield function nh(L,$){return Zu.apply(this,arguments)}(L.firebaseDependencies,$),ue=Object.assign(Object.assign({},$),{token:ee,createTime:Date.now()});return yield za(L.firebaseDependencies,ue),ee}catch(ee){throw yield function Kc(L){return Hs.apply(this,arguments)}(L),ee}}),su.apply(this,arguments)}function ih(L,$){return br.apply(this,arguments)}function br(){return(br=(0,B.Z)(function*(L,$){const ue={token:yield lp(L,$),createTime:Date.now(),subscriptionOptions:$};return yield za(L,ue),ue.token})).apply(this,arguments)}function Xo(){return(Xo=(0,B.Z)(function*(L,$){return(yield L.pushManager.getSubscription())||L.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qd($)})})).apply(this,arguments)}function wl(L){const $={from:L.from,collapseKey:L.collapse_key,messageId:L.fcmMessageId};return function xl(L,$){if(!$.notification)return;L.notification={};const ee=$.notification.title;ee&&(L.notification.title=ee);const ue=$.notification.body;ue&&(L.notification.body=ue);const De=$.notification.image;De&&(L.notification.image=De);const Pe=$.notification.icon;Pe&&(L.notification.icon=Pe)}($,L),function ha(L,$){$.data&&(L.data=$.data)}($,L),function Fi(L,$){var ee,ue,De,Pe,qe;if(!($.fcmOptions||null!==(ee=$.notification)&&void 0!==ee&&ee.click_action))return;L.fcmOptions={};const Rt=null!==(De=null===(ue=$.fcmOptions)||void 0===ue?void 0:ue.link)&&void 0!==De?De:null===(Pe=$.notification)||void 0===Pe?void 0:Pe.click_action;Rt&&(L.fcmOptions.link=Rt);const Dt=null===(qe=$.fcmOptions)||void 0===qe?void 0:qe.analytics_label;Dt&&(L.fcmOptions.analyticsLabel=Dt)}($,L),$}function Yu(L,$){const ee=[];for(let ue=0;ue<L.length;ue++)ee.push(L.charAt(ue)),ue<$.length&&ee.push($.charAt(ue));return ee.join("")}function Bo(L){return Hn.create("missing-app-config-values",{valueName:L})}Yu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class El{constructor($,ee,ue){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const De=function dp(L){if(!L||!L.options)throw Bo("App Configuration Object");if(!L.name)throw Bo("App Name");const $=["projectId","apiKey","appId","messagingSenderId"],{options:ee}=L;for(const ue of $)if(!ee[ue])throw Bo(ue);return{appName:L.name,projectId:ee.projectId,apiKey:ee.apiKey,appId:ee.appId,senderId:ee.messagingSenderId}}($);this.firebaseDependencies={app:$,appConfig:De,installations:ee,analyticsProvider:ue}}_delete(){return Promise.resolve()}}function pa(){return(pa=(0,B.Z)(function*(L){try{L.swRegistration=yield navigator.serviceWorker.register(ap,{scope:mo}),L.swRegistration.update().catch(()=>{})}catch($){throw Hn.create("failed-service-worker-registration",{browserErrorMessage:$?.message})}})).apply(this,arguments)}function fa(){return(fa=(0,B.Z)(function*(L,$){if(!$&&!L.swRegistration&&(yield function Zc(L){return pa.apply(this,arguments)}(L)),$||!L.swRegistration){if(!($ instanceof ServiceWorkerRegistration))throw Hn.create("invalid-sw-registration");L.swRegistration=$}})).apply(this,arguments)}function dn(){return(dn=(0,B.Z)(function*(L,$){$?L.vapidKey=$:L.vapidKey||(L.vapidKey=Lr)})).apply(this,arguments)}function Xu(){return Xu=(0,B.Z)(function*(L,$){if(!navigator)throw Hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Hn.create("permission-blocked");return yield function Xc(L,$){return dn.apply(this,arguments)}(L,$?.vapidKey),yield function Yc(L,$){return fa.apply(this,arguments)}(L,$?.serviceWorkerRegistration),function bl(L){return Wa.apply(this,arguments)}(L)}),Xu.apply(this,arguments)}function au(){return(au=(0,B.Z)(function*(L,$,ee){const ue=function pp(L){switch(L){case Va.NOTIFICATION_CLICKED:return"notification_open";case Va.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}($);(yield L.firebaseDependencies.analyticsProvider.get()).logEvent(ue,{message_id:ee[ar],message_name:ee[Jm],message_time:ee[oi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $s(){return $s=(0,B.Z)(function*(L,$){const ee=$.data;if(!ee.isFirebaseMessaging)return;L.onMessageHandler&&ee.messageType===Va.PUSH_RECEIVED&&("function"==typeof L.onMessageHandler?L.onMessageHandler(wl(ee)):L.onMessageHandler.next(wl(ee)));const ue=ee.data;(function cp(L){return"object"==typeof L&&!!L&&ar in L})(ue)&&"1"===ue["google.c.a.e"]&&(yield function hp(L,$,ee){return au.apply(this,arguments)}(L,ee.messageType,ue))}),$s.apply(this,arguments)}const Ju="@firebase/messaging",Jc=L=>{const $=new El(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),L.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ee=>function Qu(L,$){return $s.apply(this,arguments)}($,ee)),$},Pf=L=>{const $=L.getProvider("messaging").getImmediate();return{getToken:ue=>function Qc(L,$){return Xu.apply(this,arguments)}($,ue)}};function ut(){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,B.Z)(function*(){try{yield(0,W.eu)()}catch{return!1}return typeof window<"u"&&(0,W.hl)()&&(0,W.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ga(){(0,R._registerComponent)(new Y.wA("messaging",Jc,"PUBLIC")),(0,R._registerComponent)(new Y.wA("messaging-internal",Pf,"PRIVATE")),(0,R.registerVersion)(Ju,"0.12.4"),(0,R.registerVersion)(Ju,"0.12.4","esm2017")}();const tc="analytics",eg="firebase_id",gp="origin",to=6e4,Ws="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ma="https://www.googletagmanager.com/gtag/js",fr=new Q.Yd("@firebase/analytics"),Bi=new W.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function _o(L){if(!L.startsWith(ma)){const $=Bi.create("invalid-gtag-resource",{gtagURL:L});return fr.warn($.message),""}return L}function Wi(L){return Promise.all(L.map($=>$.catch(ee=>ee)))}function _a(){return(_a=(0,B.Z)(function*(L,$,ee,ue,De,Pe){const qe=ue[De];try{if(qe)yield $[qe];else{const Dt=(yield Wi(ee)).find(jt=>jt.measurementId===De);Dt&&(yield $[Dt.appId])}}catch(Rt){fr.error(Rt)}L("config",De,Pe)})).apply(this,arguments)}function _i(){return(_i=(0,B.Z)(function*(L,$,ee,ue,De){try{let Pe=[];if(De&&De.send_to){let qe=De.send_to;Array.isArray(qe)||(qe=[qe]);const Rt=yield Wi(ee);for(const Dt of qe){const jt=Rt.find(hn=>hn.measurementId===Dt),yn=jt&&$[jt.appId];if(!yn){Pe=[];break}Pe.push(yn)}}0===Pe.length&&(Pe=Object.values($)),yield Promise.all(Pe),L("event",ue,De||{})}catch(Pe){fr.error(Pe)}})).apply(this,arguments)}const zt=30,yp=new class ic{constructor($={},ee=1e3){this.throttleMetadata=$,this.intervalMillis=ee}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,ee){this.throttleMetadata[$]=ee}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function oc(L){return new Headers({Accept:"application/json","x-goog-api-key":L})}function Gs(){return(Gs=(0,B.Z)(function*(L){var $;const{appId:ee,apiKey:ue}=L,De={method:"GET",headers:oc(ue)},Pe=Ws.replace("{app-id}",ee),qe=yield fetch(Pe,De);if(200!==qe.status&&304!==qe.status){let Rt="";try{const Dt=yield qe.json();null!==($=Dt.error)&&void 0!==$&&$.message&&(Rt=Dt.error.message)}catch{}throw Bi.create("config-fetch-failed",{httpStatus:qe.status,responseMessage:Rt})}return qe.json()})).apply(this,arguments)}function sh(){return(sh=(0,B.Z)(function*(L,$=yp,ee){const{appId:ue,apiKey:De,measurementId:Pe}=L.options;if(!ue)throw Bi.create("no-app-id");if(!De){if(Pe)return{measurementId:Pe,appId:ue};throw Bi.create("no-api-key")}const qe=$.getThrottleMetadata(ue)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Rt=new Il;return setTimeout((0,B.Z)(function*(){Rt.abort()}),void 0!==ee?ee:to),si({appId:ue,apiKey:De,measurementId:Pe},qe,Rt,$)})).apply(this,arguments)}function si(L,$,ee){return nd.apply(this,arguments)}function nd(){return nd=(0,B.Z)(function*(L,{throttleEndTimeMillis:$,backoffCount:ee},ue,De=yp){var Pe;const{appId:qe,measurementId:Rt}=L;try{yield function Dl(L,$){return new Promise((ee,ue)=>{const De=Math.max($-Date.now(),0),Pe=setTimeout(ee,De);L.addEventListener(()=>{clearTimeout(Pe),ue(Bi.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}(ue,$)}catch(Dt){if(Rt)return fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${Dt?.message}]`),{appId:qe,measurementId:Rt};throw Dt}try{const Dt=yield function Ei(L){return Gs.apply(this,arguments)}(L);return De.deleteThrottleMetadata(qe),Dt}catch(Dt){const jt=Dt;if(!function uu(L){if(!(L instanceof W.ZR&&L.customData))return!1;const $=Number(L.customData.httpStatus);return 429===$||500===$||503===$||504===$}(jt)){if(De.deleteThrottleMetadata(qe),Rt)return fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${jt?.message}]`),{appId:qe,measurementId:Rt};throw Dt}const yn=503===Number(null===(Pe=jt?.customData)||void 0===Pe?void 0:Pe.httpStatus)?(0,W.$s)(ee,De.intervalMillis,zt):(0,W.$s)(ee,De.intervalMillis),hn={throttleEndTimeMillis:Date.now()+yn,backoffCount:ee+1};return De.setThrottleMetadata(qe,hn),fr.debug(`Calling attemptFetch again in ${yn} millis`),si(L,hn,ue,De)}}),nd.apply(this,arguments)}class Il{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}let ya,ai;function sc(){return(sc=(0,B.Z)(function*(L,$,ee,ue,De){if(De&&De.global)L("event",ee,ue);else{const Pe=yield $;L("event",ee,Object.assign(Object.assign({},ue),{send_to:Pe}))}})).apply(this,arguments)}function rd(){return(rd=(0,B.Z)(function*(){if(!(0,W.hl)())return fr.warn(Bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,W.eu)()}catch(L){return fr.warn(Bi.create("indexeddb-unavailable",{errorInfo:L?.toString()}).message),!1}return!0})).apply(this,arguments)}function du(){return du=(0,B.Z)(function*(L,$,ee,ue,De,Pe,qe){var Rt;const Dt=function Er(L){return sh.apply(this,arguments)}(L);Dt.then(kr=>{ee[kr.measurementId]=kr.appId,L.options.measurementId&&kr.measurementId!==L.options.measurementId&&fr.warn(`The measurement ID in the local Firebase config (${L.options.measurementId}) does not match the measurement ID fetched from the server (${kr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kr=>fr.error(kr)),$.push(Dt);const jt=function Ys(){return rd.apply(this,arguments)}().then(kr=>{if(kr)return ue.getId()}),[yn,hn]=yield Promise.all([Dt,jt]);(function rc(L){const $=window.document.getElementsByTagName("script");for(const ee of Object.values($))if(ee.src&&ee.src.includes(ma)&&ee.src.includes(L))return ee;return null})(Pe)||function ga(L,$){const ee=function tg(L,$){let ee;return window.trustedTypes&&(ee=window.trustedTypes.createPolicy(L,$)),ee}("firebase-js-sdk-policy",{createScriptURL:_o}),ue=document.createElement("script"),De=`${ma}?l=${L}&id=${$}`;ue.src=ee?ee?.createScriptURL(De):De,ue.async=!0,document.head.appendChild(ue)}(Pe,yn.measurementId),ai&&(De("consent","default",ai),function Zs(L){ai=L}(void 0)),De("js",new Date);const gn=null!==(Rt=qe?.config)&&void 0!==Rt?Rt:{};return gn[gp]="firebase",gn.update=!0,null!=hn&&(gn[eg]=hn),De("config",yn.measurementId,gn),ya&&(De("set",ya),function ah(L){ya=L}(void 0)),yn.measurementId}),du.apply(this,arguments)}class Al{constructor($){this.app=$}_delete(){return delete en[this.app.options.appId],Promise.resolve()}}let en={},od=[];const Ml={};let Nl,Nr,Vo="dataLayer",Ka=!1;function sd(L,$,ee){!function Jo(){const L=[];if((0,W.ru)()&&L.push("This is a browser extension environment."),(0,W.zI)()||L.push("Cookies are not available."),L.length>0){const $=L.map((ue,De)=>`(${De+1}) ${ue}`).join(" "),ee=Bi.create("invalid-analytics-context",{errorInfo:$});fr.warn(ee.message)}}();const ue=L.options.appId;if(!ue)throw Bi.create("no-app-id");if(!L.options.apiKey){if(!L.options.measurementId)throw Bi.create("no-api-key");fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${L.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=en[ue])throw Bi.create("already-exists",{id:ue});if(!Ka){!function qa(L){let $=[];Array.isArray(window[L])?$=window[L]:window[L]=$}(Vo);const{wrappedGtag:Pe,gtagCore:qe}=function oh(L,$,ee,ue,De){let Pe=function(...qe){window[ue].push(arguments)};return window[De]&&"function"==typeof window[De]&&(Pe=window[De]),window[De]=function Sl(L,$,ee,ue){function Pe(){return Pe=(0,B.Z)(function*(qe,...Rt){try{if("event"===qe){const[Dt,jt]=Rt;yield function td(L,$,ee,ue,De){return _i.apply(this,arguments)}(L,$,ee,Dt,jt)}else if("config"===qe){const[Dt,jt]=Rt;yield function nc(L,$,ee,ue,De,Pe){return _a.apply(this,arguments)}(L,$,ee,ue,Dt,jt)}else if("consent"===qe){const[Dt]=Rt;L("consent","update",Dt)}else if("get"===qe){const[Dt,jt,yn]=Rt;L("get",Dt,jt,yn)}else if("set"===qe){const[Dt]=Rt;L("set",Dt)}else L(qe,...Rt)}catch(Dt){fr.error(Dt)}}),Pe.apply(this,arguments)}return function De(qe){return Pe.apply(this,arguments)}}(Pe,L,$,ee),{gtagCore:Pe,wrappedGtag:window[De]}}(en,od,Ml,Vo,"gtag");Nr=Pe,Nl=qe,Ka=!0}return en[ue]=function id(L,$,ee,ue,De,Pe,qe){return du.apply(this,arguments)}(L,od,Ml,$,Nl,Vo,ee),new Al(L)}function wa(){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,B.Z)(function*(){if((0,W.ru)()||!(0,W.zI)()||!(0,W.hl)())return!1;try{return yield(0,W.eu)()}catch{return!1}})).apply(this,arguments)}const kl="@firebase/analytics";!function jr(){(0,R._registerComponent)(new Y.wA(tc,($,{options:ee})=>sd($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),ee),"PUBLIC")),(0,R._registerComponent)(new Y.wA("analytics-internal",function L($){try{const ee=$.getProvider(tc).getImmediate();return{logEvent:(ue,De,Pe)=>function Ai(L,$,ee,ue){L=(0,W.m9)(L),function va(L,$,ee,ue,De){return sc.apply(this,arguments)}(Nr,en[L.app.options.appId],$,ee,ue).catch(De=>fr.error(De))}(ee,ue,De,Pe)}}catch(ee){throw Bi.create("interop-component-reg-failed",{reason:ee})}},"PRIVATE")),(0,R.registerVersion)(kl,"0.10.0"),(0,R.registerVersion)(kl,"0.10.0","esm2017")}();var Yr=S(1954),Or=S(2631);const cc=new class li extends Or.v{}(class hu extends Yr.o{constructor($,ee){super($,ee),this.scheduler=$,this.work=ee}schedule($,ee=0){return ee>0?super.schedule($,ee):(this.delay=ee,this.state=$,this.scheduler.flush(this),this)}execute($,ee){return ee>0||this.closed?super.execute($,ee):this._execute($,ee)}requestAsyncId($,ee,ue=0){return null!=ue&&ue>0||null==ue&&this.delay>0?super.requestAsyncId($,ee,ue):$.flush(this)}});var dc=S(6321),Vi=S(5592),Uo=S(9397),Pr=S(5137),es=S(3093);const pu=new P.GfV("7.6.1"),Ea="__angularfire_symbol__analyticsIsSupportedValue",Fl="__angularfire_symbol__analyticsIsSupported",ad="__angularfire_symbol__remoteConfigIsSupportedValue",hc="__angularfire_symbol__remoteConfigIsSupported",Js="__angularfire_symbol__messagingIsSupportedValue",Tn="__angularfire_symbol__messagingIsSupported";function ch(L,$,ee){if($){if(1===$.length)return $[0];const Pe=$.filter(qe=>qe.app===ee);if(1===Pe.length)return Pe[0]}return ee.container.getProvider(L).getImmediate({optional:!0})}globalThis[Fl]||(globalThis[Fl]=wa().then(L=>globalThis[Ea]=L).catch(()=>globalThis[Ea]=!1)),globalThis[Tn]||(globalThis[Tn]=ut().then(L=>globalThis[Js]=L).catch(()=>globalThis[Js]=!1)),globalThis[hc]||(globalThis[hc]=Zo().then(L=>globalThis[ad]=L).catch(()=>globalThis[ad]=!1));const ts=(L,$)=>{const ee=$?[$]:(0,c.C6)(),ue=[];return ee.forEach(De=>{De.container.getProvider(L).instances.forEach(qe=>{ue.includes(qe)||ue.push(qe)})}),ue};function Rr(){}class fc{constructor($,ee=cc){this.zone=$,this.delegate=ee}now(){return this.delegate.now()}schedule($,ee,ue){const De=this.zone;return this.delegate.schedule(function(qe){De.runGuarded(()=>{$.apply(this,[qe])})},ee,ue)}}class vo{constructor($){this.zone=$,this.task=null}call($,ee){const ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rr,{},Rr,Rr)),ee.pipe((0,Uo.b)({next:ue,complete:ue,error:ue})).subscribe($).add(ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dh=(()=>{class L{constructor(ee){this.ngZone=ee,this.outsideAngular=ee.runOutsideAngular(()=>new fc(Zone.current)),this.insideAngular=ee.run(()=>new fc(Zone.current,dc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return L.\u0275fac=function(ee){return new(ee||L)(P.LFG(P.R0b))},L.\u0275prov=P.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();function ui(){const L=globalThis.\u0275AngularFireScheduler;if(!L)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return L}function ws(L){return ui().ngZone.run(()=>L())}function fu(L){return ui(),function vp(L){return function(ee){return(ee=ee.lift(new vo(L.ngZone))).pipe((0,Pr.R)(L.outsideAngular),(0,es.Q)(L.insideAngular))}}(ui())(L)}const mu=(L,$)=>function(){const ue=arguments;return $&&setTimeout(()=>{"scheduled"===$.state&&$.invoke()},10),ws(()=>L.apply(void 0,ue))},Ca=(L,$)=>function(){let ee;const ue=arguments;for(let Pe=0;Pe<arguments.length;Pe++)"function"==typeof ue[Pe]&&($&&(ee||(ee=ws(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rr,{},Rr,Rr)))),ue[Pe]=mu(ue[Pe],ee));const De=function Bl(L){return ui().ngZone.runOutsideAngular(()=>L())}(()=>L.apply(this,ue));if(!$){if(De instanceof Vi.y){const Pe=ui();return De.pipe((0,Pr.R)(Pe.outsideAngular),(0,es.Q)(Pe.insideAngular))}return ws(()=>De)}return De instanceof Vi.y?De.pipe(fu):De instanceof Promise?ws(()=>new Promise((Pe,qe)=>De.then(Rt=>ws(()=>Pe(Rt)),Rt=>ws(()=>qe(Rt))))):"function"==typeof De&&ee?function(){return setTimeout(()=>{ee&&"scheduled"===ee.state&&ee.invoke()},10),De.apply(this,arguments)}:ws(()=>De)}},640:(N,M,S)=>{"use strict";S.d(M,{$:()=>Hn,A:()=>fn,D:()=>lo,I:()=>La,J:()=>st,L:()=>fo,N:()=>vi,P:()=>hu,Q:()=>ap,R:()=>Pl,U:()=>ar,V:()=>Jm,W:()=>oi,X:()=>fl,Y:()=>$i,Z:()=>Qd,_:()=>Jd,a:()=>oc,a0:()=>th,a1:()=>Zu,a2:()=>qc,a3:()=>Kc,a4:()=>_s,a5:()=>ih,a6:()=>up,a7:()=>eo,a8:()=>xl,a9:()=>Fi,aA:()=>Et,aB:()=>Rt,aC:()=>co,aD:()=>ks,aE:()=>ee,aF:()=>fc,aG:()=>Rr,aH:()=>Kn,aL:()=>Er,aO:()=>ml,aa:()=>cp,ab:()=>dp,ac:()=>Bo,ad:()=>Yc,ae:()=>Xc,af:()=>Qc,ai:()=>pp,aj:()=>$s,ak:()=>Ju,an:()=>_l,ao:()=>fp,aq:()=>Bi,ar:()=>td,as:()=>Ft,at:()=>zr,au:()=>Gr,av:()=>er,aw:()=>xp,ax:()=>hn,ay:()=>Hi,az:()=>ti,b:()=>ic,c:()=>es,d:()=>ad,e:()=>Ea,f:()=>ui,g:()=>vp,h:()=>mc,i:()=>id,j:()=>L,k:()=>lg,l:()=>Qs,m:()=>ug,p:()=>Ct,r:()=>Ai,s:()=>lh,u:()=>jr});var P=S(5861),c=S(9058),B=S(534);function Q(T,v){var E={};for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&v.indexOf(k)<0&&(E[k]=T[k]);if(null!=T&&"function"==typeof Object.getOwnPropertySymbols){var X=0;for(k=Object.getOwnPropertySymbols(T);X<k.length;X++)v.indexOf(k[X])<0&&Object.prototype.propertyIsEnumerable.call(T,k[X])&&(E[k[X]]=T[k[X]])}return E}var vn=S(7879),ft=S(4537);const Ct={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fn={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const lo=function pn(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ei=function Kr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_r=new c.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Do=new vn.Yd("@firebase/auth");function uo(T,...v){Do.logLevel<=vn.in.ERROR&&Do.error(`Auth (${B.SDK_VERSION}): ${T}`,...v)}function er(T,...v){throw Yi(T,...v)}function ti(T,...v){return Yi(T,...v)}function al(T,v,E){const k=Object.assign(Object.assign({},ei()),{[v]:E});return new c.LL("auth","Firebase",k).create(v,{appName:T.name})}function ni(T,v,E){if(!(v instanceof E))throw E.name!==v.constructor.name&&er(T,"argument-error"),al(T,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yi(T,...v){if("string"!=typeof T){const E=v[0],k=[...v.slice(1)];return k[0]&&(k[0].appName=T.name),T._errorFactory.create(E,...k)}return _r.create(T,...v)}function Et(T,v,...E){if(!T)throw Yi(v,...E)}function Vr(T){const v="INTERNAL ASSERTION FAILED: "+T;throw uo(v),new Error(v)}function Ft(T,v){T||Vr(v)}function ze(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function Gt(){return"http:"===Ut()||"https:"===Ut()}function Ut(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class jn{constructor(v,E){this.shortDelay=v,this.longDelay=E,Ft(E>v,"Short delay should be less than long delay!"),this.isMobile=(0,c.uI)()||(0,c.b$)()}get(){return function Tt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,c.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function To(T,v){Ft(T.emulator,"Emulator should always be set here");const{url:E}=T.emulator;return v?`${E}${v.startsWith("/")?v.slice(1):v}`:E}class ji{static initialize(v,E,k){this.fetchImpl=v,E&&(this.headersImpl=E),k&&(this.responseImpl=k)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Qn=new jn(3e4,6e4);function Wn(T,v){return T.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:T.tenantId}):v}function rn(T,v,E,k){return ll.apply(this,arguments)}function ll(){return(ll=(0,P.Z)(function*(T,v,E,k,X={}){return tr(T,X,(0,P.Z)(function*(){let ne={},we={};k&&("GET"===v?we=k:ne={body:JSON.stringify(k)});const Le=(0,c.xO)(Object.assign({key:T.config.apiKey},we)).slice(1),dt=yield T._getAdditionalHeaders();return dt["Content-Type"]="application/json",T.languageCode&&(dt["X-Firebase-Locale"]=T.languageCode),ji.fetch()(Mo(T,T.config.apiHost,E,Le),Object.assign({method:v,headers:dt,referrerPolicy:"no-referrer"},ne))}))})).apply(this,arguments)}function tr(T,v,E){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,P.Z)(function*(T,v,E){T._canInitEmulator=!1;const k=Object.assign(Object.assign({},Wr),v);try{const X=new ri(T),ne=yield Promise.race([E(),X.promise]);X.clearNetworkTimeout();const we=yield ne.json();if("needConfirmation"in we)throw Xi(T,"account-exists-with-different-credential",we);if(ne.ok&&!("errorMessage"in we))return we;{const Le=ne.ok?we.errorMessage:we.error.message,[dt,it]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===dt)throw Xi(T,"credential-already-in-use",we);if("EMAIL_EXISTS"===dt)throw Xi(T,"email-already-in-use",we);if("USER_DISABLED"===dt)throw Xi(T,"user-disabled",we);const vt=k[dt]||dt.toLowerCase().replace(/[_\s]+/g,"-");if(it)throw al(T,vt,it);er(T,vt)}}catch(X){if(X instanceof c.ZR)throw X;er(T,"network-request-failed",{message:String(X)})}})).apply(this,arguments)}function pi(T,v,E,k){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,P.Z)(function*(T,v,E,k,X={}){const ne=yield rn(T,v,E,k,X);return"mfaPendingCredential"in ne&&er(T,"multi-factor-auth-required",{_serverResponse:ne}),ne})).apply(this,arguments)}function Mo(T,v,E,k){const X=`${v}${E}?${k}`;return T.config.emulator?To(T.config,X):`${T.config.apiScheme}://${X}`}class ri{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((E,k)=>{this.timer=setTimeout(()=>k(ti(this.auth,"network-request-failed")),Qn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xi(T,v,E){const k={appName:T.name};E.email&&(k.email=E.email),E.phoneNumber&&(k.phoneNumber=E.phoneNumber);const X=ti(T,v,k);return X.customData._tokenResponse=E,X}function No(){return(No=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function Ee(){return(Ee=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Me(){return(Me=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function nt(T){if(T)try{const v=new Date(Number(T));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function on(){return(on=(0,P.Z)(function*(T,v=!1){const E=(0,c.m9)(T),k=yield E.getIdToken(v),X=rr(k);Et(X&&X.exp&&X.auth_time&&X.iat,E.auth,"internal-error");const ne="object"==typeof X.firebase?X.firebase:void 0,we=ne?.sign_in_provider;return{claims:X,token:k,authTime:nt(Mn(X.auth_time)),issuedAtTime:nt(Mn(X.iat)),expirationTime:nt(Mn(X.exp)),signInProvider:we||null,signInSecondFactor:ne?.sign_in_second_factor||null}})).apply(this,arguments)}function Mn(T){return 1e3*Number(T)}function rr(T){const[v,E,k]=T.split(".");if(void 0===v||void 0===E||void 0===k)return uo("JWT malformed, contained fewer than 3 sections"),null;try{const X=(0,c.tV)(E);return X?JSON.parse(X):(uo("Failed to decode base64 JWT payload"),null)}catch(X){return uo("Caught error parsing JWT payload as JSON",X?.toString()),null}}function mn(T,v){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,P.Z)(function*(T,v,E=!1){if(E)return v;try{return yield v}catch(k){throw k instanceof c.ZR&&function pr({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}(k)&&T.auth.currentUser===T&&(yield T.auth.signOut()),k}})).apply(this,arguments)}class hs{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var E;if(v){const k=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),k}{this.errorBackoff=3e4;const X=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,X)}}schedule(v=!1){var E=this;if(!this.isRunning)return;const k=this.getInterval(v);this.timerId=setTimeout((0,P.Z)(function*(){yield E.iteration()}),k)}iteration(){var v=this;return(0,P.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E?.code&&v.schedule(!0))}v.schedule()})()}}class Oo{constructor(v,E){this.createdAt=v,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=nt(this.lastLoginAt),this.creationTime=nt(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ve(T){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,P.Z)(function*(T){var v;const E=T.auth,k=yield T.getIdToken(),X=yield mn(T,function be(T,v){return Me.apply(this,arguments)}(E,{idToken:k}));Et(X?.users.length,E,"internal-error");const ne=X.users[0];T._notifyReloadListener(ne);const we=null!==(v=ne.providerUserInfo)&&void 0!==v&&v.length?function wn(T){return T.map(v=>{var{providerId:E}=v,k=Q(v,["providerId"]);return{providerId:E,uid:k.rawId||"",displayName:k.displayName||null,email:k.email||null,phoneNumber:k.phoneNumber||null,photoURL:k.photoUrl||null}})}(ne.providerUserInfo):[],Le=function Qt(T,v){return[...T.filter(k=>!v.some(X=>X.providerId===k.providerId)),...v]}(T.providerData,we),vt=!!T.isAnonymous&&!(T.email&&ne.passwordHash||Le?.length),tn={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:Le,metadata:new Oo(ne.createdAt,ne.lastLoginAt),isAnonymous:vt};Object.assign(T,tn)}),Ze.apply(this,arguments)}function mt(){return(mt=(0,P.Z)(function*(T){const v=(0,c.m9)(T);yield ve(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function Rn(){return(Rn=(0,P.Z)(function*(T,v){const E=yield tr(T,{},(0,P.Z)(function*(){const k=(0,c.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:X,apiKey:ne}=T.config,we=Mo(T,X,"/v1/token",`key=${ne}`),Le=yield T._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",ji.fetch()(we,{method:"POST",headers:Le,body:k})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}class Dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Et(v.idToken,"internal-error"),Et(typeof v.idToken<"u","internal-error"),Et(typeof v.refreshToken<"u","internal-error");const E="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function xr(T){const v=rr(T);return Et(v,"internal-error"),Et(typeof v.exp<"u","internal-error"),Et(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,E)}getToken(v,E=!1){var k=this;return(0,P.Z)(function*(){return Et(!k.accessToken||k.refreshToken,v,"user-token-expired"),E||!k.accessToken||k.isExpired?k.refreshToken?(yield k.refresh(v,k.refreshToken),k.accessToken):null:k.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,E){var k=this;return(0,P.Z)(function*(){const{accessToken:X,refreshToken:ne,expiresIn:we}=yield function Ln(T,v){return Rn.apply(this,arguments)}(v,E);k.updateTokensAndExpiration(X,ne,Number(we))})()}updateTokensAndExpiration(v,E,k){this.refreshToken=E||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*k}static fromJSON(v,E){const{refreshToken:k,accessToken:X,expirationTime:ne}=E,we=new Dr;return k&&(Et("string"==typeof k,"internal-error",{appName:v}),we.refreshToken=k),X&&(Et("string"==typeof X,"internal-error",{appName:v}),we.accessToken=X),ne&&(Et("number"==typeof ne,"internal-error",{appName:v}),we.expirationTime=ne),we}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new Dr,this.toJSON())}_performRefresh(){return Vr("not implemented")}}function Sn(T,v){Et("string"==typeof T||typeof T>"u","internal-error",{appName:v})}class Bn{constructor(v){var{uid:E,auth:k,stsTokenManager:X}=v,ne=Q(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=k,this.stsTokenManager=X,this.accessToken=X.accessToken,this.displayName=ne.displayName||null,this.email=ne.email||null,this.emailVerified=ne.emailVerified||!1,this.phoneNumber=ne.phoneNumber||null,this.photoURL=ne.photoURL||null,this.isAnonymous=ne.isAnonymous||!1,this.tenantId=ne.tenantId||null,this.providerData=ne.providerData?[...ne.providerData]:[],this.metadata=new Oo(ne.createdAt||void 0,ne.lastLoginAt||void 0)}getIdToken(v){var E=this;return(0,P.Z)(function*(){const k=yield mn(E,E.stsTokenManager.getToken(E.auth,v));return Et(k,E.auth,"internal-error"),E.accessToken!==k&&(E.accessToken=k,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),k})()}getIdTokenResult(v){return function Ht(T){return on.apply(this,arguments)}(this,v)}reload(){return function He(T){return mt.apply(this,arguments)}(this)}_assign(v){this!==v&&(Et(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(E=>Object.assign({},E)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){const E=new Bn(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}));return E.metadata._copy(this.metadata),E}_onReload(v){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,E=!1){var k=this;return(0,P.Z)(function*(){let X=!1;v.idToken&&v.idToken!==k.stsTokenManager.accessToken&&(k.stsTokenManager.updateFromServerResponse(v),X=!0),E&&(yield ve(k)),yield k.auth._persistUserIfCurrent(k),X&&k.auth._notifyListenersIfCurrent(k)})()}delete(){var v=this;return(0,P.Z)(function*(){const E=yield v.getIdToken();return yield mn(v,function Ur(T,v){return No.apply(this,arguments)}(v.auth,{idToken:E})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,E){var k,X,ne,we,Le,dt,it,vt;const tn=null!==(k=E.displayName)&&void 0!==k?k:void 0,kn=null!==(X=E.email)&&void 0!==X?X:void 0,Br=null!==(ne=E.phoneNumber)&&void 0!==ne?ne:void 0,Cr=null!==(we=E.photoURL)&&void 0!==we?we:void 0,ro=null!==(Le=E.tenantId)&&void 0!==Le?Le:void 0,Es=null!==(dt=E._redirectEventId)&&void 0!==dt?dt:void 0,Ho=null!==(it=E.createdAt)&&void 0!==it?it:void 0,mh=null!==(vt=E.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:gh,emailVerified:pd,isAnonymous:_h,providerData:fd,stsTokenManager:yh}=E;Et(gh&&yh,v,"internal-error");const Ip=Dr.fromJSON(this.name,yh);Et("string"==typeof gh,v,"internal-error"),Sn(tn,v.name),Sn(kn,v.name),Et("boolean"==typeof pd,v,"internal-error"),Et("boolean"==typeof _h,v,"internal-error"),Sn(Br,v.name),Sn(Cr,v.name),Sn(ro,v.name),Sn(Es,v.name),Sn(Ho,v.name),Sn(mh,v.name);const md=new Bn({uid:gh,auth:v,email:kn,emailVerified:pd,displayName:tn,isAnonymous:_h,photoURL:Cr,phoneNumber:Br,tenantId:ro,stsTokenManager:Ip,createdAt:Ho,lastLoginAt:mh});return fd&&Array.isArray(fd)&&(md.providerData=fd.map(gd=>Object.assign({},gd))),Es&&(md._redirectEventId=Es),md}static _fromIdTokenResponse(v,E,k=!1){return(0,P.Z)(function*(){const X=new Dr;X.updateFromServerResponse(E);const ne=new Bn({uid:E.localId,auth:v,stsTokenManager:X,isAnonymous:k});return yield ve(ne),ne})()}}const Pa=new Map;function co(T){Ft(T instanceof Function,"Expected a class definition");let v=Pa.get(T);return v?(Ft(v instanceof T,"Instance stored in cache mismatched with class"),v):(v=new T,Pa.set(T,v),v)}const vi=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,P.Z)(function*(){return!0})()}_set(E,k){var X=this;return(0,P.Z)(function*(){X.storage[E]=k})()}_get(E){var k=this;return(0,P.Z)(function*(){const X=k.storage[E];return void 0===X?null:X})()}_remove(E){var k=this;return(0,P.Z)(function*(){delete k.storage[E]})()}_addListener(E,k){}_removeListener(E,k){}}return T.type="NONE",T})();function ks(T,v,E){return`firebase:${T}:${v}:${E}`}class Po{constructor(v,E,k){this.persistence=v,this.auth=E,this.userKey=k;const{config:X,name:ne}=this.auth;this.fullUserKey=ks(this.userKey,X.apiKey,ne),this.fullPersistenceKey=ks("persistence",X.apiKey,ne),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,P.Z)(function*(){const E=yield v.persistence._get(v.fullUserKey);return E?Bn._fromJSON(v.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var E=this;return(0,P.Z)(function*(){if(E.persistence===v)return;const k=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=v,k?E.setCurrentUser(k):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,E,k="authUser"){return(0,P.Z)(function*(){if(!E.length)return new Po(co(vi),v,k);const X=(yield Promise.all(E.map(function(){var it=(0,P.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return it.apply(this,arguments)}}()))).filter(it=>it);let ne=X[0]||co(vi);const we=ks(k,v.config.apiKey,v.name);let Le=null;for(const it of E)try{const vt=yield it._get(we);if(vt){const tn=Bn._fromJSON(v,vt);it!==ne&&(Le=tn),ne=it;break}}catch{}const dt=X.filter(it=>it._shouldAllowMigration);return ne._shouldAllowMigration&&dt.length?(ne=dt[0],Le&&(yield ne._set(we,Le.toJSON())),yield Promise.all(E.map(function(){var it=(0,P.Z)(function*(vt){if(vt!==ne)try{yield vt._remove(we)}catch{}});return function(vt){return it.apply(this,arguments)}}())),new Po(ne,v,k)):new Po(ne,v,k)})()}}function ul(T){const v=T.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(Hu(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(Xl(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(Ro(v))return"Blackberry";if(bi(v))return"Webos";if(Fs(v))return"Safari";if((v.includes("chrome/")||Vc(v))&&!v.includes("edge/"))return"Chrome";if(Gr(v))return"Android";{const k=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===k?.length)return k[1]}return"Other"}function Xl(T=(0,c.z$)()){return/firefox\//i.test(T)}function Fs(T=(0,c.z$)()){const v=T.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function Vc(T=(0,c.z$)()){return/crios\//i.test(T)}function Hu(T=(0,c.z$)()){return/iemobile/i.test(T)}function Gr(T=(0,c.z$)()){return/android/i.test(T)}function Ro(T=(0,c.z$)()){return/blackberry/i.test(T)}function bi(T=(0,c.z$)()){return/webos/i.test(T)}function zr(T=(0,c.z$)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function Hi(T=(0,c.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function Uc(T=(0,c.z$)()){return zr(T)||Gr(T)||bi(T)||Ro(T)||/windows phone/i.test(T)||Hu(T)}function dl(T,v=[]){let E;switch(T){case"Browser":E=ul((0,c.z$)());break;case"Worker":E=`${ul((0,c.z$)())}-${T}`;break;default:E=T}const k=v.length?v.join(","):"FirebaseCore-web";return`${E}/JsCore/${B.SDK_VERSION}/${k}`}function hl(){return(hl=(0,P.Z)(function*(T){return(yield rn(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ir(T,v){return yr.apply(this,arguments)}function yr(){return(yr=(0,P.Z)(function*(T,v){return rn(T,"GET","/v2/recaptchaConfig",Wn(T,v))})).apply(this,arguments)}function sr(T){return void 0!==T&&void 0!==T.getResponse}function Ra(T){return void 0!==T&&void 0!==T.enterprise}class Qi{constructor(v){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===v.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=v.recaptchaKey.split("/")[3],this.emailPasswordEnabled=v.recaptchaEnforcementState.some(E=>"EMAIL_PASSWORD_PROVIDER"===E.provider&&"OFF"!==E.enforcementState)}}function pl(T){return new Promise((v,E)=>{const k=document.createElement("script");k.setAttribute("src",T),k.onload=v,k.onerror=X=>{const ne=ti("internal-error");ne.customData=X,E(ne)},k.type="text/javascript",k.charset="UTF-8",function Gd(){var T,v;return null!==(v=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==v?v:document}().appendChild(k)})}function Jl(T){return`__${T}${Math.floor(1e6*Math.random())}`}class ae{constructor(v){this.type="recaptcha-enterprise",this.auth=Kn(v)}verify(v="verify",E=!1){var k=this;return(0,P.Z)(function*(){function ne(){return ne=(0,P.Z)(function*(Le){if(!E){if(null==Le.tenantId&&null!=Le._agentRecaptchaConfig)return Le._agentRecaptchaConfig.siteKey;if(null!=Le.tenantId&&void 0!==Le._tenantRecaptchaConfigs[Le.tenantId])return Le._tenantRecaptchaConfigs[Le.tenantId].siteKey}return new Promise(function(){var dt=(0,P.Z)(function*(it,vt){ir(Le,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tn=>{if(void 0!==tn.recaptchaKey){const kn=new Qi(tn);return null==Le.tenantId?Le._agentRecaptchaConfig=kn:Le._tenantRecaptchaConfigs[Le.tenantId]=kn,it(kn.siteKey)}vt(new Error("recaptcha Enterprise site key undefined"))}).catch(tn=>{vt(tn)})});return function(it,vt){return dt.apply(this,arguments)}}())}),ne.apply(this,arguments)}function we(Le,dt,it){const vt=window.grecaptcha;Ra(vt)?vt.enterprise.ready(()=>{vt.enterprise.execute(Le,{action:v}).then(tn=>{dt(tn)}).catch(()=>{dt("NO_RECAPTCHA")})}):it(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Le,dt)=>{(function X(Le){return ne.apply(this,arguments)})(k.auth).then(it=>{if(!E&&Ra(window.grecaptcha))we(it,Le,dt);else{if(typeof window>"u")return void dt(new Error("RecaptchaVerifier is only supported in browser"));pl("https://www.google.com/recaptcha/enterprise.js?render="+it).then(()=>{we(it,Le,dt)}).catch(vt=>{dt(vt)})}}).catch(it=>{dt(it)})})})()}}function ln(T,v,E){return Te.apply(this,arguments)}function Te(){return(Te=(0,P.Z)(function*(T,v,E,k=!1){const X=new ae(T);let ne;try{ne=yield X.verify(E)}catch{ne=yield X.verify(E,!0)}const we=Object.assign({},v);return Object.assign(we,k?{captchaResp:ne}:{captchaResponse:ne}),Object.assign(we,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(we,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),we})).apply(this,arguments)}class ho{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,E){const k=ne=>new Promise((we,Le)=>{try{we(v(ne))}catch(dt){Le(dt)}});k.onAbort=E,this.queue.push(k);const X=this.queue.length-1;return()=>{this.queue[X]=()=>Promise.resolve()}}runMiddleware(v){var E=this;return(0,P.Z)(function*(){if(E.auth.currentUser===v)return;const k=[];try{for(const X of E.queue)yield X(v),X.onAbort&&k.push(X.onAbort)}catch(X){k.reverse();for(const ne of k)try{ne()}catch{}throw E.auth._errorFactory.create("login-blocked",{originalMessage:X?.message})}})()}}class Wu{constructor(v,E,k,X){this.app=v,this.heartbeatServiceProvider=E,this.appCheckServiceProvider=k,this.config=X,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fa(this),this.idTokenSubscription=new Fa(this),this.beforeStateQueue=new ho(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_r,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=X.sdkClientVersion}_initializeWithPersistence(v,E){var k=this;return E&&(this._popupRedirectResolver=co(E)),this._initializationPromise=this.queue((0,P.Z)(function*(){var X,ne;if(!k._deleted&&(k.persistenceManager=yield Po.create(k,v),!k._deleted)){if(null!==(X=k._popupRedirectResolver)&&void 0!==X&&X._shouldInitProactively)try{yield k._popupRedirectResolver._initialize(k)}catch{}yield k.initializeCurrentUser(E),k.lastNotifiedUid=(null===(ne=k.currentUser)||void 0===ne?void 0:ne.uid)||null,!k._deleted&&(k._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,P.Z)(function*(){if(v._deleted)return;const E=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||E){if(v.currentUser&&E&&v.currentUser.uid===E.uid)return v._currentUser._assign(E),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(E,!0)}})()}initializeCurrentUser(v){var E=this;return(0,P.Z)(function*(){var k;const X=yield E.assertedPersistence.getCurrentUser();let ne=X,we=!1;if(v&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const Le=null===(k=E.redirectUser)||void 0===k?void 0:k._redirectEventId,dt=ne?._redirectEventId,it=yield E.tryRedirectSignIn(v);(!Le||Le===dt)&&it?.user&&(ne=it.user,we=!0)}if(!ne)return E.directlySetCurrentUser(null);if(!ne._redirectEventId){if(we)try{yield E.beforeStateQueue.runMiddleware(ne)}catch(Le){ne=X,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(Le))}return ne?E.reloadAndSetCurrentUserOrClear(ne):E.directlySetCurrentUser(null)}return Et(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===ne._redirectEventId?E.directlySetCurrentUser(ne):E.reloadAndSetCurrentUserOrClear(ne)})()}tryRedirectSignIn(v){var E=this;return(0,P.Z)(function*(){let k=null;try{k=yield E._popupRedirectResolver._completeRedirectFn(E,v,!0)}catch{yield E._setRedirectUser(null)}return k})()}reloadAndSetCurrentUserOrClear(v){var E=this;return(0,P.Z)(function*(){try{yield ve(v)}catch(k){if("auth/network-request-failed"!==k?.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function Io(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var v=this;return(0,P.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var E=this;return(0,P.Z)(function*(){const k=v?(0,c.m9)(v):null;return k&&Et(k.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(k&&k._clone(E))})()}_updateCurrentUser(v,E=!1){var k=this;return(0,P.Z)(function*(){if(!k._deleted)return v&&Et(k.tenantId===v.tenantId,k,"tenant-id-mismatch"),E||(yield k.beforeStateQueue.runMiddleware(v)),k.queue((0,P.Z)(function*(){yield k.directlySetCurrentUser(v),k.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,P.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var E=this;return this.queue((0,P.Z)(function*(){yield E.assertedPersistence.setPersistence(co(v))}))}initializeRecaptchaConfig(){var v=this;return(0,P.Z)(function*(){const E=yield ir(v,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),k=new Qi(E);null==v.tenantId?v._agentRecaptchaConfig=k:v._tenantRecaptchaConfigs[v.tenantId]=k,k.emailPasswordEnabled&&new ae(v).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new c.LL("auth","Firebase",v())}onAuthStateChanged(v,E,k){return this.registerStateListener(this.authStateSubscription,v,E,k)}beforeAuthStateChanged(v,E){return this.beforeStateQueue.pushCallback(v,E)}onIdTokenChanged(v,E,k){return this.registerStateListener(this.idTokenSubscription,v,E,k)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,E){var k=this;return(0,P.Z)(function*(){const X=yield k.getOrInitRedirectPersistenceManager(E);return null===v?X.removeCurrentUser():X.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var E=this;return(0,P.Z)(function*(){if(!E.redirectPersistenceManager){const k=v&&co(v)||E._popupRedirectResolver;Et(k,E,"argument-error"),E.redirectPersistenceManager=yield Po.create(E,[co(k._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(v){var E=this;return(0,P.Z)(function*(){var k,X;return E._isInitialized&&(yield E.queue((0,P.Z)(function*(){}))),(null===(k=E._currentUser)||void 0===k?void 0:k._redirectEventId)===v?E._currentUser:(null===(X=E.redirectUser)||void 0===X?void 0:X._redirectEventId)===v?E.redirectUser:null})()}_persistUserIfCurrent(v){var E=this;return(0,P.Z)(function*(){if(v===E.currentUser)return E.queue((0,P.Z)(function*(){return E.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const k=null!==(E=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==k&&(this.lastNotifiedUid=k,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,E,k,X){if(this._deleted)return()=>{};const ne="function"==typeof E?E:E.next.bind(E),we=this._isInitialized?Promise.resolve():this._initializationPromise;return Et(we,this,"internal-error"),we.then(()=>ne(this.currentUser)),"function"==typeof E?v.addObserver(E,k,X):v.addObserver(E)}directlySetCurrentUser(v){var E=this;return(0,P.Z)(function*(){E.currentUser&&E.currentUser!==v&&E._currentUser._stopProactiveRefresh(),v&&E.isProactiveRefreshEnabled&&v._startProactiveRefresh(),E.currentUser=v,v?yield E.assertedPersistence.setCurrentUser(v):yield E.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=dl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,P.Z)(function*(){var E;const k={"X-Client-Version":v.clientVersion};v.app.options.appId&&(k["X-Firebase-gmpid"]=v.app.options.appId);const X=yield null===(E=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();X&&(k["X-Firebase-Client"]=X);const ne=yield v._getAppCheckToken();return ne&&(k["X-Firebase-AppCheck"]=ne),k})()}_getAppCheckToken(){var v=this;return(0,P.Z)(function*(){var E;const k=yield null===(E=v.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getToken();return k?.error&&function ds(T,...v){Do.logLevel<=vn.in.WARN&&Do.warn(`Auth (${B.SDK_VERSION}): ${T}`,...v)}(`Error while retrieving App Check token: ${k.error}`),k?.token})()}}function Kn(T){return(0,c.m9)(T)}class Fa{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,c.ne)(E=>this.observer=E)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function La(T,v,E){const k=Kn(T);Et(k._canInitEmulator,k,"emulator-config-failed"),Et(/^https?:\/\//.test(v),k,"invalid-emulator-scheme");const X=!!E?.disableWarnings,ne=Jt(v),{host:we,port:Le}=function fs(T){const v=Jt(T),E=/(\/\/)?([^?#/]+)/.exec(T.substr(v.length));if(!E)return{host:"",port:null};const k=E[2].split("@").pop()||"",X=/^(\[[^\]]+\])(:|$)/.exec(k);if(X){const ne=X[1];return{host:ne,port:ua(k.substr(ne.length+1))}}{const[ne,we]=k.split(":");return{host:ne,port:ua(we)}}}(v);k.config.emulator={url:`${ne}//${we}${null===Le?"":`:${Le}`}/`},k.settings.appVerificationDisabledForTesting=!0,k.emulatorConfig=Object.freeze({host:we,port:Le,protocol:ne.replace(":",""),options:Object.freeze({disableWarnings:X})}),X||function vr(){function T(){const v=document.createElement("p"),E=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function Jt(T){const v=T.indexOf(":");return v<0?"":T.substr(0,v+1)}function ua(T){if(!T)return null;const v=Number(T);return isNaN(v)?null:v}class st{constructor(v,E){this.providerId=v,this.signInMethod=E}toJSON(){return Vr("not implemented")}_getIdTokenResponse(v){return Vr("not implemented")}_linkToIdToken(v,E){return Vr("not implemented")}_getReauthenticationResolver(v){return Vr("not implemented")}}function ko(T,v){return ms.apply(this,arguments)}function ms(){return(ms=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:resetPassword",Wn(T,v))})).apply(this,arguments)}function po(T,v){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Ji(){return(Ji=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:update",Wn(T,v))})).apply(this,arguments)}function Mr(T,v){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,P.Z)(function*(T,v){return pi(T,"POST","/v1/accounts:signInWithPassword",Wn(T,v))})).apply(this,arguments)}function Bs(T,v){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:sendOobCode",Wn(T,v))})).apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(T,v){return Bs(T,v)})).apply(this,arguments)}function tu(T,v){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,P.Z)(function*(T,v){return Bs(T,v)})).apply(this,arguments)}function gs(T,v){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,P.Z)(function*(T,v){return Bs(T,v)})).apply(this,arguments)}function mi(){return(mi=(0,P.Z)(function*(T,v){return Bs(T,v)})).apply(this,arguments)}function Pi(){return(Pi=(0,P.Z)(function*(T,v){return pi(T,"POST","/v1/accounts:signInWithEmailLink",Wn(T,v))})).apply(this,arguments)}function Ku(){return(Ku=(0,P.Z)(function*(T,v){return pi(T,"POST","/v1/accounts:signInWithEmailLink",Wn(T,v))})).apply(this,arguments)}class Ir extends st{constructor(v,E,k,X=null){super("password",k),this._email=v,this._password=E,this._tenantId=X}static _fromEmailAndPassword(v,E){return new Ir(v,E,"password")}static _fromEmailAndCode(v,E,k=null){return new Ir(v,E,"emailLink",k)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v;if(E?.email&&E?.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(v){var E=this;return(0,P.Z)(function*(){var k;switch(E.signInMethod){case"password":const X={returnSecureToken:!0,email:E._email,password:E._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(k=v._getRecaptchaConfig())&&void 0!==k&&k.emailPasswordEnabled){const ne=yield ln(v,X,"signInWithPassword");return Mr(v,ne)}return Mr(v,X).catch(function(){var ne=(0,P.Z)(function*(we){if("auth/missing-recaptcha-token"===we.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Le=yield ln(v,X,"signInWithPassword");return Mr(v,Le)}return Promise.reject(we)});return function(we){return ne.apply(this,arguments)}}());case"emailLink":return function qu(T,v){return Pi.apply(this,arguments)}(v,{email:E._email,oobCode:E._password});default:er(v,"internal-error")}})()}_linkToIdToken(v,E){var k=this;return(0,P.Z)(function*(){switch(k.signInMethod){case"password":return po(v,{idToken:E,returnSecureToken:!0,email:k._email,password:k._password});case"emailLink":return function Nn(T,v){return Ku.apply(this,arguments)}(v,{idToken:E,email:k._email,oobCode:k._password});default:er(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function Ri(T,v){return ki.apply(this,arguments)}function ki(){return(ki=(0,P.Z)(function*(T,v){return pi(T,"POST","/v1/accounts:signInWithIdp",Wn(T,v))})).apply(this,arguments)}class fo extends st{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const E=new fo(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(E.idToken=v.idToken),v.accessToken&&(E.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(E.nonce=v.nonce),v.pendingToken&&(E.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(E.accessToken=v.oauthToken,E.secret=v.oauthTokenSecret):er("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v,{providerId:k,signInMethod:X}=E,ne=Q(E,["providerId","signInMethod"]);if(!k||!X)return null;const we=new fo(k,X);return we.idToken=ne.idToken||void 0,we.accessToken=ne.accessToken||void 0,we.secret=ne.secret,we.nonce=ne.nonce,we.pendingToken=ne.pendingToken||null,we}_getIdTokenResponse(v){return Ri(v,this.buildRequest())}_linkToIdToken(v,E){const k=this.buildRequest();return k.idToken=E,Ri(v,k)}_getReauthenticationResolver(v){const E=this.buildRequest();return E.autoCreate=!1,Ri(v,E)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),v.postBody=(0,c.xO)(E)}return v}}function jc(){return(jc=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:sendVerificationCode",Wn(T,v))})).apply(this,arguments)}function Kd(){return(Kd=(0,P.Z)(function*(T,v){return pi(T,"POST","/v1/accounts:signInWithPhoneNumber",Wn(T,v))})).apply(this,arguments)}function Zd(){return(Zd=(0,P.Z)(function*(T,v){const E=yield pi(T,"POST","/v1/accounts:signInWithPhoneNumber",Wn(T,v));if(E.temporaryProof)throw Xi(T,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const da={USER_NOT_FOUND:"user-not-found"};function Xd(){return(Xd=(0,P.Z)(function*(T,v){return pi(T,"POST","/v1/accounts:signInWithPhoneNumber",Wn(T,Object.assign(Object.assign({},v),{operation:"REAUTH"})),da)})).apply(this,arguments)}class Us extends st{constructor(v){super("phone","phone"),this.params=v}static _fromVerification(v,E){return new Us({verificationId:v,verificationCode:E})}static _fromTokenResponse(v,E){return new Us({phoneNumber:v,temporaryProof:E})}_getIdTokenResponse(v){return function Hc(T,v){return Kd.apply(this,arguments)}(v,this._makeVerificationRequest())}_linkToIdToken(v,E){return function Xm(T,v){return Zd.apply(this,arguments)}(v,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(v){return function Yd(T,v){return Xd.apply(this,arguments)}(v,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:v,phoneNumber:E,verificationId:k,verificationCode:X}=this.params;return v&&E?{temporaryProof:v,phoneNumber:E}:{sessionInfo:k,code:X}}toJSON(){const v={providerId:this.providerId};return this.params.phoneNumber&&(v.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(v.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(v.verificationCode=this.params.verificationCode),this.params.verificationId&&(v.verificationId=this.params.verificationId),v}static fromJSON(v){"string"==typeof v&&(v=JSON.parse(v));const{verificationId:E,verificationCode:k,phoneNumber:X,temporaryProof:ne}=v;return k||E||X||ne?new Us({verificationId:E,verificationCode:k,phoneNumber:X,temporaryProof:ne}):null}}class Ba{constructor(v){var E,k,X,ne,we,Le;const dt=(0,c.zd)((0,c.pd)(v)),it=null!==(E=dt.apiKey)&&void 0!==E?E:null,vt=null!==(k=dt.oobCode)&&void 0!==k?k:null,tn=function Nf(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(X=dt.mode)&&void 0!==X?X:null);Et(it&&vt&&tn,"argument-error"),this.apiKey=it,this.operation=tn,this.code=vt,this.continueUrl=null!==(ne=dt.continueUrl)&&void 0!==ne?ne:null,this.languageCode=null!==(we=dt.languageCode)&&void 0!==we?we:null,this.tenantId=null!==(Le=dt.tenantId)&&void 0!==Le?Le:null}static parseLink(v){const E=function sp(T){const v=(0,c.zd)((0,c.pd)(T)).link,E=v?(0,c.zd)((0,c.pd)(v)).deep_link_id:null,k=(0,c.zd)((0,c.pd)(T)).deep_link_id;return(k?(0,c.zd)((0,c.pd)(k)).link:null)||k||E||v||T}(v);try{return new Ba(E)}catch{return null}}}let ap=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(E,k){return Ir._fromEmailAndPassword(E,k)}static credentialWithLink(E,k){const X=Ba.parseLink(k);return Et(X,"argument-error"),Ir._fromEmailAndCode(E,X.code,X.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class mo{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class Lr extends mo{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}class fl extends Lr{static credentialFromJSON(v){const E="string"==typeof v?JSON.parse(v):v;return Et("providerId"in E&&"signInMethod"in E,"argument-error"),fo._fromParams(E)}credential(v){return this._credential(Object.assign(Object.assign({},v),{nonce:v.rawNonce}))}_credential(v){return Et(v.idToken||v.accessToken,"argument-error"),fo._fromParams(Object.assign(Object.assign({},v),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(v){return fl.oauthCredentialFromTaggedObject(v)}static credentialFromError(v){return fl.oauthCredentialFromTaggedObject(v.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:E,oauthAccessToken:k,oauthTokenSecret:X,pendingToken:ne,nonce:we,providerId:Le}=v;if(!k&&!X&&!E&&!ne||!Le)return null;try{return new fl(Le)._credential({idToken:E,accessToken:k,nonce:we,pendingToken:ne})}catch{return null}}}let ar=(()=>{class T extends Lr{constructor(){super("facebook.com")}static credential(E){return fo._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return T.credential(E.oauthAccessToken)}catch{return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),Jm=(()=>{class T extends Lr{constructor(){super("google.com"),this.addScope("profile")}static credential(E,k){return fo._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:k})}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:k,oauthAccessToken:X}=E;if(!k&&!X)return null;try{return T.credential(k,X)}catch{return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),oi=(()=>{class T extends Lr{constructor(){super("github.com")}static credential(E){return fo._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return T.credential(E.oauthAccessToken)}catch{return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class ml extends st{constructor(v,E){super(v,v),this.pendingToken=E}_getIdTokenResponse(v){return Ri(v,this.buildRequest())}_linkToIdToken(v,E){const k=this.buildRequest();return k.idToken=E,Ri(v,k)}_getReauthenticationResolver(v){const E=this.buildRequest();return E.autoCreate=!1,Ri(v,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(v){const E="string"==typeof v?JSON.parse(v):v,{providerId:k,signInMethod:X,pendingToken:ne}=E;return k&&X&&ne&&k===X?new ml(k,ne):null}static _create(v,E){return new ml(v,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $i extends mo{constructor(v){Et(v.startsWith("saml."),"argument-error"),super(v)}static credentialFromResult(v){return $i.samlCredentialFromTaggedObject(v)}static credentialFromError(v){return $i.samlCredentialFromTaggedObject(v.customData||{})}static credentialFromJSON(v){const E=ml.fromJSON(v);return Et(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{pendingToken:E,providerId:k}=v;if(!E||!k)return null;try{return ml._create(k,E)}catch{return null}}}let Qd=(()=>{class T extends Lr{constructor(){super("twitter.com")}static credential(E,k){return fo._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:k})}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:k,oauthTokenSecret:X}=E;if(!k||!X)return null;try{return T.credential(k,X)}catch{return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function gl(T,v){return $c.apply(this,arguments)}function $c(){return($c=(0,P.Z)(function*(T,v){return pi(T,"POST","/v1/accounts:signUp",Wn(T,v))})).apply(this,arguments)}class Lo{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,E,k,X=!1){return(0,P.Z)(function*(){const ne=yield Bn._fromIdTokenResponse(v,k,X),we=Of(k);return new Lo({user:ne,providerId:we,_tokenResponse:k,operationType:E})})()}static _forOperation(v,E,k){return(0,P.Z)(function*(){yield v._updateTokensIfNecessary(k,!0);const X=Of(k);return new Lo({user:v,providerId:X,_tokenResponse:k,operationType:E})})()}}function Of(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function Jd(T){return go.apply(this,arguments)}function go(){return(go=(0,P.Z)(function*(T){var v;const E=Kn(T);if(yield E._initializationPromise,null!==(v=E.currentUser)&&void 0!==v&&v.isAnonymous)return new Lo({user:E.currentUser,providerId:null,operationType:"signIn"});const k=yield gl(E,{returnSecureToken:!0}),X=yield Lo._fromIdTokenResponse(E,"signIn",k,!0);return yield E._updateCurrentUser(X.user),X})).apply(this,arguments)}class Ua extends c.ZR{constructor(v,E,k,X){var ne;super(E.code,E.message),this.operationType=k,this.user=X,Object.setPrototypeOf(this,Ua.prototype),this.customData={appName:v.name,tenantId:null!==(ne=v.tenantId)&&void 0!==ne?ne:void 0,_serverResponse:E.customData._serverResponse,operationType:k}}static _fromErrorAndOperation(v,E,k,X){return new Ua(v,E,k,X)}}function gi(T,v,E,k){return("reauthenticate"===v?E._getReauthenticationResolver(T):E._getIdTokenResponse(T)).catch(ne=>{throw"auth/multi-factor-auth-required"===ne.code?Ua._fromErrorAndOperation(T,ne,v,k):ne})}function Yo(T){return new Set(T.map(({providerId:v})=>v).filter(v=>!!v))}function _l(T,v){return yl.apply(this,arguments)}function yl(){return yl=(0,P.Z)(function*(T,v){const E=(0,c.m9)(T);yield za(!0,E,v);const{providerUserInfo:k}=yield function nr(T,v){return Ee.apply(this,arguments)}(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[v]}),X=Yo(k||[]);return E.providerData=E.providerData.filter(ne=>X.has(ne.providerId)),X.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E}),yl.apply(this,arguments)}function nu(T,v){return js.apply(this,arguments)}function js(){return(js=(0,P.Z)(function*(T,v,E=!1){const k=yield mn(T,v._linkToIdToken(T.auth,yield T.getIdToken()),E);return Lo._forOperation(T,"link",k)})).apply(this,arguments)}function za(T,v,E){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,P.Z)(function*(T,v,E){yield ve(v);const X=!1===T?"provider-already-linked":"no-such-provider";Et(Yo(v.providerData).has(E)===T,v.auth,X)})).apply(this,arguments)}function eh(T,v){return ja.apply(this,arguments)}function ja(){return(ja=(0,P.Z)(function*(T,v,E=!1){const{auth:k}=T,X="reauthenticate";try{const ne=yield mn(T,gi(k,X,v,T),E);Et(ne.idToken,k,"internal-error");const we=rr(ne.idToken);Et(we,k,"internal-error");const{sub:Le}=we;return Et(T.uid===Le,k,"user-mismatch"),Lo._forOperation(T,X,ne)}catch(ne){throw"auth/user-not-found"===ne?.code&&er(k,"user-mismatch"),ne}})).apply(this,arguments)}function ru(T,v){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(T,v,E=!1){const k="signIn",X=yield gi(T,k,v),ne=yield Lo._fromIdTokenResponse(T,k,X);return E||(yield T._updateCurrentUser(ne.user)),ne})).apply(this,arguments)}function Hn(T,v){return lp.apply(this,arguments)}function lp(){return(lp=(0,P.Z)(function*(T,v){return ru(Kn(T),v)})).apply(this,arguments)}function th(T,v){return nh.apply(this,arguments)}function nh(){return(nh=(0,P.Z)(function*(T,v){const E=(0,c.m9)(T);return yield za(!1,E,v.providerId),nu(E,v)})).apply(this,arguments)}function Zu(T,v){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,P.Z)(function*(T,v){return eh((0,c.m9)(T),v)})).apply(this,arguments)}function Ha(){return(Ha=(0,P.Z)(function*(T,v){return pi(T,"POST","/v1/accounts:signInWithCustomToken",Wn(T,v))})).apply(this,arguments)}function qc(T,v){return ou.apply(this,arguments)}function ou(){return ou=(0,P.Z)(function*(T,v){const E=Kn(T),k=yield function rh(T,v){return Ha.apply(this,arguments)}(E,{token:v,returnSecureToken:!0}),X=yield Lo._fromIdTokenResponse(E,"signIn",k);return yield E._updateCurrentUser(X.user),X}),ou.apply(this,arguments)}class vl{constructor(v,E){this.factorId=v,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(v,E){return"phoneInfo"in E?$a._fromServerResponse(v,E):"totpInfo"in E?bl._fromServerResponse(v,E):er(v,"internal-error")}}class $a extends vl{constructor(v){super("phone",v),this.phoneNumber=v.phoneInfo}static _fromServerResponse(v,E){return new $a(E)}}class bl extends vl{constructor(v){super("totp",v)}static _fromServerResponse(v,E){return new bl(E)}}function Wa(T,v,E){var k;Et((null===(k=E.url)||void 0===k?void 0:k.length)>0,T,"invalid-continue-uri"),Et(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),v.continueUrl=E.url,v.dynamicLinkDomain=E.dynamicLinkDomain,v.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(Et(E.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),v.iOSBundleId=E.iOS.bundleId),E.android&&(Et(E.android.packageName.length>0,T,"missing-android-pkg-name"),v.androidInstallApp=E.android.installApp,v.androidMinimumVersionCode=E.android.minimumVersion,v.androidPackageName=E.android.packageName)}function Kc(T,v,E){return Hs.apply(this,arguments)}function Hs(){return Hs=(0,P.Z)(function*(T,v,E){var k;const X=Kn(T),ne={requestType:"PASSWORD_RESET",email:v,clientType:"CLIENT_TYPE_WEB"};if(null!==(k=X._getRecaptchaConfig())&&void 0!==k&&k.emailPasswordEnabled){const we=yield ln(X,ne,"getOobCode",!0);E&&Wa(X,we,E),yield tu(X,we)}else E&&Wa(X,ne,E),yield tu(X,ne).catch(function(){var we=(0,P.Z)(function*(Le){if("auth/missing-recaptcha-token"!==Le.code)return Promise.reject(Le);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const dt=yield ln(X,ne,"getOobCode",!0);E&&Wa(X,dt,E),yield tu(X,dt)}});return function(Le){return we.apply(this,arguments)}}())}),Hs.apply(this,arguments)}function _s(T,v,E){return su.apply(this,arguments)}function su(){return(su=(0,P.Z)(function*(T,v,E){yield ko((0,c.m9)(T),{oobCode:v,newPassword:E})})).apply(this,arguments)}function ih(T,v){return br.apply(this,arguments)}function br(){return br=(0,P.Z)(function*(T,v){yield function Gu(T,v){return Ji.apply(this,arguments)}((0,c.m9)(T),{oobCode:v})}),br.apply(this,arguments)}function up(T,v){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,P.Z)(function*(T,v){const E=(0,c.m9)(T),k=yield ko(E,{oobCode:v}),X=k.requestType;switch(Et(X,E,"internal-error"),X){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Et(k.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Et(k.mfaInfo,E,"internal-error");default:Et(k.email,E,"internal-error")}let ne=null;return k.mfaInfo&&(ne=vl._fromServerResponse(Kn(E),k.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.newEmail:k.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===k.requestType?k.email:k.newEmail)||null,multiFactorInfo:ne},operation:X}})).apply(this,arguments)}function eo(T,v){return wl.apply(this,arguments)}function wl(){return(wl=(0,P.Z)(function*(T,v){const{data:E}=yield up((0,c.m9)(T),v);return E.email})).apply(this,arguments)}function xl(T,v,E){return ha.apply(this,arguments)}function ha(){return ha=(0,P.Z)(function*(T,v,E){var k;const X=Kn(T),ne={returnSecureToken:!0,email:v,password:E,clientType:"CLIENT_TYPE_WEB"};let we;if(null!==(k=X._getRecaptchaConfig())&&void 0!==k&&k.emailPasswordEnabled){const it=yield ln(X,ne,"signUpPassword");we=gl(X,it)}else we=gl(X,ne).catch(function(){var it=(0,P.Z)(function*(vt){if("auth/missing-recaptcha-token"===vt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tn=yield ln(X,ne,"signUpPassword");return gl(X,tn)}return Promise.reject(vt)});return function(vt){return it.apply(this,arguments)}}());const Le=yield we.catch(it=>Promise.reject(it)),dt=yield Lo._fromIdTokenResponse(X,"signIn",Le);return yield X._updateCurrentUser(dt.user),dt}),ha.apply(this,arguments)}function Fi(T,v,E){return Hn((0,c.m9)(T),ap.credential(v,E))}function cp(T,v,E){return Yu.apply(this,arguments)}function Yu(){return Yu=(0,P.Z)(function*(T,v,E){var k;const X=Kn(T),ne={requestType:"EMAIL_SIGNIN",email:v,clientType:"CLIENT_TYPE_WEB"};function we(Le,dt){Et(dt.handleCodeInApp,X,"argument-error"),dt&&Wa(X,Le,dt)}if(null!==(k=X._getRecaptchaConfig())&&void 0!==k&&k.emailPasswordEnabled){const Le=yield ln(X,ne,"getOobCode",!0);we(Le,E),yield gs(X,Le)}else we(ne,E),yield gs(X,ne).catch(function(){var Le=(0,P.Z)(function*(dt){if("auth/missing-recaptcha-token"!==dt.code)return Promise.reject(dt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const it=yield ln(X,ne,"getOobCode",!0);we(it,E),yield gs(X,it)}});return function(dt){return Le.apply(this,arguments)}}())}),Yu.apply(this,arguments)}function dp(T,v){const E=Ba.parseLink(v);return"EMAIL_SIGNIN"===E?.operation}function Bo(T,v,E){return El.apply(this,arguments)}function El(){return(El=(0,P.Z)(function*(T,v,E){const k=(0,c.m9)(T),X=ap.credentialWithLink(v,E||ze());return Et(X._tenantId===(k.tenantId||null),k,"tenant-id-mismatch"),Hn(k,X)})).apply(this,arguments)}function pa(){return(pa=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:createAuthUri",Wn(T,v))})).apply(this,arguments)}function Yc(T,v){return fa.apply(this,arguments)}function fa(){return fa=(0,P.Z)(function*(T,v){const k={identifier:v,continueUri:Gt()?ze():"http://localhost"},{signinMethods:X}=yield function Zc(T,v){return pa.apply(this,arguments)}((0,c.m9)(T),k);return X||[]}),fa.apply(this,arguments)}function Xc(T,v){return dn.apply(this,arguments)}function dn(){return dn=(0,P.Z)(function*(T,v){const E=(0,c.m9)(T),X={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};v&&Wa(E.auth,X,v);const{email:ne}=yield function Ym(T,v){return eu.apply(this,arguments)}(E.auth,X);ne!==T.email&&(yield T.reload())}),dn.apply(this,arguments)}function Qc(T,v,E){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,P.Z)(function*(T,v,E){const k=(0,c.m9)(T),ne={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:v};E&&Wa(k.auth,ne,E);const{email:we}=yield function Vs(T,v){return mi.apply(this,arguments)}(k.auth,ne);we!==T.email&&(yield T.reload())}),Xu.apply(this,arguments)}function au(){return(au=(0,P.Z)(function*(T,v){return rn(T,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function pp(T,v){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,P.Z)(function*(T,{displayName:v,photoURL:E}){if(void 0===v&&void 0===E)return;const k=(0,c.m9)(T),ne={idToken:yield k.getIdToken(),displayName:v,photoUrl:E,returnSecureToken:!0},we=yield mn(k,function hp(T,v){return au.apply(this,arguments)}(k.auth,ne));k.displayName=we.displayName||null,k.photoURL=we.photoUrl||null;const Le=k.providerData.find(({providerId:dt})=>"password"===dt);Le&&(Le.displayName=k.displayName,Le.photoURL=k.photoURL),yield k._updateTokensIfNecessary(we)}),Qu.apply(this,arguments)}function $s(T,v){return lu((0,c.m9)(T),v,null)}function Ju(T,v){return lu((0,c.m9)(T),null,v)}function lu(T,v,E){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,P.Z)(function*(T,v,E){const{auth:k}=T,ne={idToken:yield T.getIdToken(),returnSecureToken:!0};v&&(ne.email=v),E&&(ne.password=E);const we=yield mn(T,po(k,ne));yield T._updateTokensIfNecessary(we,!0)})).apply(this,arguments)}class Ga{constructor(v,E,k={}){this.isNewUser=v,this.providerId=E,this.profile=k}}class ut extends Ga{constructor(v,E,k,X){super(v,E,k),this.username=X}}class Gn extends Ga{constructor(v,E){super(v,"facebook.com",E)}}class ed extends ut{constructor(v,E){super(v,"github.com",E,"string"==typeof E?.login?E?.login:null)}}class ec extends Ga{constructor(v,E){super(v,"google.com",E)}}class wi extends ut{constructor(v,E,k){super(v,"twitter.com",E,k)}}function fp(T){const{user:v,_tokenResponse:E}=T;return v.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function Pf(T){var v,E;if(!T)return null;const{providerId:k}=T,X=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},ne=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!k&&T?.idToken){const we=null===(E=null===(v=rr(T.idToken))||void 0===v?void 0:v.firebase)||void 0===E?void 0:E.sign_in_provider;if(we)return new Ga(ne,"anonymous"!==we&&"custom"!==we?we:null)}if(!k)return null;switch(k){case"facebook.com":return new Gn(ne,X);case"github.com":return new ed(ne,X);case"google.com":return new ec(ne,X);case"twitter.com":return new wi(ne,X,T.screenName||null);case"custom":case"anonymous":return new Ga(ne,null);default:return new Ga(ne,k,X)}}(E)}class fr{constructor(v,E,k){this.type=v,this.credential=E,this.auth=k}static _fromIdtoken(v,E){return new fr("enroll",v,E)}static _fromMfaPendingCredential(v){return new fr("signin",v)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(v){var E,k;if(v?.multiFactorSession){if(null!==(E=v.multiFactorSession)&&void 0!==E&&E.pendingCredential)return fr._fromMfaPendingCredential(v.multiFactorSession.pendingCredential);if(null!==(k=v.multiFactorSession)&&void 0!==k&&k.idToken)return fr._fromIdtoken(v.multiFactorSession.idToken)}return null}}class Qo{constructor(v,E,k){this.session=v,this.hints=E,this.signInResolver=k}static _fromError(v,E){const k=Kn(v),X=E.customData._serverResponse,ne=(X.mfaInfo||[]).map(Le=>vl._fromServerResponse(k,Le));Et(X.mfaPendingCredential,k,"internal-error");const we=fr._fromMfaPendingCredential(X.mfaPendingCredential);return new Qo(we,ne,function(){var Le=(0,P.Z)(function*(dt){const it=yield dt._process(k,we);delete X.mfaInfo,delete X.mfaPendingCredential;const vt=Object.assign(Object.assign({},X),{idToken:it.idToken,refreshToken:it.refreshToken});switch(E.operationType){case"signIn":const tn=yield Lo._fromIdTokenResponse(k,E.operationType,vt);return yield k._updateCurrentUser(tn.user),tn;case"reauthenticate":return Et(E.user,k,"internal-error"),Lo._forOperation(E.user,E.operationType,vt);default:er(k,"internal-error")}});return function(dt){return Le.apply(this,arguments)}}())}resolveSignIn(v){var E=this;return(0,P.Z)(function*(){return E.signInResolver(v)})()}}function Bi(T,v){var E;const k=(0,c.m9)(T),X=v;return Et(v.customData.operationType,k,"argument-error"),Et(null===(E=X.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,k,"argument-error"),Qo._fromError(k,X)}class nc{constructor(v){this.user=v,this.enrolledFactors=[],v._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(k=>vl._fromServerResponse(v.auth,k)))})}static _fromUser(v){return new nc(v)}getSession(){var v=this;return(0,P.Z)(function*(){return fr._fromIdtoken(yield v.user.getIdToken(),v.user.auth)})()}enroll(v,E){var k=this;return(0,P.Z)(function*(){const X=v,ne=yield k.getSession(),we=yield mn(k.user,X._process(k.user.auth,ne,E));return yield k.user._updateTokensIfNecessary(we),k.user.reload()})()}unenroll(v){var E=this;return(0,P.Z)(function*(){const k="string"==typeof v?v:v.uid,X=yield E.user.getIdToken();try{const ne=yield mn(E.user,function qa(T,v){return rn(T,"POST","/v2/accounts/mfaEnrollment:withdraw",Wn(T,v))}(E.user.auth,{idToken:X,mfaEnrollmentId:k}));E.enrolledFactors=E.enrolledFactors.filter(({uid:we})=>we!==k),yield E.user._updateTokensIfNecessary(ne),yield E.user.reload()}catch(ne){throw ne}})()}}const _a=new WeakMap;function td(T){const v=(0,c.m9)(T);return _a.has(v)||_a.set(v,nc._fromUser(v)),_a.get(v)}const _i="__sak";class Sl{constructor(v,E){this.storageRetriever=v,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(_i,"1"),this.storage.removeItem(_i),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,E){return this.storage.setItem(v,JSON.stringify(E)),Promise.resolve()}_get(v){const E=this.storage.getItem(v);return Promise.resolve(E?JSON.parse(E):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const ic=(()=>{class T extends Sl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,k)=>this.onStorageEvent(E,k),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function oh(){const T=(0,c.z$)();return Fs(T)||zr(T)}()&&function cl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Uc(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const k of Object.keys(this.listeners)){const X=this.storage.getItem(k),ne=this.localCache[k];X!==ne&&E(k,ne,X)}}onStorageEvent(E,k=!1){if(!E.key)return void this.forAllChangedKeys((Le,dt,it)=>{this.notifyListeners(Le,it)});const X=E.key;if(k?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(X);if(E.newValue!==Le)null!==E.newValue?this.storage.setItem(X,E.newValue):this.storage.removeItem(X);else if(this.localCache[X]===E.newValue&&!k)return}const ne=()=>{const Le=this.storage.getItem(X);!k&&this.localCache[X]===Le||this.notifyListeners(X,Le)},we=this.storage.getItem(X);!function ps(){return(0,c.w1)()&&10===document.documentMode}()||we===E.newValue||E.newValue===E.oldValue?ne():setTimeout(ne,10)}notifyListeners(E,k){this.localCache[E]=k;const X=this.listeners[E];if(X)for(const ne of Array.from(X))ne(k&&JSON.parse(k))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,k,X)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:k,newValue:X}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,k){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(k)}_removeListener(E,k){this.listeners[E]&&(this.listeners[E].delete(k),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,k){var X=()=>super._set,ne=this;return(0,P.Z)(function*(){yield X().call(ne,E,k),ne.localCache[E]=JSON.stringify(k)})()}_get(E){var k=()=>super._get,X=this;return(0,P.Z)(function*(){const ne=yield k().call(X,E);return X.localCache[E]=JSON.stringify(ne),ne})()}_remove(E){var k=()=>super._remove,X=this;return(0,P.Z)(function*(){yield k().call(X,E),delete X.localCache[E]})()}}return T.type="LOCAL",T})(),oc=(()=>{class T extends Sl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,k){}_removeListener(E,k){}}return T.type="SESSION",T})();let Gs=(()=>{class T{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const k=this.receivers.find(ne=>ne.isListeningto(E));if(k)return k;const X=new T(E);return this.receivers.push(X),X}isListeningto(E){return this.eventTarget===E}handleEvent(E){var k=this;return(0,P.Z)(function*(){const X=E,{eventId:ne,eventType:we,data:Le}=X.data,dt=k.handlersMap[we];if(!dt?.size)return;X.ports[0].postMessage({status:"ack",eventId:ne,eventType:we});const it=Array.from(dt).map(function(){var tn=(0,P.Z)(function*(kn){return kn(X.origin,Le)});return function(kn){return tn.apply(this,arguments)}}()),vt=yield function Ei(T){return Promise.all(T.map(function(){var v=(0,P.Z)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(k){return{fulfilled:!1,reason:k}}});return function(E){return v.apply(this,arguments)}}()))}(it);X.ports[0].postMessage({status:"done",eventId:ne,eventType:we,response:vt})})()}_subscribe(E,k){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(k)}_unsubscribe(E,k){this.handlersMap[E]&&k&&this.handlersMap[E].delete(k),(!k||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function Er(T="",v=10){let E="";for(let k=0;k<v;k++)E+=Math.floor(10*Math.random());return T+E}class sh{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,E,k=50){var X=this;return(0,P.Z)(function*(){const ne=typeof MessageChannel<"u"?new MessageChannel:null;if(!ne)throw new Error("connection_unavailable");let we,Le;return new Promise((dt,it)=>{const vt=Er("",20);ne.port1.start();const tn=setTimeout(()=>{it(new Error("unsupported_event"))},k);Le={messageChannel:ne,onMessage(kn){const Br=kn;if(Br.data.eventId===vt)switch(Br.data.status){case"ack":clearTimeout(tn),we=setTimeout(()=>{it(new Error("timeout"))},3e3);break;case"done":clearTimeout(we),dt(Br.data.response);break;default:clearTimeout(tn),clearTimeout(we),it(new Error("invalid_response"))}}},X.handlers.add(Le),ne.port1.addEventListener("message",Le.onMessage),X.target.postMessage({eventType:v,eventId:vt,data:E},[ne.port2])}).finally(()=>{Le&&X.removeMessageHandler(Le)})})()}}function si(){return window}function Dl(){return typeof si().WorkerGlobalScope<"u"&&"function"==typeof si().importScripts}function Il(){return(Il=(0,P.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sc="firebaseLocalStorageDb",qs="firebaseLocalStorage",Tl="fbase_key";class Ks{constructor(v){this.request=v}toPromise(){return new Promise((v,E)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function ac(T,v){return T.transaction([qs],v?"readwrite":"readonly").objectStore(qs)}function Gi(){const T=indexedDB.open(sc,1);return new Promise((v,E)=>{T.addEventListener("error",()=>{E(T.error)}),T.addEventListener("upgradeneeded",()=>{const k=T.result;try{k.createObjectStore(qs,{keyPath:Tl})}catch(X){E(X)}}),T.addEventListener("success",(0,P.Z)(function*(){const k=T.result;k.objectStoreNames.contains(qs)?v(k):(k.close(),yield function Zr(){const T=indexedDB.deleteDatabase(sc);return new Ks(T).toPromise()}(),v(yield Gi()))}))})}function ys(T,v,E){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,P.Z)(function*(T,v,E){const k=ac(T,!0).put({[Tl]:v,value:E});return new Ks(k).toPromise()})).apply(this,arguments)}function ai(){return(ai=(0,P.Z)(function*(T,v){const E=ac(T,!1).get(v),k=yield new Ks(E).toPromise();return void 0===k?null:k.value})).apply(this,arguments)}function Zs(T,v){const E=ac(T,!0).delete(v);return new Ks(E).toPromise()}const id=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,P.Z)(function*(){return E.db||(E.db=yield Gi()),E.db})()}_withRetries(E){var k=this;return(0,P.Z)(function*(){let X=0;for(;;)try{const ne=yield k._openDb();return yield E(ne)}catch(ne){if(X++>3)throw ne;k.db&&(k.db.close(),k.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,P.Z)(function*(){return Dl()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,P.Z)(function*(){E.receiver=Gs._getInstance(function va(){return Dl()?self:null}()),E.receiver._subscribe("keyChanged",function(){var k=(0,P.Z)(function*(X,ne){return{keyProcessed:(yield E._poll()).includes(ne.key)}});return function(X,ne){return k.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var k=(0,P.Z)(function*(X,ne){return["keyChanged"]});return function(X,ne){return k.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,P.Z)(function*(){var k,X;if(E.activeServiceWorker=yield function uu(){return Il.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new sh(E.activeServiceWorker);const ne=yield E.sender._send("ping",{},800);ne&&null!==(k=ne[0])&&void 0!==k&&k.fulfilled&&null!==(X=ne[0])&&void 0!==X&&X.value.includes("keyChanged")&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var k=this;return(0,P.Z)(function*(){if(k.sender&&k.activeServiceWorker&&function ya(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===k.activeServiceWorker)try{yield k.sender._send("keyChanged",{key:E},k.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,P.Z)(function*(){try{if(!indexedDB)return!1;const E=yield Gi();return yield ys(E,_i,"1"),yield Zs(E,_i),!0}catch{}return!1})()}_withPendingWrite(E){var k=this;return(0,P.Z)(function*(){k.pendingWrites++;try{yield E()}finally{k.pendingWrites--}})()}_set(E,k){var X=this;return(0,P.Z)(function*(){return X._withPendingWrite((0,P.Z)(function*(){return yield X._withRetries(ne=>ys(ne,E,k)),X.localCache[E]=k,X.notifyServiceWorker(E)}))})()}_get(E){var k=this;return(0,P.Z)(function*(){const X=yield k._withRetries(ne=>function qt(T,v){return ai.apply(this,arguments)}(ne,E));return k.localCache[E]=X,X})()}_remove(E){var k=this;return(0,P.Z)(function*(){return k._withPendingWrite((0,P.Z)(function*(){return yield k._withRetries(X=>Zs(X,E)),delete k.localCache[E],k.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,P.Z)(function*(){const k=yield E._withRetries(we=>{const Le=ac(we,!1).getAll();return new Ks(Le).toPromise()});if(!k)return[];if(0!==E.pendingWrites)return[];const X=[],ne=new Set;for(const{fbase_key:we,value:Le}of k)ne.add(we),JSON.stringify(E.localCache[we])!==JSON.stringify(Le)&&(E.notifyListeners(we,Le),X.push(we));for(const we of Object.keys(E.localCache))E.localCache[we]&&!ne.has(we)&&(E.notifyListeners(we,null),X.push(we));return X})()}notifyListeners(E,k){this.localCache[E]=k;const X=this.listeners[E];if(X)for(const ne of Array.from(X))ne(k)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,P.Z)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,k){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(k)}_removeListener(E,k){this.listeners[E]&&(this.listeners[E].delete(k),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})(),Vo=1e12;class vs{constructor(v){this.auth=v,this.counter=Vo,this._widgets=new Map}render(v,E){const k=this.counter;return this._widgets.set(k,new Nl(v,this.auth.name,E||{})),this.counter++,k}reset(v){var E;const k=v||Vo;null===(E=this._widgets.get(k))||void 0===E||E.delete(),this._widgets.delete(k)}getResponse(v){var E;return(null===(E=this._widgets.get(v||Vo))||void 0===E?void 0:E.getResponse())||""}execute(v){var E=this;return(0,P.Z)(function*(){var k;return null===(k=E._widgets.get(v||Vo))||void 0===k||k.execute(),""})()}}class Nl{constructor(v,E,k){this.params=k,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const X="string"==typeof v?document.getElementById(v):v;Et(X,"argument-error",{appName:E}),this.container=X,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Nr(T){const v=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<T;k++)v.push(E.charAt(Math.floor(62*Math.random())));return v.join("")}(50);const{callback:v,"expired-callback":E}=this.params;if(v)try{v(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ka=Jl("rcb"),lc=new jn(3e4,6e4);class sd{constructor(){var v;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(v=si().grecaptcha)||void 0===v||!v.render)}load(v,E=""){return Et(function uc(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(E),v,"argument-error"),this.shouldResolveImmediately(E)&&sr(si().grecaptcha)?Promise.resolve(si().grecaptcha):new Promise((k,X)=>{const ne=si().setTimeout(()=>{X(ti(v,"network-request-failed"))},lc.get());si()[Ka]=()=>{si().clearTimeout(ne),delete si()[Ka];const Le=si().grecaptcha;if(!Le||!sr(Le))return void X(ti(v,"internal-error"));const dt=Le.render;Le.render=(it,vt)=>{const tn=dt(it,vt);return this.counter++,tn},this.hostLanguage=E,k(Le)},pl(`https://www.google.com/recaptcha/api.js??${(0,c.xO)({onload:Ka,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(ne),X(ti(v,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(v){var E;return!(null===(E=si().grecaptcha)||void 0===E||!E.render)&&(v===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ba{load(v){return(0,P.Z)(function*(){return new vs(v)})()}clearedOneInstance(){}}const wa="recaptcha",Ol={theme:"light",type:"image"};class Pl{constructor(v,E=Object.assign({},Ol),k){this.parameters=E,this.type=wa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kn(k),this.isInvisible="invisible"===this.parameters.size,Et(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const X="string"==typeof v?document.getElementById(v):v;Et(X,this.auth,"argument-error"),this.container=X,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ba:new sd,this.validateStartingState()}verify(){var v=this;return(0,P.Z)(function*(){v.assertNotDestroyed();const E=yield v.render(),k=v.getAssertedRecaptcha();return k.getResponse(E)||new Promise(ne=>{const we=Le=>{Le&&(v.tokenChangeListeners.delete(we),ne(Le))};v.tokenChangeListeners.add(we),v.isInvisible&&k.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(v){return Promise.reject(v)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(v=>{throw this.renderPromise=null,v})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(v=>{this.container.removeChild(v)})}validateStartingState(){Et(!this.parameters.sitekey,this.auth,"argument-error"),Et(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Et(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(v){return E=>{if(this.tokenChangeListeners.forEach(k=>k(E)),"function"==typeof v)v(E);else if("string"==typeof v){const k=si()[v];"function"==typeof k&&k(E)}}}assertNotDestroyed(){Et(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var v=this;return(0,P.Z)(function*(){if(yield v.init(),!v.widgetId){let E=v.container;if(!v.isInvisible){const k=document.createElement("div");E.appendChild(k),E=k}v.widgetId=v.getAssertedRecaptcha().render(E,v.parameters)}return v.widgetId})()}init(){var v=this;return(0,P.Z)(function*(){Et(Gt()&&!Dl(),v.auth,"internal-error"),yield function Rl(){let T=null;return new Promise(v=>{"complete"!==document.readyState?(T=()=>v(),window.addEventListener("load",T)):v()}).catch(v=>{throw T&&window.removeEventListener("load",T),v})}(),v.recaptcha=yield v._recaptchaLoader.load(v.auth,v.auth.languageCode||void 0);const E=yield function $u(T){return hl.apply(this,arguments)}(v.auth);Et(E,v.auth,"internal-error"),v.parameters.sitekey=E})()}getAssertedRecaptcha(){return Et(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xa{constructor(v,E){this.verificationId=v,this.onConfirmation=E}confirm(v){const E=Us._fromVerification(this.verificationId,v);return this.onConfirmation(E)}}function lh(T,v,E){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,P.Z)(function*(T,v,E){const k=Kn(T),X=yield kl(k,v,(0,c.m9)(E));return new xa(X,ne=>Hn(k,ne))})).apply(this,arguments)}function Qs(T,v,E){return yo.apply(this,arguments)}function yo(){return(yo=(0,P.Z)(function*(T,v,E){const k=(0,c.m9)(T);yield za(!1,k,"phone");const X=yield kl(k.auth,v,(0,c.m9)(E));return new xa(X,ne=>th(k,ne))})).apply(this,arguments)}function Ai(T,v,E){return bs.apply(this,arguments)}function bs(){return(bs=(0,P.Z)(function*(T,v,E){const k=(0,c.m9)(T),X=yield kl(k.auth,v,(0,c.m9)(E));return new xa(X,ne=>Zu(k,ne))})).apply(this,arguments)}function kl(T,v,E){return $t.apply(this,arguments)}function $t(){return $t=(0,P.Z)(function*(T,v,E){var k;const X=yield E.verify();try{let ne;if(Et("string"==typeof X,T,"argument-error"),Et(E.type===wa,T,"argument-error"),ne="string"==typeof v?{phoneNumber:v}:v,"session"in ne){const we=ne.session;if("phoneNumber"in ne)return Et("enroll"===we.type,T,"internal-error"),(yield function _o(T,v){return rn(T,"POST","/v2/accounts/mfaEnrollment:start",Wn(T,v))}(T,{idToken:we.credential,phoneEnrollmentInfo:{phoneNumber:ne.phoneNumber,recaptchaToken:X}})).phoneSessionInfo.sessionInfo;{Et("signin"===we.type,T,"internal-error");const Le=(null===(k=ne.multiFactorHint)||void 0===k?void 0:k.uid)||ne.multiFactorUid;return Et(Le,T,"missing-multi-factor-info"),(yield function du(T,v){return rn(T,"POST","/v2/accounts/mfaSignIn:start",Wn(T,v))}(T,{mfaPendingCredential:we.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:X}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:we}=yield function qd(T,v){return jc.apply(this,arguments)}(T,{phoneNumber:ne.phoneNumber,recaptchaToken:X});return we}}finally{E._reset()}}),$t.apply(this,arguments)}function jr(T,v){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,P.Z)(function*(T,v){yield nu((0,c.m9)(T),v)})).apply(this,arguments)}let hu=(()=>{class T{constructor(E){this.providerId=T.PROVIDER_ID,this.auth=Kn(E)}verifyPhoneNumber(E,k){return kl(this.auth,E,(0,c.m9)(k))}static credential(E,k){return Us._fromVerification(E,k)}static credentialFromResult(E){return T.credentialFromTaggedObject(E)}static credentialFromError(E){return T.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:k,temporaryProof:X}=E;return k&&X?Us._fromTokenResponse(k,X):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Or(T,v){return v?co(v):(Et(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class li extends st{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return Ri(v,this._buildIdpRequest())}_linkToIdToken(v,E){return Ri(v,this._buildIdpRequest(E))}_getReauthenticationResolver(v){return Ri(v,this._buildIdpRequest())}_buildIdpRequest(v){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(E.idToken=v),E}}function cc(T){return ru(T.auth,new li(T),T.bypassAuthState)}function uh(T){const{auth:v,user:E}=T;return Et(E,v,"internal-error"),eh(E,new li(T),T.bypassAuthState)}function dc(T){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,P.Z)(function*(T){const{auth:v,user:E}=T;return Et(E,v,"internal-error"),nu(E,new li(T),T.bypassAuthState)})).apply(this,arguments)}class Uo{constructor(v,E,k,X,ne=!1){this.auth=v,this.resolver=k,this.user=X,this.bypassAuthState=ne,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var v=this;return new Promise(function(){var E=(0,P.Z)(function*(k,X){v.pendingPromise={resolve:k,reject:X};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(ne){v.reject(ne)}});return function(k,X){return E.apply(this,arguments)}}())}onAuthEvent(v){var E=this;return(0,P.Z)(function*(){const{urlResponse:k,sessionId:X,postBody:ne,tenantId:we,error:Le,type:dt}=v;if(Le)return void E.reject(Le);const it={auth:E.auth,requestUri:k,sessionId:X,tenantId:we||void 0,postBody:ne||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(dt)(it))}catch(vt){E.reject(vt)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return cc;case"linkViaPopup":case"linkViaRedirect":return dc;case"reauthViaPopup":case"reauthViaRedirect":return uh;default:er(this.auth,"internal-error")}}resolve(v){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){Ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pr=new jn(2e3,1e4);function es(T,v,E){return pu.apply(this,arguments)}function pu(){return(pu=(0,P.Z)(function*(T,v,E){const k=Kn(T);ni(T,v,mo);const X=Or(k,E);return new Js(k,"signInViaPopup",v,X).executeNotNull()})).apply(this,arguments)}function Ea(T,v,E){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,P.Z)(function*(T,v,E){const k=(0,c.m9)(T);ni(k.auth,v,mo);const X=Or(k.auth,E);return new Js(k.auth,"reauthViaPopup",v,X,k).executeNotNull()})).apply(this,arguments)}function ad(T,v,E){return hc.apply(this,arguments)}function hc(){return(hc=(0,P.Z)(function*(T,v,E){const k=(0,c.m9)(T);ni(k.auth,v,mo);const X=Or(k.auth,E);return new Js(k.auth,"linkViaPopup",v,X,k).executeNotNull()})).apply(this,arguments)}let Js=(()=>{class T extends Uo{constructor(E,k,X,ne,we){super(E,k,ne,we),this.provider=X,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var E=this;return(0,P.Z)(function*(){const k=yield E.execute();return Et(k,E.auth,"internal-error"),k})()}onExecution(){var E=this;return(0,P.Z)(function*(){Ft(1===E.filter.length,"Popup operations only handle one event");const k=Er();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],k),E.authWindow.associatedEvent=k,E.resolver._originValidation(E.auth).catch(X=>{E.reject(X)}),E.resolver._isIframeWebStorageSupported(E.auth,X=>{X||E.reject(ti(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const E=()=>{var k,X;this.pollId=null!==(X=null===(k=this.authWindow)||void 0===k?void 0:k.window)&&void 0!==X&&X.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ti(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(E,Pr.get())};E()}}return T.currentPopupAction=null,T})();const Tn="pendingRedirect",zo=new Map;class ng extends Uo{constructor(v,E,k=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,k),this.eventId=null}execute(){var v=()=>super.execute,E=this;return(0,P.Z)(function*(){let k=zo.get(E.auth._key());if(!k){try{const ne=(yield function pc(T,v){return Ll.apply(this,arguments)}(E.resolver,E.auth))?yield v().call(E):null;k=()=>Promise.resolve(ne)}catch(X){k=()=>Promise.reject(X)}zo.set(E.auth._key(),k)}return E.bypassAuthState||zo.set(E.auth._key(),()=>Promise.resolve(null)),k()})()}onAuthEvent(v){var E=()=>super.onAuthEvent,k=this;return(0,P.Z)(function*(){if("signInViaRedirect"===v.type)return E().call(k,v);if("unknown"!==v.type){if(v.eventId){const X=yield k.auth._redirectUserForId(v.eventId);if(X)return k.user=X,E().call(k,v);k.resolve(null)}}else k.resolve(null)})()}onExecution(){return(0,P.Z)(function*(){})()}cleanUp(){}}function Ll(){return(Ll=(0,P.Z)(function*(T,v){const E=dh(v),k=vo(T);if(!(yield k._isAvailable()))return!1;const X="true"===(yield k._get(E));return yield k._remove(E),X})).apply(this,arguments)}function ch(T,v){return ts.apply(this,arguments)}function ts(){return(ts=(0,P.Z)(function*(T,v){return vo(T)._set(dh(v),"true")})).apply(this,arguments)}function Rr(){zo.clear()}function fc(T,v){zo.set(T._key(),v)}function vo(T){return co(T._redirectPersistence)}function dh(T){return ks(Tn,T.config.apiKey,T.name)}function ui(T,v,E){return function Bl(T,v,E){return ws.apply(this,arguments)}(T,v,E)}function ws(){return(ws=(0,P.Z)(function*(T,v,E){const k=Kn(T);ni(T,v,mo),yield k._initializationPromise;const X=Or(k,E);return yield ch(X,k),X._openRedirect(k,v,"signInViaRedirect")})).apply(this,arguments)}function mc(T,v,E){return function gc(T,v,E){return fu.apply(this,arguments)}(T,v,E)}function fu(){return(fu=(0,P.Z)(function*(T,v,E){const k=(0,c.m9)(T);ni(k.auth,v,mo),yield k.auth._initializationPromise;const X=Or(k.auth,E);yield ch(X,k.auth);const ne=yield De(k);return X._openRedirect(k.auth,v,"reauthViaRedirect",ne)})).apply(this,arguments)}function vp(T,v,E){return function mu(T,v,E){return Ca.apply(this,arguments)}(T,v,E)}function Ca(){return(Ca=(0,P.Z)(function*(T,v,E){const k=(0,c.m9)(T);ni(k.auth,v,mo),yield k.auth._initializationPromise;const X=Or(k.auth,E);yield za(!1,k,v.providerId),yield ch(X,k.auth);const ne=yield De(k);return X._openRedirect(k.auth,v,"linkViaRedirect",ne)})).apply(this,arguments)}function L(T,v){return $.apply(this,arguments)}function $(){return($=(0,P.Z)(function*(T,v){return yield Kn(T)._initializationPromise,ee(T,v,!1)})).apply(this,arguments)}function ee(T,v){return ue.apply(this,arguments)}function ue(){return(ue=(0,P.Z)(function*(T,v,E=!1){const k=Kn(T),X=Or(k,v),we=yield new ng(k,X,E).execute();return we&&!E&&(delete we.user._redirectEventId,yield k._persistUserIfCurrent(we.user),yield k._setRedirectUser(null,v)),we})).apply(this,arguments)}function De(T){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,P.Z)(function*(T){const v=Er(`${T.uid}:::`);return T._redirectEventId=v,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),v})).apply(this,arguments)}class Rt{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let E=!1;return this.consumers.forEach(k=>{this.isEventForConsumer(v,k)&&(E=!0,this.sendToConsumer(v,k),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function yn(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jt(T);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=v,E=!0)),E}sendToConsumer(v,E){var k;if(v.error&&!jt(v)){const X=(null===(k=v.error.code)||void 0===k?void 0:k.split("auth/")[1])||"internal-error";E.onError(ti(this.auth,X))}else E.onAuthEvent(v)}isEventForConsumer(v,E){const k=null===E.eventId||!!v.eventId&&v.eventId===E.eventId;return E.filter.includes(v.type)&&k}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dt(v))}saveEventToCache(v){this.cachedEventUids.add(Dt(v)),this.lastProcessedEventTime=Date.now()}}function Dt(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(v=>v).join("-")}function jt({type:T,error:v}){return"unknown"===T&&"auth/no-auth-event"===v?.code}function hn(T){return gn.apply(this,arguments)}function gn(){return(gn=(0,P.Z)(function*(T,v={}){return rn(T,"GET","/v1/projects",v)})).apply(this,arguments)}const kr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xs=/^https?/;function ns(){return(ns=(0,P.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:v}=yield hn(T);for(const E of v)try{if(rs(E))return}catch{}er(T,"unauthorized-domain")})).apply(this,arguments)}function rs(T){const v=ze(),{protocol:E,hostname:k}=new URL(v);if(T.startsWith("chrome-extension://")){const we=new URL(T);return""===we.hostname&&""===k?"chrome-extension:"===E&&T.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===E&&we.hostname===k}if(!xs.test(E))return!1;if(kr.test(T))return k===T;const X=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+X+"|"+X+")$","i").test(k)}const ea=new jn(3e4,6e4);function gu(){const T=si().___jsl;if(T?.H)for(const v of Object.keys(T.H))if(T.H[v].r=T.H[v].r||[],T.H[v].L=T.H[v].L||[],T.H[v].r=[...T.H[v].L],T.CP)for(let E=0;E<T.CP.length;E++)T.CP[E]=null}let ld=null;const ig=new jn(5e3,15e3),vc="__/auth/iframe",ud="emulator/auth/iframe",og={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bp(T){const v=T.config;Et(v.authDomain,T,"auth-domain-config-required");const E=v.emulator?To(v,ud):`https://${T.config.authDomain}/${vc}`,k={apiKey:v.apiKey,appName:T.name,v:B.SDK_VERSION},X=dy.get(T.config.apiHost);X&&(k.eid=X);const ne=T._getFrameworks();return ne.length&&(k.fw=ne.join(",")),`${E}?${(0,c.xO)(k).slice(1)}`}function kf(){return kf=(0,P.Z)(function*(T){const v=yield function rg(T){return ld=ld||function yc(T){return new Promise((v,E)=>{var k,X,ne;function we(){gu(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{gu(),E(ti(T,"network-request-failed"))},timeout:ea.get()})}if(null!==(X=null===(k=si().gapi)||void 0===k?void 0:k.iframes)&&void 0!==X&&X.Iframe)v(gapi.iframes.getContext());else{if(null===(ne=si().gapi)||void 0===ne||!ne.load){const Le=Jl("iframefcb");return si()[Le]=()=>{gapi.load?we():E(ti(T,"network-request-failed"))},pl(`https://apis.google.com/js/api.js?onload=${Le}`).catch(dt=>E(dt))}we()}}).catch(v=>{throw ld=null,v})}(T),ld}(T),E=si().gapi;return Et(E,T,"internal-error"),v.open({where:document.body,url:bp(T),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:og,dontclear:!0},k=>new Promise(function(){var X=(0,P.Z)(function*(ne,we){yield k.restyle({setHideOnLeave:!1});const Le=ti(T,"network-request-failed"),dt=si().setTimeout(()=>{we(Le)},ig.get());function it(){si().clearTimeout(dt),ne(k)}k.ping(it).then(it,()=>{we(Le)})});return function(ne,we){return X.apply(this,arguments)}}()))}),kf.apply(this,arguments)}const _u={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bc{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const wp="__/auth/handler",hy="emulator/auth/handler",ph=encodeURIComponent("fac");function xp(T,v,E,k,X,ne){return hd.apply(this,arguments)}function hd(){return(hd=(0,P.Z)(function*(T,v,E,k,X,ne){Et(T.config.authDomain,T,"auth-domain-config-required"),Et(T.config.apiKey,T,"invalid-api-key");const we={apiKey:T.config.apiKey,appName:T.name,authType:E,redirectUrl:k,v:B.SDK_VERSION,eventId:X};if(v instanceof mo){v.setDefaultLanguage(T.languageCode),we.providerId=v.providerId||"",(0,c.xb)(v.getCustomParameters())||(we.customParameters=JSON.stringify(v.getCustomParameters()));for(const[vt,tn]of Object.entries(ne||{}))we[vt]=tn}if(v instanceof Lr){const vt=v.getScopes().filter(tn=>""!==tn);vt.length>0&&(we.scopes=vt.join(","))}T.tenantId&&(we.tid=T.tenantId);const Le=we;for(const vt of Object.keys(Le))void 0===Le[vt]&&delete Le[vt];const dt=yield T._getAppCheckToken(),it=dt?`#${ph}=${encodeURIComponent(dt)}`:"";return`${function py({config:T}){return T.emulator?To(T,hy):`https://${T.authDomain}/${wp}`}(T)}?${(0,c.xO)(Le).slice(1)}${it}`})).apply(this,arguments)}const Ep="webStorageSupport",lg=class yu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oc,this._completeRedirectFn=ee,this._overrideRedirectResult=fc}_openPopup(v,E,k,X){var ne=this;return(0,P.Z)(function*(){var we;Ft(null===(we=ne.eventManagers[v._key()])||void 0===we?void 0:we.manager,"_initialize() not called before _openPopup()");const Le=yield xp(v,E,k,ze(),X);return function hh(T,v,E,k=500,X=600){const ne=Math.max((window.screen.availHeight-X)/2,0).toString(),we=Math.max((window.screen.availWidth-k)/2,0).toString();let Le="";const dt=Object.assign(Object.assign({},_u),{width:k.toString(),height:X.toString(),top:ne,left:we}),it=(0,c.z$)().toLowerCase();E&&(Le=Vc(it)?"_blank":E),Xl(it)&&(v=v||"http://localhost",dt.scrollbars="yes");const vt=Object.entries(dt).reduce((kn,[Br,Cr])=>`${kn}${Br}=${Cr},`,"");if(function Ql(T=(0,c.z$)()){var v;return zr(T)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(it)&&"_self"!==Le)return function ag(T,v){const E=document.createElement("a");E.href=T,E.target=v;const k=document.createEvent("MouseEvent");k.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(k)}(v||"",Le),new bc(null);const tn=window.open(v||"",Le,vt);Et(tn,T,"popup-blocked");try{tn.focus()}catch{}return new bc(tn)}(v,Le,Er())})()}_openRedirect(v,E,k,X){var ne=this;return(0,P.Z)(function*(){return yield ne._originValidation(v),function nd(T){si().location.href=T}(yield xp(v,E,k,ze(),X)),new Promise(()=>{})})()}_initialize(v){const E=v._key();if(this.eventManagers[E]){const{manager:X,promise:ne}=this.eventManagers[E];return X?Promise.resolve(X):(Ft(ne,"If manager is not set, promise should be"),ne)}const k=this.initAndGetManager(v);return this.eventManagers[E]={promise:k},k.catch(()=>{delete this.eventManagers[E]}),k}initAndGetManager(v){var E=this;return(0,P.Z)(function*(){const k=yield function Rf(T){return kf.apply(this,arguments)}(v),X=new Rt(v);return k.register("authEvent",ne=>(Et(ne?.authEvent,v,"invalid-auth-event"),{status:X.onEvent(ne.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[v._key()]={manager:X},E.iframes[v._key()]=k,X})()}_isIframeWebStorageSupported(v,E){this.iframes[v._key()].send(Ep,{type:Ep},X=>{var ne;const we=null===(ne=X?.[0])||void 0===ne?void 0:ne[Ep];void 0!==we&&E(!!we),er(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const E=v._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function _c(T){return ns.apply(this,arguments)}(v)),this.originValidationPromises[E]}get _shouldInitProactively(){return Uc()||Fs()||zr()}};class Lf{constructor(v){this.factorId=v}_process(v,E,k){switch(E.type){case"enroll":return this._finalizeEnroll(v,E.credential,k);case"signin":return this._finalizeSignIn(v,E.credential);default:return Vr("unexpected MultiFactorSessionType")}}}class Cp extends Lf{constructor(v){super("phone"),this.credential=v}static _fromCredential(v){return new Cp(v)}_finalizeEnroll(v,E,k){return function Wi(T,v){return rn(T,"POST","/v2/accounts/mfaEnrollment:finalize",Wn(T,v))}(v,{idToken:E,displayName:k,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(v,E){return function Al(T,v){return rn(T,"POST","/v2/accounts/mfaSignIn:finalize",Wn(T,v))}(v,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ug=(()=>{class T{constructor(){}static assertion(E){return Cp._fromCredential(E)}}return T.FACTOR_ID="phone",T})();var Za="@firebase/auth";class bu{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var E=this;return(0,P.Z)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const E=this.auth.onIdTokenChanged(k=>{v(k?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,E),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const E=this.internalListeners.get(v);E&&(this.internalListeners.delete(v),E(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,c.Pz)("authIdTokenMaxAge"),function Sp(T){(0,B._registerComponent)(new ft.wA("auth",(v,{options:E})=>{const k=v.getProvider("app").getImmediate(),X=v.getProvider("heartbeat"),ne=v.getProvider("app-check-internal"),{apiKey:we,authDomain:Le}=k.options;Et(we&&!we.includes(":"),"invalid-api-key",{appName:k.name});const dt={apiKey:we,authDomain:Le,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dl(T)},it=new Wu(k,X,ne,dt);return function Ls(T,v){const E=v?.persistence||[],k=(Array.isArray(E)?E:[E]).map(co);v?.errorMap&&T._updateErrorMap(v.errorMap),T._initializeWithPersistence(k,v?.popupRedirectResolver)}(it,E),it},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,E,k)=>{v.getProvider("auth-internal").initialize()})),(0,B._registerComponent)(new ft.wA("auth-internal",v=>{const E=Kn(v.getProvider("auth").getImmediate());return new bu(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,B.registerVersion)(Za,"0.23.2",function Ya(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,B.registerVersion)(Za,"0.23.2","esm2017")}("Browser")},468:(N,M,S)=>{"use strict";S.d(M,{$C:()=>Yt,IQ:()=>vn,V1:()=>hi,pm:()=>Yn});var P=S(5861),c=S(534),B=S(9058),R=S(4537);const W="type.googleapis.com/google.protobuf.Int64Value",Y="type.googleapis.com/google.protobuf.UInt64Value";function Q(ft,Nt){const Ct={};for(const Zt in ft)ft.hasOwnProperty(Zt)&&(Ct[Zt]=Nt(ft[Zt]));return Ct}function pe(ft){if(null==ft)return null;if(ft instanceof Number&&(ft=ft.valueOf()),"number"==typeof ft&&isFinite(ft)||!0===ft||!1===ft||"[object String]"===Object.prototype.toString.call(ft))return ft;if(ft instanceof Date)return ft.toISOString();if(Array.isArray(ft))return ft.map(Nt=>pe(Nt));if("function"==typeof ft||"object"==typeof ft)return Q(ft,Nt=>pe(Nt));throw new Error("Data cannot be encoded in JSON: "+ft)}function Ce(ft){if(null==ft)return ft;if(ft["@type"])switch(ft["@type"]){case W:case Y:{const Nt=Number(ft.value);if(isNaN(Nt))throw new Error("Data cannot be decoded from JSON: "+ft);return Nt}default:throw new Error("Data cannot be decoded from JSON: "+ft)}return Array.isArray(ft)?ft.map(Nt=>Ce(Nt)):"function"==typeof ft||"object"==typeof ft?Q(ft,Nt=>Ce(Nt)):ft}const ce="functions",me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends B.ZR{constructor(Nt,Ct,Zt){super(`${ce}/${Nt}`,Ct||""),this.details=Zt}}class wt{constructor(Nt,Ct,Zt){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=Nt.getImmediate({optional:!0}),this.messaging=Ct.getImmediate({optional:!0}),this.auth||Nt.get().then(nn=>this.auth=nn,()=>{}),this.messaging||Ct.get().then(nn=>this.messaging=nn,()=>{}),this.appCheck||Zt.get().then(nn=>this.appCheck=nn,()=>{})}getAuthToken(){var Nt=this;return(0,P.Z)(function*(){if(Nt.auth)try{const Ct=yield Nt.auth.getToken();return Ct?.accessToken}catch{return}})()}getMessagingToken(){var Nt=this;return(0,P.Z)(function*(){if(Nt.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield Nt.messaging.getToken()}catch{return}})()}getAppCheckToken(Nt){var Ct=this;return(0,P.Z)(function*(){if(Ct.appCheck){const Zt=Nt?yield Ct.appCheck.getLimitedUseToken():yield Ct.appCheck.getToken();return Zt.error?null:Zt.token}return null})()}getContext(Nt){var Ct=this;return(0,P.Z)(function*(){return{authToken:yield Ct.getAuthToken(),messagingToken:yield Ct.getMessagingToken(),appCheckToken:yield Ct.getAppCheckToken(Nt)}})()}}const lt="us-central1";class $e{constructor(Nt,Ct,Zt,nn,fn=lt,pn){this.app=Nt,this.fetchImpl=pn,this.emulatorOrigin=null,this.contextProvider=new wt(Ct,Zt,nn),this.cancelAllRequests=new Promise(Kr=>{this.deleteService=()=>Promise.resolve(Kr())});try{const Kr=new URL(fn);this.customDomain=Kr.origin,this.region=lt}catch{this.customDomain=null,this.region=fn}}_delete(){return this.deleteService()}_url(Nt){const Ct=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${Ct}/${this.region}/${Nt}`:null!==this.customDomain?`${this.customDomain}/${Nt}`:`https://${this.region}-${Ct}.cloudfunctions.net/${Nt}`}}function Vt(ft,Nt,Ct,Zt){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*(ft,Nt,Ct,Zt){let nn;Ct["Content-Type"]="application/json";try{nn=yield Zt(ft,{method:"POST",body:JSON.stringify(Nt),headers:Ct})}catch{return{status:0,json:null}}let fn=null;try{fn=yield nn.json()}catch{}return{status:nn.status,json:fn}})).apply(this,arguments)}function pt(ft,Nt,Ct,Zt){return kt.apply(this,arguments)}function kt(){return(kt=(0,P.Z)(function*(ft,Nt,Ct,Zt){const nn={data:Ct=pe(Ct)},fn={},pn=yield ft.contextProvider.getContext(Zt.limitedUseAppCheckTokens);pn.authToken&&(fn.Authorization="Bearer "+pn.authToken),pn.messagingToken&&(fn["Firebase-Instance-ID-Token"]=pn.messagingToken),null!==pn.appCheckToken&&(fn["X-Firebase-AppCheck"]=pn.appCheckToken);const lo=function le(ft){let Nt=null;return{promise:new Promise((Ct,Zt)=>{Nt=setTimeout(()=>{Zt(new Ne("deadline-exceeded","deadline-exceeded"))},ft)}),cancel:()=>{Nt&&clearTimeout(Nt)}}}(Zt.timeout||7e4),ei=yield Promise.race([Vt(Nt,nn,fn,ft.fetchImpl),lo.promise,ft.cancelAllRequests]);if(lo.cancel(),!ei)throw new Ne("cancelled","Firebase Functions instance was deleted.");const _r=function tt(ft,Nt){let nn,Ct=function at(ft){if(ft>=200&&ft<300)return"ok";switch(ft){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(ft),Zt=Ct;try{const fn=Nt&&Nt.error;if(fn){const pn=fn.status;if("string"==typeof pn){if(!me[pn])return new Ne("internal","internal");Ct=me[pn],Zt=pn}const Kr=fn.message;"string"==typeof Kr&&(Zt=Kr),nn=fn.details,void 0!==nn&&(nn=Ce(nn))}}catch{}return"ok"===Ct?null:new Ne(Ct,Zt,nn)}(ei.status,ei.json);if(_r)throw _r;if(!ei.json)throw new Ne("internal","Response is not valid JSON object.");let Rs=ei.json.data;if(typeof Rs>"u"&&(Rs=ei.json.result),typeof Rs>"u")throw new Ne("internal","Response is missing data field.");return{data:Ce(Rs)}})).apply(this,arguments)}const Oe="@firebase/functions";function Yt(ft=(0,c.getApp)(),Nt=lt){const Zt=(0,c._getProvider)((0,B.m9)(ft),ce).getImmediate({identifier:Nt}),nn=(0,B.P0)("functions");return nn&&Yn(Zt,...nn),Zt}function Yn(ft,Nt,Ct){!function xt(ft,Nt,Ct){ft.emulatorOrigin=`http://${Nt}:${Ct}`}((0,B.m9)(ft),Nt,Ct)}function hi(ft,Nt,Ct){return function It(ft,Nt,Ct){return Zt=>function Ye(ft,Nt,Ct,Zt){const nn=ft._url(Nt);return pt(ft,nn,Ct,Zt)}(ft,Nt,Zt,Ct||{})}((0,B.m9)(ft),Nt,Ct)}function vn(ft,Nt,Ct){return function Ie(ft,Nt,Ct){return Zt=>pt(ft,Nt,Zt,Ct||{})}((0,B.m9)(ft),Nt,Ct)}!function St(ft,Nt){(0,c._registerComponent)(new R.wA(ce,(Zt,{instanceIdentifier:nn})=>{const fn=Zt.getProvider("app").getImmediate(),pn=Zt.getProvider("auth-internal"),Kr=Zt.getProvider("messaging-internal"),lo=Zt.getProvider("app-check-internal");return new $e(fn,pn,Kr,lo,nn,ft)},"PUBLIC").setMultipleInstances(!0)),(0,c.registerVersion)(Oe,"0.10.0",Nt),(0,c.registerVersion)(Oe,"0.10.0","esm2017")}(fetch.bind(self))},9058:(N,M,S)=>{"use strict";S.d(M,{$s:()=>Xi,BH:()=>Ue,L:()=>Ce,LL:()=>nn,P0:()=>It,Pz:()=>Vt,UG:()=>Oe,US:()=>Y,ZB:()=>Ne,ZR:()=>Zt,aH:()=>Ie,b$:()=>Mt,eu:()=>ft,hl:()=>vn,jU:()=>We,m9:()=>nr,ne:()=>Ut,pd:()=>ze,r3:()=>uo,ru:()=>Fe,tV:()=>ce,uI:()=>kt,vZ:()=>ni,w1:()=>St,xO:()=>Vr,xb:()=>ti,z$:()=>pt,zI:()=>Nt,zd:()=>Ft});const R=function(Ee){const be=[];let Me=0;for(let nt=0;nt<Ee.length;nt++){let je=Ee.charCodeAt(nt);je<128?be[Me++]=je:je<2048?(be[Me++]=je>>6|192,be[Me++]=63&je|128):55296==(64512&je)&&nt+1<Ee.length&&56320==(64512&Ee.charCodeAt(nt+1))?(je=65536+((1023&je)<<10)+(1023&Ee.charCodeAt(++nt)),be[Me++]=je>>18|240,be[Me++]=je>>12&63|128,be[Me++]=je>>6&63|128,be[Me++]=63&je|128):(be[Me++]=je>>12|224,be[Me++]=je>>6&63|128,be[Me++]=63&je|128)}return be},Y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ee,be){if(!Array.isArray(Ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Me=be?this.byteToCharMapWebSafe_:this.byteToCharMap_,nt=[];for(let je=0;je<Ee.length;je+=3){const Ht=Ee[je],on=je+1<Ee.length,Mn=on?Ee[je+1]:0,rr=je+2<Ee.length,xr=rr?Ee[je+2]:0;let pr=(15&Mn)<<2|xr>>6,hs=63&xr;rr||(hs=64,on||(pr=64)),nt.push(Me[Ht>>2],Me[(3&Ht)<<4|Mn>>4],Me[pr],Me[hs])}return nt.join("")},encodeString(Ee,be){return this.HAS_NATIVE_SUPPORT&&!be?btoa(Ee):this.encodeByteArray(R(Ee),be)},decodeString(Ee,be){return this.HAS_NATIVE_SUPPORT&&!be?atob(Ee):function(Ee){const be=[];let Me=0,nt=0;for(;Me<Ee.length;){const je=Ee[Me++];if(je<128)be[nt++]=String.fromCharCode(je);else if(je>191&&je<224){const Ht=Ee[Me++];be[nt++]=String.fromCharCode((31&je)<<6|63&Ht)}else if(je>239&&je<365){const rr=((7&je)<<18|(63&Ee[Me++])<<12|(63&Ee[Me++])<<6|63&Ee[Me++])-65536;be[nt++]=String.fromCharCode(55296+(rr>>10)),be[nt++]=String.fromCharCode(56320+(1023&rr))}else{const Ht=Ee[Me++],on=Ee[Me++];be[nt++]=String.fromCharCode((15&je)<<12|(63&Ht)<<6|63&on)}}return be.join("")}(this.decodeStringToByteArray(Ee,be))},decodeStringToByteArray(Ee,be){this.init_();const Me=be?this.charToByteMapWebSafe_:this.charToByteMap_,nt=[];for(let je=0;je<Ee.length;){const Ht=Me[Ee.charAt(je++)],Mn=je<Ee.length?Me[Ee.charAt(je)]:0;++je;const xr=je<Ee.length?Me[Ee.charAt(je)]:64;++je;const Fn=je<Ee.length?Me[Ee.charAt(je)]:64;if(++je,null==Ht||null==Mn||null==xr||null==Fn)throw new Q;nt.push(Ht<<2|Mn>>4),64!==xr&&(nt.push(Mn<<4&240|xr>>2),64!==Fn&&nt.push(xr<<6&192|Fn))}return nt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ee=0;Ee<this.ENCODED_VALS.length;Ee++)this.byteToCharMap_[Ee]=this.ENCODED_VALS.charAt(Ee),this.charToByteMap_[this.byteToCharMap_[Ee]]=Ee,this.byteToCharMapWebSafe_[Ee]=this.ENCODED_VALS_WEBSAFE.charAt(Ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ee]]=Ee,Ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ee)]=Ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ee)]=Ee)}}};class Q extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ce=function(Ee){return function(Ee){const be=R(Ee);return Y.encodeByteArray(be,!0)}(Ee).replace(/\./g,"")},ce=function(Ee){try{return Y.decodeString(Ee,!0)}catch(be){console.error("base64Decode failed: ",be)}return null};function Ne(Ee,be){if(!(be instanceof Object))return be;switch(be.constructor){case Date:return new Date(be.getTime());case Object:void 0===Ee&&(Ee={});break;case Array:Ee=[];break;default:return be}for(const Me in be)!be.hasOwnProperty(Me)||!at(Me)||(Ee[Me]=Ne(Ee[Me],be[Me]));return Ee}function at(Ee){return"__proto__"!==Ee}const $e=()=>{try{return function tt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ee=process.env.__FIREBASE_DEFAULTS__;return Ee?JSON.parse(Ee):void 0})()||(()=>{if(typeof document>"u")return;let Ee;try{Ee=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const be=Ee&&ce(Ee[1]);return be&&JSON.parse(be)})()}catch(Ee){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ee}`)}},It=Ee=>{const be=(Ee=>{var be,Me;return null===(Me=null===(be=$e())||void 0===be?void 0:be.emulatorHosts)||void 0===Me?void 0:Me[Ee]})(Ee);if(!be)return;const Me=be.lastIndexOf(":");if(Me<=0||Me+1===be.length)throw new Error(`Invalid host ${be} with no separate hostname and port!`);const nt=parseInt(be.substring(Me+1),10);return"["===be[0]?[be.substring(1,Me-1),nt]:[be.substring(0,Me),nt]},Ie=()=>{var Ee;return null===(Ee=$e())||void 0===Ee?void 0:Ee.config},Vt=Ee=>{var be;return null===(be=$e())||void 0===be?void 0:be[`_${Ee}`]};class Ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((be,Me)=>{this.resolve=be,this.reject=Me})}wrapCallback(be){return(Me,nt)=>{Me?this.reject(Me):this.resolve(nt),"function"==typeof be&&(this.promise.catch(()=>{}),1===be.length?be(Me):be(Me,nt))}}}function pt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function kt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function Oe(){var Ee;const be=null===(Ee=$e())||void 0===Ee?void 0:Ee.forceEnvironment;if("node"===be)return!0;if("browser"===be)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function We(){return"object"==typeof self&&self.self===self}function Fe(){const Ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ee&&void 0!==Ee.id}function Mt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function St(){const Ee=pt();return Ee.indexOf("MSIE ")>=0||Ee.indexOf("Trident/")>=0}function vn(){try{return"object"==typeof indexedDB}catch{return!1}}function ft(){return new Promise((Ee,be)=>{try{let Me=!0;const nt="validate-browser-context-for-indexeddb-analytics-module",je=self.indexedDB.open(nt);je.onsuccess=()=>{je.result.close(),Me||self.indexedDB.deleteDatabase(nt),Ee(!0)},je.onupgradeneeded=()=>{Me=!1},je.onerror=()=>{var Ht;be((null===(Ht=je.error)||void 0===Ht?void 0:Ht.message)||"")}}catch(Me){be(Me)}})}function Nt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Zt extends Error{constructor(be,Me,nt){super(Me),this.code=be,this.customData=nt,this.name="FirebaseError",Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nn.prototype.create)}}class nn{constructor(be,Me,nt){this.service=be,this.serviceName=Me,this.errors=nt}create(be,...Me){const nt=Me[0]||{},je=`${this.service}/${be}`,Ht=this.errors[be],on=Ht?function fn(Ee,be){return Ee.replace(pn,(Me,nt)=>{const je=be[nt];return null!=je?String(je):`<${nt}?>`})}(Ht,nt):"Error";return new Zt(je,`${this.serviceName}: ${on} (${je}).`,nt)}}const pn=/\{\$([^}]+)}/g;function uo(Ee,be){return Object.prototype.hasOwnProperty.call(Ee,be)}function ti(Ee){for(const be in Ee)if(Object.prototype.hasOwnProperty.call(Ee,be))return!1;return!0}function ni(Ee,be){if(Ee===be)return!0;const Me=Object.keys(Ee),nt=Object.keys(be);for(const je of Me){if(!nt.includes(je))return!1;const Ht=Ee[je],on=be[je];if(Yi(Ht)&&Yi(on)){if(!ni(Ht,on))return!1}else if(Ht!==on)return!1}for(const je of nt)if(!Me.includes(je))return!1;return!0}function Yi(Ee){return null!==Ee&&"object"==typeof Ee}function Vr(Ee){const be=[];for(const[Me,nt]of Object.entries(Ee))Array.isArray(nt)?nt.forEach(je=>{be.push(encodeURIComponent(Me)+"="+encodeURIComponent(je))}):be.push(encodeURIComponent(Me)+"="+encodeURIComponent(nt));return be.length?"&"+be.join("&"):""}function Ft(Ee){const be={};return Ee.replace(/^\?/,"").split("&").forEach(nt=>{if(nt){const[je,Ht]=nt.split("=");be[decodeURIComponent(je)]=decodeURIComponent(Ht)}}),be}function ze(Ee){const be=Ee.indexOf("?");if(!be)return"";const Me=Ee.indexOf("#",be);return Ee.substring(be,Me>0?Me:void 0)}function Ut(Ee,be){const Me=new Tt(Ee,be);return Me.subscribe.bind(Me)}class Tt{constructor(be,Me){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Me,this.task.then(()=>{be(this)}).catch(nt=>{this.error(nt)})}next(be){this.forEachObserver(Me=>{Me.next(be)})}error(be){this.forEachObserver(Me=>{Me.error(be)}),this.close(be)}complete(){this.forEachObserver(be=>{be.complete()}),this.close()}subscribe(be,Me,nt){let je;if(void 0===be&&void 0===Me&&void 0===nt)throw new Error("Missing Observer.");je=function jn(Ee,be){if("object"!=typeof Ee||null===Ee)return!1;for(const Me of be)if(Me in Ee&&"function"==typeof Ee[Me])return!0;return!1}(be,["next","error","complete"])?be:{next:be,error:Me,complete:nt},void 0===je.next&&(je.next=To),void 0===je.error&&(je.error=To),void 0===je.complete&&(je.complete=To);const Ht=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?je.error(this.finalError):je.complete()}catch{}}),this.observers.push(je),Ht}unsubscribeOne(be){void 0===this.observers||void 0===this.observers[be]||(delete this.observers[be],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(be){if(!this.finalized)for(let Me=0;Me<this.observers.length;Me++)this.sendOne(Me,be)}sendOne(be,Me){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[be])try{Me(this.observers[be])}catch(nt){typeof console<"u"&&console.error&&console.error(nt)}})}close(be){this.finalized||(this.finalized=!0,void 0!==be&&(this.finalError=be),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function To(){}const pi=1e3,Oi=2,Mo=144e5,ri=.5;function Xi(Ee,be=pi,Me=Oi){const nt=be*Math.pow(Me,Ee),je=Math.round(ri*nt*(Math.random()-.5)*2);return Math.min(Mo,nt+je)}function nr(Ee){return Ee&&Ee._delegate?Ee._delegate:Ee}},2137:(N,M,S)=>{"use strict";var P={};S.r(P),S.d(P,{AdadeltaOptimizer:()=>F.zJI,AdagradOptimizer:()=>F.HeW,AdamOptimizer:()=>F.a4z,AdamaxOptimizer:()=>F.DBS,Callback:()=>Qz,CallbackList:()=>lR,CustomCallback:()=>cR,DataStorage:()=>F.JLz,ENV:()=>F.ViN,Environment:()=>F.qAh,FrozenModel:()=>Yx.Gi,History:()=>uR,InputSpec:()=>Na,KernelBackend:()=>F.Zuw,LayerVariable:()=>IA,Model:()=>ly,MomentumOptimizer:()=>F.rIn,Optimizer:()=>F.gaJ,RMSPropOptimizer:()=>F.gVI,RNN:()=>cy,Rank:()=>F.yw1,Reduction:()=>F.IH3,SGDOptimizer:()=>F.DYp,Sequential:()=>UA,SymbolicTensor:()=>Af,Tensor:()=>F.esB,TensorBuffer:()=>F.YDk,Variable:()=>F._wD,abs:()=>F.WnP,acos:()=>F.Khb,acosh:()=>F.__u,add:()=>F.IHx,addN:()=>F.QBD,addStrict:()=>F.zqr,all:()=>F.$6P,any:()=>F.YjB,argMax:()=>F.NqF,argMin:()=>F.vHJ,asin:()=>F.ZRM,asinh:()=>F.VfV,atan:()=>F.z4N,atan2:()=>F.fvJ,atanh:()=>F.C80,avgPool:()=>F.wS1,basicLSTMCell:()=>F.zEQ,batchNormalization:()=>F.F08,batchNormalization2d:()=>F.JHc,batchNormalization3d:()=>F.csF,batchNormalization4d:()=>F.bVb,batchToSpaceND:()=>F.E4h,buffer:()=>F.f3b,cast:()=>F.pju,ceil:()=>F.mDi,clipByValue:()=>F.iUl,clone:()=>F.d9v,complex:()=>F.PYB,concat:()=>F.zoF,concat1d:()=>F.gME,concat2d:()=>F.Izb,concat3d:()=>F.MNy,concat4d:()=>F.ZaL,constraints:()=>TV,conv1d:()=>F.PAt,conv2d:()=>F.Tek,conv2dDerFilter:()=>F.Ioh,conv2dTranspose:()=>F.bc,cos:()=>F.mCk,cosh:()=>F.f9Y,cumsum:()=>F.zbp,customGrad:()=>F.cbc,depthToSpace:()=>F.nTT,depthwiseConv2d:()=>F.B10,dispose:()=>F.B90,disposeVariables:()=>F.N8o,div:()=>F.hiC,divStrict:()=>F.sz_,dot:()=>F.AKD,elu:()=>F.pyx,environment:()=>F.NZz,equal:()=>F.DgJ,equalStrict:()=>F.zVC,erf:()=>F.qNN,exp:()=>F.Qqt,expandDims:()=>F.dt4,expm1:()=>F.t$B,eye:()=>F.iyy,fft:()=>F.kp_,fill:()=>F.hlL,floor:()=>F.GWj,floorDiv:()=>F.qPi,fromPixels:()=>F.nXo,gather:()=>F.Iqj,gatherND:()=>F.dbB,getBackend:()=>F.N_N,grad:()=>F.UQy,grads:()=>F.tiA,greater:()=>F.pjt,greaterEqual:()=>F.brS,greaterEqualStrict:()=>F.bZ8,greaterStrict:()=>F.g1k,ifft:()=>F.Sxn,imag:()=>F.asL,image:()=>F.BHj,initializers:()=>a3,input:()=>DR,io:()=>F.io,keep:()=>F.CnY,layers:()=>Nz,leakyRelu:()=>F.hi7,less:()=>F.d9m,lessEqual:()=>F.zN1,lessEqualStrict:()=>F.SFm,lessStrict:()=>F.O_u,linalg:()=>F.$r2,linspace:()=>F.SX3,loadFrozenModel:()=>Yx.xG,loadModel:()=>cU,localResponseNormalization:()=>F.G9k,log:()=>F.cM7,log1p:()=>F.Krr,logSigmoid:()=>F.e_t,logSoftmax:()=>F.CmS,logSumExp:()=>F.l_t,logicalAnd:()=>F.HvI,logicalNot:()=>F.hJK,logicalOr:()=>F.K5V,logicalXor:()=>F.egP,losses:()=>F.MB5,matMul:()=>F.OI3,math:()=>F.mAU,max:()=>F.Fp7,maxPool:()=>F._sB,maximum:()=>F.gWQ,maximumStrict:()=>F._jk,mean:()=>F.J69,memory:()=>F.sq6,metrics:()=>qz,min:()=>F.VV$,minimum:()=>F.LTh,minimumStrict:()=>F.Wzl,mod:()=>F.wQq,modStrict:()=>F.IrJ,model:()=>lU,models:()=>Oz,moments:()=>F.Gi7,movingAverage:()=>F.p_,mul:()=>F.dC7,mulStrict:()=>F.NT4,multiRNNCell:()=>F.rq4,multinomial:()=>F.SJ_,neg:()=>F.W76,nextFrame:()=>F.glt,norm:()=>F.KOy,notEqual:()=>F.Quu,notEqualStrict:()=>F.FGK,oneHot:()=>F.lfX,ones:()=>F.iUs,onesLike:()=>F.JpU,op:()=>F.op,outerProduct:()=>F.N2O,pad:()=>F.vku,pad1d:()=>F.pNR,pad2d:()=>F.koy,pad3d:()=>F.t1L,pad4d:()=>F.lGY,pool:()=>F.d_R,pow:()=>F.sQ3,powStrict:()=>F.Lfl,prelu:()=>F.AL3,print:()=>F.S0v,prod:()=>F.WVs,profile:()=>F.N5s,rand:()=>F.TN_,randomNormal:()=>F.nGf,randomUniform:()=>F.LGj,range:()=>F.w6H,real:()=>F.kwC,reciprocal:()=>F.M25,registerCallbackConstructor:()=>dU,regularizers:()=>Xz,relu:()=>F.UYe,reshape:()=>F.XLQ,reverse:()=>F.GYS,reverse1d:()=>F.SDf,reverse2d:()=>F.diP,reverse3d:()=>F.sx7,reverse4d:()=>F.mG2,rfft:()=>F.QEs,round:()=>F.NMM,rsqrt:()=>F.bp0,scalar:()=>F.iD$,scatterND:()=>F.snQ,selu:()=>F.U8D,separableConv2d:()=>F.U_I,sequential:()=>uU,serialization:()=>F.m7h,setBackend:()=>F.CQI,setdiff1dAsync:()=>F.ODp,sigmoid:()=>F.XD2,sign:()=>F.Xxe,sin:()=>F.O$l,sinh:()=>F.R_K,slice:()=>F.tPi,slice1d:()=>F.jZU,slice2d:()=>F.SmN,slice3d:()=>F.CnO,slice4d:()=>F.p0P,softmax:()=>F.XAC,softplus:()=>F.Wvh,spaceToBatchND:()=>F.fBT,sparseToDense:()=>F.ers,spectral:()=>F.uN7,split:()=>F.Vl2,sqrt:()=>F._b3,square:()=>F.h62,squaredDifference:()=>F.$i,squaredDifferenceStrict:()=>F.r7z,squeeze:()=>F.L9e,stack:()=>F.knu,step:()=>F.Nbs,stridedSlice:()=>F.NXj,sub:()=>F.luU,subStrict:()=>F.ULw,sum:()=>F.Smz,tan:()=>F.ORZ,tanh:()=>F.AEp,tensor:()=>F.XeE,tensor1d:()=>F.RRF,tensor2d:()=>F.odF,tensor3d:()=>F.wOQ,tensor4d:()=>F.yXz,tensor5d:()=>F.Bfx,tensor6d:()=>F.xZs,test_util:()=>F.p3L,tidy:()=>F.lub,tile:()=>F.Gg6,time:()=>F.XVJ,toPixels:()=>F.C1$,topk:()=>F.hg7,train:()=>F.p_j,transpose:()=>F.p4s,truncatedNormal:()=>F.Xu6,unsortedSegmentSum:()=>F.pUJ,unstack:()=>F.HHK,util:()=>F.D5U,valueAndGrad:()=>F.h76,valueAndGrads:()=>F.fNQ,variable:()=>F.VD$,variableGrads:()=>F.pnJ,version:()=>ej,version_converter:()=>Yx.gJ,version_core:()=>F.jTM,version_layers:()=>kA,webgl:()=>F.yOA,where:()=>F.arb,whereAsync:()=>F.itS,zeros:()=>F.lls,zerosLike:()=>F.P84});var c=S(5879);let B=null;function R(){return B}class Y{}const Q=new c.OlP("DocumentToken");let pe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(ce)},providedIn:"platform"}),n})();const Ce=new c.OlP("Location Initialized");let ce=(()=>{class n extends pe{constructor(){super(),this._doc=(0,c.f3M)(Q),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(e){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,o){this._history.pushState(e,r,o)}replaceState(e,r,o){this._history.replaceState(e,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function me(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ne(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let tt=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(lt)},providedIn:"root"}),n})();const wt=new c.OlP("appBaseHref");let lt=(()=>{class n extends tt{constructor(e,r){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(Q).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return me(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+at(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${r}${o}`:r}pushState(e,r,o,p){const g=this.prepareExternalUrl(o+at(p));this._platformLocation.pushState(e,r,g)}replaceState(e,r,o,p){const g=this.prepareExternalUrl(o+at(p));this._platformLocation.replaceState(e,r,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(pe),c.LFG(wt,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),le=(()=>{class n extends tt{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=me(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,o,p){let g=this.prepareExternalUrl(o+at(p));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.pushState(e,r,g)}replaceState(e,r,o,p){let g=this.prepareExternalUrl(o+at(p));0==g.length&&(g=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,g)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(pe),c.LFG(wt,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(e){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const r=this._locationStrategy.getBaseHref();this._basePath=function Vt(n){if(new RegExp("^(https?:)?//").test(n)){const[,e]=n.split(/\/\/[^\/]+/);return e}return n}(Ne(Ie(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+at(r))}normalize(e){return n.stripTrailingSlash(function It(n,t){if(!n||!t.startsWith(n))return t;const e=t.substring(n.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,Ie(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",o=null){this._locationStrategy.pushState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(r)),o)}replaceState(e,r="",o=null){this._locationStrategy.replaceState(o,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+at(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(o=>o(e,r))}subscribe(e,r,o){return this._subject.subscribe({next:e,error:r,complete:o})}}return n.normalizeQueryParams=at,n.joinWithSlash=me,n.stripTrailingSlash=Ne,n.\u0275fac=function(e){return new(e||n)(c.LFG(tt))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function xt(){return new $e((0,c.LFG)(tt))}()},providedIn:"root"}),n})();function Ie(n){return n.replace(/\/index.html$/,"")}function co(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[o,p]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(o.trim()===t)return decodeURIComponent(p)}return null}const Wd=/\s+/,vi=[];let ks=(()=>{class n{constructor(e,r,o,p){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=o,this._renderer=p,this.initialClasses=vi,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Wd):vi}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Wd):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){const o=this.stateMap.get(e);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],o=e[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(Wd).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Xl{constructor(t,e,r,o){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fs=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,o){this._viewContainer=e,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((o,p,g)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Xl(o.item,this._ngForOf,-1,-1),null===g?void 0:g);else if(null==g)r.remove(null===p?void 0:p);else if(null!==p){const b=r.get(p);r.move(b,g),Vc(b,o)}});for(let o=0,p=r.length;o<p;o++){const b=r.get(o).context;b.index=o,b.count=p,b.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{Vc(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Vc(n,t){n.context.$implicit=t.item}let Gr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Ro,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){bi("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){bi("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ro{constructor(){this.$implicit=null,this.ngIf=null}}function bi(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(t)}'.`)}class zr{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Hi=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const r of this._defaultViews)r.enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Ql=(()=>{class n{constructor(e,r,o){this.ngSwitch=o,o._addCase(),this._view=new zr(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(Hi,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),hl=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:o,ngTemplateOutletContext:p,ngTemplateOutletInjector:g}=this;this._viewRef=r.createEmbeddedView(o,p,g?{injector:g}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.s_b))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[c.TTD]}),n})(),Ti=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Gu="browser";function Vn(n){return"server"===n}let Fo=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new gs((0,c.LFG)(Q),window)}),n})();class gs{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Vs(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const p=o.shadowRoot;if(p){const g=p.getElementById(t)||p.querySelector(`[name="${t}"]`);if(g)return g}o=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,p=this.offset();this.window.scrollTo(r-p[0],o-p[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Zo(this.window.history)||Zo(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Zo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class qu{}class eo extends Y{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class wl extends eo{static makeCurrent(){!function W(n){B||(B=n)}(new wl)}onAndCancel(t,e,r){return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function ha(){return xl=xl||document.querySelector("base"),xl?xl.getAttribute("href"):null}();return null==e?null:function cp(n){Fi=Fi||document.createElement("a"),Fi.setAttribute("href",n);const t=Fi.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){xl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return co(document.cookie,t)}}let Fi,xl=null,dp=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Bo=new c.OlP("EventManagerPlugins");let El=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(o=>{o.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,o){return this._findPluginFor(r).addEventListener(e,r,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(p=>p.supports(e)),!r)throw new c.vHH(5101,!1);return this._eventNameToPlugin.set(e,r),r}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Bo),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Zc{constructor(t){this._doc=t}}const pa="ng-app-id";let Yc=(()=>{class n{constructor(e,r,o,p={}){this.doc=e,this.appId=r,this.nonce=o,this.platformId=p,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Vn(p),this.resetHostNodes()}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.elements?.forEach(o=>o.remove()),r.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${pa}="${this.appId}"]`);if(e?.length){const r=new Map;return e.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(e,r){const o=this.styleRef;if(o.has(e)){const p=o.get(e);return p.usage+=r,p.usage}return o.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){const o=this.styleNodesInDOM,p=o?.get(r);if(p?.parentNode===e)return o.delete(r),p.removeAttribute(pa),p;{const g=this.doc.createElement("style");return this.nonce&&g.setAttribute("nonce",this.nonce),g.textContent=r,this.platformIsServer&&g.setAttribute(pa,this.appId),g}}addStyleToHost(e,r){const o=this.getStyleElement(e,r);e.appendChild(o);const p=this.styleRef,g=p.get(r)?.elements;g?g.push(o):p.set(r,{elements:[o],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q),c.LFG(c.AFp),c.LFG(c.Ojb,8),c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const fa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Xc=/%COMP%/g,au=new c.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function $s(n,t){return t.map(e=>e.replace(Xc,n))}let Ju=(()=>{class n{constructor(e,r,o,p,g,b,I,z=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=p,this.doc=g,this.platformId=b,this.ngZone=I,this.nonce=z,this.rendererByCompId=new Map,this.platformIsServer=Vn(b),this.defaultRenderer=new lu(e,g,I,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===c.ifc.ShadowDom&&(r={...r,encapsulation:c.ifc.Emulated});const o=this.getOrCreateRenderer(e,r);return o instanceof ed?o.applyToHost(e):o instanceof Gn&&o.applyStyles(),o}getOrCreateRenderer(e,r){const o=this.rendererByCompId;let p=o.get(r.id);if(!p){const g=this.doc,b=this.ngZone,I=this.eventManager,z=this.sharedStylesHost,G=this.removeStylesOnCompDestory,te=this.platformIsServer;switch(r.encapsulation){case c.ifc.Emulated:p=new ed(I,z,r,this.appId,G,g,b,te);break;case c.ifc.ShadowDom:return new ut(I,z,e,r,g,b,this.nonce,te);default:p=new Gn(I,z,r,G,g,b,te)}p.onDestroy=()=>o.delete(r.id),o.set(r.id,p)}return p}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(El),c.LFG(Yc),c.LFG(c.AFp),c.LFG(au),c.LFG(Q),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(c.Ojb))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class lu{constructor(t,e,r,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(fa[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Ga(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Ga(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new c.vHH(5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,o){if(o){e=o+":"+e;const p=fa[o];p?t.setAttributeNS(p,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const o=fa[r];o?t.removeAttributeNS(o,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,o){o&(c.JOm.DashCase|c.JOm.Important)?t.style.setProperty(e,r,o&c.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&c.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){if("string"==typeof t&&!(t=R().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(r))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function Ga(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ut extends lu{constructor(t,e,r,o,p,g,b,I){super(t,p,g,I),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const z=$s(o.id,o.styles);for(const G of z){const te=document.createElement("style");b&&te.setAttribute("nonce",b),te.textContent=G,this.shadowRoot.appendChild(te)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gn extends lu{constructor(t,e,r,o,p,g,b,I){super(t,p,g,b),this.sharedStylesHost=e,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=I?$s(I,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class ed extends Gn{constructor(t,e,r,o,p,g,b,I){const z=o+"-"+r.id;super(t,e,r,p,g,b,I,z),this.contentAttr=function pp(n){return"_ngcontent-%COMP%".replace(Xc,n)}(z),this.hostAttr=function Qu(n){return"_nghost-%COMP%".replace(Xc,n)}(z)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let ec=(()=>{class n extends Zc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,o){return e.addEventListener(r,o,!1),()=>this.removeEventListener(e,r,o)}removeEventListener(e,r,o){return e.removeEventListener(r,o)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const wi=["alt","control","meta","shift"],fp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Li=(()=>{class n extends Zc{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,o){const p=n.parseEventName(r),g=n.eventCallback(p.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(e,p.domEventName,g))}static parseEventName(e){const r=e.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const p=n._normalizeKey(r.pop());let g="",b=r.indexOf("code");if(b>-1&&(r.splice(b,1),g="code."),wi.forEach(z=>{const G=r.indexOf(z);G>-1&&(r.splice(G,1),g+=z+".")}),g+=p,0!=r.length||0===p.length)return null;const I={};return I.domEventName=o,I.fullKey=g,I}static matchEventFullKeyCode(e,r){let o=fp[e.key]||e.key,p="";return r.indexOf("code.")>-1&&(o=e.code,p="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),wi.forEach(g=>{g!==o&&(0,xi[g])(e)&&(p+=g+".")}),p+=o,p===r)}static eventCallback(e,r,o){return p=>{n.matchEventFullKeyCode(p,e)&&o.runGuarded(()=>r(p))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const fr=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Gu},{provide:c.g9A,useValue:function gp(){wl.makeCurrent()},multi:!0},{provide:Q,useFactory:function Ws(){return(0,c.RDi)(document),document},deps:[]}]),Qo=new c.OlP(""),Bi=[{provide:c.rWj,useClass:class Yu{addToWindow(t){c.dqk.getAngularTestability=(r,o=!0)=>{const p=t.findTestabilityInTree(r,o);if(null==p)throw new c.vHH(5103,!1);return p},c.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const o=c.dqk.getAllAngularTestabilities();let p=o.length,g=!1;const b=function(I){g=g||I,p--,0==p&&r(g)};o.forEach(function(I){I.whenStable(b)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?R().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],_o=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function to(){return new c.qLn},deps:[]},{provide:Bo,useClass:ec,multi:!0,deps:[Q,c.R0b,c.Lbi]},{provide:Bo,useClass:Li,multi:!0,deps:[Q]},Ju,Yc,El,{provide:c.FYo,useExisting:Ju},{provide:qu,useClass:dp,deps:[]},[]];let Wi=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:c.AFp,useValue:e.appId}]}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Qo,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[..._o,...Bi],imports:[Ti,c.hGG]}),n})(),_a=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:function(e){let r=null;return r=e?new e:function nc(){return new _a((0,c.LFG)(Q))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Dl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(e){let r=null;return r=e?new(e||n):c.LFG(Il),r},providedIn:"root"}),n})(),Il=(()=>{class n extends Dl{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new c.vHH(5200,!1);case c.q3G.URL:return(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new c.vHH(5201,!1);default:throw new c.vHH(5202,!1)}}bypassSecurityTrustHtml(e){return(0,c.JVY)(e)}bypassSecurityTrustStyle(e){return(0,c.L6k)(e)}bypassSecurityTrustScript(e){return(0,c.eBb)(e)}bypassSecurityTrustUrl(e){return(0,c.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,c.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:function(e){let r=null;return r=e?new e:function uu(n){return new Il(n.get(Q))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var Zr=S(5592),Gi=S(4674),Tr=S(2459),qt=S(2096),ai=S(5619);const{isArray:Zs}=Array,{getPrototypeOf:ah,prototype:Ys,keys:rd}=Object;function id(n){if(1===n.length){const t=n[0];if(Zs(t))return{args:t,keys:null};if(function du(n){return n&&"object"==typeof n&&ah(n)===Ys}(t)){const e=rd(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}var Al=S(2737),en=S(7398);const{isArray:od}=Array;function Vo(n){return(0,en.U)(t=>function Ml(n,t){return od(t)?n(...t):n(t)}(n,t))}var vs=S(9940);function Nl(n,t){return n.reduce((e,r,o)=>(e[r]=t[o],e),{})}var Nr=S(8251),Ka=S(7103);function lc(...n){const t=(0,vs.yG)(n),e=(0,vs.jO)(n),{args:r,keys:o}=id(n);if(0===r.length)return(0,Tr.D)([],t);const p=new Zr.y(function Jo(n,t,e=Al.y){return r=>{sd(t,()=>{const{length:o}=n,p=new Array(o);let g=o,b=o;for(let I=0;I<o;I++)sd(t,()=>{const z=(0,Tr.D)(n[I],t);let G=!1;z.subscribe(new Nr.Q(r,te=>{p[I]=te,G||(G=!0,b--),b||r.next(e(p.slice()))},()=>{--g||r.complete()}))},r)},r)}}(r,t,o?g=>Nl(o,g):Al.y));return e?p.pipe(Vo(e)):p}function sd(n,t,e){n?(0,Ka.f)(e,n,t):t()}const ba=(0,S(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var wa=S(7537);function Pl(...n){return function Ol(){return(0,wa.J)(1)}()((0,Tr.D)(n,(0,vs.yG)(n)))}var Rl=S(4829);function xa(n){return new Zr.y(t=>{(0,Rl.Xf)(n()).subscribe(t)})}var lh=S(8407);function Xs(n,t){const e=(0,Gi.m)(n)?n:()=>n,r=o=>o.error(e());return new Zr.y(t?o=>t.schedule(r,0,o):r)}var Qs=S(6232),yo=S(7394),Ai=S(9360);function bs(){return(0,Ai.e)((n,t)=>{let e=null;n._refCount++;const r=new Nr.Q(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const o=n._connection,p=e;e=null,o&&(!p||o===p)&&o.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}class kl extends Zr.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Ai.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new yo.w0;const e=this.getSubject();t.add(this.source.subscribe(new Nr.Q(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=yo.w0.EMPTY)}return t}refCount(){return bs()(this)}}var $t=S(8645),jr=S(4664),Yr=S(8180);function hu(...n){const t=(0,vs.yG)(n);return(0,Ai.e)((e,r)=>{(t?Pl(n,e,t):Pl(n,e)).subscribe(r)})}function Or(n,t){return(0,Ai.e)((e,r)=>{let o=0;e.subscribe(new Nr.Q(r,p=>n.call(t,p,o++)&&r.next(p)))})}var li=S(1631);function cc(n){return(0,Ai.e)((t,e)=>{let r=!1;t.subscribe(new Nr.Q(e,o=>{r=!0,e.next(o)},()=>{r||e.next(n),e.complete()}))})}function uh(n=dc){return(0,Ai.e)((t,e)=>{let r=!1;t.subscribe(new Nr.Q(e,o=>{r=!0,e.next(o)},()=>r?e.complete():e.error(n())))})}function dc(){return new ba}function Vi(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Or((o,p)=>n(o,p,r)):Al.y,(0,Yr.q)(1),e?cc(t):uh(()=>new ba))}function Uo(n,t){return(0,Gi.m)(t)?(0,li.z)(n,t,1):(0,li.z)(n,1)}var Pr=S(9397);function es(n){return(0,Ai.e)((t,e)=>{let p,r=null,o=!1;r=t.subscribe(new Nr.Q(e,void 0,void 0,g=>{p=(0,Rl.Xf)(n(g,es(n)(t))),r?(r.unsubscribe(),r=null,p.subscribe(e)):o=!0})),o&&(r.unsubscribe(),r=null,p.subscribe(e))})}function Fl(n){return n<=0?()=>Qs.E:(0,Ai.e)((t,e)=>{let r=[];t.subscribe(new Nr.Q(e,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)e.next(o);e.complete()},void 0,()=>{r=null}))})}function Js(n){return(0,Ai.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}const Tn="primary",zo=Symbol("RouteTitle");class ng{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function pc(n){return new ng(n)}function Ll(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const o={};for(let p=0;p<r.length;p++){const g=r[p],b=n[p];if(g.startsWith(":"))o[g.substring(1)]=b;else if(g!==b.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ts(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let o;for(let p=0;p<e.length;p++)if(o=e[p],!Rr(n[o],t[o]))return!1;return!0}function Rr(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((o,p)=>r[p]===o)}return n===t}function fc(n){return n.length>0?n[n.length-1]:null}function vo(n){return function ys(n){return!!n&&(n instanceof Zr.y||(0,Gi.m)(n.lift)&&(0,Gi.m)(n.subscribe))}(n)?n:(0,c.QGY)(n)?(0,Tr.D)(Promise.resolve(n)):(0,qt.of)(n)}const dh={exact:function mc(n,t,e){if(!ue(n.segments,t.segments)||!mu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!mc(n.children[r],t.children[r],e))return!1;return!0},subset:fu},ui={exact:function ws(n,t){return ts(n,t)},subset:function gc(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Rr(n[e],t[e]))},ignored:()=>!0};function Bl(n,t,e){return dh[e.paths](n.root,t.root,e.matrixParams)&&ui[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function fu(n,t,e){return vp(n,t,t.segments,e)}function vp(n,t,e,r){if(n.segments.length>e.length){const o=n.segments.slice(0,e.length);return!(!ue(o,e)||t.hasChildren()||!mu(o,e,r))}if(n.segments.length===e.length){if(!ue(n.segments,e)||!mu(n.segments,e,r))return!1;for(const o in t.children)if(!n.children[o]||!fu(n.children[o],t.children[o],r))return!1;return!0}{const o=e.slice(0,n.segments.length),p=e.slice(n.segments.length);return!!(ue(n.segments,o)&&mu(n.segments,o,r)&&n.children[Tn])&&vp(n.children[Tn],t,p,r)}}function mu(n,t,e){return t.every((r,o)=>ui[e](n[o].parameters,r.parameters))}class Ca{constructor(t=new L([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pc(this.queryParams)),this._queryParamMap}toString(){return Rt.serialize(this)}}class L{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dt(this)}}class ${constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=pc(this.parameters)),this._parameterMap}toString(){return ns(this)}}function ue(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}let Pe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new qe},providedIn:"root"}),n})();class qe{parse(t){const e=new dy(t);return new Ca(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${jt(t.root,!0)}`,r=function ea(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(o=>`${hn(e)}=${hn(o)}`).join("&"):`${hn(e)}=${hn(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${r}${"string"==typeof t.fragment?`#${function gn(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Rt=new qe;function Dt(n){return n.segments.map(t=>ns(t)).join("/")}function jt(n,t){if(!n.hasChildren())return Dt(n);if(t){const e=n.children[Tn]?jt(n.children[Tn],!1):"",r=[];return Object.entries(n.children).forEach(([o,p])=>{o!==Tn&&r.push(`${o}:${jt(p,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function De(n,t){let e=[];return Object.entries(n.children).forEach(([r,o])=>{r===Tn&&(e=e.concat(t(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Tn&&(e=e.concat(t(o,r)))}),e}(n,(r,o)=>o===Tn?[jt(n.children[Tn],!1)]:[`${o}:${jt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tn]?`${Dt(n)}/${e[0]}`:`${Dt(n)}/(${e.join("//")})`}}function yn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hn(n){return yn(n).replace(/%3B/gi,";")}function kr(n){return yn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xs(n){return decodeURIComponent(n)}function _c(n){return xs(n.replace(/\+/g,"%20"))}function ns(n){return`${kr(n.path)}${function rs(n){return Object.keys(n).map(t=>`;${kr(t)}=${kr(n[t])}`).join("")}(n.parameters)}`}const gu=/^[^\/()?;#]+/;function yc(n){const t=n.match(gu);return t?t[0]:""}const ld=/^[^\/()?;=#]+/,ig=/^[^=?&#]+/,ud=/^[^&#]+/;class dy{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new L([],{}):new L([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Tn]=new L(t,e)),r}parseSegment(){const t=yc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(t),new $(xs(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function rg(n){const t=n.match(ld);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const o=yc(this.remaining);o&&(r=o,this.capture(r))}t[xs(e)]=xs(r)}parseQueryParam(t){const e=function vc(n){const t=n.match(ig);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const g=function og(n){const t=n.match(ud);return t?t[0]:""}(this.remaining);g&&(r=g,this.capture(r))}const o=_c(e),p=_c(r);if(t.hasOwnProperty(o)){let g=t[o];Array.isArray(g)||(g=[g],t[o]=g),g.push(p)}else t[o]=p}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=yc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new c.vHH(4010,!1);let p;r.indexOf(":")>-1?(p=r.slice(0,r.indexOf(":")),this.capture(p),this.capture(":")):t&&(p=Tn);const g=this.parseChildren();e[p]=1===Object.keys(g).length?g[Tn]:new L([],g),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new c.vHH(4011,!1)}}function bp(n){return n.segments.length>0?new L([],{[Tn]:n}):n}function Rf(n){const t={};for(const r of Object.keys(n.children)){const p=Rf(n.children[r]);if(r===Tn&&0===p.segments.length&&p.hasChildren())for(const[g,b]of Object.entries(p.children))t[g]=b;else(p.segments.length>0||p.hasChildren())&&(t[r]=p)}return function kf(n){if(1===n.numberOfChildren&&n.children[Tn]){const t=n.children[Tn];return new L(n.segments.concat(t.segments),t.children)}return n}(new L(n.segments,t))}function _u(n){return n instanceof Ca}function Ff(n){let t;const o=bp(function e(p){const g={};for(const I of p.children){const z=e(I);g[I.outlet]=z}const b=new L(p.url,g);return p===n&&(t=b),b}(n.root));return t??o}function cd(n,t,e,r){let o=n;for(;o.parent;)o=o.parent;if(0===t.length)return hh(o,o,o,e,r);const p=function hy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new wp(!0,0,n);let t=0,e=!1;const r=n.reduce((o,p,g)=>{if("object"==typeof p&&null!=p){if(p.outlets){const b={};return Object.entries(p.outlets).forEach(([I,z])=>{b[I]="string"==typeof z?z.split("/"):z}),[...o,{outlets:b}]}if(p.segmentPath)return[...o,p.segmentPath]}return"string"!=typeof p?[...o,p]:0===g?(p.split("/").forEach((b,I)=>{0==I&&"."===b||(0==I&&""===b?e=!0:".."===b?t++:""!=b&&o.push(b))}),o):[...o,p]},[]);return new wp(e,t,r)}(t);if(p.toRoot())return hh(o,o,new L([],{}),e,r);const g=function xp(n,t,e){if(n.isAbsolute)return new ph(t,!0,0);if(!e)return new ph(t,!1,NaN);if(null===e.parent)return new ph(e,!0,0);const r=dd(n.commands[0])?0:1;return function hd(n,t,e){let r=n,o=t,p=e;for(;p>o;){if(p-=o,r=r.parent,!r)throw new c.vHH(4005,!1);o=r.segments.length}return new ph(r,!1,o-p)}(e,e.segments.length-1+r,n.numberOfDoubleDots)}(p,o,n),b=g.processChildren?yu(g.segmentGroup,g.index,p.commands):Ep(g.segmentGroup,g.index,p.commands);return hh(o,g.segmentGroup,b,e,r)}function dd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function bc(n){return"object"==typeof n&&null!=n&&n.outlets}function hh(n,t,e,r,o){let g,p={};r&&Object.entries(r).forEach(([I,z])=>{p[I]=Array.isArray(z)?z.map(G=>`${G}`):`${z}`}),g=n===t?e:ag(n,t,e);const b=bp(Rf(g));return new Ca(b,p,o)}function ag(n,t,e){const r={};return Object.entries(n.children).forEach(([o,p])=>{r[o]=p===t?e:ag(p,t,e)}),new L(n.segments,r)}class wp{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&dd(r[0]))throw new c.vHH(4003,!1);const o=r.find(bc);if(o&&o!==fc(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ph{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function Ep(n,t,e){if(n||(n=new L([],{})),0===n.segments.length&&n.hasChildren())return yu(n,t,e);const r=function lg(n,t,e){let r=0,o=t;const p={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=e.length)return p;const g=n.segments[o],b=e[r];if(bc(b))break;const I=`${b}`,z=r<e.length-1?e[r+1]:null;if(o>0&&void 0===I)break;if(I&&z&&"object"==typeof z&&void 0===z.outlets){if(!fy(I,z,g))return p;r+=2}else{if(!fy(I,{},g))return p;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,t,e),o=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const p=new L(n.segments.slice(0,r.pathIndex),{});return p.children[Tn]=new L(n.segments.slice(r.pathIndex),n.children),yu(p,0,o)}return r.match&&0===o.length?new L(n.segments,{}):r.match&&!n.hasChildren()?Lf(n,t,e):r.match?yu(n,0,o):Lf(n,t,e)}function yu(n,t,e){if(0===e.length)return new L(n.segments,{});{const r=function py(n){return bc(n[0])?n[0].outlets:{[Tn]:n}}(e),o={};if(!r[Tn]&&n.children[Tn]&&1===n.numberOfChildren&&0===n.children[Tn].segments.length){const p=yu(n.children[Tn],t,e);return new L(n.segments,p.children)}return Object.entries(r).forEach(([p,g])=>{"string"==typeof g&&(g=[g]),null!==g&&(o[p]=Ep(n.children[p],t,g))}),Object.entries(n.children).forEach(([p,g])=>{void 0===r[p]&&(o[p]=g)}),new L(n.segments,o)}}function Lf(n,t,e){const r=n.segments.slice(0,t);let o=0;for(;o<e.length;){const p=e[o];if(bc(p)){const I=Cp(p.outlets);return new L(r,I)}if(0===o&&dd(e[0])){r.push(new $(n.segments[t].path,ug(e[0]))),o++;continue}const g=bc(p)?p.outlets[Tn]:`${p}`,b=o<e.length-1?e[o+1]:null;g&&b&&dd(b)?(r.push(new $(g,ug(b))),o+=2):(r.push(new $(g,{})),o++)}return new L(r,{})}function Cp(n){const t={};return Object.entries(n).forEach(([e,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(t[e]=Lf(new L([],{}),0,r))}),t}function ug(n){const t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function fy(n,t,e){return n==e.path&&ts(t,e.parameters)}const vu="imperative";class jo{constructor(t,e){this.id=t,this.url=e}}class Vl extends jo{constructor(t,e,r="imperative",o=null){super(t,e),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Za extends jo{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class is extends jo{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bu extends jo{constructor(t,e,r,o){super(t,e),this.reason=r,this.code=o,this.type=16}}class Ya extends jo{constructor(t,e,r,o){super(t,e),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sp extends jo{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dp extends jo{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wu extends jo{constructor(t,e,r,o,p){super(t,e),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=p,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fh extends jo{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class no extends jo{constructor(t,e,r,o){super(t,e),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class my{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class T{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class v{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class k{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ne{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Le{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new dt,this.attachRef=null}}let dt=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(e,r){const o=this.getOrCreateContext(e);o.outlet=r,this.contexts.set(e,o)}onChildOutletDestroyed(e){const r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Le,this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class it{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=vt(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=vt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=tn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return tn(t,this._root).map(e=>e.value)}}function vt(n,t){if(n===t.value)return t;for(const e of t.children){const r=vt(n,e);if(r)return r}return null}function tn(n,t){if(n===t.value)return[t];for(const e of t.children){const r=tn(n,e);if(r.length)return r.unshift(t),r}return[]}class kn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Br(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Cr extends it{constructor(t,e){super(t),this.snapshot=e,fd(this,t)}toString(){return this.snapshot.toString()}}function ro(n,t){const e=function Es(n,t){const g=new pd([],{},{},"",{},Tn,t,null,{});return new _h("",new kn(g,[]))}(0,t),r=new ai.X([new $("",{})]),o=new ai.X({}),p=new ai.X({}),g=new ai.X({}),b=new ai.X(""),I=new Ho(r,o,g,b,p,Tn,t,e.root);return I.snapshot=e.root,new Cr(new kn(I,[]),e)}class Ho{constructor(t,e,r,o,p,g,b,I){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=p,this.outlet=g,this.component=b,this._futureSnapshot=I,this.title=this.dataSubject?.pipe((0,en.U)(z=>z[zo]))??(0,qt.of)(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,en.U)(t=>pc(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,en.U)(t=>pc(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mh(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const o=e[r],p=e[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(p.component)break;r--}}return function gh(n){return n.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(r))}class pd{get title(){return this.data?.[zo]}constructor(t,e,r,o,p,g,b,I,z){this.url=t,this.params=e,this.queryParams=r,this.fragment=o,this.data=p,this.outlet=g,this.component=b,this.routeConfig=I,this._resolve=z}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _h extends it{constructor(t,e){super(e),this.url=t,fd(this,e)}toString(){return yh(this._root)}}function fd(n,t){t.value._routerState=n,t.children.forEach(e=>fd(n,e))}function yh(n){const t=n.children.length>0?` { ${n.children.map(yh).join(", ")} } `:"";return`${n.value}${t}`}function Ip(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ts(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),ts(t.params,e.params)||n.paramsSubject.next(e.params),function ch(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ts(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.urlSubject.next(e.url),ts(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function md(n,t){const e=ts(n.params,t.params)&&function ee(n,t){return ue(n,t)&&n.every((e,r)=>ts(e.parameters,t[r].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||md(n.parent,t.parent))}let gd=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tn,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(dt),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb),this.inputBinder=(0,c.f3M)(Bf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:r,previousValue:o}=e.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new c.vHH(4013,!1);this._activatedRoute=e;const o=this.location,g=e.snapshot.component,b=this.parentContexts.getOrCreateContext(this.name).children,I=new cg(e,b,o.injector);this.activated=o.createComponent(g,{index:o.length,injector:I,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),n})();class cg{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Ho?this.route:t===dt?this.childContexts:this.parent.get(t,e)}}const Bf=new c.OlP("");let vh=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:r}=e,o=lc([r.queryParams,r.params,r.data]).pipe((0,jr.w)(([p,g,b],I)=>(b={...p,...g,...b},0===I?(0,qt.of)(b):Promise.resolve(b)))).subscribe(p=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(e);const g=(0,c.qFp)(r.component);if(g)for(const{templateName:b}of g.inputs)e.activatedComponentRef.setInput(b,p[b]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Tp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const o=function gy(n,t,e){return t.children.map(r=>{for(const o of e.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Tp(n,r,o);return Tp(n,r)})}(n,t,e);return new kn(r,o)}{if(n.shouldAttach(t.value)){const p=n.retrieve(t.value);if(null!==p){const g=p.route;return g.value._futureSnapshot=t.value,g.children=t.children.map(b=>Tp(n,b)),g}}const r=function _y(n){return new Ho(new ai.X(n.url),new ai.X(n.params),new ai.X(n.queryParams),new ai.X(n.fragment),new ai.X(n.data),n.outlet,n.component,n)}(t.value),o=t.children.map(p=>Tp(n,p));return new kn(r,o)}}const Vf="ngNavigationCancelingError";function _d(n,t){const{redirectTo:e,navigationBehaviorOptions:r}=_u(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=lr(!1,0,t);return o.url=e,o.navigationBehaviorOptions=r,o}function lr(n,t,e){const r=new Error("NavigationCancelingError: "+(n||""));return r[Vf]=!0,r.cancellationCode=t,e&&(r.url=e),r}function Uf(n){return bh(n)&&_u(n.url)}function bh(n){return n&&n[Vf]}let wh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(e,r){1&e&&c._UZ(0,"router-outlet")},dependencies:[gd],encapsulation:2}),n})();function Eh(n){const t=n.children&&n.children.map(Eh),e=t?{...n,children:t}:{...n};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Tn&&(e.component=wh),e}function Sa(n){return n.outlet||Tn}function xc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class dg{constructor(t,e,r,o,p){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=p}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Ip(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const o=Br(e);t.children.forEach(p=>{const g=p.value.outlet;this.deactivateRoutes(p,o[g],r),delete o[g]}),Object.values(o).forEach(p=>{this.deactivateRouteAndItsChildren(p,r)})}deactivateRoutes(t,e,r){const o=t.value,p=e?e.value:null;if(o===p)if(o.component){const g=r.getContext(o.outlet);g&&this.deactivateChildRoutes(t,e,g.children)}else this.deactivateChildRoutes(t,e,r);else p&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,p=Br(t);for(const g of Object.keys(p))this.deactivateRouteAndItsChildren(p[g],o);if(r&&r.outlet){const g=r.outlet.detach(),b=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:g,route:t,contexts:b})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),o=r&&t.value.component?r.children:e,p=Br(t);for(const g of Object.keys(p))this.deactivateRouteAndItsChildren(p[g],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){const o=Br(e);t.children.forEach(p=>{this.activateRoutes(p,o[p.value.outlet],r),this.forwardEvent(new X(p.value.snapshot))}),t.children.length&&this.forwardEvent(new E(t.value.snapshot))}activateRoutes(t,e,r){const o=t.value,p=e?e.value:null;if(Ip(o),o===p)if(o.component){const g=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,e,g.children)}else this.activateChildRoutes(t,e,r);else if(o.component){const g=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const b=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),g.children.onOutletReAttached(b.contexts),g.attachRef=b.componentRef,g.route=b.route.value,g.outlet&&g.outlet.attach(b.componentRef,b.route.value),Ip(b.route.value),this.activateChildRoutes(t,null,g.children)}else{const b=xc(o.snapshot);g.attachRef=null,g.route=o,g.injector=b,g.outlet&&g.outlet.activateWith(o,g.injector),this.activateChildRoutes(t,null,g.children)}}else this.activateChildRoutes(t,null,r)}}class Ch{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Sh{constructor(t,e){this.component=t,this.route=e}}function Cy(n,t,e){const r=n._root;return vd(r,t?t._root:null,e,[r.value])}function Xa(n,t){const e=Symbol(),r=t.get(n,e);return r===e?"function"!=typeof n||(0,c.Z0I)(n)?t.get(n):n:r}function vd(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const p=Br(t);return n.children.forEach(g=>{(function zf(n,t,e,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const p=n.value,g=t?t.value:null,b=e?e.getContext(n.value.outlet):null;if(g&&p.routeConfig===g.routeConfig){const I=function hg(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!ue(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ue(n.url,t.url)||!ts(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!md(n,t)||!ts(n.queryParams,t.queryParams);default:return!md(n,t)}}(g,p,p.routeConfig.runGuardsAndResolvers);I?o.canActivateChecks.push(new Ch(r)):(p.data=g.data,p._resolvedData=g._resolvedData),vd(n,t,p.component?b?b.children:null:e,r,o),I&&b&&b.outlet&&b.outlet.isActivated&&o.canDeactivateChecks.push(new Sh(b.outlet.component,g))}else g&&Eu(t,b,o),o.canActivateChecks.push(new Ch(r)),vd(n,null,p.component?b?b.children:null:e,r,o)})(g,p[g.value.outlet],e,r.concat([g.value]),o),delete p[g.value.outlet]}),Object.entries(p).forEach(([g,b])=>Eu(b,e.getContext(g),o)),o}function Eu(n,t,e){const r=Br(n),o=n.value;Object.entries(r).forEach(([p,g])=>{Eu(g,o.component?t?t.children.getContext(p):null:t,e)}),e.canDeactivateChecks.push(new Sh(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function Dh(n){return"function"==typeof n}function Iy(n){return n instanceof ba||"EmptyError"===n?.name}const Pp=Symbol("INITIAL_VALUE");function Ih(){return(0,jr.w)(n=>lc(n.map(t=>t.pipe((0,Yr.q)(1),hu(Pp)))).pipe((0,en.U)(t=>{for(const e of t)if(!0!==e){if(e===Pp)return Pp;if(!1===e||e instanceof Ca)return e}return!0}),Or(t=>t!==Pp),(0,Yr.q)(1)))}function d0(n){return(0,lh.z)((0,Pr.b)(t=>{if(_u(t))throw _d(0,t)}),(0,en.U)(t=>!0===t))}class Ah{constructor(t){this.segmentGroup=t||null}}class My{constructor(t){this.urlTree=t}}function Ul(n){return Xs(new Ah(n))}function Rp(n){return Xs(new My(n))}class Oy{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new c.vHH(4002,!1)}lineralizeSegments(t,e){let r=[],o=e.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,qt.of)(r);if(o.numberOfChildren>1||!o.children[Tn])return Xs(new c.vHH(4e3,!1));o=o.children[Tn]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreateUrlTree(t,e,r,o){const p=this.createSegmentGroup(t,e.root,r,o);return new Ca(p,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Object.entries(t).forEach(([o,p])=>{if("string"==typeof p&&p.startsWith(":")){const b=p.substring(1);r[o]=e[b]}else r[o]=p}),r}createSegmentGroup(t,e,r,o){const p=this.createSegments(t,e.segments,r,o);let g={};return Object.entries(e.children).forEach(([b,I])=>{g[b]=this.createSegmentGroup(t,I,r,o)}),new L(p,g)}createSegments(t,e,r,o){return e.map(p=>p.path.startsWith(":")?this.findPosParam(t,p,o):this.findOrReturn(p,r))}findPosParam(t,e,r){const o=r[e.path.substring(1)];if(!o)throw new c.vHH(4001,!1);return o}findOrReturn(t,e){let r=0;for(const o of e){if(o.path===t.path)return e.splice(r),o;r++}return t}}const $f={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bd(n,t,e,r,o){const p=_g(n,t,e);return p.matched?(r=function yy(n,t){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,t,`Route: ${n.path}`)),n._injector??t}(t,r),function h0(n,t,e,r){const o=t.canMatch;if(!o||0===o.length)return(0,qt.of)(!0);const p=o.map(g=>{const b=Xa(g,n);return vo(function Sy(n){return n&&Dh(n.canMatch)}(b)?b.canMatch(t,e):n.runInContext(()=>b(t,e)))});return(0,qt.of)(p).pipe(Ih(),d0())}(r,t,e).pipe((0,en.U)(g=>!0===g?p:{...$f}))):(0,qt.of)(p)}function _g(n,t,e){if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?{...$f}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(t.matcher||Ll)(e,n,t);if(!o)return{...$f};const p={};Object.entries(o.posParams??{}).forEach(([b,I])=>{p[b]=I.path});const g=o.consumed.length>0?{...p,...o.consumed[o.consumed.length-1].parameters}:p;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:g,positionalParamSegments:o.posParams??{}}}function Py(n,t,e,r){return e.length>0&&function m0(n,t,e){return e.some(r=>zl(n,t,r)&&Sa(r)!==Tn)}(n,e,r)?{segmentGroup:new L(t,f0(r,new L(e,n.children))),slicedSegments:[]}:0===e.length&&function Cu(n,t,e){return e.some(r=>zl(n,t,r))}(n,e,r)?{segmentGroup:new L(n.segments,p0(n,0,e,r,n.children)),slicedSegments:e}:{segmentGroup:new L(n.segments,n.children),slicedSegments:e}}function p0(n,t,e,r,o){const p={};for(const g of r)if(zl(n,e,g)&&!o[Sa(g)]){const b=new L([],{});p[Sa(g)]=b}return{...o,...p}}function f0(n,t){const e={};e[Tn]=t;for(const r of n)if(""===r.path&&Sa(r)!==Tn){const o=new L([],{});e[Sa(r)]=o}return e}function zl(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class Ly{constructor(t,e,r,o,p,g,b){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=o,this.urlTree=p,this.paramsInheritanceStrategy=g,this.urlSerializer=b,this.allowRedirects=!0,this.applyRedirects=new Oy(this.urlSerializer,this.urlTree)}noMatchError(t){return new c.vHH(4002,!1)}recognize(){const t=Py(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Tn).pipe(es(e=>{if(e instanceof My)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof Ah?this.noMatchError(e):e}),(0,en.U)(e=>{const r=new pd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tn,this.rootComponentType,null,{}),o=new kn(r,e),p=new _h("",o),g=function sg(n,t,e=null,r=null){return cd(Ff(n),t,e,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return g.queryParams=this.urlTree.queryParams,p.url=this.urlSerializer.serialize(g),this.inheritParamsAndData(p._root),{state:p,tree:g}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,Tn).pipe(es(r=>{throw r instanceof Ah?this.noMatchError(r):r}))}inheritParamsAndData(t){const e=t.value,r=mh(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,e,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,e,r):this.processSegment(t,e,r,r.segments,o,!0)}processChildren(t,e,r){const o=[];for(const p of Object.keys(r.children))"primary"===p?o.unshift(p):o.push(p);return(0,Tr.D)(o).pipe(Uo(p=>{const g=r.children[p],b=function xy(n,t){const e=n.filter(r=>Sa(r)===t);return e.push(...n.filter(r=>Sa(r)!==t)),e}(e,p);return this.processSegmentGroup(t,b,g,p)}),function Ea(n,t){return(0,Ai.e)(function pu(n,t,e,r,o){return(p,g)=>{let b=e,I=t,z=0;p.subscribe(new Nr.Q(g,G=>{const te=z++;I=b?n(I,G,te):(b=!0,G),r&&g.next(I)},o&&(()=>{b&&g.next(I),g.complete()})))}}(n,t,arguments.length>=2,!0))}((p,g)=>(p.push(...g),p)),cc(null),function ad(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Or((o,p)=>n(o,p,r)):Al.y,Fl(1),e?cc(t):uh(()=>new ba))}(),(0,li.z)(p=>{if(null===p)return Ul(r);const g=Wf(p);return function By(n){n.sort((t,e)=>t.value.outlet===Tn?-1:e.value.outlet===Tn?1:t.value.outlet.localeCompare(e.value.outlet))}(g),(0,qt.of)(g)}))}processSegment(t,e,r,o,p,g){return(0,Tr.D)(e).pipe(Uo(b=>this.processSegmentAgainstRoute(b._injector??t,e,b,r,o,p,g).pipe(es(I=>{if(I instanceof Ah)return(0,qt.of)(null);throw I}))),Vi(b=>!!b),es(b=>{if(Iy(b))return function ky(n,t,e){return 0===t.length&&!n.children[e]}(r,o,p)?(0,qt.of)([]):Ul(r);throw b}))}processSegmentAgainstRoute(t,e,r,o,p,g,b){return function Ry(n,t,e,r){return!!(Sa(n)===r||r!==Tn&&zl(t,e,n))&&("**"===n.path||_g(t,n,e).matched)}(r,o,p,g)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,o,r,p,g,b):b&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,o,e,r,p,g):Ul(o):Ul(o)}expandSegmentAgainstRouteUsingRedirect(t,e,r,o,p,g){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,o,g):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,o,p,g)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,o){const p=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Rp(p):this.applyRedirects.lineralizeSegments(r,p).pipe((0,li.z)(g=>{const b=new L(g,{});return this.processSegment(t,e,b,g,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,o,p,g){const{matched:b,consumedSegments:I,remainingSegments:z,positionalParamSegments:G}=_g(e,o,p);if(!b)return Ul(e);const te=this.applyRedirects.applyRedirectCommands(I,o.redirectTo,G);return o.redirectTo.startsWith("/")?Rp(te):this.applyRedirects.lineralizeSegments(o,te).pipe((0,li.z)(he=>this.processSegment(t,r,e,he.concat(z),g,!1)))}matchSegmentAgainstRoute(t,e,r,o,p,g){let b;if("**"===r.path){const I=o.length>0?fc(o).parameters:{},z=new pd(o,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yg(r),Sa(r),r.component??r._loadedComponent??null,r,vg(r));b=(0,qt.of)({snapshot:z,consumedSegments:[],remainingSegments:[]}),e.children={}}else b=bd(e,r,o,t).pipe((0,en.U)(({matched:I,consumedSegments:z,remainingSegments:G,parameters:te})=>I?{snapshot:new pd(z,te,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yg(r),Sa(r),r.component??r._loadedComponent??null,r,vg(r)),consumedSegments:z,remainingSegments:G}:null));return b.pipe((0,jr.w)(I=>null===I?Ul(e):this.getChildConfig(t=r._injector??t,r,o).pipe((0,jr.w)(({routes:z})=>{const G=r._loadedInjector??t,{snapshot:te,consumedSegments:he,remainingSegments:_e}=I,{segmentGroup:ye,slicedSegments:ge}=Py(e,he,_e,z);if(0===ge.length&&ye.hasChildren())return this.processChildren(G,z,ye).pipe((0,en.U)(Je=>null===Je?null:[new kn(te,Je)]));if(0===z.length&&0===ge.length)return(0,qt.of)([new kn(te,[])]);const Re=Sa(r)===p;return this.processSegment(G,z,ye,ge,Re?Tn:p,!0).pipe((0,en.U)(Je=>[new kn(te,Je)]))}))))}getChildConfig(t,e,r){return e.children?(0,qt.of)({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?(0,qt.of)({routes:e._loadedRoutes,injector:e._loadedInjector}):function c0(n,t,e,r){const o=t.canLoad;if(void 0===o||0===o.length)return(0,qt.of)(!0);const p=o.map(g=>{const b=Xa(g,n);return vo(function Ap(n){return n&&Dh(n.canLoad)}(b)?b.canLoad(t,e):n.runInContext(()=>b(t,e)))});return(0,qt.of)(p).pipe(Ih(),d0())}(t,e,r).pipe((0,li.z)(o=>o?this.configLoader.loadChildren(t,e).pipe((0,Pr.b)(p=>{e._loadedRoutes=p.routes,e._loadedInjector=p.injector})):function Ny(n){return Xs(lr(!1,3))}())):(0,qt.of)({routes:[],injector:t})}}function Vy(n){const t=n.value.routeConfig;return t&&""===t.path}function Wf(n){const t=[],e=new Set;for(const r of n){if(!Vy(r)){t.push(r);continue}const o=t.find(p=>r.value.routeConfig===p.value.routeConfig);void 0!==o?(o.children.push(...r.children),e.add(o)):t.push(r)}for(const r of e){const o=Wf(r.children);t.push(new kn(r.value,o))}return t.filter(r=>!e.has(r))}function yg(n){return n.data||{}}function vg(n){return n.resolve||{}}function Gf(n){return"string"==typeof n.title||null===n.title}function qf(n){return(0,jr.w)(t=>{const e=n(t);return e?(0,Tr.D)(e).pipe((0,en.U)(()=>t)):(0,qt.of)(t)})}const Nh=new c.OlP("ROUTES");let xg=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,c.f3M)(c.Sil)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return(0,qt.of)(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const r=vo(e.loadComponent()).pipe((0,en.U)(Lp),(0,Pr.b)(p=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=p}),Js(()=>{this.componentLoaders.delete(e)})),o=new kl(r,()=>new $t.x).pipe(bs());return this.componentLoaders.set(e,o),o}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,qt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const p=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,en.U)(b=>{this.onLoadEndListener&&this.onLoadEndListener(r);let I,z;return Array.isArray(b)?z=b:(I=b.create(e).injector,z=I.get(Nh,[],c.XFs.Self|c.XFs.Optional).flat()),{routes:z.map(Eh),injector:I}}),Js(()=>{this.childrenLoaders.delete(r)})),g=new kl(p,()=>new $t.x).pipe(bs());return this.childrenLoaders.set(r,g),g}loadModuleFactoryOrRoutes(e){return vo(e()).pipe((0,en.U)(Lp),(0,li.z)(r=>r instanceof c.YKP||Array.isArray(r)?(0,qt.of)(r):(0,Tr.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Lp(n){return function Fp(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Kf=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new $t.x,this.configLoader=(0,c.f3M)(xg),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(Pe),this.rootContexts=(0,c.f3M)(dt),this.inputBindingEnabled=null!==(0,c.f3M)(Bf,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,qt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new T(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new my(o))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:r})}setupNavigations(e){return this.transitions=new ai.X({id:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vu,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Or(r=>0!==r.id),(0,en.U)(r=>({...r,extractedUrl:e.urlHandlingStrategy.extract(r.rawUrl)})),(0,jr.w)(r=>{let o=!1,p=!1;return(0,qt.of)(r).pipe((0,Pr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,jr.w)(g=>{const b=e.browserUrlTree.toString(),I=!e.navigated||g.extractedUrl.toString()!==b||b!==e.currentUrlTree.toString();if(!I&&"reload"!==(g.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const G="";return this.events.next(new bu(g.id,e.serializeUrl(r.rawUrl),G,0)),e.rawUrlTree=g.rawUrl,g.resolve(null),Qs.E}if(e.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return zy(g.source)&&(e.browserUrlTree=g.extractedUrl),(0,qt.of)(g).pipe((0,jr.w)(G=>{const te=this.transitions?.getValue();return this.events.next(new Vl(G.id,this.urlSerializer.serialize(G.extractedUrl),G.source,G.restoredState)),te!==this.transitions?.getValue()?Qs.E:Promise.resolve(G)}),function Uy(n,t,e,r,o,p){return(0,li.z)(g=>function Fy(n,t,e,r,o,p,g="emptyOnly"){return new Ly(n,t,e,r,o,g,p).recognize()}(n,t,e,r,g.extractedUrl,o,p).pipe((0,en.U)(({state:b,tree:I})=>({...g,targetSnapshot:b,urlAfterRedirects:I}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),(0,Pr.b)(G=>{if(r.targetSnapshot=G.targetSnapshot,r.urlAfterRedirects=G.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:G.urlAfterRedirects},"eager"===e.urlUpdateStrategy){if(!G.extras.skipLocationChange){const he=e.urlHandlingStrategy.merge(G.urlAfterRedirects,G.rawUrl);e.setBrowserUrl(he,G)}e.browserUrlTree=G.urlAfterRedirects}const te=new Sp(G.id,this.urlSerializer.serialize(G.extractedUrl),this.urlSerializer.serialize(G.urlAfterRedirects),G.targetSnapshot);this.events.next(te)}));if(I&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:G,extractedUrl:te,source:he,restoredState:_e,extras:ye}=g,ge=new Vl(G,this.urlSerializer.serialize(te),he,_e);this.events.next(ge);const Re=ro(0,this.rootComponentType).snapshot;return r={...g,targetSnapshot:Re,urlAfterRedirects:te,extras:{...ye,skipLocationChange:!1,replaceUrl:!1}},(0,qt.of)(r)}{const G="";return this.events.next(new bu(g.id,e.serializeUrl(r.extractedUrl),G,1)),e.rawUrlTree=g.rawUrl,g.resolve(null),Qs.E}}),(0,Pr.b)(g=>{const b=new Dp(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(b)}),(0,en.U)(g=>r={...g,guards:Cy(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function a0(n,t){return(0,li.z)(e=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:p,canDeactivateChecks:g}}=e;return 0===g.length&&0===p.length?(0,qt.of)({...e,guardsResult:!0}):function l0(n,t,e,r){return(0,Tr.D)(n).pipe((0,li.z)(o=>function u0(n,t,e,r,o){const p=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!p||0===p.length)return(0,qt.of)(!0);const g=p.map(b=>{const I=xc(t)??o,z=Xa(b,I);return vo(function Mp(n){return n&&Dh(n.canDeactivate)}(z)?z.canDeactivate(n,t,e,r):I.runInContext(()=>z(n,t,e,r))).pipe(Vi())});return(0,qt.of)(g).pipe(Ih())}(o.component,o.route,e,t,r)),Vi(o=>!0!==o,!0))}(g,r,o,n).pipe((0,li.z)(b=>b&&function jf(n){return"boolean"==typeof n}(b)?function Ty(n,t,e,r){return(0,Tr.D)(t).pipe(Uo(o=>Pl(function Hf(n,t){return null!==n&&t&&t(new v(n)),(0,qt.of)(!0)}(o.route.parent,r),function Ay(n,t){return null!==n&&t&&t(new k(n)),(0,qt.of)(!0)}(o.route,r),function Th(n,t,e){const r=t[t.length-1],p=t.slice(0,t.length-1).reverse().map(g=>function xu(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(g)).filter(g=>null!==g).map(g=>xa(()=>{const b=g.guards.map(I=>{const z=xc(g.node)??e,G=Xa(I,z);return vo(function fg(n){return n&&Dh(n.canActivateChild)}(G)?G.canActivateChild(r,n):z.runInContext(()=>G(r,n))).pipe(Vi())});return(0,qt.of)(b).pipe(Ih())}));return(0,qt.of)(p).pipe(Ih())}(n,o.path,e),function mg(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,qt.of)(!0);const o=r.map(p=>xa(()=>{const g=xc(t)??e,b=Xa(p,g);return vo(function pg(n){return n&&Dh(n.canActivate)}(b)?b.canActivate(t,n):g.runInContext(()=>b(t,n))).pipe(Vi())}));return(0,qt.of)(o).pipe(Ih())}(n,o.route,e))),Vi(o=>!0!==o,!0))}(r,p,n,t):(0,qt.of)(b)),(0,en.U)(b=>({...e,guardsResult:b})))})}(this.environmentInjector,g=>this.events.next(g)),(0,Pr.b)(g=>{if(r.guardsResult=g.guardsResult,_u(g.guardsResult))throw _d(0,g.guardsResult);const b=new wu(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(b)}),Or(g=>!!g.guardsResult||(e.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),qf(g=>{if(g.guards.canActivateChecks.length)return(0,qt.of)(g).pipe((0,Pr.b)(b=>{const I=new fh(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(I)}),(0,jr.w)(b=>{let I=!1;return(0,qt.of)(b).pipe(function kp(n,t){return(0,li.z)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=e;if(!o.length)return(0,qt.of)(e);let p=0;return(0,Tr.D)(o).pipe(Uo(g=>function jl(n,t,e,r){const o=n.routeConfig,p=n._resolve;return void 0!==o?.title&&!Gf(o)&&(p[zo]=o.title),function Mh(n,t,e,r){const o=function bg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return(0,qt.of)({});const p={};return(0,Tr.D)(o).pipe((0,li.z)(g=>function wg(n,t,e,r){const o=xc(t)??r,p=Xa(n,o);return vo(p.resolve?p.resolve(t,e):o.runInContext(()=>p(t,e)))}(n[g],t,e,r).pipe(Vi(),(0,Pr.b)(b=>{p[g]=b}))),Fl(1),function hc(n){return(0,en.U)(()=>n)}(p),es(g=>Iy(g)?Qs.E:Xs(g)))}(p,n,t,r).pipe((0,en.U)(g=>(n._resolvedData=g,n.data=mh(n,e).resolve,o&&Gf(o)&&(n.data[zo]=o.title),null)))}(g.route,r,n,t)),(0,Pr.b)(()=>p++),Fl(1),(0,li.z)(g=>p===o.length?(0,qt.of)(e):Qs.E))})}(e.paramsInheritanceStrategy,this.environmentInjector),(0,Pr.b)({next:()=>I=!0,complete:()=>{I||(e.restoreHistory(b),this.cancelNavigationTransition(b,"",2))}}))}),(0,Pr.b)(b=>{const I=new no(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(I)}))}),qf(g=>{const b=I=>{const z=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&z.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Pr.b)(G=>{I.component=G}),(0,en.U)(()=>{})));for(const G of I.children)z.push(...b(G));return z};return lc(b(g.targetSnapshot.root)).pipe(cc(),(0,Yr.q)(1))}),qf(()=>this.afterPreactivation()),(0,en.U)(g=>{const b=function r0(n,t,e){const r=Tp(n,t._root,e?e._root:void 0);return new Cr(r,t)}(e.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return r={...g,targetRouterState:b}}),(0,Pr.b)(g=>{e.currentUrlTree=g.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),e.routerState=g.targetRouterState,"deferred"===e.urlUpdateStrategy&&(g.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,g),e.browserUrlTree=g.urlAfterRedirects)}),((n,t,e,r)=>(0,en.U)(o=>(new dg(t,o.targetRouterState,o.currentRouterState,e,r).activate(n),o)))(this.rootContexts,e.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),(0,Yr.q)(1),(0,Pr.b)({next:g=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Za(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{o=!0}}),Js(()=>{o||p||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),es(g=>{if(p=!0,bh(g)){Uf(g)||(e.navigated=!0,e.restoreHistory(r,!0));const b=new is(r.id,this.urlSerializer.serialize(r.extractedUrl),g.message,g.cancellationCode);if(this.events.next(b),Uf(g)){const I=e.urlHandlingStrategy.merge(g.url,e.rawUrlTree),z={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||zy(r.source)};e.scheduleNavigation(I,vu,null,z,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{e.restoreHistory(r,!0);const b=new Ya(r.id,this.urlSerializer.serialize(r.extractedUrl),g,r.targetSnapshot??void 0);this.events.next(b);try{r.resolve(e.errorHandler(g))}catch(I){r.reject(I)}}return Qs.E}))}))}cancelNavigationTransition(e,r,o){const p=new is(e.id,this.urlSerializer.serialize(e.extractedUrl),r,o);this.events.next(p),e.resolve(!1)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zy(n){return n!==vu}let Zf=(()=>{class n{buildTitle(e){let r,o=e.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(p=>p.outlet===Tn);return r}getResolvedTitleForRoute(e){return e.data[zo]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(jy)},providedIn:"root"}),n})(),jy=(()=>{class n extends Zf{constructor(e){super(),this.title=e}updateTitle(e){const r=this.buildTitle(e);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(_a))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hy=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Wy)},providedIn:"root"}),n})();class $y{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Wy=(()=>{class n extends $y{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=c.n5z(n)))(r||n)}}(),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oh=new c.OlP("",{providedIn:"root",factory:()=>({})});let Bp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Gy)},providedIn:"root"}),n})(),Gy=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var os=(()=>((os=os||{})[os.COMPLETE=0]="COMPLETE",os[os.FAILED=1]="FAILED",os[os.REDIRECTING=2]="REDIRECTING",os))();function qy(n,t){n.events.pipe(Or(e=>e instanceof Za||e instanceof is||e instanceof Ya||e instanceof bu),(0,en.U)(e=>e instanceof Za||e instanceof bu?os.COMPLETE:e instanceof is&&(0===e.code||1===e.code)?os.REDIRECTING:os.FAILED),Or(e=>e!==os.REDIRECTING),(0,Yr.q)(1)).subscribe(()=>{t()})}function Mi(n){throw n}function Yf(n,t,e){return t.parse("/")}const Ky={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Eg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $o=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)(Oh,{optional:!0})||{},this.pendingTasks=(0,c.f3M)(c.HDt),this.errorHandler=this.options.errorHandler||Mi,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Yf,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,c.f3M)(Bp),this.routeReuseStrategy=(0,c.f3M)(Hy),this.titleStrategy=(0,c.f3M)(Zf),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,c.f3M)(Nh,{optional:!0})?.flat()??[],this.navigationTransitions=(0,c.f3M)(Kf),this.urlSerializer=(0,c.f3M)(Pe),this.location=(0,c.f3M)($e),this.componentInputBindingEnabled=!!(0,c.f3M)(Bf,{optional:!0}),this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ca,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ro(0,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vu,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r="popstate"===e.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,r,e.state)},0)}))}navigateToSyncWithBrowser(e,r,o){const p={replaceUrl:!0},g=o?.navigationId?o:null;if(o){const I={...o};delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(p.state=I)}const b=this.parseUrl(e);this.scheduleNavigation(b,r,g,p)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Eh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:o,queryParams:p,fragment:g,queryParamsHandling:b,preserveFragment:I}=r,z=I?this.currentUrlTree.fragment:g;let te,G=null;switch(b){case"merge":G={...this.currentUrlTree.queryParams,...p};break;case"preserve":G=this.currentUrlTree.queryParams;break;default:G=p||null}null!==G&&(G=this.removeEmptyProps(G));try{te=Ff(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),te=this.currentUrlTree.root}return cd(te,e,G,z??null)}navigateByUrl(e,r={skipLocationChange:!1}){const o=_u(e)?e:this.parseUrl(e),p=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(p,vu,null,r)}navigate(e,r={skipLocationChange:!1}){return function Vp(n){for(let t=0;t<n.length;t++)if(null==n[t])throw new c.vHH(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return r}isActive(e,r){let o;if(o=!0===r?{...Ky}:!1===r?{...Eg}:r,_u(e))return Bl(this.currentUrlTree,e,o);const p=this.parseUrl(e);return Bl(this.currentUrlTree,p,o)}removeEmptyProps(e){return Object.keys(e).reduce((r,o)=>{const p=e[o];return null!=p&&(r[o]=p),r},{})}scheduleNavigation(e,r,o,p,g){if(this.disposed)return Promise.resolve(!1);let b,I,z;g?(b=g.resolve,I=g.reject,z=g.promise):z=new Promise((te,he)=>{b=te,I=he});const G=this.pendingTasks.add();return qy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(G))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:p,resolve:b,reject:I,promise:z,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),z.catch(te=>Promise.reject(te))}setBrowserUrl(e,r){const o=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const g={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",g)}else{const p={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(o,"",p)}}restoreHistory(e,r=!1){if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-(this.browserPageId??this.currentPageId);0!==p?this.location.historyGo(p):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===p&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Cg{}let zp=(()=>{class n{constructor(e,r,o,p,g){this.router=e,this.injector=o,this.preloadingStrategy=p,this.loader=g}setUpPreloading(){this.subscription=this.router.events.pipe(Or(e=>e instanceof Za),Uo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const o=[];for(const p of r){p.providers&&!p._injector&&(p._injector=(0,c.MMx)(p.providers,e,`Route: ${p.path}`));const g=p._injector??e,b=p._loadedInjector??g;(p.loadChildren&&!p._loadedRoutes&&void 0===p.canLoad||p.loadComponent&&!p._loadedComponent)&&o.push(this.preloadConfig(g,p)),(p.children||p._loadedRoutes)&&o.push(this.processRoutes(b,p.children??p._loadedRoutes))}return(0,Tr.D)(o).pipe((0,wa.J)())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(e,r):(0,qt.of)(null);const p=o.pipe((0,li.z)(g=>null===g?(0,qt.of)(void 0):(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,this.processRoutes(g.injector??e,g.routes))));if(r.loadComponent&&!r._loadedComponent){const g=this.loader.loadComponent(r);return(0,Tr.D)([p,g]).pipe((0,wa.J)())}return p})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG($o),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(Cg),c.LFG(xg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dr=new c.OlP("");let Su=(()=>{class n{constructor(e,r,o,p,g={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=o,this.zone=p,this.options=g,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},g.scrollPositionRestoration=g.scrollPositionRestoration||"disabled",g.anchorScrolling=g.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Vl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Za?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof bu&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ne&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ne(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(e){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Hl(n,t){return{\u0275kind:n,\u0275providers:t}}function Xf(){const n=(0,c.f3M)(c.zs3);return t=>{const e=n.get(c.z2F);if(t!==e.components[0])return;const r=n.get($o),o=n.get(v0);1===n.get(Ph)&&r.initialNavigation(),n.get(Tg,null,c.XFs.Optional)?.setUpPreloading(),n.get(dr,null,c.XFs.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const v0=new c.OlP("",{factory:()=>new $t.x}),Ph=new c.OlP("",{providedIn:"root",factory:()=>1}),Tg=new c.OlP("");function xd(n){return Hl(0,[{provide:Tg,useExisting:zp},{provide:Cg,useExisting:n}])}const Rh=new c.OlP("ROUTER_FORROOT_GUARD"),Sc=[$e,{provide:Pe,useClass:qe},$o,dt,{provide:Ho,useFactory:function Sg(n){return n.routerState.root},deps:[$o]},xg,[]];function Ng(){return new c.PXZ("Router",$o)}let Og=(()=>{class n{constructor(e){}static forRoot(e,r){return{ngModule:n,providers:[Sc,[],{provide:Nh,multi:!0,useValue:e},{provide:Rh,useFactory:Qa,deps:[[$o,new c.FiY,new c.tp0]]},{provide:Oh,useValue:r||{}},r?.useHash?{provide:tt,useClass:le}:{provide:tt,useClass:lt},{provide:dr,useFactory:()=>{const n=(0,c.f3M)(Fo),t=(0,c.f3M)(c.R0b),e=(0,c.f3M)(Oh),r=(0,c.f3M)(Kf),o=(0,c.f3M)(Pe);return e.scrollOffset&&n.setOffset(e.scrollOffset),new Su(o,r,n,t,e)}},r?.preloadingStrategy?xd(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:Ng},r?.initialNavigation?tv(r):[],r?.bindToComponentInputs?Hl(8,[vh,{provide:Bf,useExisting:vh}]).\u0275providers:[],[{provide:Pg,useFactory:Xf},{provide:c.tb,multi:!0,useExisting:Pg}]]}}static forChild(e){return{ngModule:n,providers:[{provide:Nh,multi:!0,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Rh,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Qa(n){return"guarded"}function tv(n){return["disabled"===n.initialNavigation?Hl(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const t=(0,c.f3M)($o);return()=>{t.setUpLocationChangeListener()}}},{provide:Ph,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Hl(2,[{provide:Ph,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:t=>{const e=t.get(Ce,Promise.resolve());return()=>e.then(()=>new Promise(r=>{const o=t.get($o),p=t.get(v0);qy(o,()=>{r(!0)}),t.get(Kf).afterPreactivation=()=>(r(!0),p.closed?(0,qt.of)(void 0):p),o.initialNavigation()}))}}]).\u0275providers:[]]}const Pg=new c.OlP("");let E0=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,r){1&e&&c._UZ(0,"router-outlet")},dependencies:[gd]}),n})();class sv{}class C0{}const Dc="*";function av(n,t){return{type:7,name:n,definitions:t,options:{}}}function Cd(n,t=null){return{type:4,styles:t,timings:n}}function Jf(n,t=null){return{type:2,steps:n,options:t}}function Du(n){return{type:6,styles:n,offset:null}}function Sd(n,t,e){return{type:0,name:n,styles:t,options:e}}function jp(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}class Ic{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class D0{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,o=0;const p=this.players.length;0==p?queueMicrotask(()=>this._onFinish()):this.players.forEach(g=>{g.onDone(()=>{++e==p&&this._onFinish()}),g.onDestroy(()=>{++r==p&&this._onDestroy()}),g.onStart(()=>{++o==p&&this._onStart()})}),this.totalTime=this.players.reduce((g,b)=>Math.max(g,b.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(o)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}function tm(n){return new c.vHH(3e3,!1)}function Cs(n){switch(n.length){case 0:return new Ic;case 1:return n[0];default:return new D0(n)}}function Lh(n,t,e=new Map,r=new Map){const o=[],p=[];let g=-1,b=null;if(t.forEach(I=>{const z=I.get("offset"),G=z==g,te=G&&b||new Map;I.forEach((he,_e)=>{let ye=_e,ge=he;if("offset"!==_e)switch(ye=n.normalizePropertyName(ye,o),ge){case"!":ge=e.get(_e);break;case Dc:ge=r.get(_e);break;default:ge=n.normalizeStyleValue(_e,ye,ge,o)}te.set(ye,ge)}),G||p.push(te),b=te,g=z}),o.length)throw function qp(n){return new c.vHH(3502,!1)}();return p}function Kp(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&Zp(e,"start",n)));break;case"done":n.onDone(()=>r(e&&Zp(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&Zp(e,"destroy",n)))}}function Zp(n,t,e){const p=lm(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,e.totalTime??n.totalTime,!!e.disabled),g=n._data;return null!=g&&(p._data=g),p}function lm(n,t,e,r,o="",p=0,g){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:o,totalTime:p,disabled:!!g}}function Ss(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function _v(n){const t=n.indexOf(":");return[n.substring(1,t),n.slice(t+1)]}const V0=(()=>typeof document>"u"?null:document.documentElement)();function zg(n){const t=n.parentNode||n.host||null;return t===V0?null:t}let Tc=null,Dd=!1;function yv(n,t){for(;t;){if(t===n)return!0;t=zg(t)}return!1}function j0(n,t,e){if(e)return Array.from(n.querySelectorAll(t));const r=n.querySelector(t);return r?[r]:[]}let jg=(()=>{class n{validateStyleProperty(e){return function Tu(n){Tc||(Tc=function tE(){return typeof document<"u"?document.body:null}()||{},Dd=!!Tc.style&&"WebkitAppearance"in Tc.style);let t=!0;return Tc.style&&!function U0(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in Tc.style,!t&&Dd&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Tc.style)),t}(e)}matchesElement(e,r){return!1}containsElement(e,r){return yv(e,r)}getParentElement(e){return zg(e)}query(e,r,o){return j0(e,r,o)}computeStyle(e,r,o){return o||""}animate(e,r,o,p,g,b=[],I){return new Ic(o,p)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),um=(()=>{class n{}return n.NOOP=new jg,n})();const nE=1e3,dm="ng-enter",Yp="ng-leave",Xp="ng-trigger",An=".ng-trigger",Bh="ng-animating",Qp=".ng-animating";function Au(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:hm(parseFloat(t[1]),t[2])}function hm(n,t){return"s"===t?n*nE:n}function Vh(n,t,e){return n.hasOwnProperty("duration")?n:function vv(n,t,e){let o,p=0,g="";if("string"==typeof n){const b=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===b)return t.push(tm()),{duration:0,delay:0,easing:""};o=hm(parseFloat(b[1]),b[2]);const I=b[3];null!=I&&(p=hm(parseFloat(I),b[4]));const z=b[5];z&&(g=z)}else o=n;if(!e){let b=!1,I=t.length;o<0&&(t.push(function I0(){return new c.vHH(3100,!1)}()),b=!0),p<0&&(t.push(function T0(){return new c.vHH(3101,!1)}()),b=!0),b&&t.splice(I,0,tm())}return{duration:o,delay:p,easing:g}}(n,t,e)}function Id(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Td(n){const t=new Map;return Object.keys(n).forEach(e=>{t.set(e,n[e])}),t}function Mu(n,t=new Map,e){if(e)for(let[r,o]of e)t.set(r,o);for(let[r,o]of n)t.set(r,o);return t}function Ja(n,t,e){t.forEach((r,o)=>{const p=Nu(o);e&&!e.has(o)&&e.set(o,n.style[p]),n.style[p]=r})}function Ad(n,t){t.forEach((e,r)=>{const o=Nu(r);n.style[o]=""})}function Md(n){return Array.isArray(n)?1==n.length?n[0]:Jf(n):n}const Da=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ac(n){let t=[];if("string"==typeof n){let e;for(;e=Da.exec(n);)t.push(e[1]);Da.lastIndex=0}return t}function Nd(n,t,e){const r=n.toString(),o=r.replace(Da,(p,g)=>{let b=t[g];return null==b&&(e.push(function hv(n){return new c.vHH(3003,!1)}()),b=""),b.toString()});return o==r?n:o}function Jp(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const ef=/-+([a-z0-9])/g;function Nu(n){return n.replace(ef,(...t)=>t[1].toUpperCase())}function ss(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function A0(n){return new c.vHH(3004,!1)}()}}function pm(n,t){return window.getComputedStyle(n)[t]}const zh="*";function $0(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function W0(n,t,e){if(":"==n[0]){const I=function G0(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(function O0(n){return new c.vHH(3016,!1)}()),"* => *"}}(n,e);if("function"==typeof I)return void t.push(I);n=I}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(function eE(n){return new c.vHH(3015,!1)}()),t;const o=r[1],p=r[2],g=r[3];t.push(gm(o,g));"<"==p[0]&&!(o==zh&&g==zh)&&t.push(gm(g,o))}(r,e,t)):e.push(n),e}const mm=new Set(["true","1"]),nf=new Set(["false","0"]);function gm(n,t){const e=mm.has(n)||nf.has(n),r=mm.has(t)||nf.has(t);return(o,p)=>{let g=n==zh||n==o,b=t==zh||t==p;return!g&&e&&"boolean"==typeof o&&(g=o?mm.has(n):nf.has(n)),!b&&r&&"boolean"==typeof p&&(b=p?mm.has(t):nf.has(t)),g&&b}}const Sv=new RegExp("s*:selfs*,?","g");function Wo(n,t,e,r){return new q0(n).build(t,e,r)}class q0{constructor(t){this._driver=t}build(t,e,r){const o=new Yg(e);return this._resetContextStyleTimingState(o),ss(this,Md(t),o)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,o=e.depCount=0;const p=[],g=[];return"@"==t.name.charAt(0)&&e.errors.push(function Jx(){return new c.vHH(3006,!1)}()),t.definitions.forEach(b=>{if(this._resetContextStyleTimingState(e),0==b.type){const I=b,z=I.name;z.toString().split(/\s*,\s*/).forEach(G=>{I.name=G,p.push(this.visitState(I,e))}),I.name=z}else if(1==b.type){const I=this.visitTransition(b,e);r+=I.queryCount,o+=I.depCount,g.push(I)}else e.errors.push(function pv(){return new c.vHH(3007,!1)}())}),{type:7,name:t.name,states:p,transitions:g,queryCount:r,depCount:o,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),o=t.options&&t.options.params||null;if(r.containsDynamicStyles){const p=new Set,g=o||{};r.styles.forEach(b=>{b instanceof Map&&b.forEach(I=>{Ac(I).forEach(z=>{g.hasOwnProperty(z)||p.add(z)})})}),p.size&&(Jp(p.values()),e.errors.push(function nm(n,t){return new c.vHH(3008,!1)}()))}return{type:0,name:t.name,style:r,options:o?{params:o}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=ss(this,Md(t.animation),e);return{type:1,matchers:$0(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Ou(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>ss(this,r,e)),options:Ou(t.options)}}visitGroup(t,e){const r=e.currentTime;let o=0;const p=t.steps.map(g=>{e.currentTime=r;const b=ss(this,g,e);return o=Math.max(o,e.currentTime),b});return e.currentTime=o,{type:3,steps:p,options:Ou(t.options)}}visitAnimate(t,e){const r=function Dv(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return _m(Vh(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(p=>"{"==p.charAt(0)&&"{"==p.charAt(1))){const p=_m(0,0,"");return p.dynamic=!0,p.strValue=e,p}const o=Vh(e,t);return _m(o.duration,o.delay,o.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let o,p=t.styles?t.styles:Du({});if(5==p.type)o=this.visitKeyframes(p,e);else{let g=t.styles,b=!1;if(!g){b=!0;const z={};r.easing&&(z.easing=r.easing),g=Du(z)}e.currentTime+=r.duration+r.delay;const I=this.visitStyle(g,e);I.isEmptyStep=b,o=I}return e.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[],o=Array.isArray(t.styles)?t.styles:[t.styles];for(let b of o)"string"==typeof b?b===Dc?r.push(b):e.errors.push(new c.vHH(3002,!1)):r.push(Td(b));let p=!1,g=null;return r.forEach(b=>{if(b instanceof Map&&(b.has("easing")&&(g=b.get("easing"),b.delete("easing")),!p))for(let I of b.values())if(I.toString().indexOf("{{")>=0){p=!0;break}}),{type:6,styles:r,easing:g,offset:t.offset,containsDynamicStyles:p,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let o=e.currentTime,p=e.currentTime;r&&p>0&&(p-=r.duration+r.delay),t.styles.forEach(g=>{"string"!=typeof g&&g.forEach((b,I)=>{const z=e.collectedStyles.get(e.currentQuerySelector),G=z.get(I);let te=!0;G&&(p!=o&&p>=G.startTime&&o<=G.endTime&&(e.errors.push(function Fg(n,t,e,r,o){return new c.vHH(3010,!1)}()),te=!1),p=G.startTime),te&&z.set(I,{startTime:p,endTime:o}),e.options&&function $g(n,t,e){const r=t.params||{},o=Ac(n);o.length&&o.forEach(p=>{r.hasOwnProperty(p)||e.push(function dv(n){return new c.vHH(3001,!1)}())})}(b,e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function im(){return new c.vHH(3011,!1)}()),r;let p=0;const g=[];let b=!1,I=!1,z=0;const G=t.steps.map(Je=>{const et=this._makeStyleAst(Je,e);let Xe=null!=et.offset?et.offset:function Z0(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){const r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(et.styles),Qe=0;return null!=Xe&&(p++,Qe=et.offset=Xe),I=I||Qe<0||Qe>1,b=b||Qe<z,z=Qe,g.push(Qe),et});I&&e.errors.push(function Wp(){return new c.vHH(3012,!1)}()),b&&e.errors.push(function fv(){return new c.vHH(3200,!1)}());const te=t.steps.length;let he=0;p>0&&p<te?e.errors.push(function Lg(){return new c.vHH(3202,!1)}()):0==p&&(he=1/(te-1));const _e=te-1,ye=e.currentTime,ge=e.currentAnimateTimings,Re=ge.duration;return G.forEach((Je,et)=>{const Xe=he>0?et==_e?1:he*et:g[et],Qe=Xe*Re;e.currentTime=ye+ge.delay+Qe,ge.duration=Qe,this._validateStyleAst(Je,e),Je.offset=Xe,r.styles.push(Je)}),r}visitReference(t,e){return{type:8,animation:ss(this,Md(t.animation),e),options:Ou(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ou(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ou(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,o=t.options||{};e.queryCount++,e.currentQuery=t;const[p,g]=function K0(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(Sv,"")),n=n.replace(/@\*/g,An).replace(/@\w+/g,e=>An+"-"+e.slice(1)).replace(/:animating/g,Qp),[n,t]}(t.selector);e.currentQuerySelector=r.length?r+" "+p:p,Ss(e.collectedStyles,e.currentQuerySelector,new Map);const b=ss(this,Md(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:p,limit:o.limit||0,optional:!!o.optional,includeSelf:g,animation:b,originalSelector:t.selector,options:Ou(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Bg(){return new c.vHH(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:Vh(t.timings,e.errors,!0);return{type:12,animation:ss(this,Md(t.animation),e),timings:r,options:null}}}class Yg{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ou(n){return n?(n=Id(n)).params&&(n.params=function Zg(n){return n?Id(n):null}(n.params)):n={},n}function _m(n,t,e){return{duration:n,delay:t,easing:e}}function Xg(n,t,e,r,o,p,g=null,b=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:o,delay:p,totalTime:o+p,easing:g,subTimeline:b}}class rf{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Qg=new RegExp(":enter","g"),X0=new RegExp(":leave","g");function Jg(n,t,e,r,o,p=new Map,g=new Map,b,I,z=[]){return(new el).buildKeyframes(n,t,e,r,o,p,g,b,I,z)}class el{buildKeyframes(t,e,r,o,p,g,b,I,z,G=[]){z=z||new rf;const te=new e_(t,e,z,o,p,G,[]);te.options=I;const he=I.delay?Au(I.delay):0;te.currentTimeline.delayNextStep(he),te.currentTimeline.setStyles([g],null,te.errors,I),ss(this,r,te);const _e=te.timelines.filter(ye=>ye.containsAnimation());if(_e.length&&b.size){let ye;for(let ge=_e.length-1;ge>=0;ge--){const Re=_e[ge];if(Re.element===e){ye=Re;break}}ye&&!ye.allowOnlyTimelineStyles()&&ye.setStyles([b],null,te.errors,I)}return _e.length?_e.map(ye=>ye.buildKeyframes()):[Xg(e,[],[],[],0,he,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.get(e.element);if(r){const o=e.createSubContext(t.options),p=e.currentTimeline.currentTime,g=this._visitSubInstructions(r,o,o.options);p!=g&&e.transformIntoNewTimeline(g)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(const o of t){const p=o?.delay;if(p){const g="number"==typeof p?p:Au(Nd(p,o?.params??{},e.errors));r.delayNextStep(g)}}}_visitSubInstructions(t,e,r){let p=e.currentTimeline.currentTime;const g=null!=r.duration?Au(r.duration):null,b=null!=r.delay?Au(r.delay):null;return 0!==g&&t.forEach(I=>{const z=e.appendInstructionToTimeline(I,g,b);p=Math.max(p,z.duration+z.delay)}),p}visitReference(t,e){e.updateOptions(t.options,!0),ss(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let o=e;const p=t.options;if(p&&(p.params||p.delay)&&(o=e.createSubContext(p),o.transformIntoNewTimeline(),null!=p.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Od);const g=Au(p.delay);o.delayNextStep(g)}t.steps.length&&(t.steps.forEach(g=>ss(this,g,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let o=e.currentTimeline.currentTime;const p=t.options&&t.options.delay?Au(t.options.delay):0;t.steps.forEach(g=>{const b=e.createSubContext(t.options);p&&b.delayNextStep(p),ss(this,g,b),o=Math.max(o,b.currentTimeline.currentTime),r.push(b.currentTimeline)}),r.forEach(g=>e.currentTimeline.mergeTimelineCollectedStyles(g)),e.transformIntoNewTimeline(o),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return Vh(e.params?Nd(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),o=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),o.snapshotCurrentStyles());const p=t.style;5==p.type?this.visitKeyframes(p,e):(e.incrementTime(r.duration),this.visitStyle(p,e),o.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,o=e.currentAnimateTimings;!o&&r.hasCurrentStyleProperties()&&r.forwardFrame();const p=o&&o.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(p):r.setStyles(t.styles,p,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,o=e.currentTimeline.duration,p=r.duration,b=e.createSubContext().currentTimeline;b.easing=r.easing,t.styles.forEach(I=>{b.forwardTime((I.offset||0)*p),b.setStyles(I.styles,I.easing,e.errors,e.options),b.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(b),e.transformIntoNewTimeline(o+p),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,o=t.options||{},p=o.delay?Au(o.delay):0;p&&(6===e.previousNode.type||0==r&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Od);let g=r;const b=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!o.optional,e.errors);e.currentQueryTotal=b.length;let I=null;b.forEach((z,G)=>{e.currentQueryIndex=G;const te=e.createSubContext(t.options,z);p&&te.delayNextStep(p),z===e.element&&(I=te.currentTimeline),ss(this,t.animation,te),te.currentTimeline.applyStylesToKeyframe(),g=Math.max(g,te.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(g),I&&(e.currentTimeline.mergeTimelineCollectedStyles(I),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,o=e.currentTimeline,p=t.timings,g=Math.abs(p.duration),b=g*(e.currentQueryTotal-1);let I=g*e.currentQueryIndex;switch(p.duration<0?"reverse":p.easing){case"reverse":I=b-I;break;case"full":I=r.currentStaggerTime}const G=e.currentTimeline;I&&G.delayNextStep(I);const te=G.currentTime;ss(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=o.currentTime-te+(o.startTime-r.currentTimeline.startTime)}}const Od={};class e_{constructor(t,e,r,o,p,g,b,I){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=p,this.errors=g,this.timelines=b,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Od,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=I||new jh(this._driver,e,0),b.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let o=this.options;null!=r.duration&&(o.duration=Au(r.duration)),null!=r.delay&&(o.delay=Au(r.delay));const p=r.params;if(p){let g=o.params;g||(g=this.options.params={}),Object.keys(p).forEach(b=>{(!e||!g.hasOwnProperty(b))&&(g[b]=Nd(p[b],g,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(o=>{r[o]=e[o]})}}return t}createSubContext(t=null,e,r){const o=e||this.element,p=new e_(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return p.previousNode=this.previousNode,p.currentAnimateTimings=this.currentAnimateTimings,p.options=this._copyOptions(),p.updateOptions(t),p.currentQueryIndex=this.currentQueryIndex,p.currentQueryTotal=this.currentQueryTotal,p.parentContext=this,this.subContextCount++,p}transformIntoNewTimeline(t){return this.previousNode=Od,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const o={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},p=new Q0(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,o,t.stretchStartingKeyframe);return this.timelines.push(p),o}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,o,p,g){let b=[];if(o&&b.push(this.element),t.length>0){t=(t=t.replace(Qg,"."+this._enterClassName)).replace(X0,"."+this._leaveClassName);let z=this._driver.query(this.element,t,1!=r);0!==r&&(z=r<0?z.slice(z.length+r,z.length):z.slice(0,r)),b.push(...z)}return!p&&0==b.length&&g.push(function Vg(n){return new c.vHH(3014,!1)}()),b}}class jh{constructor(t,e,r,o){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new jh(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Dc),this._currentKeyframe.set(e,Dc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,o){e&&this._previousKeyframe.set("easing",e);const p=o&&o.params||{},g=function Iv(n,t){const e=new Map;let r;return n.forEach(o=>{if("*"===o){r=r||t.keys();for(let p of r)e.set(p,Dc)}else Mu(o,e)}),e}(t,this._globalTimelineStyles);for(let[b,I]of g){const z=Nd(I,p,r);this._pendingStyles.set(b,z),this._localTimelineStyles.has(b)||this._backFill.set(b,this._globalTimelineStyles.get(b)??Dc),this._updateStyle(b,z)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{const o=this._styleSummary.get(r);(!o||e.time>o.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((b,I)=>{const z=Mu(b,new Map,this._backFill);z.forEach((G,te)=>{"!"===G?t.add(te):G===Dc&&e.add(te)}),r||z.set("offset",I/this.duration),o.push(z)});const p=t.size?Jp(t.values()):[],g=e.size?Jp(e.values()):[];if(r){const b=o[0],I=new Map(b);b.set("offset",0),I.set("offset",1),o=[b,I]}return Xg(this.element,o,p,g,this.duration,this.startTime,this.easing,!1)}}class Q0 extends jh{constructor(t,e,r,o,p,g,b=!1){super(t,e,g.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=p,this._stretchStartingKeyframe=b,this.timings={duration:g.duration,delay:g.delay,easing:g.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&e){const p=[],g=r+e,b=e/g,I=Mu(t[0]);I.set("offset",0),p.push(I);const z=Mu(t[0]);z.set("offset",bm(b)),p.push(z);const G=t.length-1;for(let te=1;te<=G;te++){let he=Mu(t[te]);const _e=he.get("offset");he.set("offset",bm((e+_e*r)/g)),p.push(he)}r=g,e=0,o="",t=p}return Xg(this.element,t,this.preStyleProps,this.postStyleProps,r,e,o,!0)}}function bm(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class sf{}const Tv=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Av extends sf{normalizePropertyName(t,e){return Nu(t)}normalizeStyleValue(t,e,r,o){let p="";const g=r.toString().trim();if(Tv.has(e)&&0!==r&&"0"!==r)if("number"==typeof r)p="px";else{const b=r.match(/^[+-]?[\d\.]+([a-z]*)$/);b&&0==b[1].length&&o.push(function M0(n,t){return new c.vHH(3005,!1)}())}return g+p}}function t_(n,t,e,r,o,p,g,b,I,z,G,te,he){return{type:0,element:n,triggerName:t,isRemovalTransition:o,fromState:e,fromStyles:p,toState:r,toStyles:g,timelines:b,queriedElements:I,preStyleProps:z,postStyleProps:G,totalTime:te,errors:he}}const Hh={};class $h{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,o){return function Mv(n,t,e,r,o){return n.some(p=>p(t,e,r,o))}(this.ast.matchers,t,e,r,o)}buildStyles(t,e,r){let o=this._stateStyles.get("*");return void 0!==t&&(o=this._stateStyles.get(t?.toString())||o),o?o.buildStyles(e,r):new Map}build(t,e,r,o,p,g,b,I,z,G){const te=[],he=this.ast.options&&this.ast.options.params||Hh,ye=this.buildStyles(r,b&&b.params||Hh,te),ge=I&&I.params||Hh,Re=this.buildStyles(o,ge,te),Je=new Set,et=new Map,Xe=new Map,Qe="void"===o,_t={params:J0(ge,he),delay:this.ast.options?.delay},Ot=G?[]:Jg(t,e,this.ast.animation,p,g,ye,Re,_t,z,te);let an=0;if(Ot.forEach(Jn=>{an=Math.max(Jn.duration+Jn.delay,an)}),te.length)return t_(e,this._triggerName,r,o,Qe,ye,Re,[],[],et,Xe,an,te);Ot.forEach(Jn=>{const zn=Jn.element,yi=Ss(et,zn,new Set);Jn.preStyleProps.forEach(bn=>yi.add(bn));const Sr=Ss(Xe,zn,new Set);Jn.postStyleProps.forEach(bn=>Sr.add(bn)),zn!==e&&Je.add(zn)});const cn=Jp(Je.values());return t_(e,this._triggerName,r,o,Qe,ye,Re,Ot,cn,et,Xe,an)}}function J0(n,t){const e=Id(t);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(e[r]=n[r]);return e}class n_{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r=new Map,o=Id(this.defaultParams);return Object.keys(t).forEach(p=>{const g=t[p];null!==g&&(o[p]=g)}),this.styles.styles.forEach(p=>{"string"!=typeof p&&p.forEach((g,b)=>{g&&(g=Nd(g,o,e));const I=this.normalizer.normalizePropertyName(b,e);g=this.normalizer.normalizeStyleValue(b,I,g,e),r.set(b,g)})}),r}}class ew{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(o=>{this.states.set(o.name,new n_(o.style,o.options&&o.options.params||{},r))}),Ov(this.states,"true","1"),Ov(this.states,"false","0"),e.transitions.forEach(o=>{this.transitionFactories.push(new $h(t,o,this.states))}),this.fallbackTransition=function bo(n,t,e){return new $h(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(g,b)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,o){return this.transitionFactories.find(g=>g.match(t,e,r,o))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function Ov(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}const Pv=new rf;class tw{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const r=[],p=Wo(this._driver,e,r,[]);if(r.length)throw function R0(n){return new c.vHH(3503,!1)}();this._animations.set(t,p)}_buildPlayer(t,e,r){const o=t.element,p=Lh(this._normalizer,t.keyframes,e,r);return this._driver.animate(o,p,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const o=[],p=this._animations.get(t);let g;const b=new Map;if(p?(g=Jg(this._driver,e,p,dm,Yp,new Map,new Map,r,Pv,o),g.forEach(G=>{const te=Ss(b,G.element,new Map);G.postStyleProps.forEach(he=>te.set(he,null))})):(o.push(function mv(){return new c.vHH(3300,!1)}()),g=[]),o.length)throw function k0(n){return new c.vHH(3504,!1)}();b.forEach((G,te)=>{G.forEach((he,_e)=>{G.set(_e,this._driver.computeStyle(te,_e,Dc))})});const z=Cs(g.map(G=>{const te=b.get(G.element);return this._buildPlayer(G,new Map,te)}));return this._playersById.set(t,z),z.onDestroy(()=>this.destroy(t)),this.players.push(z),z}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function F0(n){return new c.vHH(3301,!1)}();return e}listen(t,e,r,o){const p=lm(e,"","","");return Kp(this._getPlayer(t),r,p,o),()=>{}}command(t,e,r,o){if("register"==r)return void this.register(t,o[0]);if("create"==r)return void this.create(t,e,o[0]||{});const p=this._getPlayer(t);switch(r){case"play":p.play();break;case"pause":p.pause();break;case"reset":p.reset();break;case"restart":p.restart();break;case"finish":p.finish();break;case"init":p.init();break;case"setPosition":p.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(t)}}}const af="ng-animate-queued",Wh="ng-animate-disabled",kv=[],Fv={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},rw={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ta="__ng_removed";class Ia{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function uf(n){return n??null}(r?t.value:t),r){const p=Id(t);delete p.value,this.options=p}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(o=>{null==r[o]&&(r[o]=e[o])})}}}const Pu="void",r_=new Ia(Pu);class Lv{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ta(e,this._hostClassName)}listen(t,e,r,o){if(!this._triggers.has(e))throw function L0(n,t){return new c.vHH(3302,!1)}();if(null==r||0==r.length)throw function gv(n){return new c.vHH(3303,!1)}();if(!function oE(n){return"start"==n||"done"==n}(r))throw function om(n,t){return new c.vHH(3400,!1)}();const p=Ss(this._elementListeners,t,[]),g={name:e,phase:r,callback:o};p.push(g);const b=Ss(this._engine.statesByElement,t,new Map);return b.has(e)||(Ta(t,Xp),Ta(t,Xp+"-"+e),b.set(e,r_)),()=>{this._engine.afterFlush(()=>{const I=p.indexOf(g);I>=0&&p.splice(I,1),this._triggers.has(e)||b.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function sm(n){return new c.vHH(3401,!1)}();return e}trigger(t,e,r,o=!0){const p=this._getTrigger(e),g=new i_(this.id,e,t);let b=this._engine.statesByElement.get(t);b||(Ta(t,Xp),Ta(t,Xp+"-"+e),this._engine.statesByElement.set(t,b=new Map));let I=b.get(e);const z=new Ia(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&I&&z.absorbOptions(I.options),b.set(e,z),I||(I=r_),z.value!==Pu&&I.value===z.value){if(!function a_(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let o=0;o<e.length;o++){const p=e[o];if(!t.hasOwnProperty(p)||n[p]!==t[p])return!1}return!0}(I.params,z.params)){const ge=[],Re=p.matchStyles(I.value,I.params,ge),Je=p.matchStyles(z.value,z.params,ge);ge.length?this._engine.reportError(ge):this._engine.afterFlush(()=>{Ad(t,Re),Ja(t,Je)})}return}const he=Ss(this._engine.playersByElement,t,[]);he.forEach(ge=>{ge.namespaceId==this.id&&ge.triggerName==e&&ge.queued&&ge.destroy()});let _e=p.matchTransition(I.value,z.value,t,z.params),ye=!1;if(!_e){if(!o)return;_e=p.fallbackTransition,ye=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:_e,fromState:I,toState:z,player:g,isFallbackTransition:ye}),ye||(Ta(t,af),g.onStart(()=>{Pd(t,af)})),g.onDone(()=>{let ge=this.players.indexOf(g);ge>=0&&this.players.splice(ge,1);const Re=this._engine.playersByElement.get(t);if(Re){let Je=Re.indexOf(g);Je>=0&&Re.splice(Je,1)}}),this.players.push(g),he.push(g),g}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(o=>o.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,An,!0);r.forEach(o=>{if(o[ta])return;const p=this._engine.fetchNamespacesByElement(o);p.size?p.forEach(g=>g.triggerLeaveAnimation(o,e,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(t,e,r,o){const p=this._engine.statesByElement.get(t),g=new Map;if(p){const b=[];if(p.forEach((I,z)=>{if(g.set(z,I.value),this._triggers.has(z)){const G=this.trigger(t,z,Pu,o);G&&b.push(G)}}),b.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,g),r&&Cs(b).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const o=new Set;e.forEach(p=>{const g=p.name;if(o.has(g))return;o.add(g);const I=this._triggers.get(g).fallbackTransition,z=r.get(g)||r_,G=new Ia(Pu),te=new i_(this.id,g,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:g,transition:I,fromState:z,toState:G,player:te,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let o=!1;if(r.totalAnimations){const p=r.players.length?r.playersByQueriedElement.get(t):[];if(p&&p.length)o=!0;else{let g=t;for(;g=g.parentNode;)if(r.statesByElement.get(g)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(t),o)r.markElementAsRemoved(this.id,t,!1,e);else{const p=t[ta];(!p||p===Fv)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Ta(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const p=r.element,g=this._elementListeners.get(p);g&&g.forEach(b=>{if(b.name==r.triggerName){const I=lm(p,r.triggerName,r.fromState.value,r.toState.value);I._data=t,Kp(r.player,b.phase,I,b.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):e.push(r)}),this._queue=[],e.sort((r,o)=>{const p=r.transition.ast.depCount,g=o.transition.ast.depCount;return 0==p||0==g?p-g:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class Bv{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,p)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new Lv(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList,o=this.namespacesByHostElement;if(r.length-1>=0){let g=!1,b=this.driver.getParentElement(e);for(;b;){const I=o.get(b);if(I){const z=r.indexOf(I);r.splice(z+1,0,t),g=!0;break}b=this.driver.getParentElement(b)}g||r.unshift(t)}else r.push(t);return o.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let o=this._namespaceLookup[t];o&&o.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r)for(let o of r.values())if(o.namespaceId){const p=this._fetchNamespace(o.namespaceId);p&&e.add(p)}return e}trigger(t,e,r,o){if(cf(e)){const p=this._fetchNamespace(t);if(p)return p.trigger(e,r,o),!0}return!1}insertNode(t,e,r,o){if(!cf(e))return;const p=e[ta];if(p&&p.setForRemoval){p.setForRemoval=!1,p.setForMove=!0;const g=this.collectedLeaveElements.indexOf(e);g>=0&&this.collectedLeaveElements.splice(g,1)}if(t){const g=this._fetchNamespace(t);g&&g.insertNode(e,r)}o&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ta(t,Wh)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Pd(t,Wh))}removeNode(t,e,r){if(cf(e)){const o=t?this._fetchNamespace(t):null;o?o.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r);const p=this.namespacesByHostElement.get(e);p&&p.id!==t&&p.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,r,o,p){this.collectedLeaveElements.push(e),e[ta]={namespaceId:t,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:p}}listen(t,e,r,o,p){return cf(e)?this._fetchNamespace(t).listen(e,r,o,p):()=>{}}_buildInstruction(t,e,r,o,p){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,o,t.fromState.options,t.toState.options,e,p)}destroyInnerAnimations(t){let e=this.driver.query(t,An,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Qp,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Cs(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[ta];if(e&&e.setForRemoval){if(t[ta]=Fv,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Wh)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ta(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?Cs(e).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(t){throw function Fh(n){return new c.vHH(3402,!1)}()}_flushAnimations(t,e){const r=new rf,o=[],p=new Map,g=[],b=new Map,I=new Map,z=new Map,G=new Set;this.disabledNodes.forEach(Lt=>{G.add(Lt);const Wt=this.driver.query(Lt,".ng-animate-queued",!0);for(let Xt=0;Xt<Wt.length;Xt++)G.add(Wt[Xt])});const te=this.bodyNode,he=Array.from(this.statesByElement.keys()),_e=Uv(he,this.collectedEnterElements),ye=new Map;let ge=0;_e.forEach((Lt,Wt)=>{const Xt=dm+ge++;ye.set(Wt,Xt),Lt.forEach(Pn=>Ta(Pn,Xt))});const Re=[],Je=new Set,et=new Set;for(let Lt=0;Lt<this.collectedLeaveElements.length;Lt++){const Wt=this.collectedLeaveElements[Lt],Xt=Wt[ta];Xt&&Xt.setForRemoval&&(Re.push(Wt),Je.add(Wt),Xt.hasAnimation?this.driver.query(Wt,".ng-star-inserted",!0).forEach(Pn=>Je.add(Pn)):et.add(Wt))}const Xe=new Map,Qe=Uv(he,Array.from(Je));Qe.forEach((Lt,Wt)=>{const Xt=Yp+ge++;Xe.set(Wt,Xt),Lt.forEach(Pn=>Ta(Pn,Xt))}),t.push(()=>{_e.forEach((Lt,Wt)=>{const Xt=ye.get(Wt);Lt.forEach(Pn=>Pd(Pn,Xt))}),Qe.forEach((Lt,Wt)=>{const Xt=Xe.get(Wt);Lt.forEach(Pn=>Pd(Pn,Xt))}),Re.forEach(Lt=>{this.processLeaveNode(Lt)})});const _t=[],Ot=[];for(let Lt=this._namespaceList.length-1;Lt>=0;Lt--)this._namespaceList[Lt].drainQueuedTransitions(e).forEach(Xt=>{const Pn=Xt.player,Xn=Xt.element;if(_t.push(Pn),this.collectedEnterElements.length){const So=Xn[ta];if(So&&So.setForMove){if(So.previousTriggersValues&&So.previousTriggersValues.has(Xt.triggerName)){const ip=So.previousTriggersValues.get(Xt.triggerName),sl=this.statesByElement.get(Xt.element);if(sl&&sl.has(Xt.triggerName)){const Km=sl.get(Xt.triggerName);Km.value=ip,sl.set(Xt.triggerName,Km)}}return void Pn.destroy()}}const Ps=!te||!this.driver.containsElement(te,Xn),ao=Xe.get(Xn),Oa=ye.get(Xn),cr=this._buildInstruction(Xt,r,Oa,ao,Ps);if(cr.errors&&cr.errors.length)return void Ot.push(cr);if(Ps)return Pn.onStart(()=>Ad(Xn,cr.fromStyles)),Pn.onDestroy(()=>Ja(Xn,cr.toStyles)),void o.push(Pn);if(Xt.isFallbackTransition)return Pn.onStart(()=>Ad(Xn,cr.fromStyles)),Pn.onDestroy(()=>Ja(Xn,cr.toStyles)),void o.push(Pn);const Hd=[];cr.timelines.forEach(So=>{So.stretchStartingKeyframe=!0,this.disabledNodes.has(So.element)||Hd.push(So)}),cr.timelines=Hd,r.append(Xn,cr.timelines),g.push({instruction:cr,player:Pn,element:Xn}),cr.queriedElements.forEach(So=>Ss(b,So,[]).push(Pn)),cr.preStyleProps.forEach((So,ip)=>{if(So.size){let sl=I.get(ip);sl||I.set(ip,sl=new Set),So.forEach((Km,t0)=>sl.add(t0))}}),cr.postStyleProps.forEach((So,ip)=>{let sl=z.get(ip);sl||z.set(ip,sl=new Set),So.forEach((Km,t0)=>sl.add(t0))})});if(Ot.length){const Lt=[];Ot.forEach(Wt=>{Lt.push(function B0(n,t){return new c.vHH(3505,!1)}())}),_t.forEach(Wt=>Wt.destroy()),this.reportError(Lt)}const an=new Map,cn=new Map;g.forEach(Lt=>{const Wt=Lt.element;r.has(Wt)&&(cn.set(Wt,Wt),this._beforeAnimationBuild(Lt.player.namespaceId,Lt.instruction,an))}),o.forEach(Lt=>{const Wt=Lt.element;this._getPreviousPlayers(Wt,!1,Lt.namespaceId,Lt.triggerName,null).forEach(Pn=>{Ss(an,Wt,[]).push(Pn),Pn.destroy()})});const Jn=Re.filter(Lt=>l_(Lt,I,z)),zn=new Map;o_(zn,this.driver,et,z,Dc).forEach(Lt=>{l_(Lt,I,z)&&Jn.push(Lt)});const Sr=new Map;_e.forEach((Lt,Wt)=>{o_(Sr,this.driver,new Set(Lt),I,"!")}),Jn.forEach(Lt=>{const Wt=zn.get(Lt),Xt=Sr.get(Lt);zn.set(Lt,new Map([...Wt?.entries()??[],...Xt?.entries()??[]]))});const bn=[],$r=[],Ii={};g.forEach(Lt=>{const{element:Wt,player:Xt,instruction:Pn}=Lt;if(r.has(Wt)){if(G.has(Wt))return Xt.onDestroy(()=>Ja(Wt,Pn.toStyles)),Xt.disabled=!0,Xt.overrideTotalTime(Pn.totalTime),void o.push(Xt);let Xn=Ii;if(cn.size>1){let ao=Wt;const Oa=[];for(;ao=ao.parentNode;){const cr=cn.get(ao);if(cr){Xn=cr;break}Oa.push(ao)}Oa.forEach(cr=>cn.set(cr,Xn))}const Ps=this._buildAnimation(Xt.namespaceId,Pn,an,p,Sr,zn);if(Xt.setRealPlayer(Ps),Xn===Ii)bn.push(Xt);else{const ao=this.playersByElement.get(Xn);ao&&ao.length&&(Xt.parentPlayer=Cs(ao)),o.push(Xt)}}else Ad(Wt,Pn.fromStyles),Xt.onDestroy(()=>Ja(Wt,Pn.toStyles)),$r.push(Xt),G.has(Wt)&&o.push(Xt)}),$r.forEach(Lt=>{const Wt=p.get(Lt.element);if(Wt&&Wt.length){const Xt=Cs(Wt);Lt.setRealPlayer(Xt)}}),o.forEach(Lt=>{Lt.parentPlayer?Lt.syncPlayerEvents(Lt.parentPlayer):Lt.destroy()});for(let Lt=0;Lt<Re.length;Lt++){const Wt=Re[Lt],Xt=Wt[ta];if(Pd(Wt,Yp),Xt&&Xt.hasAnimation)continue;let Pn=[];if(b.size){let Ps=b.get(Wt);Ps&&Ps.length&&Pn.push(...Ps);let ao=this.driver.query(Wt,Qp,!0);for(let Oa=0;Oa<ao.length;Oa++){let cr=b.get(ao[Oa]);cr&&cr.length&&Pn.push(...cr)}}const Xn=Pn.filter(Ps=>!Ps.destroyed);Xn.length?ow(this,Wt,Xn):this.processLeaveNode(Wt)}return Re.length=0,bn.forEach(Lt=>{this.players.push(Lt),Lt.onDone(()=>{Lt.destroy();const Wt=this.players.indexOf(Lt);this.players.splice(Wt,1)}),Lt.play()}),bn}elementContainsData(t,e){let r=!1;const o=e[ta];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,o,p){let g=[];if(e){const b=this.playersByQueriedElement.get(t);b&&(g=b)}else{const b=this.playersByElement.get(t);if(b){const I=!p||p==Pu;b.forEach(z=>{z.queued||!I&&z.triggerName!=o||g.push(z)})}}return(r||o)&&(g=g.filter(b=>!(r&&r!=b.namespaceId||o&&o!=b.triggerName))),g}_beforeAnimationBuild(t,e,r){const p=e.element,g=e.isRemovalTransition?void 0:t,b=e.isRemovalTransition?void 0:e.triggerName;for(const I of e.timelines){const z=I.element,G=z!==p,te=Ss(r,z,[]);this._getPreviousPlayers(z,G,g,b,e.toState).forEach(_e=>{const ye=_e.getRealPlayer();ye.beforeDestroy&&ye.beforeDestroy(),_e.destroy(),te.push(_e)})}Ad(p,e.fromStyles)}_buildAnimation(t,e,r,o,p,g){const b=e.triggerName,I=e.element,z=[],G=new Set,te=new Set,he=e.timelines.map(ye=>{const ge=ye.element;G.add(ge);const Re=ge[ta];if(Re&&Re.removedBeforeQueried)return new Ic(ye.duration,ye.delay);const Je=ge!==I,et=function sw(n){const t=[];return s_(n,t),t}((r.get(ge)||kv).map(an=>an.getRealPlayer())).filter(an=>!!an.element&&an.element===ge),Xe=p.get(ge),Qe=g.get(ge),_t=Lh(this._normalizer,ye.keyframes,Xe,Qe),Ot=this._buildPlayer(ye,_t,et);if(ye.subTimeline&&o&&te.add(ge),Je){const an=new i_(t,b,ge);an.setRealPlayer(Ot),z.push(an)}return Ot});z.forEach(ye=>{Ss(this.playersByQueriedElement,ye.element,[]).push(ye),ye.onDone(()=>function iw(n,t,e){let r=n.get(t);if(r){if(r.length){const o=r.indexOf(e);r.splice(o,1)}0==r.length&&n.delete(t)}return r}(this.playersByQueriedElement,ye.element,ye))}),G.forEach(ye=>Ta(ye,Bh));const _e=Cs(he);return _e.onDestroy(()=>{G.forEach(ye=>Pd(ye,Bh)),Ja(I,e.toStyles)}),te.forEach(ye=>{Ss(o,ye,[]).push(_e)}),_e}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new Ic(t.duration,t.delay)}}class i_{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new Ic,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(o=>Kp(t,r,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ss(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function cf(n){return n&&1===n.nodeType}function Vv(n,t){const e=n.style.display;return n.style.display=t??"none",e}function o_(n,t,e,r,o){const p=[];e.forEach(I=>p.push(Vv(I)));const g=[];r.forEach((I,z)=>{const G=new Map;I.forEach(te=>{const he=t.computeStyle(z,te,o);G.set(te,he),(!he||0==he.length)&&(z[ta]=rw,g.push(z))}),n.set(z,G)});let b=0;return e.forEach(I=>Vv(I,p[b++])),g}function Uv(n,t){const e=new Map;if(n.forEach(b=>e.set(b,[])),0==t.length)return e;const o=new Set(t),p=new Map;function g(b){if(!b)return 1;let I=p.get(b);if(I)return I;const z=b.parentNode;return I=e.has(z)?z:o.has(z)?1:g(z),p.set(b,I),I}return t.forEach(b=>{const I=g(b);1!==I&&e.get(I).push(b)}),e}function Ta(n,t){n.classList?.add(t)}function Pd(n,t){n.classList?.remove(t)}function ow(n,t,e){Cs(e).onDone(()=>n.processLeaveNode(t))}function s_(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof D0?s_(r.players,t):t.push(r)}}function l_(n,t,e){const r=e.get(n);if(!r)return!1;let o=t.get(n);return o?r.forEach(p=>o.add(p)):t.set(n,r),e.delete(n),!0}class Rd{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,p)=>{},this._transitionEngine=new Bv(t,e,r),this._timelineEngine=new tw(t,e,r),this._transitionEngine.onRemovalComplete=(o,p)=>this.onRemovalComplete(o,p)}registerTrigger(t,e,r,o,p){const g=t+"-"+o;let b=this._triggerCache[g];if(!b){const I=[],G=Wo(this._driver,p,I,[]);if(I.length)throw function kh(n,t){return new c.vHH(3404,!1)}();b=function Nv(n,t,e){return new ew(n,t,e)}(o,G,this._normalizer),this._triggerCache[g]=b}this._transitionEngine.registerTrigger(e,o,b)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,o){this._transitionEngine.insertNode(t,e,r,o)}onRemove(t,e,r){this._transitionEngine.removeNode(t,e,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,o){if("@"==r.charAt(0)){const[p,g]=_v(r);this._timelineEngine.command(p,e,g,o)}else this._transitionEngine.trigger(t,e,r,o)}listen(t,e,r,o,p){if("@"==r.charAt(0)){const[g,b]=_v(r);return this._timelineEngine.listen(g,e,b,p)}return this._transitionEngine.listen(t,e,r,o,p)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let lw=(()=>{class n{constructor(e,r,o){this._element=e,this._startStyles=r,this._endStyles=o,this._state=0;let p=n.initialStylesByElement.get(e);p||n.initialStylesByElement.set(e,p=new Map),this._initialStyles=p}start(){this._state<1&&(this._startStyles&&Ja(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ja(this._element,this._initialStyles),this._endStyles&&(Ja(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ad(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ad(this._element,this._endStyles),this._endStyles=null),Ja(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function u_(n){let t=null;return n.forEach((e,r)=>{(function uw(n){return"display"===n||"position"===n})(r)&&(t=t||new Map,t.set(r,e))}),t}class zv{constructor(t,e,r,o){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,o)=>{"offset"!==o&&t.set(o,this._finished?r:pm(this.element,o))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class jv{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return yv(t,e)}getParentElement(t){return zg(t)}query(t,e,r){return j0(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}animate(t,e,r,o,p,g=[]){const I={duration:r,delay:o,fill:0==o?"both":"forwards"};p&&(I.easing=p);const z=new Map,G=g.filter(_e=>_e instanceof zv);(function tf(n,t){return 0===n||0===t})(r,o)&&G.forEach(_e=>{_e.currentSnapshot.forEach((ye,ge)=>z.set(ge,ye))});let te=function bv(n){return n.length?n[0]instanceof Map?n:n.map(t=>Td(t)):[]}(e).map(_e=>Mu(_e));te=function xv(n,t,e){if(e.size&&t.length){let r=t[0],o=[];if(e.forEach((p,g)=>{r.has(g)||o.push(g),r.set(g,p)}),o.length)for(let p=1;p<t.length;p++){let g=t[p];o.forEach(b=>g.set(b,pm(n,b)))}}return t}(t,te,z);const he=function aw(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=u_(t[0]),t.length>1&&(r=u_(t[t.length-1]))):t instanceof Map&&(e=u_(t)),e||r?new lw(n,e,r):null}(t,te);return new zv(t,te,I,he)}}let cw=(()=>{class n extends sv{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(e)?Jf(e):e;return Wv(this._renderer,null,r,"register",[o]),new Hv(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.FYo),c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Hv extends C0{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new $v(this._id,t,e||{},this._renderer)}}class $v{constructor(t,e,r,o){this.id=t,this.element=e,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Wv(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Wv(n,t,e,r,o){return n.setProperty(t,`@@${e}:${r}`,o)}const c_="@.disabled";let d_=(()=>{class n{constructor(e,r,o){this.delegate=e,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(p,g)=>{const b=g?.parentNode(p);b&&g.removeChild(b,p)}}createRenderer(e,r){const p=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let G=this._rendererCache.get(p);return G||(G=new dw("",p,this.engine,()=>this._rendererCache.delete(p)),this._rendererCache.set(p,G)),G}const g=r.id,b=r.id+"-"+this._currentId;this._currentId++,this.engine.register(b,e);const I=G=>{Array.isArray(G)?G.forEach(I):this.engine.registerTrigger(g,b,e,G.name,G)};return r.data.animation.forEach(I),new Gh(this,b,p,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,o){e>=0&&e<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(p=>{const[g,b]=p;g(b)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.FYo),c.LFG(Rd),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class dw{constructor(t,e,r,o){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=o,this.destroyNode=this.delegate.destroyNode?p=>e.destroyNode(p):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,o=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,o)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,o){this.delegate.setAttribute(t,e,r,o)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,o){this.delegate.setStyle(t,e,r,o)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==c_?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Gh extends dw{constructor(t,e,r,o,p){super(e,r,o,p),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==c_?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const o=function Gv(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let p=e.slice(1),g="";return"@"!=p.charAt(0)&&([p,g]=function hw(n){const t=n.indexOf(".");return[n.substring(0,t),n.slice(t+1)]}(p)),this.engine.listen(this.namespaceId,o,p,g,b=>{this.factory.scheduleListenerCallback(b._data||-1,r,b)})}return this.delegate.listen(t,e,r)}}let h_=(()=>{class n extends Rd{constructor(e,r,o,p){super(e.body,r,o)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q),c.LFG(um),c.LFG(sf),c.LFG(c.z2F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Wl=[{provide:sv,useClass:cw},{provide:sf,useFactory:function p_(){return new Av}},{provide:Rd,useClass:h_},{provide:c.FYo,useFactory:function tl(n,t,e){return new d_(n,t,e)},deps:[Ju,Rd,c.R0b]}],Ar=[{provide:um,useFactory:()=>new jv},{provide:c.QbO,useValue:"BrowserAnimations"},...Wl],na=[{provide:um,useClass:jg},{provide:c.QbO,useValue:"NoopAnimations"},...Wl];let Mc,nl=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?na:Ar}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Ar,imports:[Wi]}),n})();try{Mc=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Mc=!1}let ra,Ci=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Bs(n){return n===Gu}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Mc)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ru=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function ia(){if(ra)return ra;if("object"!=typeof document||!document)return ra=new Set(Ru),ra;let n=document.createElement("input");return ra=new Set(Ru.filter(t=>(n.setAttribute("type",t),n.type===t))),ra}let wo,ku,xm;function rl(n){return function kd(){if(null==wo&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>wo=!0}))}finally{wo=wo||!1}return wo}()?n:!!n.capture}function qv(){if(null==ku){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ku=!1,ku;if("scrollBehavior"in document.documentElement.style)ku=!0;else{const n=Element.prototype.scrollTo;ku=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ku}function Nc(n){if(function Fu(){if(null==xm){const n=typeof document<"u"?document.head:null;xm=!(!n||!n.createShadowRoot&&!n.attachShadow)}return xm}()){const t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Is(n){return n.composedPath?n.composedPath()[0]:n.target}function m_(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ld(n){return Or((t,e)=>n<=e)}var JS=S(3997),eD=S(2420);function ql(n){return(0,Ai.e)((t,e)=>{(0,Rl.Xf)(n).subscribe(new Nr.Q(e,()=>e.complete(),eD.Z)),!e.closed&&t.subscribe(e)})}function Ui(n){return null!=n&&"false"!=`${n}`}function Yh(n,t=0){return function tD(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function Im(n){return Array.isArray(n)?n:[n]}function oo(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ki(n){return n instanceof c.SBq?n.nativeElement:n}var I_=S(6321);const Mw=new Set;let Xh,DE=(()=>{class n{constructor(e,r){this._platform=e,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):iD}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function rD(n,t){if(!Mw.has(n))try{Xh||(Xh=document.createElement("style"),t&&(Xh.nonce=t),Xh.setAttribute("type","text/css"),document.head.appendChild(Xh)),Xh.sheet&&(Xh.sheet.insertRule(`@media ${n} {body{ }}`,0),Mw.add(n))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ci),c.LFG(c.Ojb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iD(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let T_=(()=>{class n{constructor(e,r){this._mediaMatcher=e,this._zone=r,this._queries=new Map,this._destroySubject=new $t.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return A_(Im(e)).some(o=>this._registerQuery(o).mql.matches)}observe(e){let p=lc(A_(Im(e)).map(g=>this._registerQuery(g).observable));return p=Pl(p.pipe((0,Yr.q)(1)),p.pipe(Ld(1),function sb(n,t=I_.z){return(0,Ai.e)((e,r)=>{let o=null,p=null,g=null;const b=()=>{if(o){o.unsubscribe(),o=null;const z=p;p=null,r.next(z)}};function I(){const z=g+n,G=t.now();if(G<z)return o=this.schedule(void 0,z-G),void r.add(o);b()}e.subscribe(new Nr.Q(r,z=>{p=z,g=t.now(),o||(o=t.schedule(I,n),r.add(o))},()=>{b(),r.complete()},void 0,()=>{p=o=null}))})}(0))),p.pipe((0,en.U)(g=>{const b={matches:!1,breakpoints:{}};return g.forEach(({matches:I,query:z})=>{b.matches=b.matches||I,b.breakpoints[z]=I}),b}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const r=this._mediaMatcher.matchMedia(e),p={observable:new Zr.y(g=>{const b=I=>this._zone.run(()=>g.next(I));return r.addListener(b),()=>{r.removeListener(b)}}).pipe(hu(r),(0,en.U)(({matches:g})=>({query:e,matches:g})),ql(this._destroySubject)),mql:r};return this._queries.set(e,p),p}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(DE),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function A_(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function Bd(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Rw(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const CD=new c.OlP("cdk-input-modality-detector-options"),Tm={ignoreKeys:[18,17,224,91,16]},Qh=rl({passive:!0,capture:!0});let y1=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,r,o,p){this._platform=e,this._mostRecentTarget=null,this._modality=new ai.X(null),this._lastTouchMs=0,this._onKeydown=g=>{this._options?.ignoreKeys?.some(b=>b===g.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Is(g))},this._onMousedown=g=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Bd(g)?"keyboard":"mouse"),this._mostRecentTarget=Is(g))},this._onTouchstart=g=>{Rw(g)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Is(g))},this._options={...Tm,...p},this.modalityDetected=this._modality.pipe(Ld(1)),this.modalityChanged=this.modalityDetected.pipe((0,JS.x)()),e.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Qh),o.addEventListener("mousedown",this._onMousedown,Qh),o.addEventListener("touchstart",this._onTouchstart,Qh)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Qh),document.removeEventListener("mousedown",this._onMousedown,Qh),document.removeEventListener("touchstart",this._onTouchstart,Qh))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ci),c.LFG(c.R0b),c.LFG(Q),c.LFG(CD,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const NE=new c.OlP("liveAnnouncerElement",{providedIn:"root",factory:function OE(){return null}}),v1=new c.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Cn=0,PE=(()=>{class n{constructor(e,r,o,p){this._ngZone=r,this._defaultOptions=p,this._document=o,this._liveElement=e||this._createLiveElement()}announce(e,...r){const o=this._defaultOptions;let p,g;return 1===r.length&&"number"==typeof r[0]?g=r[0]:[p,g]=r,this.clear(),clearTimeout(this._previousTimeout),p||(p=o&&o.politeness?o.politeness:"polite"),null==g&&o&&(g=o.duration),this._liveElement.setAttribute("aria-live",p),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(b=>this._currentResolve=b)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof g&&(this._previousTimeout=setTimeout(()=>this.clear(),g)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",r=this._document.getElementsByClassName(e),o=this._document.createElement("div");for(let p=0;p<r.length;p++)r[p].remove();return o.classList.add(e),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id="cdk-live-announcer-"+Cn++,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(e){const r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){const p=r[o],g=p.getAttribute("aria-owns");g?-1===g.indexOf(e)&&p.setAttribute("aria-owns",g+" "+e):p.setAttribute("aria-owns",e)}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(NE,8),c.LFG(c.R0b),c.LFG(Q),c.LFG(v1,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DD=new c.OlP("cdk-focus-monitor-default-options"),Vd=rl({passive:!0,capture:!0});let RE=(()=>{class n{constructor(e,r,o,p,g){this._ngZone=e,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new $t.x,this._rootNodeFocusAndBlurListener=b=>{for(let z=Is(b);z;z=z.parentElement)"focus"===b.type?this._onFocus(b,z):this._onBlur(b,z)},this._document=p,this._detectionMode=g?.detectionMode||0}monitor(e,r=!1){const o=Ki(e);if(!this._platform.isBrowser||1!==o.nodeType)return(0,qt.of)();const p=Nc(o)||this._getDocument(),g=this._elementInfo.get(o);if(g)return r&&(g.checkChildren=!0),g.subject;const b={checkChildren:r,subject:new $t.x,rootNode:p};return this._elementInfo.set(o,b),this._registerGlobalListeners(b),b.subject}stopMonitoring(e){const r=Ki(e),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(e,r,o){const p=Ki(e);p===this._getDocument().activeElement?this._getClosestElementsInfo(p).forEach(([b,I])=>this._originChanged(b,r,I)):(this._setOrigin(r),"function"==typeof p.focus&&p.focus(o))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,r){e.classList.toggle("cdk-focused",!!r),e.classList.toggle("cdk-touch-focused","touch"===r),e.classList.toggle("cdk-keyboard-focused","keyboard"===r),e.classList.toggle("cdk-mouse-focused","mouse"===r),e.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const o=this._elementInfo.get(r),p=Is(e);!o||!o.checkChildren&&r!==p||this._originChanged(r,this._getFocusOrigin(p),o)}_onBlur(e,r){const o=this._elementInfo.get(r);!o||o.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(e,r){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vd),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vd)}),this._rootNodeFocusListenerCount.set(r,o+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ql(this._stopInputModalityDetector)).subscribe(p=>{this._setOrigin(p,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vd),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vd),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,o){this._setClasses(e,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((o,p)=>{(p===e||o.checkChildren&&p.contains(e))&&r.push([p,o])}),r}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if("mouse"!==o||!r||r===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const p=e.labels;if(p)for(let g=0;g<p.length;g++)if(p[g].contains(r))return!0;return!1}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.R0b),c.LFG(Ci),c.LFG(y1),c.LFG(Q,8),c.LFG(DD,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const M_="cdk-high-contrast-black-on-white",Ni="cdk-high-contrast-white-on-black",kE="cdk-high-contrast-active";let FE=(()=>{class n{constructor(e,r){this._platform=e,this._document=r,this._breakpointSubscription=(0,c.f3M)(T_).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(e):null,p=(o&&o.backgroundColor||"").replace(/ /g,"");switch(e.remove(),p){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(kE,M_,Ni),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?e.add(kE,M_):2===r&&e.add(kE,Ni)}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ci),c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TD=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function LE(){return(0,c.f3M)(Q)}}),BE=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let N_=(()=>{class n{constructor(e){this.value="ltr",this.change=new c.vpe,e&&(this.value=function VE(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?BE.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(TD,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const PD=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function OD(){return!0}});let ls=(()=>{class n{constructor(e,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!m_()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(FE),c.LFG(PD,8),c.LFG(Q))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[O_,O_]}),n})();function LD(n){return class extends n{get disabled(){return this._disabled}set disabled(t){this._disabled=Ui(t)}constructor(...t){super(...t),this._disabled=!1}}}function cb(n,t){return class extends n{get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function jE(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ui(t)}constructor(...t){super(...t),this._disableRipple=!1}}}function D1(n){return class extends n{updateErrorState(){const t=this.errorState,p=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);p!==t&&(this.errorState=p,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}let UD=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zD{constructor(t,e,r,o=!1){this._renderer=t,this.element=e,this.config=r,this._animationForciblyDisabledThroughCss=o,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Mm=rl({passive:!0,capture:!0});class jD{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=Is(t);e&&this._events.get(t.type)?.forEach((r,o)=>{(o===e||o.contains(e))&&r.forEach(p=>p.handleEvent(t))})}}addHandler(t,e,r,o){const p=this._events.get(e);if(p){const g=p.get(r);g?g.add(o):p.set(r,new Set([o]))}else this._events.set(e,new Map([[r,new Set([o])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Mm)})}removeHandler(t,e,r){const o=this._events.get(t);if(!o)return;const p=o.get(e);p&&(p.delete(r),0===p.size&&o.delete(e),0===o.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Mm)))}}const Bw={enterDuration:225,exitDuration:150},Vw=rl({passive:!0,capture:!0}),HE=["mousedown","touchstart"],Uw=["mouseup","mouseleave","touchend","touchcancel"];class Nm{constructor(t,e,r,o){this._target=t,this._ngZone=e,this._platform=o,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,o.isBrowser&&(this._containerElement=Ki(r))}fadeInRipple(t,e,r={}){const o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),p={...Bw,...r.animation};r.centered&&(t=o.left+o.width/2,e=o.top+o.height/2);const g=r.radius||function zw(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),o=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+o*o)}(t,e,o),b=t-o.left,I=e-o.top,z=p.enterDuration,G=document.createElement("div");G.classList.add("mat-ripple-element"),G.style.left=b-g+"px",G.style.top=I-g+"px",G.style.height=2*g+"px",G.style.width=2*g+"px",null!=r.color&&(G.style.backgroundColor=r.color),G.style.transitionDuration=`${z}ms`,this._containerElement.appendChild(G);const te=window.getComputedStyle(G),_e=te.transitionDuration,ye="none"===te.transitionProperty||"0s"===_e||"0s, 0s"===_e||0===o.width&&0===o.height,ge=new zD(this,G,r,ye);G.style.transform="scale3d(1, 1, 1)",ge.state=0,r.persistent||(this._mostRecentTransientRipple=ge);let Re=null;return!ye&&(z||p.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Je=()=>this._finishRippleTransition(ge),et=()=>this._destroyRipple(ge);G.addEventListener("transitionend",Je),G.addEventListener("transitioncancel",et),Re={onTransitionEnd:Je,onTransitionCancel:et}}),this._activeRipples.set(ge,Re),(ye||!z)&&this._finishRippleTransition(ge),ge}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,r={...Bw,...t.config.animation};e.style.transitionDuration=`${r.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Ki(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,HE.forEach(r=>{Nm._eventManager.addHandler(this._ngZone,r,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Uw.forEach(e=>{this._triggerElement.addEventListener(e,this,Vw)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:r}=t.config;t.state=1,!r&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=Bd(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Rw(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;if(e)for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(HE.forEach(e=>Nm._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&Uw.forEach(e=>t.removeEventListener(e,this,Vw)))}}Nm._eventManager=new jD;const $E=new c.OlP("mat-ripple-global-options");let jw=(()=>{class n{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,r,o,p,g){this._elementRef=e,this._animationMode=g,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=p||{},this._rippleRenderer=new Nm(this,r,e,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,o){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,{...this.rippleConfig,...o}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Ci),c.Y36($E,8),c.Y36(c.QbO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&c.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Hw=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[ls,ls]}),n})();const GE=["*"],GD=[[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],[["","mat-card-image",""],["","matCardImage",""],["","mat-card-sm-image",""],["","matCardImageSmall",""],["","mat-card-md-image",""],["","matCardImageMedium",""],["","mat-card-lg-image",""],["","matCardImageLarge",""],["","mat-card-xl-image",""],["","matCardImageXLarge",""]],"*"],qD=["mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","[mat-card-image], [matCardImage],\n                    [mat-card-sm-image], [matCardImageSmall],\n                    [mat-card-md-image], [matCardImageMedium],\n                    [mat-card-lg-image], [matCardImageLarge],\n                    [mat-card-xl-image], [matCardImageXLarge]","*"],qE=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],KD=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],ZD=new c.OlP("MAT_CARD_CONFIG");let P_=(()=>{class n{constructor(e){this.appearance=e?.appearance||"raised"}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(ZD,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(e,r){2&e&&c.ekj("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:GE,decls:1,vars:0,template:function(e,r){1&e&&(c.F$t(),c.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),n})(),Om=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]}),n})(),Pm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-card-title-group"]],hostAttrs:[1,"mat-mdc-card-title-group"],ngContentSelectors:qD,decls:4,vars:0,template:function(e,r){1&e&&(c.F$t(GD),c.TgZ(0,"div"),c.Hsn(1),c.qZA(),c.Hsn(2,1),c.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),Rm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),n})(),hb=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]}),n})(),R_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:KD,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(e,r){1&e&&(c.F$t(qE),c.Hsn(0),c.TgZ(1,"div",0),c.Hsn(2,1),c.qZA(),c.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-card-footer"]],hostAttrs:[1,"mat-mdc-card-footer"]}),n})(),$w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[ls,Ti,ls]}),n})();class pb{}class L_{}class Lu{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const o=e.slice(0,r),p=o.toLowerCase(),g=e.slice(r+1).trim();this.maybeSetNormalizedName(o,p),this.headers.has(p)?this.headers.get(p).push(g):this.headers.set(p,[g])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Lu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Lu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Lu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const o=("a"===t.op?this.headers.get(e):void 0)||[];o.push(...r),this.headers.set(e,o);break;case"d":const p=t.value;if(p){let g=this.headers.get(e);if(!g)return;g=g.filter(b=>-1===p.indexOf(b)),0===g.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,g)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const r=(Array.isArray(e)?e:[e]).map(p=>p.toString()),o=t.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ZE{encodeKey(t){return Gw(t)}encodeValue(t){return Gw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const YE=/%(\d[a-f0-9])/gi,XE={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Gw(n){return encodeURIComponent(n).replace(YE,(t,e)=>XE[e]??t)}function B_(n){return`${n}`}class Jh{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ZE,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ww(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const p=o.indexOf("="),[g,b]=-1==p?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,p)),t.decodeValue(o.slice(p+1))],I=e.get(g)||[];I.push(b),e.set(g,I)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],o=Array.isArray(r)?r.map(B_):[B_(r)];this.map.set(e,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const o=t[r];Array.isArray(o)?o.forEach(p=>{e.push({param:r,value:p,op:"a"})}):e.push({param:r,value:o,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Jh({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(B_(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const o=r.indexOf(B_(t.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class JD{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function qw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function tI(n){return typeof Blob<"u"&&n instanceof Blob}function Kw(n){return typeof FormData<"u"&&n instanceof FormData}class V_{constructor(t,e,r,o){let p;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function eI(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,p=o):p=r,p&&(this.reportProgress=!!p.reportProgress,this.withCredentials=!!p.withCredentials,p.responseType&&(this.responseType=p.responseType),p.headers&&(this.headers=p.headers),p.context&&(this.context=p.context),p.params&&(this.params=p.params)),this.headers||(this.headers=new Lu),this.context||(this.context=new JD),this.params){const g=this.params.toString();if(0===g.length)this.urlWithParams=e;else{const b=e.indexOf("?");this.urlWithParams=e+(-1===b?"?":b<e.length-1?"&":"")+g}}else this.params=new Jh,this.urlWithParams=e}serializeBody(){return null===this.body?null:qw(this.body)||tI(this.body)||Kw(this.body)||function nI(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Kw(this.body)?null:tI(this.body)?this.body.type||null:qw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,p=void 0!==t.body?t.body:this.body,g=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,b=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let I=t.headers||this.headers,z=t.params||this.params;const G=t.context??this.context;return void 0!==t.setHeaders&&(I=Object.keys(t.setHeaders).reduce((te,he)=>te.set(he,t.setHeaders[he]),I)),t.setParams&&(z=Object.keys(t.setParams).reduce((te,he)=>te.set(he,t.setParams[he]),z)),new V_(e,r,p,{params:z,headers:I,context:G,reportProgress:b,responseType:o,withCredentials:g})}}var Eo=(()=>((Eo=Eo||{})[Eo.Sent=0]="Sent",Eo[Eo.UploadProgress=1]="UploadProgress",Eo[Eo.ResponseHeader=2]="ResponseHeader",Eo[Eo.DownloadProgress=3]="DownloadProgress",Eo[Eo.Response=4]="Response",Eo[Eo.User=5]="User",Eo))();class Zw{constructor(t,e=200,r="OK"){this.headers=t.headers||new Lu,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Yw extends Zw{constructor(t={}){super(t),this.type=Eo.ResponseHeader}clone(t={}){return new Yw({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class km extends Zw{constructor(t={}){super(t),this.type=Eo.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new km({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class QE extends Zw{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Xw(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let U_=(()=>{class n{constructor(e){this.handler=e}request(e,r,o={}){let p;if(e instanceof V_)p=e;else{let I,z;I=o.headers instanceof Lu?o.headers:new Lu(o.headers),o.params&&(z=o.params instanceof Jh?o.params:new Jh({fromObject:o.params})),p=new V_(e,r,void 0!==o.body?o.body:null,{headers:I,context:o.context,params:z,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const g=(0,qt.of)(p).pipe(Uo(I=>this.handler.handle(I)));if(e instanceof V_||"events"===o.observe)return g;const b=g.pipe(Or(I=>I instanceof km));switch(o.observe||"body"){case"body":switch(p.responseType){case"arraybuffer":return b.pipe((0,en.U)(I=>{if(null!==I.body&&!(I.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return I.body}));case"blob":return b.pipe((0,en.U)(I=>{if(null!==I.body&&!(I.body instanceof Blob))throw new Error("Response is not a Blob.");return I.body}));case"text":return b.pipe((0,en.U)(I=>{if(null!==I.body&&"string"!=typeof I.body)throw new Error("Response is not a string.");return I.body}));default:return b.pipe((0,en.U)(I=>I.body))}case"response":return b;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Jh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,o={}){return this.request("PATCH",e,Xw(o,r))}post(e,r,o={}){return this.request("POST",e,Xw(o,r))}put(e,r,o={}){return this.request("PUT",e,Xw(o,r))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(pb))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Qw(n,t){return t(n)}function tC(n,t){return(e,r)=>t.intercept(e,{handle:o=>n(o,r)})}const Jw=new c.OlP(""),Fm=new c.OlP(""),rC=new c.OlP("");function iI(){let n=null;return(t,e)=>{null===n&&(n=((0,c.f3M)(Jw,{optional:!0})??[]).reduceRight(tC,Qw));const r=(0,c.f3M)(c.HDt),o=r.add();return n(t,e).pipe(Js(()=>r.remove(o)))}}let oI=(()=>{class n extends pb{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null,this.pendingTasks=(0,c.f3M)(c.HDt)}handle(e){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(Fm),...this.injector.get(rC,[])]));this.chain=o.reduceRight((p,g)=>function nC(n,t,e){return(r,o)=>e.runInContext(()=>t(r,p=>n(p,o)))}(p,g,this.injector),Qw)}const r=this.pendingTasks.add();return this.chain(e,o=>this.backend.handle(o)).pipe(Js(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(L_),c.LFG(c.lqb))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const z_=/^\)\]\}',?\n/;let oC=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new c.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,Tr.D)(r.\u0275loadImpl()):(0,qt.of)(null)).pipe((0,jr.w)(()=>new Zr.y(p=>{const g=r.build();if(g.open(e.method,e.urlWithParams),e.withCredentials&&(g.withCredentials=!0),e.headers.forEach((ge,Re)=>g.setRequestHeader(ge,Re.join(","))),e.headers.has("Accept")||g.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const ge=e.detectContentTypeHeader();null!==ge&&g.setRequestHeader("Content-Type",ge)}if(e.responseType){const ge=e.responseType.toLowerCase();g.responseType="json"!==ge?ge:"text"}const b=e.serializeBody();let I=null;const z=()=>{if(null!==I)return I;const ge=g.statusText||"OK",Re=new Lu(g.getAllResponseHeaders()),Je=function lI(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(g)||e.url;return I=new Yw({headers:Re,status:g.status,statusText:ge,url:Je}),I},G=()=>{let{headers:ge,status:Re,statusText:Je,url:et}=z(),Xe=null;204!==Re&&(Xe=typeof g.response>"u"?g.responseText:g.response),0===Re&&(Re=Xe?200:0);let Qe=Re>=200&&Re<300;if("json"===e.responseType&&"string"==typeof Xe){const _t=Xe;Xe=Xe.replace(z_,"");try{Xe=""!==Xe?JSON.parse(Xe):null}catch(Ot){Xe=_t,Qe&&(Qe=!1,Xe={error:Ot,text:Xe})}}Qe?(p.next(new km({body:Xe,headers:ge,status:Re,statusText:Je,url:et||void 0})),p.complete()):p.error(new QE({error:Xe,headers:ge,status:Re,statusText:Je,url:et||void 0}))},te=ge=>{const{url:Re}=z(),Je=new QE({error:ge,status:g.status||0,statusText:g.statusText||"Unknown Error",url:Re||void 0});p.error(Je)};let he=!1;const _e=ge=>{he||(p.next(z()),he=!0);let Re={type:Eo.DownloadProgress,loaded:ge.loaded};ge.lengthComputable&&(Re.total=ge.total),"text"===e.responseType&&g.responseText&&(Re.partialText=g.responseText),p.next(Re)},ye=ge=>{let Re={type:Eo.UploadProgress,loaded:ge.loaded};ge.lengthComputable&&(Re.total=ge.total),p.next(Re)};return g.addEventListener("load",G),g.addEventListener("error",te),g.addEventListener("timeout",te),g.addEventListener("abort",te),e.reportProgress&&(g.addEventListener("progress",_e),null!==b&&g.upload&&g.upload.addEventListener("progress",ye)),g.send(b),p.next({type:Eo.Sent}),()=>{g.removeEventListener("error",te),g.removeEventListener("abort",te),g.removeEventListener("load",G),g.removeEventListener("timeout",te),e.reportProgress&&(g.removeEventListener("progress",_e),null!==b&&g.upload&&g.upload.removeEventListener("progress",ye)),g.readyState!==g.DONE&&g.abort()}})))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(qu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const tx=new c.OlP("XSRF_ENABLED"),nx=new c.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),sC=new c.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class _b{}let cI=(()=>{class n{constructor(e,r,o){this.doc=e,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=co(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q),c.LFG(c.Lbi),c.LFG(nx))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function dI(n,t){const e=n.url.toLowerCase();if(!(0,c.f3M)(tx)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=(0,c.f3M)(_b).getToken(),o=(0,c.f3M)(sC);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),t(n)}var Si=(()=>((Si=Si||{})[Si.Interceptors=0]="Interceptors",Si[Si.LegacyInterceptors=1]="LegacyInterceptors",Si[Si.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Si[Si.NoXsrfProtection=3]="NoXsrfProtection",Si[Si.JsonpSupport=4]="JsonpSupport",Si[Si.RequestsMadeViaParent=5]="RequestsMadeViaParent",Si[Si.Fetch=6]="Fetch",Si))();function gf(n,t){return{\u0275kind:n,\u0275providers:t}}function aC(...n){const t=[U_,oC,oI,{provide:pb,useExisting:oI},{provide:L_,useExisting:oC},{provide:Fm,useValue:dI,multi:!0},{provide:tx,useValue:!0},{provide:_b,useClass:cI}];for(const e of n)t.push(...e.\u0275providers);return(0,c.MR2)(t)}const lC=new c.OlP("LEGACY_INTERCEPTOR_FN");let cC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[aC(gf(Si.LegacyInterceptors,[{provide:lC,useFactory:iI},{provide:Fm,useExisting:lC,multi:!0}]))]}),n})();const yI=["mat-button",""],vI=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],bI=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],hC=["mat-icon-button",""],SI=["*"],ux={capture:!0},pC=["focus","click","mouseenter","touchstart"],Lm="mat-button-ripple-uninitialized";let fC=(()=>{class n{constructor(){this._document=(0,c.f3M)(Q,{optional:!0}),this._animationMode=(0,c.f3M)(c.QbO,{optional:!0}),this._globalRippleOptions=(0,c.f3M)($E,{optional:!0}),this._platform=(0,c.f3M)(Ci),this._ngZone=(0,c.f3M)(c.R0b),this._onInteraction=e=>{if(e.target===this._document)return;const o=e.target.closest(`[${Lm}]`);o&&(o.removeAttribute(Lm),this._appendRipple(o))},this._ngZone.runOutsideAngular(()=>{for(const e of pC)this._document?.addEventListener(e,this._onInteraction,ux)})}ngOnDestroy(){for(const e of pC)this._document?.removeEventListener(e,this._onInteraction,ux)}_appendRipple(e){if(!this._document)return;const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const o=new sa(e,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);o.rippleConfig.centered=e.hasAttribute("mat-icon-button"),new Nm(o,this._ngZone,r,this._platform).setupTriggerEvents(e),e.append(r)}_createMatRipple(e){if(!this._document)return;e.querySelector(".mat-mdc-button-ripple")?.remove(),e.removeAttribute(Lm);const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const o=new jw(new c.SBq(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=e,e.append(r),o}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class sa{constructor(t,e,r){this._button=t,this._globalRippleOptions=e,this._setRippleConfig(e,r)}_setRippleConfig(t,e){this.rippleConfig=t||{},"NoopAnimations"===e&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const II=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],uM=cb(LD(jE(class{constructor(n){this._elementRef=n}})));let TI=(()=>{class n extends uM{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(e){this._ripple=e}constructor(e,r,o,p){super(e),this._platform=r,this._ngZone=o,this._animationMode=p,this._focusMonitor=(0,c.f3M)(RE),this._rippleLoader=(0,c.f3M)(fC),this._isFab=!1;const g=e.nativeElement.classList;for(const b of II)this._hasHostAttributes(b.selector)&&b.mdcClasses.forEach(I=>{g.add(I)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",r){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...e){return e.some(r=>this._elementRef.nativeElement.hasAttribute(r))}}return n.\u0275fac=function(e){c.$Z()},n.\u0275dir=c.lG2({type:n,features:[c.qOj,c.TTD]}),n})(),Bm=(()=>{class n extends TI{constructor(e,r,o,p){super(e,r,o,p)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(Ci),c.Y36(c.R0b),c.Y36(c.QbO,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(e,r){2&e&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:yI,ngContentSelectors:bI,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(c.F$t(vI),c._UZ(0,"span",0),c.Hsn(1),c.TgZ(2,"span",1),c.Hsn(3,1),c.qZA(),c.Hsn(4,2),c._UZ(5,"span",2)(6,"span",3)),2&e&&c.ekj("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),H_=(()=>{class n extends TI{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement),this._ripple.centered=!0),this._ripple}constructor(e,r,o,p){super(e,r,o,p)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(Ci),c.Y36(c.R0b),c.Y36(c.QbO,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-icon-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(e,r){2&e&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:hC,ngContentSelectors:SI,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(e,r){1&e&&(c.F$t(),c._UZ(0,"span",0),c.Hsn(1),c._UZ(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),MI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[ls,Hw,ls]}),n})();var ep=S(3182),Ns=S(8186);class _f{constructor(t){return t}}class yf{constructor(){return(0,ep.C6)()}}const $_=new c.OlP("angularfire2._apps"),gM={provide:_f,useFactory:function wC(n){return n&&1===n.length?n[0]:new _f((0,ep.Mq)())},deps:[[new c.FiY,$_]]},NI={provide:yf,deps:[[new c.FiY,$_]]};function _M(n){return(t,e)=>{const r=t.runOutsideAngular(()=>n(e));return new _f(r)}}let OI=(()=>{class n{constructor(e){(0,ep.KN)("angularfire",Ns.q4.full,"core"),(0,ep.KN)("angularfire",Ns.q4.full,"app"),(0,ep.KN)("angular",c.q4F.full,e.toString())}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[gM,NI]}),n})();function PI(n,...t){return{ngModule:OI,providers:[{provide:$_,useFactory:_M(n),multi:!0,deps:[c.R0b,c.zs3,Ns.HU,...t]}]}}const FI=(0,Ns.u3)(ep.ZF,!0),vf_firebase={apiKey:"AIzaSyAwA90GWyD7l6wzgqs_CuRs8B49cbG6s4g",authDomain:"profit4cloud-quizapp.firebaseapp.com",projectId:"profit4cloud-quizapp",storageBucket:"profit4cloud-quizapp.appspot.com",messagingSenderId:"1080664212252",appId:"1:1080664212252:web:931f34aa310d23375ab0d9"};S(640);var W_=S(9058),bb=S(534),xC=S(7879),cx=S(4537);class EC{constructor(){return(0,Ns.vb)("auth")}}var Kl=S(5861);const xb=new Map,MC={activated:!1,tokenObservers:[]},NC={initialized:!1,enabled:!1};function Zi(n){return xb.get(n)||Object.assign({},MC)}function G_(){return NC}const Eb="https://content-firebaseappcheck.googleapis.com/v1",PC="exchangeDebugToken",wf={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class RC{constructor(t,e,r,o,p){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=p,this.pending=null,this.nextErrorWaitInterval=o,o>p)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Kl.Z)(function*(){e.stop();try{e.pending=new W_.BH,yield function kC(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new W_.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const us=new W_.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Sb(n){if(!Zi(n).activated)throw us.create("use-before-activation",{appName:n.name})}function Ib(n,t){return FC.apply(this,arguments)}function FC(){return(FC=(0,Kl.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){const te=yield o.getHeartbeatsHeader();te&&(r["X-Firebase-Client"]=te)}const p={method:"POST",body:JSON.stringify(t),headers:r};let g,b;try{g=yield fetch(n,p)}catch(te){throw us.create("fetch-network-error",{originalErrorMessage:te?.message})}if(200!==g.status)throw us.create("fetch-status-error",{httpStatus:g.status});try{b=yield g.json()}catch(te){throw us.create("fetch-parse-error",{originalErrorMessage:te?.message})}const I=b.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const z=1e3*Number(I[1]),G=Date.now();return{token:b.token,expireTimeMillis:G+z,issuedAtTimeMillis:G}})).apply(this,arguments)}function BC(n,t){const{projectId:e,appId:r,apiKey:o}=n.options;return{url:`${Eb}/projects/${e}/apps/${r}:${PC}?key=${o}`,body:{debug_token:t}}}const iT="firebase-app-check-database",oT=1,Tb="firebase-app-check-store";let _x=null;function Mb(){return(Mb=(0,Kl.Z)(function*(n,t){const r=(yield function aT(){return _x||(_x=new Promise((n,t)=>{try{const e=indexedDB.open(iT,oT);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var o;t(us.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},e.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Tb,{keyPath:"compositeKey"})}}catch(e){t(us.create("storage-open",{originalErrorMessage:e?.message}))}}),_x)}()).transaction(Tb,"readwrite"),p=r.objectStore(Tb).put({compositeKey:n,value:t});return new Promise((g,b)=>{p.onsuccess=I=>{g()},r.onerror=I=>{var z;b(us.create("storage-set",{originalErrorMessage:null===(z=I.target.error)||void 0===z?void 0:z.message}))}})})).apply(this,arguments)}const xf=new xC.Yd("@firebase/app-check");function K_(n,t){return(0,W_.hl)()?function lT(n,t){return function VC(n,t){return Mb.apply(this,arguments)}(function Ob(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{xf.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function zC(){return G_().enabled}function jC(){return Rb.apply(this,arguments)}function Rb(){return(Rb=(0,Kl.Z)(function*(){const n=G_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hT={error:"UNKNOWN_ERROR"};function pT(n){return W_.US.encodeString(JSON.stringify(n),!1)}function kb(n){return Fb.apply(this,arguments)}function Fb(){return(Fb=(0,Kl.Z)(function*(n,t=!1){const e=n.app;Sb(e);const r=Zi(e);let p,o=r.token;if(o&&!Ef(o)&&(r.token=void 0,o=void 0),!o){const I=yield r.cachedTokenPromise;I&&(Ef(I)?o=I:yield K_(e,void 0))}if(!t&&o&&Ef(o))return{token:o.token};let b,g=!1;if(zC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ib(BC(e,yield jC()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),g=!0);const I=yield r.exchangeTokenPromise;return yield K_(e,I),r.token=I,{token:I.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),g=!0),o=yield Zi(e).exchangeTokenPromise}catch(I){"appCheck/throttled"===I.code?xf.warn(I.message):xf.error(I),p=I}return o?p?b=Ef(o)?{token:o.token,internalError:p}:Bb(p):(b={token:o.token},r.token=o,yield K_(e,o)):b=Bb(p),g&&function fT(n,t){const e=Zi(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch{}}(e,b),b})).apply(this,arguments)}function yx(n){return Lb.apply(this,arguments)}function Lb(){return(Lb=(0,Kl.Z)(function*(n){const t=n.app;Sb(t);const{provider:e}=Zi(t);if(zC()){const r=yield jC(),{token:o}=yield Ib(BC(t,r),n.heartbeatServiceProvider);return{token:o}}{const{token:r}=yield e.getToken();return{token:r}}})).apply(this,arguments)}function bx(n,t){const e=Zi(n),r=e.tokenObservers.filter(o=>o.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=r}function wx(n){const{app:t}=n,e=Zi(t);let r=e.tokenRefresher;r||(r=function xx(n){const{app:t}=n;return new RC((0,Kl.Z)(function*(){let r;if(r=Zi(t).token?yield kb(n,!0):yield kb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const e=Zi(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},wf.RETRIAL_MIN_WAIT,wf.RETRIAL_MAX_WAIT)}(n),e.tokenRefresher=r),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function Ef(n){return n.expireTimeMillis-Date.now()>0}function Bb(n){return{token:pT(hT),error:n}}class mT{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Zi(this.app);for(const e of t)bx(this.app,e.next);return Promise.resolve()}}const ST="app-check-internal";!function WM(){(0,bb._registerComponent)(new cx.wA("app-check",n=>function gT(n,t){return new mT(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(ST).initialize()})),(0,bb._registerComponent)(new cx.wA(ST,n=>function HM(n){return{getToken:t=>kb(n,t),getLimitedUseToken:()=>yx(n),addTokenListener:t=>function vx(n,t,e,r){const{app:o}=n,p=Zi(o);if(p.tokenObservers=[...p.tokenObservers,{next:e,error:r,type:t}],p.token&&Ef(p.token)){const b=p.token;Promise.resolve().then(()=>{e({token:b.token}),wx(n)}).catch(()=>{})}p.cachedTokenPromise.then(()=>wx(n))}(n,"INTERNAL",t),removeTokenListener:t=>bx(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,bb.registerVersion)("@firebase/app-check","0.8.0")}();class Ix{constructor(){return(0,Ns.vb)("app-check")}}typeof window<"u"&&window;var V=S(468);class H{constructor(t){return t}}const J="functions",Ae=new c.OlP("angularfire2.functions-instances");function ot(n){return(t,e)=>{const r=t.runOutsideAngular(()=>n(e));return new H(r)}}const bt={provide:class ie{constructor(){return(0,Ns.vb)(J)}},deps:[[new c.FiY,Ae]]},Bt={provide:H,useFactory:function Be(n,t){const e=(0,Ns.JM)(J,n,t);return e&&new H(e)},deps:[[new c.FiY,Ae],_f]};let sn=(()=>{class n{constructor(){(0,ep.KN)("angularfire",Ns.q4.full,"fn")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Bt,bt]}),n})();function ct(n,...t){return{ngModule:sn,providers:[{provide:Ae,useFactory:ot(n),multi:!0,deps:[c.R0b,c.zs3,Ns.HU,yf,[new c.FiY,EC],[new c.FiY,Ix],...t]}]}}const mr=(0,Ns.u3)(V.$C,!0);var Vm=S(3093),TT=S(4552);class lF extends $t.x{constructor(t=1/0,e=1/0,r=TT.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:p,_windowTime:g}=this;e||(r.push(t),!o&&r.push(p.now()+g)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:o}=this,p=o.slice();for(let g=0;g<p.length&&!t.closed;g+=r?1:2)t.next(p[g]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:o}=this,p=(o?1:2)*t;if(t<1/0&&p<r.length&&r.splice(0,r.length-p),!o){const g=e.now();let b=0;for(let I=1;I<r.length&&r[I]<=g;I+=2)b=I;b&&r.splice(0,b+1)}}}var AT=S(3020);function XC(n,t,e){var r,o;let p,g=!1;return n&&"object"==typeof n?(p=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,t=null!==(o=n.windowTime)&&void 0!==o?o:1/0,g=!!n.refCount,e=n.scheduler):p=n??1/0,(0,AT.B)({connector:()=>new lF(p,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:g})}var Vu=S(6304);S(7142);const ZM=new c.OlP("angularfire2.functions.use-emulator");var pF=S(305);function QC(n,t){const e="object"==typeof t;return new Promise((r,o)=>{const p=new pF.Hp({next:g=>{r(g),p.unsubscribe()},error:o,complete:()=>{e?r(t.defaultValue):o(new ba)}});n.subscribe(p)})}const Ax_LF="\n",Ax_NULL="\0";class Um{constructor(t){const{command:e,headers:r,body:o,binaryBody:p,escapeHeaderValues:g,skipContentLengthHeader:b}=t;this.command=e,this.headers=Object.assign({},r||{}),p?(this._binaryBody=p,this.isBinaryBody=!0):(this._body=o||"",this.isBinaryBody=!1),this.escapeHeaderValues=g||!1,this.skipContentLengthHeader=b||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody}static fromRawFrame(t,e){const r={},o=p=>p.replace(/^\s+|\s+$/g,"");for(const p of t.headers.reverse()){p.indexOf(":");const b=o(p[0]);let I=o(p[1]);e&&"CONNECT"!==t.command&&"CONNECTED"!==t.command&&(I=Um.hdrValueUnEscape(I)),r[b]=I}return new Um({command:t.command,headers:r,binaryBody:t.binaryBody,escapeHeaderValues:e})}toString(){return this.serializeCmdAndHeaders()}serialize(){const t=this.serializeCmdAndHeaders();return this.isBinaryBody?Um.toUnit8Array(t,this._binaryBody).buffer:t+this._body+Ax_NULL}serializeCmdAndHeaders(){const t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const e of Object.keys(this.headers||{})){const r=this.headers[e];t.push(this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?`${e}:${Um.hdrValueEscape(`${r}`)}`:`${e}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(Ax_LF)+Ax_LF+Ax_LF}isBodyEmpty(){return 0===this.bodyLength()}bodyLength(){const t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?(new TextEncoder).encode(t).length:0}static toUnit8Array(t,e){const r=(new TextEncoder).encode(t),o=new Uint8Array([0]),p=new Uint8Array(r.length+e.length+o.length);return p.set(r),p.set(e,r.length),p.set(o,r.length+e.length),p}static marshall(t){return new Um(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")}}class mF{constructor(t,e){this.onFrame=t,this.onIncomingPing=e,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,e=!1){let r;if(r="string"==typeof t?this._encoder.encode(t):new Uint8Array(t),e&&0!==r[r.length-1]){const o=new Uint8Array(r.length+1);o.set(r,0),o[r.length]=0,r=o}for(let o=0;o<r.length;o++)this._onByte(r[o])}_collectFrame(t){if(0!==t&&13!==t){if(10===t)return void this.onIncomingPing();this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(13!==t){if(10===t)return this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders);this._consumeByte(t)}}_collectHeaders(t){if(13!==t){if(10===t)return void this._setupCollectBody();this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(58===t)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(t)}_collectHeaderValue(t){if(13!==t){if(10===t)return this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders);this._consumeByte(t)}}_setupCollectBody(){const t=this._results.headers.filter(e=>"content-length"===e[0])[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){0!==t?this._consumeByte(t):this._retrievedBody()}_collectBodyFixedSize(t){0!=this._bodyBytesRemaining--?this._consumeByte(t):this._retrievedBody()}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var Cf,n,kc,Uu;(n=Cf=Cf||(Cf={}))[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED",function(n){n[n.ACTIVE=0]="ACTIVE",n[n.DEACTIVATING=1]="DEACTIVATING",n[n.INACTIVE=2]="INACTIVE"}(kc=kc||(kc={}));class il{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}}il.V1_0="1.0",il.V1_1="1.1",il.V1_2="1.2",il.default=new il([il.V1_2,il.V1_1,il.V1_0]);class _F{constructor(t,e,r){this._client=t,this._webSocket=e,this._connected=!1,this._serverFrameHandlers={CONNECTED:o=>{this.debug(`connected to server ${o.headers.server}`),this._connected=!0,this._connectedVersion=o.headers.version,this._connectedVersion===il.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(o.headers),this.onConnect(o)},MESSAGE:o=>{const p=o.headers.subscription,g=this._subscriptions[p]||this.onUnhandledMessage,b=o,I=this,z=this._connectedVersion===il.V1_2?b.headers.ack:b.headers["message-id"];b.ack=(G={})=>I.ack(z,p,G),b.nack=(G={})=>I.nack(z,p,G),g(b)},RECEIPT:o=>{const p=this._receiptWatchers[o.headers["receipt-id"]];p?(p(o),delete this._receiptWatchers[o.headers["receipt-id"]]):this.onUnhandledReceipt(o)},ERROR:o=>{this.onStompError(o)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=r.debug,this.stompVersions=r.stompVersions,this.connectHeaders=r.connectHeaders,this.disconnectHeaders=r.disconnectHeaders,this.heartbeatIncoming=r.heartbeatIncoming,this.heartbeatOutgoing=r.heartbeatOutgoing,this.splitLargeFrames=r.splitLargeFrames,this.maxWebSocketChunkSize=r.maxWebSocketChunkSize,this.forceBinaryWSFrames=r.forceBinaryWSFrames,this.logRawCommunication=r.logRawCommunication,this.appendMissingNULLonIncoming=r.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=r.discardWebsocketOnCommFailure,this.onConnect=r.onConnect,this.onDisconnect=r.onDisconnect,this.onStompError=r.onStompError,this.onWebSocketClose=r.onWebSocketClose,this.onWebSocketError=r.onWebSocketError,this.onUnhandledMessage=r.onUnhandledMessage,this.onUnhandledReceipt=r.onUnhandledReceipt,this.onUnhandledFrame=r.onUnhandledFrame}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}start(){const t=new mF(e=>{const r=Um.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${r}`),(this._serverFrameHandlers[r.command]||this.onUnhandledFrame)(r)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=e=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const r=e.data instanceof ArrayBuffer?(new TextDecoder).decode(e.data):e.data;this.debug(`<<< ${r}`)}t.parseChunk(e.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=e=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{const e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(t){if(t.version!==il.V1_1&&t.version!==il.V1_2||!t["heart-beat"])return;const[e,r]=t["heart-beat"].split(",").map(o=>parseInt(o,10));if(0!==this.heartbeatOutgoing&&0!==r){const o=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${o}ms`),this._pinger=setInterval(()=>{this._webSocket.readyState===Cf.OPEN&&(this._webSocket.send(Ax_LF),this.debug(">>> PING"))},o)}if(0!==this.heartbeatIncoming&&0!==e){const o=Math.max(this.heartbeatIncoming,e);this.debug(`check PONG every ${o}ms`),this._ponger=setInterval(()=>{const p=Date.now()-this._lastServerActivityTS;p>2*o&&(this.debug(`did not receive server activity for the last ${p}ms`),this._closeOrDiscardWebsocket())},o)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Cf.CONNECTING||this._webSocket.readyState===Cf.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){"function"!=typeof this._webSocket.terminate&&function gF(n,t){n.terminate=function(){const e=()=>{};this.onerror=e,this.onmessage=e,this.onopen=e;const r=new Date,o=Math.random().toString().substring(2,8),p=this.onclose;this.onclose=g=>{const b=(new Date).getTime()-r.getTime();t(`Discarded socket (#${o})  closed after ${b}ms, with code/reason: ${g.code}/${g.reason}`)},this.close(),p?.call(n,{code:4001,reason:`Quick discarding socket (#${o}) without waiting for the shutdown sequence.`,wasClean:!1})}}(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){const{command:e,headers:r,body:o,binaryBody:p,skipContentLengthHeader:g}=t,b=new Um({command:e,headers:r,body:o,binaryBody:p,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:g});let I=b.serialize();if(this.debug(this.logRawCommunication?`>>> ${I}`:`>>> ${b}`),this.forceBinaryWSFrames&&"string"==typeof I&&(I=(new TextEncoder).encode(I)),"string"==typeof I&&this.splitLargeFrames){let z=I;for(;z.length>0;){const G=z.substring(0,this.maxWebSocketChunkSize);z=z.substring(this.maxWebSocketChunkSize),this._webSocket.send(G),this.debug(`chunk sent = ${G.length}, remaining = ${z.length}`)}}else this._webSocket.send(I)}dispose(){if(this.connected)try{const t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt="close-"+this._counter++),this.watchForReceipt(t.receipt,e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===Cf.CONNECTING||this._webSocket.readyState===Cf.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(clearInterval(this._pinger),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){const{destination:e,headers:r,body:o,binaryBody:p,skipContentLengthHeader:g}=t,b=Object.assign({destination:e},r);this._transmit({command:"SEND",headers:b,body:o,binaryBody:p,skipContentLengthHeader:g})}watchForReceipt(t,e){this._receiptWatchers[t]=e}subscribe(t,e,r={}){(r=Object.assign({},r)).id||(r.id="sub-"+this._counter++),r.destination=t,this._subscriptions[r.id]=e,this._transmit({command:"SUBSCRIBE",headers:r});const o=this;return{id:r.id,unsubscribe:p=>o.unsubscribe(r.id,p)}}unsubscribe(t,e={}){e=Object.assign({},e),delete this._subscriptions[t],e.id=t,this._transmit({command:"UNSUBSCRIBE",headers:e})}begin(t){const e=t||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:e}});const r=this;return{id:e,commit(){r.commit(e)},abort(){r.abort(e)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,e,r={}){r=Object.assign({},r),this._connectedVersion===il.V1_2?r.id=t:r["message-id"]=t,r.subscription=e,this._transmit({command:"ACK",headers:r})}nack(t,e,r={}){return r=Object.assign({},r),this._connectedVersion===il.V1_2?r.id=t:r["message-id"]=t,r.subscription=e,this._transmit({command:"NACK",headers:r})}}class yF{constructor(t={}){this.stompVersions=il.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=kc.INACTIVE;const e=()=>{};this.debug=e,this.beforeConnect=e,this.onConnect=e,this.onDisconnect=e,this.onUnhandledMessage=e,this.onUnhandledReceipt=e,this.onUnhandledFrame=e,this.onStompError=e,this.onWebSocketClose=e,this.onWebSocketError=e,this.logRawCommunication=!1,this.onChangeState=e,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===kc.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}configure(t){Object.assign(this,t)}activate(){const t=()=>{this.active?this.debug("Already ACTIVE, ignoring request to activate"):(this._changeState(kc.ACTIVE),this._connect())};this.state===kc.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}_connect(){var t=this;return(0,Kl.Z)(function*(){if(yield t.beforeConnect(),t._stompHandler)return void t.debug("There is already a stompHandler, skipping the call to connect");if(!t.active)return void t.debug("Client has been marked inactive, will not attempt to connect");t.connectionTimeout>0&&(t._connectionWatcher&&clearTimeout(t._connectionWatcher),t._connectionWatcher=setTimeout(()=>{t.connected||(t.debug(`Connection not established in ${t.connectionTimeout}ms, closing socket`),t.forceDisconnect())},t.connectionTimeout)),t.debug("Opening Web Socket...");const e=t._createWebSocket();t._stompHandler=new _F(t,e,{debug:t.debug,stompVersions:t.stompVersions,connectHeaders:t.connectHeaders,disconnectHeaders:t._disconnectHeaders,heartbeatIncoming:t.heartbeatIncoming,heartbeatOutgoing:t.heartbeatOutgoing,splitLargeFrames:t.splitLargeFrames,maxWebSocketChunkSize:t.maxWebSocketChunkSize,forceBinaryWSFrames:t.forceBinaryWSFrames,logRawCommunication:t.logRawCommunication,appendMissingNULLonIncoming:t.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:t.discardWebsocketOnCommFailure,onConnect:r=>{if(t._connectionWatcher&&(clearTimeout(t._connectionWatcher),t._connectionWatcher=void 0),!t.active)return t.debug("STOMP got connected while deactivate was issued, will disconnect now"),void t._disposeStompHandler();t.onConnect(r)},onDisconnect:r=>{t.onDisconnect(r)},onStompError:r=>{t.onStompError(r)},onWebSocketClose:r=>{t._stompHandler=void 0,t.state===kc.DEACTIVATING&&t._changeState(kc.INACTIVE),t.onWebSocketClose(r),t.active&&t._schedule_reconnect()},onWebSocketError:r=>{t.onWebSocketError(r)},onUnhandledMessage:r=>{t.onUnhandledMessage(r)},onUnhandledReceipt:r=>{t.onUnhandledReceipt(r)},onUnhandledFrame:r=>{t.onUnhandledFrame(r)}}),t._stompHandler.start()})()}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else{if(!this.brokerURL)throw new Error("Either brokerURL or webSocketFactory must be provided");t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())}return t.binaryType="arraybuffer",t}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout(()=>{this._connect()},this.reconnectDelay))}deactivate(t={}){var e=this;return(0,Kl.Z)(function*(){const r=t.force||!1,o=e.active;let p;if(e.state===kc.INACTIVE)return e.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(e._changeState(kc.DEACTIVATING),e._reconnector&&(clearTimeout(e._reconnector),e._reconnector=void 0),!e._stompHandler||e.webSocket.readyState===Cf.CLOSED)return e._changeState(kc.INACTIVE),Promise.resolve();{const g=e._stompHandler.onWebSocketClose;p=new Promise((b,I)=>{e._stompHandler.onWebSocketClose=z=>{g(z),b()}})}return r?e._stompHandler?.discardWebsocket():o&&e._disposeStompHandler(),p})()}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,e){this._checkConnection(),this._stompHandler.watchForReceipt(t,e)}subscribe(t,e,r={}){return this._checkConnection(),this._stompHandler.subscribe(t,e,r)}unsubscribe(t,e={}){this._checkConnection(),this._stompHandler.unsubscribe(t,e)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,e,r={}){this._checkConnection(),this._stompHandler.ack(t,e,r)}nack(t,e,r={}){this._checkConnection(),this._stompHandler.nack(t,e,r)}}!function(n){n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED"}(Uu=Uu||(Uu={}));class XM{get stompClient(){return this._stompClient}constructor(t){this._queuedMessages=[];const e=t||new yF;this._stompClient=e;const r=()=>{};this._beforeConnect=r,this._correlateErrors=()=>{},this._debug=r,this._connectionStatePre$=new ai.X(Uu.CLOSED),this._connectedPre$=this._connectionStatePre$.pipe(Or(o=>o===Uu.OPEN)),this.connectionState$=new ai.X(Uu.CLOSED),this.connected$=this.connectionState$.pipe(Or(o=>o===Uu.OPEN)),this.connected$.subscribe(()=>{this._sendQueuedMessages()}),this._serverHeadersBehaviourSubject$=new ai.X(null),this.serverHeaders$=this._serverHeadersBehaviourSubject$.pipe(Or(o=>null!==o)),this.stompErrors$=new $t.x,this.unhandledMessage$=new $t.x,this.unhandledReceipts$=new $t.x,this.unhandledFrame$=new $t.x,this.webSocketErrors$=new $t.x}configure(t){const e=Object.assign({},t);e.beforeConnect&&(this._beforeConnect=e.beforeConnect,delete e.beforeConnect),e.correlateErrors&&(this._correlateErrors=e.correlateErrors,delete e.correlateErrors),this._stompClient.configure(e),e.debug&&(this._debug=e.debug)}activate(){var e,t=this;this._stompClient.configure({beforeConnect:(e=(0,Kl.Z)(function*(){t._changeState(Uu.CONNECTING),yield t._beforeConnect(t)}),function(){return e.apply(this,arguments)}),onConnect:e=>{this._serverHeadersBehaviourSubject$.next(e.headers),this._changeState(Uu.OPEN)},onStompError:e=>{this.stompErrors$.next(e)},onWebSocketClose:()=>{this._changeState(Uu.CLOSED)},onUnhandledMessage:e=>{this.unhandledMessage$.next(e)},onUnhandledReceipt:e=>{this.unhandledReceipts$.next(e)},onUnhandledFrame:e=>{this.unhandledFrame$.next(e)},onWebSocketError:e=>{this.webSocketErrors$.next(e)}}),this._stompClient.activate()}deactivate(t={}){var e=this;return(0,Kl.Z)(function*(){e._changeState(Uu.CLOSING),yield e._stompClient.deactivate(t),e._changeState(Uu.CLOSED)})()}connected(){return this.connectionState$.getValue()===Uu.OPEN}get active(){return this.stompClient.active}publish(t){const e=null==t.retryIfDisconnected||t.retryIfDisconnected;if(this.connected())this._stompClient.publish(t);else{if(!e)throw new Error("Cannot publish while broker is not connected");this._debug("Not connected, queueing"),this._queuedMessages.push(t)}}_sendQueuedMessages(){const t=this._queuedMessages;if(this._queuedMessages=[],0!==t.length){this._debug(`Will try sending  ${t.length} queued message(s)`);for(const e of t)this._debug(`Attempting to send ${e}`),this.publish(e)}}watch(t,e={}){let o;return o=Object.assign({},{subHeaders:{},unsubHeaders:{},subscribeOnlyOnce:!1},"string"==typeof t?{destination:t,subHeaders:e}:t),this._debug(`Request to subscribe ${o.destination}`),Zr.y.create(g=>{let b,I,z=this._connectedPre$;o.subscribeOnlyOnce&&(z=z.pipe((0,Yr.q)(1)));const G=this.stompErrors$.subscribe(te=>{this._correlateErrors(te)===o.destination&&g.error(te)});return I=z.subscribe(()=>{this._debug(`Will subscribe to ${o.destination}`);let te=o.subHeaders;"function"==typeof te&&(te=te()),b=this._stompClient.subscribe(o.destination,he=>{g.next(he)},te)}),()=>{if(this._debug(`Stop watching connection state (for ${o.destination})`),I.unsubscribe(),G.unsubscribe(),this.connected()){this._debug(`Will unsubscribe from ${o.destination} at Stomp`);let te=o.unsubHeaders;"function"==typeof te&&(te=te()),b.unsubscribe(te)}else this._debug(`Stomp not connected, no need to unsubscribe from ${o.destination} at Stomp`)}}).pipe((0,AT.B)())}watchForReceipt(t,e){this._stompClient.watchForReceipt(t,e)}asyncReceipt(t){return QC(this.unhandledReceipts$.pipe(Or(e=>e.headers["receipt-id"]===t)))}_changeState(t){this._connectionStatePre$.next(t),this.connectionState$.next(t)}}let tS=(()=>{class n extends XM{constructor(){super()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QM={brokerURL:"/quizgame",connectHeaders:{login:"",passcode:"",value:""},heartbeatIncoming:0,heartbeatOutgoing:2e4,reconnectDelay:200,debug:n=>{}};function vF(){const n=new tS;return n.configure(QM),n.activate(),n}function bF(){return new tS}let MT=(()=>{class n extends XM{constructor(){super()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),wF=(()=>{class n{constructor(e){this.http=e}getLeaderboardData(){return QC(this.http.get("/api/leaderboard"))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(U_))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JM=(()=>{class n{constructor(e){this.leaderboardDataService=e,this.subject=new $t.x}updateSubject(){this.leaderboardDataService.getLeaderboardData().then(e=>this.subject.next(e))}getState(){return this.subject.asObservable()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(wF))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eN=(()=>{class n{constructor(e){this.http=e}blockPlayer(e){return QC(this.http.get("/api/quizmanager/blockplayer/"+e))}clearBoard(){return QC(this.http.get("/api/quizmanager/clearBoard"))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(U_))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NT{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class OT extends NT{constructor(t,e,r,o,p){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=o,this.projectableNodes=p}}class tN extends NT{constructor(t,e,r,o){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class xF extends NT{constructor(t){super(),this.element=t instanceof c.SBq?t.nativeElement:t}}class PT{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof OT?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof tN?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof xF?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class EF extends PT{constructor(t,e,r,o,p){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=o,this.attachDomPortal=g=>{const b=g.element,I=this._document.createComment("dom-portal");b.parentNode.insertBefore(I,b),this.outletElement.appendChild(b),this._attachedPortal=g,super.setDisposeFn(()=>{I.parentNode&&I.parentNode.replaceChild(b,I)})},this._document=p}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let o;return t.viewContainerRef?(o=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>o.destroy())):(o=r.create(t.injector||this._defaultInjector||c.zs3.NULL),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=t,o}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return r.rootNodes.forEach(o=>this.outletElement.appendChild(o)),r.detectChanges(),this.setDisposeFn(()=>{let o=e.indexOf(r);-1!==o&&e.remove(o)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let nN=(()=>{class n extends PT{constructor(e,r,o){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new c.vpe,this.attachDomPortal=p=>{const g=p.element,b=this._document.createComment("dom-portal");p.setAttachedHost(this),g.parentNode.insertBefore(b,g),this._getRootNode().appendChild(g),this._attachedPortal=p,super.setDisposeFn(()=>{b.parentNode&&b.parentNode.replaceChild(g,b)})},this._document=o}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,p=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),g=r.createComponent(p,r.length,e.injector||r.injector,e.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(g.hostView.rootNodes[0]),super.setDisposeFn(()=>g.destroy()),this._attachedPortal=e,this._attachedRef=g,this.attached.emit(g),g}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c._Vd),c.Y36(c.s_b),c.Y36(Q))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[c.qOj]}),n})(),rN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();var CF=S(4266);const SF=["addListener","removeListener"],DF=["addEventListener","removeEventListener"],IF=["on","off"];function RT(n,t,e,r){if((0,Gi.m)(e)&&(r=e,e=void 0),r)return RT(n,t,e).pipe(Vo(r));const[o,p]=function MF(n){return(0,Gi.m)(n.addEventListener)&&(0,Gi.m)(n.removeEventListener)}(n)?DF.map(g=>b=>n[g](t,b,e)):function TF(n){return(0,Gi.m)(n.addListener)&&(0,Gi.m)(n.removeListener)}(n)?SF.map(iN(n,t)):function AF(n){return(0,Gi.m)(n.on)&&(0,Gi.m)(n.off)}(n)?IF.map(iN(n,t)):[];if(!o&&(0,CF.z)(n))return(0,li.z)(g=>RT(g,t,e))((0,Rl.Xf)(n));if(!o)throw new TypeError("Invalid event target");return new Zr.y(g=>{const b=(...I)=>g.next(1<I.length?I:I[0]);return o(b),()=>p(b)})}function iN(n,t){return e=>r=>n[e](t,r)}var oN=S(1954);const Mx={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:r}=Mx;r&&(t=r.requestAnimationFrame,e=r.cancelAnimationFrame);const o=t(p=>{e=void 0,n(p)});return new yo.w0(()=>e?.(o))},requestAnimationFrame(...n){const{delegate:t}=Mx;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Mx;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var sN=S(2631);const aN=new class OF extends sN.v{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let r,o=-1;t=t||e.shift();const p=e.length;do{if(r=t.execute(t.state,t.delay))break}while(++o<p&&(t=e.shift()));if(this._active=!1,r){for(;++o<p&&(t=e.shift());)t.unsubscribe();throw r}}}(class NF extends oN.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Mx.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);0===t.actions.length&&(Mx.cancelAnimationFrame(e),t._scheduled=void 0)}});let kT,PF=1;const nS={};function lN(n){return n in nS&&(delete nS[n],!0)}const RF={setImmediate(n){const t=PF++;return nS[t]=!0,kT||(kT=Promise.resolve()),kT.then(()=>lN(t)&&n()),t},clearImmediate(n){lN(n)}},{setImmediate:kF,clearImmediate:FF}=RF,rS={setImmediate(...n){const{delegate:t}=rS;return(t?.setImmediate||kF)(...n)},clearImmediate(n){const{delegate:t}=rS;return(t?.clearImmediate||FF)(n)},delegate:void 0};new class BF extends sN.v{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let r,o=-1;t=t||e.shift();const p=e.length;do{if(r=t.execute(t.state,t.delay))break}while(++o<p&&(t=e.shift()));if(this._active=!1,r){for(;++o<p&&(t=e.shift());)t.unsubscribe();throw r}}}(class LF extends oN.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=rS.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(t,e,r);0===t.actions.length&&(rS.clearImmediate(e),t._scheduled=void 0)}});var zF=S(671);function uN(n=0,t,e=I_.P){let r=-1;return null!=t&&((0,zF.K)(t)?e=t:r=t),new Zr.y(o=>{let p=function jF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;p<0&&(p=0);let g=0;return e.schedule(function(){o.closed||(o.next(g++),0<=r?this.schedule(void 0,r):o.complete())},p)})}function cN(n,t=I_.P){return function UF(n){return(0,Ai.e)((t,e)=>{let r=!1,o=null,p=null,g=!1;const b=()=>{if(p?.unsubscribe(),p=null,r){r=!1;const z=o;o=null,e.next(z)}g&&e.complete()},I=()=>{p=null,g&&e.complete()};t.subscribe(new Nr.Q(e,z=>{r=!0,o=z,p||(0,Rl.Xf)(n(z)).subscribe(p=new Nr.Q(e,b,I))},()=>{g=!0,(!r||!p||p.closed)&&e.complete()}))})}(()=>uN(n,t))}let dN=(()=>{class n{constructor(e,r,o){this._ngZone=e,this._platform=r,this._scrolled=new $t.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Zr.y(r=>{this._globalSubscription||this._addGlobalListener();const o=e>0?this._scrolled.pipe(cN(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,qt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const o=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(Or(p=>!p||o.indexOf(p)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((o,p)=>{this._scrollableContainsElement(p,e)&&r.push(p)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let o=Ki(r),p=e.getElementRef().nativeElement;do{if(o==p)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>RT(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.R0b),c.LFG(Ci),c.LFG(Q,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FT=(()=>{class n{constructor(e,r,o){this._platform=e,this._change=new $t.x,this._changeListener=p=>{this._change.next(p)},this._document=o,r.runOutsideAngular(()=>{if(e.isBrowser){const p=this._getWindow();p.addEventListener("resize",this._changeListener),p.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),o=e.documentElement,p=o.getBoundingClientRect();return{top:-p.top||e.body.scrollTop||r.scrollY||o.scrollTop||0,left:-p.left||e.body.scrollLeft||r.scrollX||o.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(cN(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ci),c.LFG(c.R0b),c.LFG(Q,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),pN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[O_,hN,O_,hN]}),n})();var Ub=S(3019);const fN=qv();class WF{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=oo(-this._previousScrollPosition.left),t.style.top=oo(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,o=this._document.body.style,p=r.scrollBehavior||"",g=o.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),fN&&(r.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),fN&&(r.scrollBehavior=p,o.scrollBehavior=g)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class GF{constructor(t,e,r,o){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(Or(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class mN{enable(){}disable(){}attach(){}}function LT(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function gN(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class qF{constructor(t,e,r,o){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=o,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:o}=this._viewportRuler.getViewportSize();LT(e,[{width:r,height:o,bottom:o,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let KF=(()=>{class n{constructor(e,r,o,p){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new mN,this.close=g=>new GF(this._scrollDispatcher,this._ngZone,this._viewportRuler,g),this.block=()=>new WF(this._viewportRuler,this._document),this.reposition=g=>new qF(this._scrollDispatcher,this._viewportRuler,this._ngZone,g),this._document=p}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(dN),c.LFG(FT),c.LFG(c.R0b),c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _N{constructor(t){if(this.scrollStrategy=new mN,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class ZF{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let yN=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YF=(()=>{class n extends yN{constructor(e,r){super(e),this._ngZone=r,this._keydownListener=o=>{const p=this._attachedOverlays;for(let g=p.length-1;g>-1;g--)if(p[g]._keydownEvents.observers.length>0){const b=p[g]._keydownEvents;this._ngZone?this._ngZone.run(()=>b.next(o)):b.next(o);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XF=(()=>{class n extends yN{constructor(e,r,o){super(e),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=p=>{this._pointerDownEventTarget=Is(p)},this._clickListener=p=>{const g=Is(p),b="click"===p.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:g;this._pointerDownEventTarget=null;const I=this._attachedOverlays.slice();for(let z=I.length-1;z>-1;z--){const G=I[z];if(G._outsidePointerEvents.observers.length<1||!G.hasAttached())continue;if(G.overlayElement.contains(g)||G.overlayElement.contains(b))break;const te=G._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>te.next(p)):te.next(p)}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q),c.LFG(Ci),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vN=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||m_()){const o=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let p=0;p<o.length;p++)o[p].remove()}const r=this._document.createElement("div");r.classList.add(e),m_()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q),c.LFG(Ci))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QF{constructor(t,e,r,o,p,g,b,I,z,G=!1){this._portalOutlet=t,this._host=e,this._pane=r,this._config=o,this._ngZone=p,this._keyboardDispatcher=g,this._document=b,this._location=I,this._outsideClickDispatcher=z,this._animationsDisabled=G,this._backdropElement=null,this._backdropClick=new $t.x,this._attachments=new $t.x,this._detachments=new $t.x,this._locationChanges=yo.w0.EMPTY,this._backdropClickHandler=te=>this._backdropClick.next(te),this._backdropTransitionendHandler=te=>{this._disposeBackdrop(te.target)},this._keydownEvents=new $t.x,this._outsidePointerEvents=new $t.x,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Yr.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=oo(this._config.width),t.height=oo(this._config.height),t.minWidth=oo(this._config.minWidth),t.minHeight=oo(this._config.minHeight),t.maxWidth=oo(this._config.maxWidth),t.maxHeight=oo(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,r){const o=Im(e||[]).filter(p=>!!p);o.length&&(r?t.classList.add(...o):t.classList.remove(...o))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(ql((0,Ub.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const bN="cdk-overlay-connected-position-bounding-box",JF=/([A-Za-z%]+)$/;class e2{get positions(){return this._preferredPositions}constructor(t,e,r,o,p){this._viewportRuler=e,this._document=r,this._platform=o,this._overlayContainer=p,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new $t.x,this._resizeSubscription=yo.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(bN),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,o=this._containerRect,p=[];let g;for(let b of this._preferredPositions){let I=this._getOriginPoint(t,o,b),z=this._getOverlayPoint(I,e,b),G=this._getOverlayFit(z,e,r,b);if(G.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(b,I);this._canFitWithFlexibleDimensions(G,z,r)?p.push({position:b,origin:I,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(I,b)}):(!g||g.overlayFit.visibleArea<G.visibleArea)&&(g={overlayFit:G,overlayPoint:z,originPoint:I,position:b,overlayRect:e})}if(p.length){let b=null,I=-1;for(const z of p){const G=z.boundingBoxRect.width*z.boundingBoxRect.height*(z.position.weight||1);G>I&&(I=G,b=z)}return this._isPushed=!1,void this._applyPosition(b.position,b.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(g.position,g.originPoint);this._applyPosition(g.position,g.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&X_(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(bN),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let o,p;if("center"==r.originX)o=t.left+t.width/2;else{const g=this._isRtl()?t.right:t.left,b=this._isRtl()?t.left:t.right;o="start"==r.originX?g:b}return e.left<0&&(o-=e.left),p="center"==r.originY?t.top+t.height/2:"top"==r.originY?t.top:t.bottom,e.top<0&&(p-=e.top),{x:o,y:p}}_getOverlayPoint(t,e,r){let o,p;return o="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,p="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+o,y:t.y+p}}_getOverlayFit(t,e,r,o){const p=xN(e);let{x:g,y:b}=t,I=this._getOffset(o,"x"),z=this._getOffset(o,"y");I&&(g+=I),z&&(b+=z);let he=0-b,_e=b+p.height-r.height,ye=this._subtractOverflows(p.width,0-g,g+p.width-r.width),ge=this._subtractOverflows(p.height,he,_e),Re=ye*ge;return{visibleArea:Re,isCompletelyWithinViewport:p.width*p.height===Re,fitsInViewportVertically:ge===p.height,fitsInViewportHorizontally:ye==p.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const o=r.bottom-e.y,p=r.right-e.x,g=wN(this._overlayRef.getConfig().minHeight),b=wN(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=g&&g<=o)&&(t.fitsInViewportHorizontally||null!=b&&b<=p)}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const o=xN(e),p=this._viewportRect,g=Math.max(t.x+o.width-p.width,0),b=Math.max(t.y+o.height-p.height,0),I=Math.max(p.top-r.top-t.y,0),z=Math.max(p.left-r.left-t.x,0);let G=0,te=0;return G=o.width<=p.width?z||-g:t.x<this._viewportMargin?p.left-r.left-t.x:0,te=o.height<=p.height?I||-b:t.y<this._viewportMargin?p.top-r.top-t.y:0,this._previousPushAmount={x:G,y:te},{x:t.x+G,y:t.y+te}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),o=new ZF(t,r);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,o=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let p=0;p<e.length;p++)e[p].style.transformOrigin=`${r} ${o}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,o=this._isRtl();let p,g,b,G,te,he;if("top"===e.overlayY)g=t.y,p=r.height-g+this._viewportMargin;else if("bottom"===e.overlayY)b=r.height-t.y+2*this._viewportMargin,p=r.height-b+this._viewportMargin;else{const _e=Math.min(r.bottom-t.y+r.top,t.y),ye=this._lastBoundingBoxSize.height;p=2*_e,g=t.y-_e,p>ye&&!this._isInitialRender&&!this._growAfterOpen&&(g=t.y-ye/2)}if("end"===e.overlayX&&!o||"start"===e.overlayX&&o)he=r.width-t.x+this._viewportMargin,G=t.x-this._viewportMargin;else if("start"===e.overlayX&&!o||"end"===e.overlayX&&o)te=t.x,G=r.right-t.x;else{const _e=Math.min(r.right-t.x+r.left,t.x),ye=this._lastBoundingBoxSize.width;G=2*_e,te=t.x-_e,G>ye&&!this._isInitialRender&&!this._growAfterOpen&&(te=t.x-ye/2)}return{top:g,left:te,bottom:b,right:he,width:G,height:p}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const p=this._overlayRef.getConfig().maxHeight,g=this._overlayRef.getConfig().maxWidth;o.height=oo(r.height),o.top=oo(r.top),o.bottom=oo(r.bottom),o.width=oo(r.width),o.left=oo(r.left),o.right=oo(r.right),o.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",o.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",p&&(o.maxHeight=oo(p)),g&&(o.maxWidth=oo(g))}this._lastBoundingBoxSize=r,X_(this._boundingBox.style,o)}_resetBoundingBoxStyles(){X_(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){X_(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},o=this._hasExactPosition(),p=this._hasFlexibleDimensions,g=this._overlayRef.getConfig();if(o){const G=this._viewportRuler.getViewportScrollPosition();X_(r,this._getExactOverlayY(e,t,G)),X_(r,this._getExactOverlayX(e,t,G))}else r.position="static";let b="",I=this._getOffset(e,"x"),z=this._getOffset(e,"y");I&&(b+=`translateX(${I}px) `),z&&(b+=`translateY(${z}px)`),r.transform=b.trim(),g.maxHeight&&(o?r.maxHeight=oo(g.maxHeight):p&&(r.maxHeight="")),g.maxWidth&&(o?r.maxWidth=oo(g.maxWidth):p&&(r.maxWidth="")),X_(this._pane.style,r)}_getExactOverlayY(t,e,r){let o={top:"",bottom:""},p=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(p=this._pushOverlayOnScreen(p,this._overlayRect,r)),"bottom"===t.overlayY?o.bottom=this._document.documentElement.clientHeight-(p.y+this._overlayRect.height)+"px":o.top=oo(p.y),o}_getExactOverlayX(t,e,r){let g,o={left:"",right:""},p=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(p=this._pushOverlayOnScreen(p,this._overlayRect,r)),g=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===g?o.right=this._document.documentElement.clientWidth-(p.x+this._overlayRect.width)+"px":o.left=oo(p.x),o}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:gN(t,r),isOriginOutsideView:LT(t,r),isOverlayClipped:gN(e,r),isOverlayOutsideView:LT(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,o)=>r-Math.max(o,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Im(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof c.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function X_(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function wN(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(JF);return e&&"px"!==e?null:parseFloat(t)}return n||null}function xN(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const EN="cdk-global-overlay-wrapper";class t2{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(EN),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:o,height:p,maxWidth:g,maxHeight:b}=r,I=!("100%"!==o&&"100vw"!==o||g&&"100%"!==g&&"100vw"!==g),z=!("100%"!==p&&"100vh"!==p||b&&"100%"!==b&&"100vh"!==b),G=this._xPosition,te=this._xOffset,he="rtl"===this._overlayRef.getConfig().direction;let _e="",ye="",ge="";I?ge="flex-start":"center"===G?(ge="center",he?ye=te:_e=te):he?"left"===G||"end"===G?(ge="flex-end",_e=te):("right"===G||"start"===G)&&(ge="flex-start",ye=te):"left"===G||"start"===G?(ge="flex-start",_e=te):("right"===G||"end"===G)&&(ge="flex-end",ye=te),t.position=this._cssPosition,t.marginLeft=I?"0":_e,t.marginTop=z?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=I?"0":ye,e.justifyContent=ge,e.alignItems=z?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(EN),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let n2=(()=>{class n{constructor(e,r,o,p){this._viewportRuler=e,this._document=r,this._platform=o,this._overlayContainer=p}global(){return new t2}flexibleConnectedTo(e){return new e2(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(FT),c.LFG(Q),c.LFG(Ci),c.LFG(vN))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),r2=0,iS=(()=>{class n{constructor(e,r,o,p,g,b,I,z,G,te,he,_e){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=p,this._keyboardDispatcher=g,this._injector=b,this._ngZone=I,this._document=z,this._directionality=G,this._location=te,this._outsideClickDispatcher=he,this._animationsModuleType=_e}create(e){const r=this._createHostElement(),o=this._createPaneElement(r),p=this._createPortalOutlet(o),g=new _N(e);return g.direction=g.direction||this._directionality.value,new QF(p,r,o,g,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+r2++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new EF(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(KF),c.LFG(vN),c.LFG(c._Vd),c.LFG(n2),c.LFG(YF),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(Q),c.LFG(N_),c.LFG($e),c.LFG(XF),c.LFG(c.QbO,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a2={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[iS],useFactory:function s2(n){return()=>n.scrollStrategies.reposition()}};let l2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[iS,a2],imports:[O_,rN,pN,pN]}),n})();function u2(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"div",2)(1,"button",3),c.NdJ("click",function(){c.CHM(e);const o=c.oxw();return c.KtG(o.action())}),c._uU(2),c.qZA()()}if(2&n){const e=c.oxw();c.xp6(2),c.hij(" ",e.data.action," ")}}const c2=["label"];function d2(n,t){}const h2=Math.pow(2,31)-1;class BT{constructor(t,e){this._overlayRef=e,this._afterDismissed=new $t.x,this._afterOpened=new $t.x,this._onAction=new $t.x,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,h2))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const CN=new c.OlP("MatSnackBarData");class oS{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let p2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),n})(),f2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),n})(),m2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),n})(),g2=(()=>{class n{constructor(e,r){this.snackBarRef=e,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(BT),c.Y36(CN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0),c._uU(1),c.qZA(),c.YNc(2,u2,3,1,"div",1)),2&e&&(c.xp6(1),c.hij(" ",r.data.message,"\n"),c.xp6(1),c.Q6J("ngIf",r.hasAction))},dependencies:[Gr,Bm,p2,f2,m2],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),n})();const _2={snackBarState:av("state",[Sd("void, hidden",Du({transform:"scale(0.8)",opacity:0})),Sd("visible",Du({transform:"scale(1)",opacity:1})),jp("* => visible",Cd("150ms cubic-bezier(0, 0, 0.2, 1)")),jp("* => void, * => hidden",Cd("75ms cubic-bezier(0.4, 0.0, 1, 1)",Du({opacity:0})))])};let y2=0,v2=(()=>{class n extends PT{constructor(e,r,o,p,g){super(),this._ngZone=e,this._elementRef=r,this._changeDetectorRef=o,this._platform=p,this.snackBarConfig=g,this._document=(0,c.f3M)(Q),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new $t.x,this._onExit=new $t.x,this._onEnter=new $t.x,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+y2++,this.attachDomPortal=b=>{this._assertNotAttached();const I=this._portalOutlet.attachDomPortal(b);return this._afterPortalAttached(),I},this._live="assertive"!==g.politeness||g.announcementMessage?"off"===g.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const r=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),r}attachTemplatePortal(e){this._assertNotAttached();const r=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),r}onAnimationEnd(e){const{fromState:r,toState:o}=e;if(("void"===o&&"void"!==r||"hidden"===o)&&this._completeExit(),"visible"===o){const p=this._onEnter;this._ngZone.run(()=>{p.next(),p.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Yr.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(o=>e.classList.add(o)):e.classList.add(r)),this._exposeToModals()}_exposeToModals(){const e=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){const p=r[o],g=p.getAttribute("aria-owns");this._trackedModals.add(p),g?-1===g.indexOf(e)&&p.setAttribute("aria-owns",g+" "+e):p.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const r=e.getAttribute("aria-owns");if(r){const o=r.replace(this._liveElementId,"").trim();o.length>0?e.setAttribute("aria-owns",o):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(o=document.activeElement),e.removeAttribute("aria-hidden"),r.appendChild(e),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.R0b),c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(Ci),c.Y36(oS))},n.\u0275dir=c.lG2({type:n,viewQuery:function(e,r){if(1&e&&c.Gf(nN,7),2&e){let o;c.iGM(o=c.CRH())&&(r._portalOutlet=o.first)}},features:[c.qOj]}),n})(),b2=(()=>{class n extends v2{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,r="mdc-snackbar__label";e.classList.toggle(r,!e.querySelector(`.${r}`))}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=c.n5z(n)))(r||n)}}(),n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,r){if(1&e&&c.Gf(c2,7),2&e){let o;c.iGM(o=c.CRH())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,r){1&e&&c.WFA("@state.done",function(p){return r.onAnimationEnd(p)}),2&e&&c.d8E("@state",r._animationState)},features:[c.qOj],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,r){1&e&&(c.TgZ(0,"div",0)(1,"div",1,2)(3,"div",3),c.YNc(4,d2,0,0,"ng-template",4),c.qZA(),c._UZ(5,"div"),c.qZA()()),2&e&&(c.xp6(5),c.uIk("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[nN],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;--mdc-snackbar-container-shape:4px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[_2.snackBarState]}}),n})(),SN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[l2,rN,Ti,MI,ls,ls]}),n})();const DN=new c.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function w2(){return new oS}});let x2=(()=>{class n{get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,r,o,p,g,b){this._overlay=e,this._live=r,this._injector=o,this._breakpointObserver=p,this._parentSnackBar=g,this._defaultConfig=b,this._snackBarRefAtThisLevel=null}openFromComponent(e,r){return this._attach(e,r)}openFromTemplate(e,r){return this._attach(e,r)}open(e,r="",o){const p={...this._defaultConfig,...o};return p.data={message:e,action:r},p.announcementMessage===e&&(p.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,p)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,r){const p=c.zs3.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:oS,useValue:r}]}),g=new OT(this.snackBarContainerComponent,r.viewContainerRef,p),b=e.attach(g);return b.instance.snackBarConfig=r,b.instance}_attach(e,r){const o={...new oS,...this._defaultConfig,...r},p=this._createOverlay(o),g=this._attachSnackBarContainer(p,o),b=new BT(g,p);if(e instanceof c.Rgc){const I=new tN(e,null,{$implicit:o.data,snackBarRef:b});b.instance=g.attachTemplatePortal(I)}else{const I=this._createInjector(o,b),z=new OT(e,void 0,I),G=g.attachComponentPortal(z);b.instance=G.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(ql(p.detachments())).subscribe(I=>{p.overlayElement.classList.toggle(this.handsetCssClass,I.matches)}),o.announcementMessage&&g._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(b,o),this._openedSnackBarRef=b,this._openedSnackBarRef}_animateSnackBar(e,r){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),r.duration&&r.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(r.duration))}_createOverlay(e){const r=new _N;r.direction=e.direction;let o=this._overlay.position().global();const p="rtl"===e.direction,g="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!p||"end"===e.horizontalPosition&&p,b=!g&&"center"!==e.horizontalPosition;return g?o.left("0"):b?o.right("0"):o.centerHorizontally(),"top"===e.verticalPosition?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(e,r){return c.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:BT,useValue:r},{provide:CN,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(iS),c.LFG(PE),c.LFG(c.zs3),c.LFG(T_),c.LFG(n,12),c.LFG(DN))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),E2=(()=>{class n extends x2{constructor(e,r,o,p,g,b){super(e,r,o,p,g,b),this.simpleSnackBarComponent=g2,this.snackBarContainerComponent=b2,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(iS),c.LFG(PE),c.LFG(c.zs3),c.LFG(T_),c.LFG(n,12),c.LFG(DN))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:SN}),n})();function IN(...n){const t=(0,vs.jO)(n),{args:e,keys:r}=id(n),o=new Zr.y(p=>{const{length:g}=e;if(!g)return void p.complete();const b=new Array(g);let I=g,z=g;for(let G=0;G<g;G++){let te=!1;(0,Rl.Xf)(e[G]).subscribe(new Nr.Q(p,he=>{te||(te=!0,z--),b[G]=he},()=>I--,void 0,()=>{(!I||!te)&&(z||p.next(r?Nl(r,b):b),p.complete())}))}});return t?o.pipe(Vo(t)):o}const C2=["*"];let sS;function Nx(n){return function S2(){if(void 0===sS&&(sS=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(sS=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return sS}()?.createHTML(n)||n}function TN(n){return Error(`Unable to find icon with the name "${n}"`)}function AN(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function MN(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Q_{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}}let aS=(()=>{class n{constructor(e,r,o,p){this._httpClient=e,this._sanitizer=r,this._errorHandler=p,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(e,r,o){return this.addSvgIconInNamespace("",e,r,o)}addSvgIconLiteral(e,r,o){return this.addSvgIconLiteralInNamespace("",e,r,o)}addSvgIconInNamespace(e,r,o,p){return this._addSvgIconConfig(e,r,new Q_(o,null,p))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,o,p){const g=this._sanitizer.sanitize(c.q3G.HTML,o);if(!g)throw MN(o);const b=Nx(g);return this._addSvgIconConfig(e,r,new Q_("",b,p))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,o){return this._addSvgIconSetConfig(e,new Q_(r,null,o))}addSvgIconSetLiteralInNamespace(e,r,o){const p=this._sanitizer.sanitize(c.q3G.HTML,r);if(!p)throw MN(r);const g=Nx(p);return this._addSvgIconSetConfig(e,new Q_("",g,o))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,e);if(!r)throw AN(e);const o=this._cachedIconsByUrl.get(r);return o?(0,qt.of)(lS(o)):this._loadSvgIconFromConfig(new Q_(e,null)).pipe((0,Pr.b)(p=>this._cachedIconsByUrl.set(r,p)),(0,en.U)(p=>lS(p)))}getNamedSvgIcon(e,r=""){const o=NN(r,e);let p=this._svgIconConfigs.get(o);if(p)return this._getSvgFromConfig(p);if(p=this._getIconConfigFromResolvers(r,e),p)return this._svgIconConfigs.set(o,p),this._getSvgFromConfig(p);const g=this._iconSetConfigs.get(r);return g?this._getSvgFromIconSetConfigs(e,g):Xs(TN(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?(0,qt.of)(lS(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,en.U)(r=>lS(r)))}_getSvgFromIconSetConfigs(e,r){const o=this._extractIconWithNameFromAnySet(e,r);return o?(0,qt.of)(o):IN(r.filter(g=>!g.svgText).map(g=>this._loadSvgIconSetFromConfig(g).pipe(es(b=>{const z=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,g.url)} failed: ${b.message}`;return this._errorHandler.handleError(new Error(z)),(0,qt.of)(null)})))).pipe((0,en.U)(()=>{const g=this._extractIconWithNameFromAnySet(e,r);if(!g)throw TN(e);return g}))}_extractIconWithNameFromAnySet(e,r){for(let o=r.length-1;o>=0;o--){const p=r[o];if(p.svgText&&p.svgText.toString().indexOf(e)>-1){const g=this._svgElementFromConfig(p),b=this._extractSvgIconFromSet(g,e,p.options);if(b)return b}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,Pr.b)(r=>e.svgText=r),(0,en.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?(0,qt.of)(null):this._fetchIcon(e).pipe((0,Pr.b)(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,o){const p=e.querySelector(`[id="${r}"]`);if(!p)return null;const g=p.cloneNode(!0);if(g.removeAttribute("id"),"svg"===g.nodeName.toLowerCase())return this._setSvgAttributes(g,o);if("symbol"===g.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(g),o);const b=this._svgElementFromString(Nx("<svg></svg>"));return b.appendChild(g),this._setSvgAttributes(b,o)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(e){const r=this._svgElementFromString(Nx("<svg></svg>")),o=e.attributes;for(let p=0;p<o.length;p++){const{name:g,value:b}=o[p];"id"!==g&&r.setAttribute(g,b)}for(let p=0;p<e.childNodes.length;p++)e.childNodes[p].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[p].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){const{url:r,options:o}=e,p=o?.withCredentials??!1;if(!this._httpClient)throw function D2(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const g=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,r);if(!g)throw AN(r);const b=this._inProgressUrlFetches.get(g);if(b)return b;const I=this._httpClient.get(g,{responseType:"text",withCredentials:p}).pipe((0,en.U)(z=>Nx(z)),Js(()=>this._inProgressUrlFetches.delete(g)),(0,AT.B)());return this._inProgressUrlFetches.set(g,I),I}_addSvgIconConfig(e,r,o){return this._svgIconConfigs.set(NN(e,r),o),this}_addSvgIconSetConfig(e,r){const o=this._iconSetConfigs.get(e);return o?o.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let o=0;o<this._resolvers.length;o++){const p=this._resolvers[o](r,e);if(p)return T2(p)?new Q_(p.url,null,p.options):new Q_(p,null)}}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(U_,8),c.LFG(Dl),c.LFG(Q,8),c.LFG(c.qLn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lS(n){return n.cloneNode(!0)}function NN(n,t){return n+":"+t}function T2(n){return!(!n.url||!n.options)}const A2=cb(class{constructor(n){this._elementRef=n}}),M2=new c.OlP("MAT_ICON_DEFAULT_OPTIONS"),N2=new c.OlP("mat-icon-location",{providedIn:"root",factory:function O2(){const n=(0,c.f3M)(Q),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),ON=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],P2=ON.map(n=>`[${n}]`).join(", "),R2=/^url\(['"]?#(.*?)['"]?\)$/;let VT=(()=>{class n extends A2{get inline(){return this._inline}set inline(e){this._inline=Ui(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(e,r,o,p,g,b){super(e),this._iconRegistry=r,this._location=p,this._errorHandler=g,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=yo.w0.EMPTY,b&&(b.color&&(this.color=this.defaultColor=b.color),b.fontSet&&(this.fontSet=b.fontSet)),o||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const o=e.childNodes[r];(1!==o.nodeType||"svg"===o.nodeName.toLowerCase())&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>e.classList.remove(o)),r.forEach(o=>e.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((o,p)=>{o.forEach(g=>{p.setAttribute(g.name,`url('${e}#${g.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(P2),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let p=0;p<r.length;p++)ON.forEach(g=>{const b=r[p],I=b.getAttribute(g),z=I?I.match(R2):null;if(z){let G=o.get(b);G||(G=[],o.set(b,G)),G.push({name:g,value:z[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,o]=this._splitIconName(e);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe((0,Yr.q)(1)).subscribe(p=>this._setSvgElement(p),p=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${o}! ${p.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(aS),c.$8M("aria-hidden"),c.Y36(N2),c.Y36(c.qLn),c.Y36(M2,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,r){2&e&&(c.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),c.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:C2,decls:1,vars:0,template:function(e,r){1&e&&(c.F$t(),c.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),k2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[ls,ls]}),n})();function F2(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"tr")(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td")(10,"button",3),c.NdJ("click",function(){const p=c.CHM(e).$implicit,g=c.oxw();return c.KtG(g.removeEntry(p))}),c.TgZ(11,"mat-icon"),c._uU(12,"close"),c.qZA()()()()}if(2&n){const e=t.$implicit;c.xp6(2),c.Oqu(e.name),c.xp6(2),c.AsE(" ",e.correctQuestions," / ",e.totalQuestions,""),c.xp6(2),c.Oqu(e.score),c.xp6(2),c.Oqu(e.contestantId)}}let L2=(()=>{class n{constructor(e,r){this.leaderboardStateService=e,this.quizManagerService=r,this.leaderboardEntries=[],e.getState().subscribe(o=>{console.log("update of leaderboard, {}",o),this.leaderboardEntries=o})}removeEntry(e){this.quizManagerService.blockPlayer(e.contestantId).then(r=>console.log("Blocked player"))}clearLeaderboard(){this.quizManagerService.clearBoard().then(e=>console.log("Cleared leaderboard"))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(JM),c.Y36(eN))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-leaderboard"]],decls:15,vars:1,consts:[[1,"table"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"click"]],template:function(e,r){1&e&&(c.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th"),c._uU(4," name "),c.qZA(),c.TgZ(5,"th"),c._uU(6," questions correct/total "),c.qZA(),c.TgZ(7,"th"),c._uU(8," score "),c.qZA(),c.TgZ(9,"th"),c._uU(10," id "),c.qZA()()(),c.TgZ(11,"tbody"),c.YNc(12,F2,13,5,"tr",1),c.TgZ(13,"button",2),c.NdJ("click",function(){return r.clearLeaderboard()}),c._uU(14,"clear"),c.qZA()()()),2&e&&(c.xp6(12),c.Q6J("ngForOf",r.leaderboardEntries))},dependencies:[Fs,Bm,VT]}),n})();function B2(n,t){1&n&&c._UZ(0,"mat-icon",17)}function V2(n,t){1&n&&c._UZ(0,"mat-icon",18)}function U2(n,t){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const e=c.oxw().$implicit,r=c.oxw().$implicit,o=c.oxw();c.xp6(1),c.Oqu(o.getScore(e,null==r?null:r.answeredQuestions))}}function z2(n,t){1&n&&(c.ynx(0),c._uU(1,"-"),c.BQk())}function j2(n,t){if(1&n&&(c.TgZ(0,"td")(1,"div",1)(2,"div",13),c.YNc(3,B2,1,0,"mat-icon",14),c.YNc(4,V2,1,0,"mat-icon",15),c.YNc(5,U2,2,1,"ng-container",16),c.YNc(6,z2,2,0,"ng-container",16),c.qZA()()()),2&n){const e=t.$implicit,r=c.oxw().$implicit,o=c.oxw();c.xp6(3),c.Q6J("ngIf",o.questionCorrect(e,null==r?null:r.answeredQuestions)),c.xp6(1),c.Q6J("ngIf",!o.questionCorrect(e,null==r?null:r.answeredQuestions)),c.xp6(1),c.Q6J("ngIf",o.hasAnsweredQuestion(e,null==r?null:r.answeredQuestions)),c.xp6(1),c.Q6J("ngIf",!o.hasAnsweredQuestion(e,null==r?null:r.answeredQuestions))}}function H2(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"mat-card",7)(1,"mat-card-header")(2,"div",8)(3,"div",9)(4,"h3"),c._uU(5),c.qZA()(),c._UZ(6,"div",4),c.TgZ(7,"div",9)(8,"button",10),c.NdJ("click",function(){const p=c.CHM(e).$implicit,g=c.oxw();return c.KtG(g.removeContestant(p))}),c.TgZ(9,"mat-icon"),c._uU(10,"close"),c.qZA()()()()(),c.TgZ(11,"mat-card-content")(12,"table",11)(13,"tbody")(14,"tr"),c.YNc(15,j2,7,4,"td",12),c.qZA()()()()()}if(2&n){const e=t.$implicit;c.xp6(5),c.Oqu(null==e||null==e.contestant?null:e.contestant.name),c.xp6(10),c.Q6J("ngForOf",null==e?null:e.questionIds)}}let $2=(()=>{class n{ngOnInit(){this.subscribed=!1,this.subscribe(),this._success.subscribe(e=>{this.alerts.push({type:"info",msg:e,timeout:5e3}),this.successMessage=e})}ngOnDestroy(){this.unsubscribe()}constructor(e,r,o,p){this.rxStompService=e,this.stateService=r,this.quizManagerService=o,this.snackbar=p,this.alerts=[],this.subscribed=!1,this._success=new $t.x,this.successMessage="",this.contestantUpdate=[],this.on_next=g=>{const b=JSON.parse(g.body);this.contestantUpdate=b.filter(I=>I.connected),this.stateService.updateSubject()}}subscribe(){this.subscribed||(this.subscription=this.rxStompService.watch("/topic/gameManagerUpdate").subscribe(this.on_next),this.subscribed=!0)}unsubscribe(){this.subscribed&&(this.subscription.unsubscribe(),this.subscribed=!1)}questionCorrect(e,r=[]){return r.filter(o=>o.questionId===e&&o.correct).length>0}hasAnsweredQuestion(e,r){return r?.some(o=>o.questionId===e)??!1}getScore(e,r){return r?.filter(o=>o.questionId===e).map(o=>o.score).reduce((o,p)=>o+p,0)}removeContestant(e){this.quizManagerService.blockPlayer(e?.contestant?.id).then(r=>this.snackbar.open("Player blocked"))}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(tS),c.Y36(JM),c.Y36(eN),c.Y36(E2))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-quiz-manager"]],decls:16,vars:1,consts:[[1,"container"],[1,"row"],["src","/assets/P4C.png","alt","logo"],[1,"row","console-page"],[1,"col-6"],[1,"text-color-change"],["appearance","outlined",4,"ngFor","ngForOf"],["appearance","outlined"],[1,"row","contestant-card"],[1,"col-3"],["mat-icon-button","",2,"float","right",3,"click"],[1,"table","table-borderless"],[4,"ngFor","ngForOf"],[1,"col"],["class","correct","aria-hidden","false","aria-label","Example home icon","fontIcon","check",4,"ngIf"],["class","incorrect","aria-hidden","false","aria-label","Example home icon","fontIcon","close",4,"ngIf"],[4,"ngIf"],["aria-hidden","false","aria-label","Example home icon","fontIcon","check",1,"correct"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close",1,"incorrect"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"div",1),c._UZ(4,"h1"),c.qZA(),c.TgZ(5,"div",3)(6,"div",4)(7,"h1",5)(8,"strong"),c._uU(9,"Currently Playing"),c.qZA()(),c.YNc(10,H2,16,2,"mat-card",6),c.qZA(),c.TgZ(11,"div",4)(12,"h1",5)(13,"strong"),c._uU(14,"Leaderboard"),c.qZA()(),c._UZ(15,"app-leaderboard"),c.qZA()()()),2&e&&(c.xp6(10),c.Q6J("ngForOf",r.contestantUpdate))},dependencies:[Fs,Gr,P_,Rm,R_,H_,VT,L2],styles:[".console-page[_ngcontent-%COMP%]{padding-top:1rem}.correct[_ngcontent-%COMP%]{color:green}.incorrect[_ngcontent-%COMP%]{color:red}img[_ngcontent-%COMP%]{max-height:200px;width:auto;height:auto}.contestant-card[_ngcontent-%COMP%]{width:100%}@keyframes _ngcontent-%COMP%_colorChange{0%,to{color:#3d3754}10%{color:#7f2b78}20%{color:#f39200}30%{color:#e04a2a}40%{color:#ad385d}50%{color:#872e74}60%{color:#802b78}70%{color:#eb5e18}80%{color:#ec6316}90%{color:#000}}.text-color-change[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_colorChange 10s infinite}@keyframes _ngcontent-%COMP%_ripple{0%{text-shadow:0 0 4px #3d3754,0 0 8px #7f2b78,0 0 12px #f39200;opacity:1}25%{text-shadow:0 0 4px #e04a2a,0 0 8px #ad385d,0 0 12px #872e74;opacity:.75}50%{text-shadow:0 0 4px #802b78,0 0 8px #eb5e18,0 0 12px #ec6316;opacity:.5}75%{text-shadow:0 0 4px #ad385d,0 0 8px #872e74,0 0 12px #802b78;opacity:.75}to{text-shadow:0 0 4px #3d3754,0 0 8px #7f2b78,0 0 12px #f39200;opacity:1}}.text-ripple[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_ripple 10s infinite;color:#000}@keyframes _ngcontent-%COMP%_rippleEffect{0%,to{text-shadow:1px 0 0 #3d3754,2px 0 0 #7f2b78,3px 0 0 #f39200,4px 0 0 #e04a2a,5px 0 0 #ad385d,6px 0 0 #872e74,7px 0 0 #802b78,8px 0 0 #eb5e18,9px 0 0 #ec6316;color:transparent}50%{text-shadow:none;color:#000}90%{text-shadow:-1px 0 0 #3d3754,-2px 0 0 #7f2b78,-3px 0 0 #f39200,-4px 0 0 #e04a2a,-5px 0 0 #ad385d,-6px 0 0 #872e74,-7px 0 0 #802b78,-8px 0 0 #eb5e18,-9px 0 0 #ec6316;color:transparent}}.text-ripple2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rippleEffect 10s infinite;display:inline-block}"]}),n})();class W2{static generateDeviceIdentifier(){const g=`${navigator.userAgent}-${window.screen.width}-${window.screen.height}-${window.devicePixelRatio}-${function t(){return Math.random().toString(36).substring(2,10)}()}`;return this.base64Encode(g)}static base64Encode(t){const e=encodeURIComponent(t);return btoa(e)}}var Ko=(()=>((Ko=Ko||{}).DISCONNECTED="DISCONNECTED",Ko.CONNECTED="CONNECTED",Ko.STARTED="STARTED",Ko.RUNNING="RUNNING",Ko.FINISHED="FINISHED",Ko.UNDEFINED="UNDEFINED",Ko.BLOCKED="UNDEFINED",Ko))();const PN=rl({passive:!0});let G2=(()=>{class n{constructor(e,r){this._platform=e,this._ngZone=r,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Qs.E;const r=Ki(e),o=this._monitoredElements.get(r);if(o)return o.subject;const p=new $t.x,g="cdk-text-field-autofilled",b=I=>{"cdk-text-field-autofill-start"!==I.animationName||r.classList.contains(g)?"cdk-text-field-autofill-end"===I.animationName&&r.classList.contains(g)&&(r.classList.remove(g),this._ngZone.run(()=>p.next({target:I.target,isAutofilled:!1}))):(r.classList.add(g),this._ngZone.run(()=>p.next({target:I.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",b,PN),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:p,unlisten:()=>{r.removeEventListener("animationstart",b,PN)}}),p}stopMonitoring(e){const r=Ki(e),o=this._monitoredElements.get(r);o&&(o.unlisten(),o.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((e,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Ci),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),RN=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),J_=(()=>{class n extends RN{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Ud=new c.OlP("NgValueAccessor"),Z2={provide:Ud,useExisting:(0,c.Gpc)(()=>uS),multi:!0},X2=new c.OlP("CompositionEventMode");let uS=(()=>{class n extends RN{constructor(e,r,o){super(e,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Y2(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(X2,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&c.NdJ("input",function(p){return r._handleInput(p.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(p){return r._compositionEnd(p.target.value)})},features:[c._Bn([Z2]),c.qOj]}),n})();function zm(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function FN(n){return null!=n&&"number"==typeof n.length}const Ma=new c.OlP("NgValidators"),jm=new c.OlP("NgAsyncValidators"),Q2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class J2{static min(t){return function LN(n){return t=>{if(zm(t.value)||zm(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function BN(n){return t=>{if(zm(t.value)||zm(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function VN(n){return zm(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function UN(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function zN(n){return zm(n.value)||Q2.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function jN(n){return t=>zm(t.value)||!FN(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function HN(n){return t=>FN(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function $N(n){if(!n)return cS;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(zm(r.value))return null;const o=r.value;return t.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(t)}static nullValidator(t){return null}static compose(t){return YN(t)}static composeAsync(t){return XN(t)}}function cS(n){return null}function WN(n){return null!=n}function GN(n){return(0,c.QGY)(n)?(0,Tr.D)(n):n}function qN(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function KN(n,t){return t.map(e=>e(n))}function ZN(n){return n.map(t=>function eL(n){return!n.validate}(t)?t:e=>t.validate(e))}function YN(n){if(!n)return null;const t=n.filter(WN);return 0==t.length?null:function(e){return qN(KN(e,t))}}function UT(n){return null!=n?YN(ZN(n)):null}function XN(n){if(!n)return null;const t=n.filter(WN);return 0==t.length?null:function(e){return IN(KN(e,t).map(GN)).pipe((0,en.U)(qN))}}function zT(n){return null!=n?XN(ZN(n)):null}function QN(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function JN(n){return n._rawValidators}function eO(n){return n._rawAsyncValidators}function jT(n){return n?Array.isArray(n)?n:[n]:[]}function dS(n,t){return Array.isArray(n)?n.includes(t):n===t}function tO(n,t){const e=jT(t);return jT(n).forEach(o=>{dS(e,o)||e.push(o)}),e}function nO(n,t){return jT(t).filter(e=>!dS(n,e))}class rO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=UT(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=zT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ol extends rO{get formDirective(){return null}get path(){return null}}class Sf extends rO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class iO{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let oO=(()=>{class n extends iO{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Sf,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})();const Ox="VALID",pS="INVALID",zb="PENDING",Px="DISABLED";function WT(n){return(fS(n)?n.validators:n)||null}function GT(n,t){return(fS(t)?t.asyncValidators:n)||null}function fS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class uO{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ox}get invalid(){return this.status===pS}get pending(){return this.status==zb}get disabled(){return this.status===Px}get enabled(){return this.status!==Px}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(tO(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(tO(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(nO(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(nO(t,this._rawAsyncValidators))}hasValidator(t){return dS(this._rawValidators,t)}hasAsyncValidator(t){return dS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=zb,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Px,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Ox,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ox||this.status===zb)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Px:Ox}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=zb,this._hasOwnPendingAsyncValidator=!0;const e=GN(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,o)=>r&&r._find(o),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Px:this.errors?pS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zb)?zb:this._anyControlsHaveStatus(pS)?pS:Ox}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){fS(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function oL(n){return Array.isArray(n)?UT(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function sL(n){return Array.isArray(n)?zT(n):n||null}(this._rawAsyncValidators)}}class qT extends uO{constructor(t,e,r){super(WT(e),GT(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function lO(n,t,e){n._forEachChild((r,o)=>{if(void 0===e[o])throw new c.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(r=>{(function aO(n,t,e){const r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{const o=this.controls[r];o&&o.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,o)=>{r.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,r,o)=>((r.enabled||this.disabled)&&(e[o]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((o,p)=>{r=e(r,o,p)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const jb=new c.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>mS}),mS="always";function Rx(n,t,e=mS){KT(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function uL(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&cO(n,t)})}(n,t),function dL(n,t){const e=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function cL(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&cO(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function lL(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function _S(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),vS(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function yS(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function KT(n,t){const e=JN(n);null!==t.validator?n.setValidators(QN(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=eO(n);null!==t.asyncValidator?n.setAsyncValidators(QN(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();yS(t._rawValidators,o),yS(t._rawAsyncValidators,o)}function vS(n,t){let e=!1;if(null!==n){if(null!==t.validator){const o=JN(n);if(Array.isArray(o)&&o.length>0){const p=o.filter(g=>g!==t.validator);p.length!==o.length&&(e=!0,n.setValidators(p))}}if(null!==t.asyncValidator){const o=eO(n);if(Array.isArray(o)&&o.length>0){const p=o.filter(g=>g!==t.asyncValidator);p.length!==o.length&&(e=!0,n.setAsyncValidators(p))}}}const r=()=>{};return yS(t._rawValidators,r),yS(t._rawAsyncValidators,r),e}function cO(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dO(n,t){KT(n,t)}function hO(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const gL={provide:ol,useExisting:(0,c.Gpc)(()=>bS)},kx=(()=>Promise.resolve())();let bS=(()=>{class n extends ol{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new qT({},UT(e),zT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){kx.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),Rx(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){kx.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){kx.then(()=>{const r=this._findContainer(e.path),o=new qT({});dO(o,e),r.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){kx.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){kx.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,hO(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Ma,10),c.Y36(jm,10),c.Y36(jb,8))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&c.NdJ("submit",function(p){return r.onSubmit(p)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([gL]),c.qOj]}),n})();function pO(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function fO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const mO=class extends uO{constructor(t=null,e,r){super(WT(e),GT(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fS(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=fO(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){pO(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){pO(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){fO(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},vL={provide:Sf,useExisting:(0,c.Gpc)(()=>QT)},yO=(()=>Promise.resolve())();let QT=(()=>{class n extends Sf{constructor(e,r,o,p,g,b){super(),this._changeDetectorRef=g,this.callSetDisabledState=b,this.control=new mO,this._registered=!1,this.name="",this.update=new c.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function XT(n,t){if(!t)return null;let e,r,o;return Array.isArray(t),t.forEach(p=>{p.constructor===uS?e=p:function fL(n){return Object.getPrototypeOf(n.constructor)===J_}(p)?r=p:o=p}),o||r||e||null}(0,p)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function YT(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){yO.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,o=0!==r&&(0,c.VuI)(r);yO.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function gS(n,t){return[...t.path,n]}(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(ol,9),c.Y36(Ma,10),c.Y36(jm,10),c.Y36(Ud,10),c.Y36(c.sBO,8),c.Y36(jb,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([vL]),c.qOj,c.TTD]}),n})(),bO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const DL={provide:ol,useExisting:(0,c.Gpc)(()=>wS)};let wS=(()=>{class n extends ol{constructor(e,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return Rx(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){_S(e.control||null,e,!1),function mL(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,hO(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,o=this.form.get(e.path);r!==o&&(_S(r||null,e),(n=>n instanceof mO)(o)&&(Rx(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);dO(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function hL(n,t){return vS(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){KT(this.form,this),this._oldForm&&vS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(Ma,10),c.Y36(jm,10),c.Y36(jb,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&c.NdJ("submit",function(p){return r.onSubmit(p)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([DL]),c.qOj,c.TTD]}),n})(),$L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[bO]}),n})(),GL=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:jb,useValue:e.callSetDisabledState??mS}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[$L]}),n})();class qL{constructor(t){this._box=t,this._destroyed=new $t.x,this._resizeSubject=new $t.x,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Zr.y(e=>{const r=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),r.unsubscribe(),this._elementObservables.delete(t)}}).pipe(Or(e=>e.some(r=>r.target===t)),XC({bufferSize:1,refCount:!0}),ql(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let KL=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=(0,c.f3M)(c.R0b)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,r){const o=r?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new qL(o)),this._observers.get(o).observe(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZL=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ZL]}),n})();const XL=["notch"],QL=["matFormFieldNotchedOutline",""],JL=["*"],eB=["textField"],tB=["iconPrefixContainer"],nB=["textPrefixContainer"];function rB(n,t){1&n&&c._UZ(0,"span",19)}function iB(n,t){if(1&n&&(c.TgZ(0,"label",17),c.Hsn(1,1),c.YNc(2,rB,1,0,"span",18),c.qZA()),2&n){const e=c.oxw(2);c.Q6J("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),c.uIk("for",e._control.id)("aria-owns",e._control.id),c.xp6(2),c.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required)}}function oB(n,t){if(1&n&&c.YNc(0,iB,3,6,"label",16),2&n){const e=c.oxw();c.Q6J("ngIf",e._hasFloatingLabel())}}function sB(n,t){1&n&&c._UZ(0,"div",20)}function aB(n,t){}function lB(n,t){if(1&n&&c.YNc(0,aB,0,0,"ng-template",22),2&n){c.oxw(2);const e=c.MAs(1);c.Q6J("ngTemplateOutlet",e)}}function uB(n,t){if(1&n&&(c.TgZ(0,"div",21),c.YNc(1,lB,1,1,"ng-template",9),c.qZA()),2&n){const e=c.oxw();c.Q6J("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),c.xp6(1),c.Q6J("ngIf",!e._forceDisplayInfixLabel())}}function cB(n,t){1&n&&(c.TgZ(0,"div",23,24),c.Hsn(2,2),c.qZA())}function dB(n,t){1&n&&(c.TgZ(0,"div",25,26),c.Hsn(2,3),c.qZA())}function hB(n,t){}function pB(n,t){if(1&n&&c.YNc(0,hB,0,0,"ng-template",22),2&n){c.oxw();const e=c.MAs(1);c.Q6J("ngTemplateOutlet",e)}}function fB(n,t){1&n&&(c.TgZ(0,"div",27),c.Hsn(1,4),c.qZA())}function mB(n,t){1&n&&(c.TgZ(0,"div",28),c.Hsn(1,5),c.qZA())}function gB(n,t){1&n&&c._UZ(0,"div",29)}function _B(n,t){if(1&n&&(c.TgZ(0,"div",30),c.Hsn(1,6),c.qZA()),2&n){const e=c.oxw();c.Q6J("@transitionMessages",e._subscriptAnimationState)}}function yB(n,t){if(1&n&&(c.TgZ(0,"mat-hint",34),c._uU(1),c.qZA()),2&n){const e=c.oxw(2);c.Q6J("id",e._hintLabelId),c.xp6(1),c.Oqu(e.hintLabel)}}function vB(n,t){if(1&n&&(c.TgZ(0,"div",31),c.YNc(1,yB,2,2,"mat-hint",32),c.Hsn(2,7),c._UZ(3,"div",33),c.Hsn(4,8),c.qZA()),2&n){const e=c.oxw();c.Q6J("@transitionMessages",e._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",e.hintLabel)}}const bB=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],wB=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let iA=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})();const xB=new c.OlP("MatError");let EB=0,BO=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+EB++}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,r){2&e&&(c.Ikx("id",r.id),c.uIk("align",null),c.ekj("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}}),n})();const CB=new c.OlP("MatPrefix"),VO=new c.OlP("MatSuffix");let SB=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[c._Bn([{provide:VO,useExisting:n}])]}),n})();const UO=new c.OlP("FloatingLabelParent");let zO=(()=>{class n{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,c.f3M)(KL),this._ngZone=(0,c.f3M)(c.R0b),this._parent=(0,c.f3M)(UO),this._resizeSubscription=new yo.w0}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function DB(n){if(null!==n.offsetParent)return n.scrollWidth;const e=n.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const r=e.scrollWidth;return e.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,r){2&e&&c.ekj("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}}),n})();const jO="mdc-line-ripple--active",xS="mdc-line-ripple--deactivating";let HO=(()=>{class n{constructor(e,r){this._elementRef=e,this._handleTransitionEnd=o=>{const p=this._elementRef.nativeElement.classList,g=p.contains(xS);"opacity"===o.propertyName&&g&&p.remove(jO,xS)},r.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(xS),e.add(jO)}deactivate(){this._elementRef.nativeElement.classList.add(xS)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),$O=(()=>{class n{constructor(e,r){this._elementRef=e,this._ngZone=r,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(e,r){if(1&e&&c.Gf(XL,5),2&e){let o;c.iGM(o=c.CRH())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,r){2&e&&c.ekj("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:QL,ngContentSelectors:JL,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(e,r){1&e&&(c.F$t(),c._UZ(0,"div",0),c.TgZ(1,"div",1,2),c.Hsn(3),c.qZA(),c._UZ(4,"div",3))},encapsulation:2,changeDetection:0}),n})();const IB={transitionMessages:av("transitionMessages",[Sd("enter",Du({opacity:1,transform:"translateY(0%)"})),jp("void => enter",[Du({opacity:0,transform:"translateY(-5px)"}),Cd("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let WO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=c.lG2({type:n}),n})();const GO=new c.OlP("MatFormField"),TB=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let qO=0,NB=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Ui(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,r,o,p,g,b,I,z){this._elementRef=e,this._changeDetectorRef=r,this._ngZone=o,this._dir=p,this._platform=g,this._defaults=b,this._animationMode=I,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+qO++,this._hintLabelId="mat-mdc-hint-"+qO++,this._subscriptAnimationState="",this._destroyed=new $t.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,b&&(b.appearance&&(this.appearance=b.appearance),this._hideRequiredMarker=!!b?.hideRequiredMarker,b.color&&(this.color=b.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(ql(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,Ub.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ql(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(ql(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(p=>"start"===p.align):null,o=this._hintChildren?this._hintChildren.find(p=>"end"===p.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),o&&e.push(o.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,p=r?.getBoundingClientRect().width??0,g=o?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${p+g}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(c.R0b),c.Y36(N_),c.Y36(Ci),c.Y36(TB,8),c.Y36(c.QbO,8),c.Y36(Q))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,o){if(1&e&&(c.Suo(o,iA,5),c.Suo(o,iA,7),c.Suo(o,WO,5),c.Suo(o,CB,5),c.Suo(o,VO,5),c.Suo(o,xB,5),c.Suo(o,BO,5)),2&e){let p;c.iGM(p=c.CRH())&&(r._labelChildNonStatic=p.first),c.iGM(p=c.CRH())&&(r._labelChildStatic=p.first),c.iGM(p=c.CRH())&&(r._formFieldControl=p.first),c.iGM(p=c.CRH())&&(r._prefixChildren=p),c.iGM(p=c.CRH())&&(r._suffixChildren=p),c.iGM(p=c.CRH())&&(r._errorChildren=p),c.iGM(p=c.CRH())&&(r._hintChildren=p)}},viewQuery:function(e,r){if(1&e&&(c.Gf(eB,5),c.Gf(tB,5),c.Gf(nB,5),c.Gf(zO,5),c.Gf($O,5),c.Gf(HO,5)),2&e){let o;c.iGM(o=c.CRH())&&(r._textField=o.first),c.iGM(o=c.CRH())&&(r._iconPrefixContainer=o.first),c.iGM(o=c.CRH())&&(r._textPrefixContainer=o.first),c.iGM(o=c.CRH())&&(r._floatingLabel=o.first),c.iGM(o=c.CRH())&&(r._notchedOutline=o.first),c.iGM(o=c.CRH())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,r){2&e&&c.ekj("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:GO,useExisting:n},{provide:UO,useExisting:n}])],ngContentSelectors:wB,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,r){1&e&&(c.F$t(bB),c.YNc(0,oB,1,1,"ng-template",null,0,c.W1O),c.TgZ(2,"div",1,2),c.NdJ("click",function(p){return r._control.onContainerClick(p)}),c.YNc(4,sB,1,0,"div",3),c.TgZ(5,"div",4),c.YNc(6,uB,2,2,"div",5),c.YNc(7,cB,3,0,"div",6),c.YNc(8,dB,3,0,"div",7),c.TgZ(9,"div",8),c.YNc(10,pB,1,1,"ng-template",9),c.Hsn(11),c.qZA(),c.YNc(12,fB,2,0,"div",10),c.YNc(13,mB,2,0,"div",11),c.qZA(),c.YNc(14,gB,1,0,"div",12),c.qZA(),c.TgZ(15,"div",13),c.YNc(16,_B,2,1,"div",14),c.YNc(17,vB,5,2,"div",15),c.qZA()),2&e&&(c.xp6(2),c.ekj("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),c.xp6(2),c.Q6J("ngIf",!r._hasOutline()&&!r._control.disabled),c.xp6(2),c.Q6J("ngIf",r._hasOutline()),c.xp6(1),c.Q6J("ngIf",r._hasIconPrefix),c.xp6(1),c.Q6J("ngIf",r._hasTextPrefix),c.xp6(2),c.Q6J("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),c.xp6(2),c.Q6J("ngIf",r._hasTextSuffix),c.xp6(1),c.Q6J("ngIf",r._hasIconSuffix),c.xp6(1),c.Q6J("ngIf",!r._hasOutline()),c.xp6(1),c.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),c.Q6J("ngSwitch",r._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},dependencies:[Gr,hl,Hi,Ql,BO,zO,$O,HO],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[IB.transitionMessages]},changeDetection:0}),n})(),YO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[ls,Ti,YL,ls]}),n})();const OB=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),PB=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let RB=0;const kB=D1(class{constructor(n,t,e,r){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=r,this.stateChanges=new $t.x}});let FB=(()=>{class n extends kB{get disabled(){return this._disabled}set disabled(e){this._disabled=Ui(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(J2.required)??!1}set required(e){this._required=Ui(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&ia().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Ui(e)}constructor(e,r,o,p,g,b,I,z,G,te){super(b,p,g,o),this._elementRef=e,this._platform=r,this._autofillMonitor=z,this._formField=te,this._uid="mat-input-"+RB++,this.focused=!1,this.stateChanges=new $t.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ye=>ia().has(ye)),this._iOSKeyupListener=ye=>{const ge=ye.target;!ge.value&&0===ge.selectionStart&&0===ge.selectionEnd&&(ge.setSelectionRange(1,1),ge.setSelectionRange(0,0))};const he=this._elementRef.nativeElement,_e=he.nodeName.toLowerCase();this._inputValueAccessor=I||he,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&G.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===_e,this._isTextarea="textarea"===_e,this._isInFormField=!!te,this._isNativeSelect&&(this.controlType=he.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=e,e?r.setAttribute("placeholder",e):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){PB.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,r=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(Ci),c.Y36(Sf,10),c.Y36(bS,8),c.Y36(wS,8),c.Y36(UD),c.Y36(OB,10),c.Y36(G2),c.Y36(c.R0b),c.Y36(GO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,r){1&e&&c.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&e&&(c.Ikx("id",r.id)("disabled",r.disabled)("required",r.required),c.uIk("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),c.ekj("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:WO,useExisting:n}]),c.qOj,c.TTD]}),n})(),LB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[ls,YO,YO,q2,ls]}),n})();const BB=new c.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS"),UB=cb(class{constructor(n){this._elementRef=n}},"primary");let XO=(()=>{class n extends UB{constructor(e,r,o,p,g){super(e),this._ngZone=r,this._changeDetectorRef=o,this._animationMode=p,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new c.vpe,this._mode="determinate",this._transitionendHandler=b=>{0===this.animationEnd.observers.length||!b.target||!b.target.classList.contains("mdc-linear-progress__primary-bar")||("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation="NoopAnimations"===p,g&&(g.color&&(this.color=this.defaultColor=g.color),this.mode=g.mode||this.mode)}get value(){return this._value}set value(e){this._value=QO(Yh(e)),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=QO(Yh(e)),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${"buffer"===this.mode?this.bufferValue:100}%`}_isIndeterminate(){return"indeterminate"===this.mode||"query"===this.mode}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(c.sBO),c.Y36(c.QbO,8),c.Y36(BB,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:8,hostBindings:function(e,r){2&e&&(c.uIk("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),c.ekj("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[c.qOj],decls:7,vars:4,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"div",1)(2,"div",2),c.qZA(),c.TgZ(3,"div",3),c._UZ(4,"span",4),c.qZA(),c.TgZ(5,"div",5),c._UZ(6,"span",4),c.qZA()),2&e&&(c.xp6(1),c.Udp("flex-basis",r._getBufferBarFlexBasis()),c.xp6(2),c.Udp("transform",r._getPrimaryBarTransform()))},styles:["@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half))}100%{transform:translateX(var(--mdc-linear-progress-primary-full))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\");mask-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\");animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color)}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-color:rgba(0,0,0,0);background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill=''/%3E%3C/svg%3E\")}}.mdc-linear-progress{height:max(var(--mdc-linear-progress-track-height), var(--mdc-linear-progress-active-indicator-height))}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress{height:4px}}.mdc-linear-progress__bar{height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{height:var(--mdc-linear-progress-track-height)}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height)}}.mdc-linear-progress__buffer{border-radius:var(--mdc-linear-progress-track-shape)}.mat-mdc-progress-bar{--mdc-linear-progress-active-indicator-height:4px;--mdc-linear-progress-track-height:4px;--mdc-linear-progress-track-shape:0}.mat-mdc-progress-bar{display:block;--mdc-linear-progress-primary-half: 83.67142%;--mdc-linear-progress-primary-full: 200.611057%;--mdc-linear-progress-secondary-quarter: 37.651913%;--mdc-linear-progress-secondary-half: 84.386165%;--mdc-linear-progress-secondary-full: 160.277782%;--mdc-linear-progress-primary-half-neg: -83.67142%;--mdc-linear-progress-primary-full-neg: -200.611057%;--mdc-linear-progress-secondary-quarter-neg: -37.651913%;--mdc-linear-progress-secondary-half-neg: -84.386165%;--mdc-linear-progress-secondary-full-neg: -160.277782%}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}"],encapsulation:2,changeDetection:0}),n})();function QO(n,t=0,e=100){return Math.max(t,Math.min(e,n))}let zB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[ls]}),n})();function oA(n,t,e){for(let r in t)if(t.hasOwnProperty(r)){const o=t[r];o?n.setProperty(r,o,e?.has(r)?"important":""):n.removeProperty(r)}return n}function Hb(n,t){const e=t?"":"none";oA(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function JO(n,t,e){oA(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function ES(n,t){return t&&"none"!=t?n+" "+t:n}function eP(n){const t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function sA(n,t){return n.getPropertyValue(t).split(",").map(r=>r.trim())}function aA(n){const t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function lA(n,t,e){const{top:r,bottom:o,left:p,right:g}=n;return e>=r&&e<=o&&t>=p&&t<=g}function Fx(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function tP(n,t,e,r){const{top:o,right:p,bottom:g,left:b,width:I,height:z}=n,G=I*t,te=z*t;return r>o-te&&r<g+te&&e>b-G&&e<p+G}class nP{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:aA(e)})})}handleScroll(t){const e=Is(t),r=this.positions.get(e);if(!r)return null;const o=r.scrollPosition;let p,g;if(e===this._document){const z=this.getViewportScrollPosition();p=z.top,g=z.left}else p=e.scrollTop,g=e.scrollLeft;const b=o.top-p,I=o.left-g;return this.positions.forEach((z,G)=>{z.clientRect&&e!==G&&e.contains(G)&&Fx(z.clientRect,b,I)}),o.top=p,o.left=g,{top:b,left:I}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function rP(n){const t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();t.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return"canvas"===r?sP(n,t):("input"===r||"select"===r||"textarea"===r)&&oP(n,t),iP("canvas",n,t,sP),iP("input, textarea, select",n,t,oP),t}function iP(n,t,e,r){const o=t.querySelectorAll(n);if(o.length){const p=e.querySelectorAll(n);for(let g=0;g<o.length;g++)r(o[g],p[g])}}let $B=0;function oP(n,t){"file"!==t.type&&(t.value=n.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${$B++}`)}function sP(n,t){const e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}const aP=rl({passive:!0}),CS=rl({passive:!1}),uA=new Set(["position"]);class GB{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Ui(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(r=>Hb(r,e)))}constructor(t,e,r,o,p,g){this._config=e,this._document=r,this._ngZone=o,this._viewportRuler=p,this._dragDropRegistry=g,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new $t.x,this._pointerMoveSubscription=yo.w0.EMPTY,this._pointerUpSubscription=yo.w0.EMPTY,this._scrollSubscription=yo.w0.EMPTY,this._resizeSubscription=yo.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new $t.x,this.started=new $t.x,this.released=new $t.x,this.ended=new $t.x,this.entered=new $t.x,this.exited=new $t.x,this.dropped=new $t.x,this.moved=this._moveEvents,this._pointerDown=b=>{if(this.beforeStarted.next(),this._handles.length){const I=this._getTargetHandle(b);I&&!this._disabledHandles.has(I)&&!this.disabled&&this._initializeDragSequence(I,b)}else this.disabled||this._initializeDragSequence(this._rootElement,b)},this._pointerMove=b=>{const I=this._getPointerPositionOnPage(b);if(!this._hasStartedDragging){if(Math.abs(I.x-this._pickupPositionOnPage.x)+Math.abs(I.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const _e=Date.now()>=this._dragStartTime+this._getDragStartDelay(b),ye=this._dropContainer;if(!_e)return void this._endDragSequence(b);(!ye||!ye.isDragging()&&!ye.isReceiving())&&(b.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(b)))}return}b.preventDefault();const z=this._getConstrainedPointerPosition(I);if(this._hasMoved=!0,this._lastKnownPointerPosition=I,this._updatePointerDirectionDelta(z),this._dropContainer)this._updateActiveDropContainer(z,I);else{const G=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,te=this._activeTransform;te.x=z.x-G.x+this._passiveTransform.x,te.y=z.y-G.y+this._passiveTransform.y,this._applyRootElementTransform(te.x,te.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:z,event:b,distance:this._getDragDistance(z),delta:this._pointerDirectionDelta})})},this._pointerUp=b=>{this._endDragSequence(b)},this._nativeDragStart=b=>{if(this._handles.length){const I=this._getTargetHandle(b);I&&!this._disabledHandles.has(I)&&!this.disabled&&b.preventDefault()}else this.disabled||b.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new nP(r),g.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(r=>Ki(r)),this._handles.forEach(r=>Hb(r,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&e.add(r)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Ki(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,CS),e.addEventListener("touchstart",this._pointerDown,aP),e.addEventListener("dragstart",this._nativeDragStart,CS)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Ki(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Hb(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Hb(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Lx(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const r=this._rootElement,o=r.parentNode,p=this._placeholder=this._createPlaceholderElement(),g=this._anchor=this._anchor||this._document.createComment(""),b=this._getShadowRoot();o.insertBefore(g,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),JO(r,!1,uA),this._document.body.appendChild(o.replaceChild(p,r)),this._getPreviewInsertionPoint(o,b).appendChild(this._preview),this.started.next({source:this,event:t}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const r=this.isDragging(),o=Lx(e),p=!o&&0!==e.button,g=this._rootElement,b=Is(e),I=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),z=o?Rw(e):Bd(e);if(b&&b.draggable&&"mousedown"===e.type&&e.preventDefault(),r||p||I||z)return;if(this._handles.length){const he=g.style;this._rootElementTapHighlight=he.webkitTapHighlightColor||"",he.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(he=>this._updateOnScroll(he)),this._boundaryElement&&(this._boundaryRect=aA(this._boundaryElement));const G=this._previewTemplate;this._pickupPositionInElement=G&&G.template&&!G.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,t,e);const te=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:te.x,y:te.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){JO(this._rootElement,!0,uA),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,r=e.getItemIndex(this),o=this._getPointerPositionOnPage(t),p=this._getDragDistance(o),g=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:p,dropPoint:o,event:t}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:g,distance:p,dropPoint:o,event:t}),e.drop(this,r,this._initialIndex,this._initialContainer,g,p,o,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:r,y:o}){let p=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!p&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(p=this._initialContainer),p&&p!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=p,this._dropContainer.enter(this,t,e,p===this._initialContainer&&p.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:p,currentIndex:p.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,o),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,r=t?t.template:null;let o;if(r&&t){const p=t.matchSize?this._initialClientRect:null,g=t.viewContainer.createEmbeddedView(r,t.context);g.detectChanges(),o=uP(g,this._document),this._previewRef=g,t.matchSize?cP(o,p):o.style.transform=SS(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=rP(this._rootElement),cP(o,this._initialClientRect),this._initialTransform&&(o.style.transform=this._initialTransform);return oA(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},uA),Hb(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(p=>o.classList.add(p)):o.classList.add(e)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function HB(n){const t=getComputedStyle(n),e=sA(t,"transition-property"),r=e.find(b=>"transform"===b||"all"===b);if(!r)return 0;const o=e.indexOf(r),p=sA(t,"transition-duration"),g=sA(t,"transition-delay");return eP(p[o])+eP(g[o])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const o=g=>{(!g||Is(g)===this._preview&&"transform"===g.propertyName)&&(this._preview?.removeEventListener("transitionend",o),r(),clearTimeout(p))},p=setTimeout(o,1.5*e);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let r;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),r=uP(this._placeholderRef,this._document)):r=rP(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(t,e,r){const o=e===this._rootElement?null:e,p=o?o.getBoundingClientRect():t,g=Lx(r)?r.targetTouches[0]:r,b=this._getViewportScrollPosition();return{x:p.left-t.left+(g.pageX-p.left-b.left),y:p.top-t.top+(g.pageY-p.top-b.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),r=Lx(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,o=r.pageX-e.left,p=r.pageY-e.top;if(this._ownerSVGElement){const g=this._ownerSVGElement.getScreenCTM();if(g){const b=this._ownerSVGElement.createSVGPoint();return b.x=o,b.y=p,b.matrixTransform(g.inverse())}}return{x:o,y:p}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:o}=this.constrainPosition?this.constrainPosition(t,this,this._initialClientRect,this._pickupPositionInElement):t;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:p,y:g}=this._pickupPositionInElement,b=this._boundaryRect,{width:I,height:z}=this._getPreviewRect(),G=b.top+g,te=b.bottom-(z-g);r=lP(r,b.left+p,b.right-(I-p)),o=lP(o,G,te)}return{x:r,y:o}}_updatePointerDirectionDelta(t){const{x:e,y:r}=t,o=this._pointerDirectionDelta,p=this._pointerPositionAtLastDirectionChange,g=Math.abs(e-p.x),b=Math.abs(r-p.y);return g>this._config.pointerDirectionChangeThreshold&&(o.x=e>p.x?1:-1,p.x=e),b>this._config.pointerDirectionChangeThreshold&&(o.y=r>p.y?1:-1,p.y=r),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Hb(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,CS),t.removeEventListener("touchstart",this._pointerDown,aP),t.removeEventListener("dragstart",this._nativeDragStart,CS)}_applyRootElementTransform(t,e){const r=SS(t,e),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=ES(r,this._initialTransform)}_applyPreviewTransform(t,e){const r=this._previewTemplate?.template?void 0:this._initialTransform,o=SS(t,e);this._preview.style.transform=ES(o,r)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(0===o.width&&0===o.height||0===r.width&&0===r.height)return;const p=o.left-r.left,g=r.right-o.right,b=o.top-r.top,I=r.bottom-o.bottom;o.width>r.width?(p>0&&(t+=p),g>0&&(t-=g)):t=0,o.height>r.height?(b>0&&(e+=b),I>0&&(e-=I)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Lx(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const r=Is(t);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Fx(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Nc(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const r=this._previewContainer||"global";if("parent"===r)return t;if("global"===r){const o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return Ki(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function SS(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function lP(n,t,e){return Math.max(t,Math.min(e,n))}function Lx(n){return"t"===n.type[0]}function uP(n,t){const e=n.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const r=t.createElement("div");return e.forEach(o=>r.appendChild(o)),r}function cP(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=SS(t.left,t.top)}function dP(n,t,e){const r=Bx(t,n.length-1),o=Bx(e,n.length-1);if(r===o)return;const p=n[r],g=o<r?-1:1;for(let b=r;b!==o;b+=g)n[b]=n[b+g];n[o]=p}function Bx(n,t){return Math.max(0,Math.min(t,n))}class qB{constructor(t,e){this._element=t,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,r,o){const p=this._itemPositions,g=this._getItemIndexFromPointerPosition(t,e,r,o);if(-1===g&&p.length>0)return null;const b="horizontal"===this.orientation,I=p.findIndex(Re=>Re.drag===t),z=p[g],te=z.clientRect,he=I>g?1:-1,_e=this._getItemOffsetPx(p[I].clientRect,te,he),ye=this._getSiblingOffsetPx(I,p,he),ge=p.slice();return dP(p,I,g),p.forEach((Re,Je)=>{if(ge[Je]===Re)return;const et=Re.drag===t,Xe=et?_e:ye,Qe=et?t.getPlaceholderElement():Re.drag.getRootElement();Re.offset+=Xe,b?(Qe.style.transform=ES(`translate3d(${Math.round(Re.offset)}px, 0, 0)`,Re.initialTransform),Fx(Re.clientRect,0,Xe)):(Qe.style.transform=ES(`translate3d(0, ${Math.round(Re.offset)}px, 0)`,Re.initialTransform),Fx(Re.clientRect,Xe,0))}),this._previousSwap.overlaps=lA(te,e,r),this._previousSwap.drag=z.drag,this._previousSwap.delta=b?o.x:o.y,{previousIndex:I,currentIndex:g}}enter(t,e,r,o){const p=null==o||o<0?this._getItemIndexFromPointerPosition(t,e,r):o,g=this._activeDraggables,b=g.indexOf(t),I=t.getPlaceholderElement();let z=g[p];if(z===t&&(z=g[p+1]),!z&&(null==p||-1===p||p<g.length-1)&&this._shouldEnterAsFirstChild(e,r)&&(z=g[0]),b>-1&&g.splice(b,1),z&&!this._dragDropRegistry.isDragging(z)){const G=z.getRootElement();G.parentElement.insertBefore(I,G),g.splice(p,0,t)}else Ki(this._element).appendChild(I),g.push(t);I.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables.forEach(t=>{const e=t.getRootElement();if(e){const r=this._itemPositions.find(o=>o.drag===t)?.initialTransform;e.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:r})=>{Fx(r,t,e)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const t="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const r=e.getVisibleElement();return{drag:e,offset:0,initialTransform:r.style.transform||"",clientRect:aA(r)}}).sort((e,r)=>t?e.clientRect.left-r.clientRect.left:e.clientRect.top-r.clientRect.top)}_getItemOffsetPx(t,e,r){const o="horizontal"===this.orientation;let p=o?e.left-t.left:e.top-t.top;return-1===r&&(p+=o?e.width-t.width:e.height-t.height),p}_getSiblingOffsetPx(t,e,r){const o="horizontal"===this.orientation,p=e[t].clientRect,g=e[t+-1*r];let b=p[o?"width":"height"]*r;if(g){const I=o?"left":"top",z=o?"right":"bottom";-1===r?b-=g.clientRect[I]-p[z]:b+=p[I]-g.clientRect[z]}return b}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,o="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const g=r[r.length-1].clientRect;return o?t>=g.right:e>=g.bottom}{const g=r[0].clientRect;return o?t<=g.left:e<=g.top}}_getItemIndexFromPointerPosition(t,e,r,o){const p="horizontal"===this.orientation,g=this._itemPositions.findIndex(({drag:b,clientRect:I})=>b!==t&&((!o||b!==this._previousSwap.drag||!this._previousSwap.overlaps||(p?o.x:o.y)!==this._previousSwap.delta)&&(p?e>=Math.floor(I.left)&&e<Math.floor(I.right):r>=Math.floor(I.top)&&r<Math.floor(I.bottom))));return-1!==g&&this._sortPredicate(g,t)?g:-1}}class KB{constructor(t,e,r,o,p){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=p,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new $t.x,this.entered=new $t.x,this.exited=new $t.x,this.dropped=new $t.x,this.sorted=new $t.x,this.receivingStarted=new $t.x,this.receivingStopped=new $t.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=yo.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new $t.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function jB(n=0,t=I_.z){return n<0&&(n=0),uN(n,n,t)}(0,aN).pipe(ql(this._stopScrollTimers)).subscribe(()=>{const g=this._scrollNode,b=this.autoScrollStep;1===this._verticalScrollDirection?g.scrollBy(0,-b):2===this._verticalScrollDirection&&g.scrollBy(0,b),1===this._horizontalScrollDirection?g.scrollBy(-b,0):2===this._horizontalScrollDirection&&g.scrollBy(b,0)})},this.element=Ki(t),this._document=r,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new nP(r),this._sortStrategy=new qB(this.element,e),this._sortStrategy.withSortPredicate((g,b)=>this.sortPredicate(g,b,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,r,o){this._draggingStarted(),null==o&&this.sortingDisabled&&(o=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,r,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,r,o,p,g,b,I={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:r,container:this,previousContainer:o,isPointerOverContainer:p,distance:g,dropPoint:b,event:I})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>-1===t.indexOf(o))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._sortStrategy.direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._sortStrategy.orientation=t,this}withScrollableParents(t){const e=Ki(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,r,o){if(this.sortingDisabled||!this._clientRect||!tP(this._clientRect,.05,e,r))return;const p=this._sortStrategy.sort(t,e,r,o);p&&this.sorted.next({previousIndex:p.previousIndex,currentIndex:p.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let r,o=0,p=0;if(this._parentPositions.positions.forEach((g,b)=>{b===this._document||!g.clientRect||r||tP(g.clientRect,.05,t,e)&&([o,p]=function ZB(n,t,e,r){const o=fP(t,r),p=mP(t,e);let g=0,b=0;if(o){const I=n.scrollTop;1===o?I>0&&(g=1):n.scrollHeight-I>n.clientHeight&&(g=2)}if(p){const I=n.scrollLeft;1===p?I>0&&(b=1):n.scrollWidth-I>n.clientWidth&&(b=2)}return[g,b]}(b,g.clientRect,t,e),(o||p)&&(r=b))}),!o&&!p){const{width:g,height:b}=this._viewportRuler.getViewportSize(),I={width:g,height:b,top:0,right:g,bottom:b,left:0};o=fP(I,e),p=mP(I,t),r=window}r&&(o!==this._verticalScrollDirection||p!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=p,this._scrollNode=r,(o||p)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=Ki(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=Ki(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_reset(){this._isDragging=!1;const t=Ki(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return null!=this._clientRect&&lA(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,r){return this._siblings.find(o=>o._canReceive(t,e,r))}_canReceive(t,e,r){if(!this._clientRect||!lA(this._clientRect,e,r)||!this.enterPredicate(t,this))return!1;const o=this._getShadowRoot().elementFromPoint(e,r);if(!o)return!1;const p=Ki(this.element);return o===p||p.contains(o)}_startReceiving(t,e){const r=this._activeSiblings;!r.has(t)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(r.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=Nc(Ki(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function fP(n,t){const{top:e,bottom:r,height:o}=n,p=.05*o;return t>=e-p&&t<=e+p?1:t>=r-p&&t<=r+p?2:0}function mP(n,t){const{left:e,right:r,width:o}=n,p=.05*o;return t>=e-p&&t<=e+p?1:t>=r-p&&t<=r+p?2:0}const DS=rl({passive:!1,capture:!0});let YB=(()=>{class n{constructor(e,r){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new $t.x,this.pointerUp=new $t.x,this.scroll=new $t.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=r}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,DS)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,DS)}startDragging(e,r){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const o=r.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:p=>this.pointerUp.next(p),options:!0}).set("scroll",{handler:p=>this.scroll.next(p),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:DS}),o||this._globalListeners.set("mousemove",{handler:p=>this.pointerMove.next(p),options:DS}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((p,g)=>{this._document.addEventListener(g,p.handler,p.options)})})}}stopDragging(e){const r=this._activeDragInstances.indexOf(e);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const r=[this.scroll];return e&&e!==this._document&&r.push(new Zr.y(o=>this._ngZone.runOutsideAngular(()=>{const g=b=>{this._activeDragInstances.length&&o.next(b)};return e.addEventListener("scroll",g,!0),()=>{e.removeEventListener("scroll",g,!0)}}))),(0,Ub.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,r)=>{this._document.removeEventListener(r,e.handler,e.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(c.R0b),c.LFG(Q))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XB={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let gP=(()=>{class n{constructor(e,r,o,p){this._document=e,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=p}createDrag(e,r=XB){return new GB(e,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new KB(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Q),c.LFG(c.R0b),c.LFG(FT),c.LFG(YB))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cA=new c.OlP("CDK_DRAG_PARENT"),dA=new c.OlP("CdkDragHandle"),_P=new c.OlP("CdkDragPlaceholder"),yP=new c.OlP("CdkDragPreview"),vP=new c.OlP("CDK_DRAG_CONFIG"),bP=new c.OlP("CdkDropList");let wP=(()=>{class n{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=Ui(e),this._dragRef.disabled=this._disabled}constructor(e,r,o,p,g,b,I,z,G,te,he){this.element=e,this.dropContainer=r,this._ngZone=p,this._viewContainerRef=g,this._dir=I,this._changeDetectorRef=G,this._selfHandle=te,this._parentDrag=he,this._destroyed=new $t.x,this.started=new c.vpe,this.released=new c.vpe,this.ended=new c.vpe,this.entered=new c.vpe,this.exited=new c.vpe,this.dropped=new c.vpe,this.moved=new Zr.y(_e=>{const ye=this._dragRef.moved.pipe((0,en.U)(ge=>({source:this,pointerPosition:ge.pointerPosition,event:ge.event,delta:ge.delta,distance:ge.distance}))).subscribe(_e);return()=>{ye.unsubscribe()}}),this._dragRef=z.createDrag(e,{dragStartThreshold:b&&null!=b.dragStartThreshold?b.dragStartThreshold:5,pointerDirectionChangeThreshold:b&&null!=b.pointerDirectionChangeThreshold?b.pointerDirectionChangeThreshold:5,zIndex:b?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),b&&this._assignDefaults(b),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Yr.q)(1),ql(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const r=e.rootElementSelector,o=e.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=n._dragInstances.indexOf(this);e>-1&&n._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let r=e;this.rootElementSelector&&(r=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):Ki(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const r=this._dir,o=this.dragStartDelay,p=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,g=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof o&&o?o:Yh(o),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(p).withPreviewTemplate(g).withPreviewContainer(this.previewContainer||"global"),r&&e.withDirection(r.value)}}),e.beforeStarted.pipe((0,Yr.q)(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){e.withParent(n._dragInstances.find(o=>o.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(e){e.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),e.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),e.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),e.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(e){const{lockAxis:r,dragStartDelay:o,constrainPosition:p,previewClass:g,boundaryElement:b,draggingDisabled:I,rootElementSelector:z,previewContainer:G}=e;this.disabled=I??!1,this.dragStartDelay=o||0,r&&(this.lockAxis=r),p&&(this.constrainPosition=p),g&&(this.previewClass=g),b&&(this.boundaryElement=b),z&&(this.rootElementSelector=z),G&&(this.previewContainer=G)}_setupHandlesListener(){this._handles.changes.pipe(hu(this._handles),(0,Pr.b)(e=>{const r=e.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),(0,jr.w)(e=>(0,Ub.T)(...e.map(r=>r._stateChanges.pipe(hu(r))))),ql(this._destroyed)).subscribe(e=>{const r=this._dragRef,o=e.element.nativeElement;e.disabled?r.disableHandle(o):r.enableHandle(o)})}}return n._dragInstances=[],n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(bP,12),c.Y36(Q),c.Y36(c.R0b),c.Y36(c.s_b),c.Y36(vP,8),c.Y36(N_,8),c.Y36(gP),c.Y36(c.sBO),c.Y36(dA,10),c.Y36(cA,12))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(e,r,o){if(1&e&&(c.Suo(o,yP,5),c.Suo(o,_P,5),c.Suo(o,dA,5)),2&e){let p;c.iGM(p=c.CRH())&&(r._previewTemplate=p.first),c.iGM(p=c.CRH())&&(r._placeholderTemplate=p.first),c.iGM(p=c.CRH())&&(r._handles=p)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,r){2&e&&c.ekj("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[c._Bn([{provide:cA,useExisting:n}]),c.TTD]}),n})();const hA=new c.OlP("CdkDropListGroup");let rV=0,xP=(()=>{class n{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=Ui(e)}constructor(e,r,o,p,g,b,I){this.element=e,this._changeDetectorRef=o,this._scrollDispatcher=p,this._dir=g,this._group=b,this._destroyed=new $t.x,this.connectedTo=[],this.id="cdk-drop-list-"+rV++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new c.vpe,this.entered=new c.vpe,this.exited=new c.vpe,this.sorted=new c.vpe,this._unsortedItems=new Set,this._dropListRef=r.createDropList(e),this._dropListRef.data=this,I&&this._assignDefaults(I),this._dropListRef.enterPredicate=(z,G)=>this.enterPredicate(z.data,G.data),this._dropListRef.sortPredicate=(z,G,te)=>this.sortPredicate(z,G.data,te.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),b&&b._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,r)=>e._dragRef.getVisibleElement().compareDocumentPosition(r._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=n._dropLists.indexOf(this);e>-1&&n._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(hu(this._dir.value),ql(this._destroyed)).subscribe(r=>e.withDirection(r)),e.beforeStarted.subscribe(()=>{const r=Im(this.connectedTo).map(o=>"string"==typeof o?n._dropLists.find(g=>g.id===o):o);if(this._group&&this._group._items.forEach(o=>{-1===r.indexOf(o)&&r.push(o)}),!this._scrollableParentsResolved){const o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(p=>p.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=Ui(this.sortingDisabled),e.autoScrollDisabled=Ui(this.autoScrollDisabled),e.autoScrollStep=Yh(this.autoScrollStep,2),e.connectedTo(r.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(r=>{this.entered.emit({container:this,item:r.item.data,currentIndex:r.currentIndex})}),e.exited.subscribe(r=>{this.exited.emit({container:this,item:r.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(r=>{this.sorted.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:r.item.data})}),e.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,item:r.item.data,isPointerOverContainer:r.isPointerOverContainer,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),(0,Ub.T)(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){const{lockAxis:r,draggingDisabled:o,sortingDisabled:p,listAutoScrollDisabled:g,listOrientation:b}=e;this.disabled=o??!1,this.sortingDisabled=p??!1,this.autoScrollDisabled=g??!1,this.orientation=b||"vertical",r&&(this.lockAxis=r)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}}return n._dropLists=[],n.\u0275fac=function(e){return new(e||n)(c.Y36(c.SBq),c.Y36(gP),c.Y36(c.sBO),c.Y36(dN),c.Y36(N_,8),c.Y36(hA,12),c.Y36(vP,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,r){2&e&&(c.uIk("id",r.id),c.ekj("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[c._Bn([{provide:hA,useValue:void 0},{provide:bP,useExisting:n}])]}),n})();function iV(n,t){if(1&n&&(c.TgZ(0,"div",7),c._uU(1),c.qZA()),2&n){const e=t.$implicit;c.xp6(1),c.Oqu(e)}}let oV=(()=>{class n{constructor(){this.answerSubmitted=new c.vpe}submit(){this.question&&this.answerSubmitted.emit(this.question.answerOptions)}drop(e){this.question&&dP(this.question.answerOptions,e.previousIndex,e.currentIndex)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-sorting-question-view"]],inputs:{question:"question"},outputs:{answerSubmitted:"answerSubmitted"},decls:16,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],["appearance","outlined",1,"example-card"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","example-box","cdkDrag","",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["cdkDrag","",1,"example-box"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-header")(5,"mat-card-title-group")(6,"mat-card-title"),c._uU(7),c.qZA(),c.TgZ(8,"mat-card-subtitle"),c._uU(9,"Hint: drag and drop to sort"),c.qZA()()(),c.TgZ(10,"mat-card-content")(11,"div",4),c.NdJ("cdkDropListDropped",function(p){return r.drop(p)}),c.YNc(12,iV,2,1,"div",5),c.qZA()(),c.TgZ(13,"mat-card-footer")(14,"button",6),c.NdJ("click",function(){return r.submit()}),c._uU(15,"Submit"),c.qZA()()()()()()),2&e&&(c.xp6(7),c.Oqu(null==r.question?null:r.question.question),c.xp6(5),c.Q6J("ngForOf",null==r.question?null:r.question.answerOptions))},dependencies:[Fs,P_,Rm,k_,R_,hb,Om,Pm,xP,wP,Bm],styles:[".example-list[_ngcontent-%COMP%]{width:500px;max-width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:white;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}mat-card-footer[_ngcontent-%COMP%]{margin:1rem}mat-card-header[_ngcontent-%COMP%]{padding-bottom:1rem}"]}),n})();const sV=["container"],aV=["button"];let lV=(()=>{class n{constructor(){this.count=0,this.answerSubmitted=new c.vpe}changePos(){if(this.count++,this.change(),this.question){const e=Number(this.question.answerOptions[0]);this.count>=e&&this.answerSubmitted.emit(this.question.answerOptions)}}change(){console.log(this.button,this.container);const e=this.button?.nativeElement,{width:r,height:o}=this.container?.nativeElement.getBoundingClientRect(),{width:p,height:g}=e?.getBoundingClientRect(),b=Math.floor(Math.random()*(r-p))+1,I=Math.floor(Math.random()*(o-g))+1;e.style.left=b+"px",e.style.top=I+"px"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-moving-button-click"]],viewQuery:function(e,r){if(1&e&&(c.Gf(sV,5),c.Gf(aV,5,c.SBq)),2&e){let o;c.iGM(o=c.CRH())&&(r.container=o.first),c.iGM(o=c.CRH())&&(r.button=o.first)}},inputs:{question:"question"},outputs:{answerSubmitted:"answerSubmitted"},decls:13,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],["appearance","outlined"],["container",""],["mat-button","","color","primary",3,"click"],["button",""]],template:function(e,r){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-header")(5,"mat-card-title-group")(6,"mat-card-title"),c._uU(7),c.qZA()()(),c.TgZ(8,"mat-card-content",null,4)(10,"button",5,6),c.NdJ("click",function(){return r.changePos()}),c._uU(12,"Count"),c.qZA()()()()()()),2&e&&(c.xp6(7),c.Oqu(null==r.question?null:r.question.question))},dependencies:[P_,Rm,R_,Om,Pm,Bm],styles:["button[_ngcontent-%COMP%]{position:absolute;display:block}mat-card-content[_ngcontent-%COMP%]{height:60vh}mat-card-header[_ngcontent-%COMP%]{padding-bottom:1rem}"]}),n})();class uV{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,r=!0,o){this._multiple=t,this._emitChanges=r,this.compareWith=o,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new $t.x,e&&e.length&&(t?e.forEach(p=>this._markSelected(p)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(r=>this._markSelected(r));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(r=>this._unmarkSelected(r));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,r=new Set(t);t.forEach(p=>this._markSelected(p)),e.filter(p=>!r.has(p)).forEach(p=>this._unmarkSelected(p));const o=this._hasQueuedChanges();return this._emitChangeEvent(),o}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(t){if(this.compareWith){for(let e of this._selection)if(this.compareWith(t,e))return e;return t}return t}}const cV=["button"],dV=["*"],EP=new c.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),CP=new c.OlP("MatButtonToggleGroup"),hV={provide:Ud,useExisting:(0,c.Gpc)(()=>IP),multi:!0};let SP=0;class DP{constructor(t,e){this.source=t,this.value=e}}let IP=(()=>{class n{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(e){this._vertical=Ui(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(r=>r.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=Ui(e),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=Ui(e),this._markButtonsForCheck()}constructor(e,r){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+SP++,this.valueChange=new c.vpe,this.change=new c.vpe,this.appearance=r&&r.appearance?r.appearance:"standard"}ngOnInit(){this._selectionModel=new uV(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(e){const r=new DP(e,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(e,r,o=!1,p=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?r?this._selectionModel.select(e):this._selectionModel.deselect(e):p=!0,p?Promise.resolve().then(()=>this._updateModelValue(e,o)):this._updateModelValue(e,o)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(r=>null!=e.value&&r===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(r=>this._selectValue(r))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const r=this._buttonToggles.find(o=>null!=o.value&&o.value===e);r&&(r.checked=!0,this._selectionModel.select(r))}_updateModelValue(e,r){r&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(c.sBO),c.Y36(EP,8))},n.\u0275dir=c.lG2({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,r,o){if(1&e&&c.Suo(o,TP,5),2&e){let p;c.iGM(p=c.CRH())&&(r._buttonToggles=p)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,r){2&e&&(c.uIk("aria-disabled",r.disabled),c.ekj("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard","standard"===r.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[c._Bn([hV,{provide:CP,useExisting:n}])]}),n})();const pV=jE(class{});let TP=(()=>{class n extends pV{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const r=Ui(e);r!==this._checked&&(this._checked=r,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=Ui(e)}constructor(e,r,o,p,g,b){super(),this._changeDetectorRef=r,this._elementRef=o,this._focusMonitor=p,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new c.vpe;const I=Number(g);this.tabIndex=I||0===I?I:null,this.buttonToggleGroup=e,this.appearance=b&&b.appearance?b.appearance:"standard"}ngOnInit(){const e=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+SP++,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector()||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new DP(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(CP,8),c.Y36(c.sBO),c.Y36(c.SBq),c.Y36(RE),c.$8M("tabindex"),c.Y36(EP,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(e,r){if(1&e&&c.Gf(cV,5),2&e){let o;c.iGM(o=c.CRH())&&(r._buttonElement=o.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,r){1&e&&c.NdJ("focus",function(){return r.focus()}),2&e&&(c.uIk("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),c.ekj("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-appearance-standard","standard"===r.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[c.qOj],ngContentSelectors:dV,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,r){if(1&e&&(c.F$t(),c.TgZ(0,"button",0,1),c.NdJ("click",function(){return r._onButtonClick()}),c.TgZ(2,"span",2),c.Hsn(3),c.qZA()(),c._UZ(4,"span",3)(5,"span",4)),2&e){const o=c.MAs(1);c.Q6J("id",r.buttonId)("disabled",r.disabled||null),c.uIk("tabindex",r.disabled?-1:r.tabIndex)("aria-pressed",r.checked)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),c.xp6(5),c.Q6J("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[jw],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0}),n})(),fV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[ls,Hw,ls]}),n})();function mV(n,t){if(1&n&&(c.TgZ(0,"mat-button-toggle",7),c._uU(1),c.qZA()),2&n){const e=t.$implicit;c.s9C("value",e),c.xp6(1),c.Oqu(e)}}let gV=(()=>{class n{constructor(){this.answerSubmitted=new c.vpe}submit(){this.question&&this.selectedAnswer&&this.answerSubmitted.emit([this.selectedAnswer])}selectionChanged(e){this.selectedAnswer=e.value}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-single-answer"]],inputs:{question:"question"},outputs:{answerSubmitted:"answerSubmitted"},decls:14,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],["appearance","outlined",1,"example-card"],[3,"vertical","change"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"value"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-header")(5,"mat-card-title-group")(6,"mat-card-title"),c._uU(7),c.qZA()()(),c.TgZ(8,"mat-card-content")(9,"mat-button-toggle-group",4),c.NdJ("change",function(p){return r.selectionChanged(p)}),c.YNc(10,mV,2,2,"mat-button-toggle",5),c.qZA()(),c.TgZ(11,"mat-card-footer")(12,"button",6),c.NdJ("click",function(){return r.submit()}),c._uU(13,"Submit"),c.qZA()()()()()()),2&e&&(c.xp6(7),c.Oqu(null==r.question?null:r.question.question),c.xp6(2),c.Q6J("vertical",!0),c.xp6(1),c.Q6J("ngForOf",null==r.question?null:r.question.answerOptions))},dependencies:[Fs,P_,Rm,k_,R_,Om,Pm,Bm,IP,TP],styles:["mat-card-footer[_ngcontent-%COMP%]{margin:1rem}mat-card-header[_ngcontent-%COMP%]{padding-bottom:1rem}mat-button-toggle-group[_ngcontent-%COMP%]{width:70vw}"]}),n})();var F=S(2113),AP=function(n,t){return(AP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])})(n,t)};function gt(n,t){function e(){this.constructor=n}AP(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var Vx=function(){return(Vx=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function Zn(n,t,e,r){return new(e||(e=Promise))(function(o,p){function g(z){try{I(r.next(z))}catch(G){p(G)}}function b(z){try{I(r.throw(z))}catch(G){p(G)}}function I(z){z.done?o(z.value):new e(function(G){G(z.value)}).then(g,b)}I((r=r.apply(n,t||[])).next())})}function qn(n,t){var e,r,o,p,g={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return p={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function b(I){return function(z){return function(G){if(e)throw new TypeError("Generator is already executing.");for(;g;)try{if(e=1,r&&(o=2&G[0]?r.return:G[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,G[1])).done)return o;switch(r=0,o&&(G=[2&G[0],o.value]),G[0]){case 0:case 1:o=G;break;case 4:return g.label++,{value:G[1],done:!1};case 5:g.label++,r=G[1],G=[0];continue;case 7:G=g.ops.pop(),g.trys.pop();continue;default:if(!(o=(o=g.trys).length>0&&o[o.length-1])&&(6===G[0]||2===G[0])){g=0;continue}if(3===G[0]&&(!o||G[1]>o[0]&&G[1]<o[3])){g.label=G[1];break}if(6===G[0]&&g.label<o[1]){g.label=o[1],o=G;break}if(o&&g.label<o[2]){g.label=o[2],g.ops.push(G);break}o[2]&&g.ops.pop(),g.trys.pop();continue}G=t.call(n,g)}catch(te){G=[6,te],r=0}finally{e=o=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([I,z])}}}var _V=F.ViN.get("EPSILON");function Os(){return _V}var yV=0;function MP(){return yV++}var IS={};function TS(n){return void 0===n&&(n=""),n in IS||(IS[n]=0),IS[n]+=1,n+IS[n].toString()}var AS={float32:{},int32:{}},vV="float32";function In(n,t){return void 0===t&&(t=vV),null==AS[t][n]&&(AS[t][n]=(0,F.iD$)(n,t),(0,F.CnY)(AS[t][n])),AS[t][n]}var ny=function(n){function t(e){var r=n.call(this,e)||this;return Object.setPrototypeOf(r,t.prototype),r}return gt(t,n),t}(Error),np=function(n){function t(e){var r=n.call(this,e)||this;return Object.setPrototypeOf(r,t.prototype),r}return gt(t,n),t}(Error),Ve=function(n){function t(e){var r=n.call(this,e)||this;return Object.setPrototypeOf(r,t.prototype),r}return gt(t,n),t}(Error),Dn=function(n){function t(e){var r=n.call(this,e)||this;return Object.setPrototypeOf(r,t.prototype),r}return gt(t,n),t}(Error),bV=function(n){function t(e){var r=n.call(this,e)||this;return Object.setPrototypeOf(r,t.prototype),r}return gt(t,n),t}(Error);function ry(n,t){if(Array.isArray(n)){for(var e=[],r=0;r<t;r++)e=e.concat(n);return e}return(e=new Array(t)).fill(n),e}function Df(n,t){if(!n)throw new bV(t)}function NP(n,t){for(var e=0,r=0,o=n;r<o.length;r++)o[r]===t&&e++;return e}function Zl(n){return 1===n.length?n[0]:n}function Di(n){return Array.isArray(n)?n:[n]}function pA(n){var t=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function OP(n){return n.length<=1||-1===n.indexOf("_")?n:n.replace(/[_]+(\w|$)/g,function(t,e){return e.toUpperCase()})}!function(n){gt(function t(e){var r=n.call(this,e)||this;return Object.setPrototypeOf(r,t.prototype),r},n)}(Error);var Fc={};function fA(n){return null==n?null:{className:n.getClassName(),config:n.getConfig()}}function Ux(n,t,e,r){if(void 0===t&&(t={}),void 0===e&&(e={}),void 0===r&&(r="object"),"string"==typeof n){var p=void 0;if(n in e)p=e[n];else if(n in Fc)p=Fc[n];else if(null==(p=t[n]))throw new Ve("Unknown "+r+": "+n+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return p}var g=n;if(null==g.className||null==g.config)throw new Ve(r+": Improper config format: "+JSON.stringify(g)+".\n'className' and 'config' must set.");var Ot,an,cn,b=g.className,I=void 0,z=void 0;if(b in e?(I=(Ot=e.get(b))[0],z=Ot[1]):b in Fc?(I=(an=Fc.className)[0],z=an[1]):b in t&&(I=(cn=t[b])[0],z=cn[1]),null==I)throw new Ve("Unknown "+r+": "+b+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(null!=z){for(var G={},te=0,he=Object.keys(Fc);te<he.length;te++)G[et=he[te]]=Fc[et];for(var _e=0,ye=Object.keys(e);_e<ye.length;_e++)G[et=ye[_e]]=e[et];g.config.customObjects=G;for(var ge=Vx({},Fc),Re=0,Je=Object.keys(e);Re<Je.length;Re++){var et=Je[Re];Fc[et]=e[et]}var Xe=z(I,g.config);return Fc=Vx({},ge),Xe}ge=Vx({},Fc);for(var Qe=0,_t=Object.keys(e);Qe<_t.length;Qe++)Fc[et=_t[Qe]]=e[et];return Xe=new I(g.config),Fc=Vx({},ge),Xe}function MS(n,t){return-1*function wV(n,t){return n<t?-1:n>t?1:0}(n,t)}function iy(n){if(null==n)return n;for(var t=[],e=0,r=n;e<r.length;e++){var o=r[e];-1===t.indexOf(o)&&t.push(o)}return t}function EV(n){if(null==n)throw new Ve("Invalid value in obj: "+JSON.stringify(n));for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function $b(n,t,e){if(null!=e&&n.indexOf(e)<0)throw new Ve(e+" is not a valid "+t+".  Valid values are "+n+" or null/undefined.")}function mA(n,t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1/0),Df(e>=0),Df(r>=e),Array.isArray(n)&&n.length>=e&&n.length<=r&&n.every(function(o){return typeof o===t})}function gA(n,t){return(0,F.lub)(function(){return(0,F._b3)((0,F.Smz)((0,F.NT4)(n,n),t,!0))})}var zx=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.getConfig=function(){return{}},t}(F.m7h.Serializable),PP=function(n){function t(e){var r=n.call(this)||this;return r.defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return gt(t,n),t.prototype.apply=function(e){var r=this;return(0,F.lub)(function(){var o=gA(e,r.axis),p=(0,F.iUl)(o,0,r.maxValue);return(0,F.dC7)(e,(0,F.hiC)(p,(0,F.IHx)(In(Os()),o)))})},t.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},t.className="MaxNorm",t}(zx);F.m7h.registerClass(PP);var RP=function(n){function t(e){var r=n.call(this)||this;return r.defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return gt(t,n),t.prototype.apply=function(e){var r=this;return(0,F.lub)(function(){return(0,F.hiC)(e,(0,F.IHx)(In(Os()),gA(e,r.axis)))})},t.prototype.getConfig=function(){return{axis:this.axis}},t.className="UnitNorm",t}(zx);F.m7h.registerClass(RP);var kP=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return(0,F.UYe)(e)},t.className="NonNeg",t}(zx);F.m7h.registerClass(kP);var FP=function(n){function t(e){var r=n.call(this)||this;return r.defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return gt(t,n),t.prototype.apply=function(e){var r=this;return(0,F.lub)(function(){var o=gA(e,r.axis),p=(0,F.IHx)((0,F.dC7)(In(r.rate),(0,F.iUl)(o,r.minValue,r.maxValue)),(0,F.dC7)(In(1-r.rate),o));return(0,F.dC7)(e,(0,F.hiC)(p,(0,F.IHx)(In(Os()),o)))})},t.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},t.className="MinMaxNorm",t}(zx);F.m7h.registerClass(FP);var LP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function di(n){return fA(n)}function BP(n,t){return void 0===t&&(t={}),Ux(n,F.m7h.SerializationMap.getMap().classNameMap,t,"constraint")}function cs(n){return null==n?null:"string"==typeof n?BP({className:n in LP?LP[n]:n,config:{}}):n instanceof zx?n:BP(n)}var TV=Object.freeze({maxNorm:function CV(n){return new PP(n)},unitNorm:function SV(n){return new RP(n)},nonNeg:function DV(){return new kP},minMaxNorm:function IV(n){return new FP(n)}}),Wb=new Map,AV=["channelsFirst","channelsLast"];function Yl(n){$b(AV,"DataFormat",n)}var MV=["valid","same","causal"];function Hm(n){$b(MV,"PaddingMode",n)}var NV=["max","avg"],jx=[];function Gb(n,t){jx.push(n);try{var e=t();return jx.pop(),e}catch(r){throw jx.pop(),r}}function UP(n){if(!jP(n))throw new Error("Not a valid tensor name: '"+n+"'");return function PV(){return 0===jx.length?"":jx.join("/")+"/"}()+n}function zP(n){if(!jP(n))throw new Error("Not a valid tensor name: '"+n+"'");Wb.has(n)||Wb.set(n,0);var t=Wb.get(n);if(Wb.set(n,Wb.get(n)+1),t>0){var e=n+"_"+t;return Wb.set(e,1),e}return n}var RV=new RegExp(/^[A-Za-z][-A-Za-z0-9\._\/]*$/);function jP(n){return!!n.match(RV)}function kV(n){return n===parseInt(n.toString(),10)}function If(n,t,e){null==t&&(t=0),null==e&&(e=n.length);for(var r=1,o=t;o<e;++o)r*=n[o];return r}function HP(n){return n=Array.isArray(n)?new Float32Array(n):n,(0,F.RRF)(n)}function qb(n){return(0,F.VV$)(HP(n)).dataSync()[0]}function $m(n){return(0,F.Fp7)(HP(n)).dataSync()[0]}function zd(n,t){if(t<n)throw new Ve("end ("+t+") < begin ("+n+") is forbidden.");for(var e=[],r=n;r<t;++r)e.push(r);return e}function NS(n,t){return n.asType(t)}function Hx(n,t){void 0===t&&(t=-1);var e=n.shape.slice();return t<0&&(t=e.length+t+1),e.splice(t,0,1),n.reshape(e)}function Wm(n,t,e){return(0,F.lub)(function(){switch(n.rank){case 1:return(0,F.jZU)(n,t,e);case 2:return(0,F.SmN)(n,[t,0],[e,n.shape[1]]);case 3:return(0,F.CnO)(n,[t,0,0],[e,n.shape[1],n.shape[2]]);case 4:return(0,F.p0P)(n,[t,0,0,0],[e,n.shape[1],n.shape[2],n.shape[3]]);default:throw new Ve("sliceAlongFirstAxis() received an unsupported tensor rank: "+n.rank)}})}function _A(n,t,e){return(0,F.lub)(function(){switch(n.rank){case 1:return(0,F.jZU)(n,t,e);case 2:return(0,F.SmN)(n,[0,t],[n.shape[0],e]);case 3:return(0,F.CnO)(n,[0,0,t],[n.shape[0],n.shape[1],e]);case 4:return(0,F.p0P)(n,[0,0,0,t],[n.shape[0],n.shape[1],n.shape[2],e]);default:throw new Ve("sliceAlongLastAxis() received an unsupported tensor rank: "+n.rank)}})}function OS(n,t,e,r){return(0,F.lub)(function(){switch(n.rank){case 1:return(0,F.jZU)(n,t,e);case 2:switch(r){case 1:return Wm(n,t,e);case 2:return _A(n,t,e);default:throw new Ve("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return Wm(n,t,e);case 2:return(0,F.CnO)(n,[0,t,0],[n.shape[0],e,n.shape[2]]);case 3:return _A(n,t,e);default:throw new Ve("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return Wm(n,t,e);case 2:return(0,F.p0P)(n,[0,t,0,0],[n.shape[0],e,n.shape[2],n.shape[3]]);case 3:return(0,F.p0P)(n,[0,0,t,0],[n.shape[0],n.shape[1],e,n.shape[3]]);case 4:return _A(n,t,e);default:throw new Ve("The axis is not within the rank of the tensor "+r)}default:throw new Ve("sliceAlongLastAxis() received an unsupported tensor rank: "+n.rank)}})}function $P(n,t){var e;return void 0===t&&(t=-1),t<0&&(t=0!==(e=n[0].rank)?e:0),t===n[0].rank&&(t=-1),(0,F.zoF)(n,t)}function yA(n,t){switch(n.rank){case 1:return(0,F.gME)([n,t]);case 2:return(0,F.Izb)([n,t],0);case 3:return(0,F.MNy)([n,t],0);case 4:return(0,F.ZaL)([n,t],0);default:throw new Ve("concatAlongFirstAxis() received an unsupported tensor rank: "+n.rank)}}function vA(n,t){if(Array.isArray(t)||(t=[t]),n.rank!==t.length)throw new Ve("The length of input n ("+t.length+") does not match the number of dimensions in input x ("+n.rank+")");return(0,F.Gg6)(n,t)}function WP(n,t,e,r,o){return void 0===t&&(t=0),void 0===e&&(e=1),(0,F.nGf)(n,t,e,r,o)}function Gm(n,t){if(n.rank<2||t.rank<2)throw new Dn("dot requires both inputs to be rank >= 2 but got x shape = "+n.shape+" and y shape = "+t.shape);if(t.rank>=3&&(r=n.shape.slice(-1)[0])!==(g=t.shape.slice(-2)[0]))throw new Dn("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+n.shape+" and  y shape = "+t.shape);if(2===n.rank&&2===t.rank)return(0,F.OI3)(n,t);var e=n.shape.slice(),r=e.pop();n=n.reshape([-1,r]);var o=t.shape.slice(),p=o.pop(),g=o.pop(),b=o.concat([p]),I=Array.from({length:t.rank},function(G,te){return 0===te?t.rank-2:te<=t.rank-2?te-1:te});t=t.transpose(I).reshape([g,-1]);var z=e.concat(b);return(0,F.OI3)(n,t).reshape(z)}function GP(n,t,e){return(0,F.lub)(function(){return t=Array.isArray(t)?(0,F.RRF)(t,"int32"):t.toInt(),(0,F.Iqj)(n,t,e)})}function $x(n){return(0,F.NT4)(n,n)}function Tf(n,t,e){return(0,F.lub)(function(){if(null==e&&(e="channelsLast"),Yl(e),1!==t.rank&&t.rank!==n.rank)throw new Ve("Unexpected bias dimensions: "+t.rank+"; expected it to be 1 or "+n.rank);var r,o=t.shape;if(5===n.rank)"channelsFirst"===e?r=n.add(t.reshape(1===o.length?[1,o[0],1,1,1]:[1,o[3],o[0],o[1],o[2]])):"channelsLast"===e&&(r=n.add(t.reshape(1===o.length?[1,1,1,1,o[0]]:[1].concat(o))));else if(4===n.rank)"channelsFirst"===e?r=n.add(t.reshape(1===o.length?[1,o[0],1,1]:[1,o[2],o[0],o[1]])):"channelsLast"===e&&(r=n.add(t.reshape(1===o.length?[1,1,1,o[0]]:[1].concat(o))));else if(3===n.rank)"channelsFirst"===e?r=n.add(t.reshape(1===o.length?[1,o[0],1]:[1,o[1],o[0]])):"channelsLast"===e&&(r=n.add(t.reshape(1===o.length?[1,1,o[0]]:[1].concat(o))));else{if(!(n.rank<3))throw new Ve("Unsupported input rank by biasAdd: "+n.rank);r=n.add(t)}return r})}function qP(n,t,e,r){return(0,F.lub)(function(){if(null!=e&&!F.D5U.arraysEqual(n.shape,e))throw new Dn("Non-default noise shape is not implemented yet: "+JSON.stringify(e));if(null!=r)throw new Dn("seed is not implemented for dropout yet.");var o=(0,F.Nbs)((0,F.IHx)((0,F.W76)(t),(0,F.LGj)(n.shape,0,1,"float32")));return o=(0,F.dC7)((0,F.hiC)(In(1),(0,F.luU)(In(1),t)),o),(0,F.dC7)(n,o)})}function bA(n,t,e){return void 0===e&&(e=!1),e?n():t()}var jV=["fanIn","fanOut","fanAvg"],$V=["normal","uniform"],jd=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.fromConfigUsesCustomObjects=function(){return!1},t.prototype.getConfig=function(){return{}},t}(F.m7h.Serializable),KP=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e,r){return(0,F.lls)(e,r)},t.className="Zeros",t}(jd);F.m7h.registerClass(KP);var wA=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e,r){return(0,F.iUs)(e,r)},t.className="Ones",t}(jd);F.m7h.registerClass(wA);var ZP=function(n){function t(e){var r=n.call(this)||this;if("object"!=typeof e)throw new Ve("Expected argument of type ConstantConfig but got "+e);if(void 0===e.value)throw new Ve("config must have value set but got "+e);return r.value=e.value,r}return gt(t,n),t.prototype.apply=function(e,r){var o=this;return(0,F.lub)(function(){return(0,F.dC7)((0,F.iD$)(o.value),(0,F.iUs)(e,r))})},t.prototype.getConfig=function(){return{value:this.value}},t.className="Constant",t}(jd);F.m7h.registerClass(ZP);var YP=function(n){function t(e){var r=n.call(this)||this;return r.DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return gt(t,n),t.prototype.apply=function(e,r){return(0,F.LGj)(e,this.minval,this.maxval,r)},t.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},t.className="RandomUniform",t}(jd);F.m7h.registerClass(YP);var XP=function(n){function t(e){var r=n.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return gt(t,n),t.prototype.apply=function(e,r){if("float32"!==(r=r||"float32")&&"int32"!==r)throw new Dn("randomNormal does not support dType "+r+".");return WP(e,this.mean,this.stddev,r,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="RandomNormal",t}(jd);F.m7h.registerClass(XP);var QP=function(n){function t(e){var r=n.call(this)||this;return r.DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return gt(t,n),t.prototype.apply=function(e,r){if("float32"!==(r=r||"float32")&&"int32"!==r)throw new Dn("truncatedNormal does not support dType "+r+".");return(0,F.Xu6)(e,this.mean,this.stddev,r,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="TruncatedNormal",t}(jd);F.m7h.registerClass(QP);var JP=function(n){function t(e){var r=n.call(this)||this;return r.gain=null!=e.gain?(0,F.iD$)(e.gain):In(1),r}return gt(t,n),t.prototype.apply=function(e,r){var o=this;return(0,F.lub)(function(){if(2!==e.length||e[0]!==e[1])throw new Ve("Identity matrix initializer can only be used for 2D square matrices.");return(0,F.dC7)(o.gain,(0,F.iyy)(e[0]))})},t.prototype.getConfig=function(){return{gain:this.gain.get()}},t.className="Identity",t}(jd);F.m7h.registerClass(JP);var rp=function(n){function t(e){var r=n.call(this)||this;if(e.scale<0)throw new Ve("scale must be a positive float. Got: "+e.scale);return r.scale=null==e.scale?1:e.scale,r.mode=e.mode,function HV(n){$b(jV,"FanMode",n)}(r.mode),r.distribution=e.distribution,function WV(n){$b($V,"Distribution",n)}(r.distribution),r.seed=e.seed,r}return gt(t,n),t.prototype.apply=function(e,r){var o=function GV(n,t){var e,r;if(void 0===t&&(t="channelsLast"),Yl(t),2===n.length)e=n[0],r=n[1];else if(-1!==[3,4,5].indexOf(n.length))if("channelsFirst"===t){var o=If(n,2);e=n[1]*o,r=n[0]*o}else"channelsLast"===t&&(o=If(n,0,n.length-2),e=n[n.length-2]*o,r=n[n.length-1]*o);else{var p=If(n);e=Math.sqrt(p),r=Math.sqrt(p)}return[e,r]}(e),p=o[0],g=o[1],b=this.scale;if(b/="fanIn"===this.mode?Math.max(1,p):"fanOut"===this.mode?Math.max(1,g):Math.max(1,(p+g)/2),"normal"===this.distribution){var I=Math.sqrt(b);if("float32"!==(r=r||"float32")&&"int32"!==r)throw new Dn(this.getClassName()+" does not support dType "+r+".");return(0,F.Xu6)(e,0,I,r,this.seed)}var z=Math.sqrt(3*b);return(0,F.LGj)(e,-z,z,r)},t.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},t.className="VarianceScaling",t}(jd);F.m7h.registerClass(rp);var xA=function(n){function t(e){return n.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})||this}return gt(t,n),t.prototype.getClassName=function(){return rp.className},t.className="GlorotUniform",t}(rp);F.m7h.registerClass(xA);var EA=function(n){function t(e){return n.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})||this}return gt(t,n),t.prototype.getClassName=function(){return rp.className},t.className="GlorotNormal",t}(rp);F.m7h.registerClass(EA);var CA=function(n){function t(e){return n.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return gt(t,n),t.prototype.getClassName=function(){return rp.className},t.className="HeNormal",t}(rp);F.m7h.registerClass(CA);var SA=function(n){function t(e){return n.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return gt(t,n),t.prototype.getClassName=function(){return rp.className},t.className="LeCunNormal",t}(rp);F.m7h.registerClass(SA);var eR=function(n){function t(e){var r=n.call(this)||this;if(r.DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new Dn("Random seed is not implemented for Orthogonal Initializer yet.");return r}return gt(t,n),t.prototype.apply=function(e,r){var o=this;return(0,F.lub)(function(){if(2!==e.length)throw new Dn("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+e[0]*e[1]+") elements: Slowness may result.");var p=WP(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),g=F.$r2.gramSchmidt(p);return e[0]>e[1]&&(g=g.transpose()),(0,F.dC7)(In(o.gain),g)})},t.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},t.className="Orthogonal",t}(jd);F.m7h.registerClass(eR);var tR={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",identity:"Identity",leCunNormal:"LeCunNormal",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function nR(n,t){return void 0===t&&(t={}),Ux(n,F.m7h.SerializationMap.getMap().classNameMap,t,"initializer")}function qr(n){return fA(n)}function Co(n){if("string"==typeof n){var t=n in tR?tR[n]:n;return"GlorotUniform"===t?new xA:"GlorotNormal"===t?new EA:"HeNormal"===t?new CA:"LeCunNormal"===t?new SA:nR({className:t,config:{}})}return n instanceof jd?n:nR(n)}var a3=Object.freeze({zeros:function qV(){return new KP},ones:function KV(){return new wA},constant:function ZV(n){return new ZP(n)},randomUniform:function YV(n){return new YP(n)},randomNormal:function XV(n){return new XP(n)},truncatedNormal:function QV(n){return new QP(n)},identity:function JV(n){return new JP(n)},varianceScaling:function e3(n){return new rp(n)},glorotUniform:function t3(n){return new xA(n)},glorotNormal:function n3(n){return new EA(n)},heNormal:function r3(n){return new CA(n)},leCunNormal:function o3(n){return new SA(n)},orthogonal:function s3(n){return new eR(n)}});function DA(n){return Array.isArray(n)&&Array.isArray(n[0])}function PS(n){return 0===n.length?[]:Array.isArray(n[0])?n:[n]}function Hr(n){var t;if(Array.isArray(n)){if(1!==n.length)throw new Ve("Expected Tensor length to be 1; got "+n.length);t=n[0]}else t=n;return t}function zi(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(1===n.length)return n[0];throw new Ve("Expected exactly 1 Shape; got "+n.length)}return n}function RS(n){for(var t=0,e=0,r=n;e<r.length;e++){var o=r[e];t+=0===o.shape.length?1:o.shape.reduce(function(p,g){return p*g})}return t}var rR="Variable",IA=function(){function n(t,e,r,o,p){void 0===e&&(e="float32"),void 0===r&&(r=rR),void 0===o&&(o=!0),void 0===p&&(p=null),this.dtype=e??"float32",this.shape=t.shape,this.id=MP(),this.originalName=UP(r=r??rR),this.name=zP(this.originalName),this.trainable=o,this.constraint=p,this.val=(0,F.VD$)(t,this.trainable,this.name,this.dtype)}return n.prototype.read=function(){return this.assertNotDisposed(),this.val},n.prototype.write=function(t){return this.assertNotDisposed(),function l3(n,t){if(n.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},n.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},n.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},n}();function TA(n){return n.map(function(t){return t.read()})}function kS(n){n.map(function(t){t[0].write(t[1])})}var Na=function(n){this.dtype=n.dtype,this.shape=n.shape,this.ndim=null!=n.shape?n.shape.length:n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}},Af=function(n,t,e,r,o,p,g){this.dtype=n,this.shape=t,this.sourceLayer=e,this.inputs=r,this.callArgs=o,this.outputTensorIndex=g,this.id=MP(),null!=p&&(this.originalName=UP(p),this.name=zP(this.originalName)),this.rank=t.length},u3=0,FS=function(){function n(t,e){this.callArgs=e,this.id=u3++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(var r=0,o=t.inboundLayers;r<o.length;r++){var p=o[r];p?.outboundNodes.push(this)}t.outboundLayer.inboundNodes.push(this)}return n.prototype.getConfig=function(){for(var t=[],e=0,r=this.inboundLayers;e<r.length;e++){var o=r[e];t.push(null!=o?o.name:null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},n}(),c3=0,Qr=function(n){function t(e){var r=n.call(this)||this;r._callHook=null,r._addedWeightNames=[],r._stateful=!1,r.id=c3++,r.activityRegularizer=null,r.inputSpec=null,r.supportsMasking=!1,r._trainableWeights=[],r._nonTrainableWeights=[],r._losses=[],r._updates=[],r._built=!1,r.inboundNodes=[],r.outboundNodes=[];var o=e.name;if(!o){var p=r.getClassName();o=pA(p)+"_"+TS(p)}if(r.name=o,r.trainable=null==e.trainable||e.trainable,r.updatable=null==e.updatable||e.updatable,null!=e.inputShape||null!=e.batchInputShape){var g=void 0;if(null!=e.batchInputShape)g=e.batchInputShape;else if(null!=e.inputShape){var b=null;null!=e.batchSize&&(b=e.batchSize),g=[b].concat(e.inputShape)}r.batchInputShape=g;var I=e.dtype;null==I&&(I=e.inputDType),null==I&&(I="float32"),r.dtype=I}return r.initialWeights=null!=e.weights?e.weights:null,r._refCount=null,r}return gt(t,n),t.nodeKey=function(e,r){return e.name+"_ib-"+r.toString()},t.prototype.getNodeAtIndex=function(e,r){if(0===this.inboundNodes.length)throw new np("The layer has never been called and thus has no defined "+r+".");if(this.inboundNodes.length<=e)throw new Ve("Asked to get "+r+" at node "+e+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[e]},t.prototype.getInputAt=function(e){return Zl(this.getNodeAtIndex(e,"input").inputTensors)},t.prototype.getOutputAt=function(e){return Zl(this.getNodeAtIndex(e,"output").outputTensors)},Object.defineProperty(t.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new ny("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new ny("Layer "+this.name+" is not connected, no input to return.");return Zl(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new ny("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new ny("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return Zl(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),t.prototype.calculateLosses=function(){return this.losses.map(function(e){return e()})},Object.defineProperty(t.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"built",{get:function(){return this._built},set:function(e){this._built=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this._trainableWeights:[]},set:function(e){this._trainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._nonTrainableWeights:this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),t.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},t.prototype.assertInputCompatibility=function(e){if(e=Di(e),null!=this.inputSpec&&0!==this.inputSpec.length){var r=Di(this.inputSpec);if(e.length!==r.length)throw new Ve("Layer "+this.name+" expects "+r.length+" inputs, but it received "+e.length+" input tensors. Input received: "+e);for(var o=0;o<e.length;o++){var p=e[o],g=r[o];if(null!=g){var b=p.rank;if(null!=g.ndim&&b!==g.ndim)throw new Ve("Input "+o+" is incompatible with layer "+this.name+": expected ndim="+g.ndim+", found ndim="+b);if(null!=g.maxNDim&&b>g.maxNDim)throw new Ve("Input "+o+" is incompatible with layer "+this.name+": expected max_ndim="+g.maxNDim+", found ndim="+b);if(null!=g.minNDim&&b<g.minNDim)throw new Ve("Input "+o+" is incompatible with layer "+this.name+": expected min_ndim="+g.minNDim+", found ndim="+b+".");if(null!=g.dtype&&p.dtype!==g.dtype)throw new Ve("Input "+o+" is incompatible with layer "+this.name+" : expected dtype="+g.dtype+", found dtype="+p.dtype+".");if(g.axes){var I=p.shape;for(var z in g.axes){var G=Number(z),te=g.axes[z];if(null!=te&&-1===[te,null].indexOf(G>=0?I[G]:I[I.length+G]))throw new Ve("Input "+o+" is incompatible with layer "+this.name+": expected axis "+G+" of input shape to have value "+te+" but got shape "+I+".")}}if(null!=g.shape)for(var _e=0;_e<g.shape.length;++_e){var ye=g.shape[_e],ge=p.shape[_e];if(null!=ye&&null!=ge&&ye!==ge)throw new Ve("Input "+o+" is incompatible with layer "+this.name+": expected shape="+g.shape+", found shape=${xShape}.")}}}}},t.prototype.call=function(e,r){return e},t.prototype.invokeCallHook=function(e,r){null!=this._callHook&&this._callHook(e,r)},t.prototype.setCallHook=function(e){this._callHook=e},t.prototype.clearCallHook=function(){this._callHook=null},t.prototype.apply=function(e,r){var o=this;r=r||{},this.assertNotDisposed();for(var p=Di(e),g=!0,b=0,I=p;b<I.length;b++)if(!(I[b]instanceof Af)){g=!1;break}for(var z=!0,G=0,te=p;G<te.length;G++)if(te[G]instanceof Af){z=!1;break}if(g===z)throw new Ve("Arguments to apply() must be all SymbolicTensors or all Tensors");return Gb(this.name,function(){if(!o.built){o.assertInputCompatibility(e);for(var he=[],_e=0,ye=Di(e);_e<ye.length;_e++)he.push(ye[_e].shape);o.build(Zl(he)),o.built=!0,o.initialWeights&&o.setWeights(o.initialWeights),null===o._refCount&&z&&(o._refCount=1)}if(o.assertInputCompatibility(e),z){for(var Re=[],Je=0,et=Di(Ot=o.call(e,r));Je<et.length;Je++){var Xe=et[Je];-1!==p.indexOf(Xe)&&(Xe=Xe.clone()),Re.push(Xe)}if(Ot=Zl(Re),null!=o.activityRegularizer)throw new Dn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return Ot}var Qe=function d3(n){for(var t=[],e=0,r=n=Di(n);e<r.length;e++)t.push(r[e].shape);return Zl(t)}(e),_t=o.computeOutputShape(Qe),Ot=void 0,an="float32";if(o.warnOnIncompatibleInputShape(Array.isArray(e)?Qe[0]:Qe),Ot=null!=_t&&_t.length>0&&Array.isArray(_t[0])?_t.map(function(cn,Jn){return new Af(an,cn,o,Di(e),r,o.name,Jn)}):new Af(an,_t,o,Di(e),r,o.name),o.addInboundNode(e,Ot,null,null,Qe,_t,r),o._refCount++,null!=o.activityRegularizer)throw new Dn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return Ot})},t.prototype.warnOnIncompatibleInputShape=function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(e)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var r=!1;this.batchInputShape.forEach(function(o,p){null!=o&&null!=e[p]&&e[p]!==o&&(r=!0)}),r&&console.warn("The shape of the input tensor ("+JSON.stringify(e)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(t.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new ny("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var e=[],r=0,o=this.inboundNodes;r<o.length;r++){var g=JSON.stringify(o[r].outputShapes);-1===e.indexOf(g)&&e.push(g)}if(1===e.length){var b=this.inboundNodes[0].outputShapes;return Array.isArray(b)&&Array.isArray(b[0])&&1===b.length?b[0]:b}throw new ny("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),t.prototype.countParams=function(){if(!this.built)throw new np("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return RS(this.weights)},t.prototype.build=function(e){this.built=!0},t.prototype.getWeights=function(e){return void 0===e&&(e=!1),TA(e?this.trainableWeights:this.weights)},t.prototype.setWeights=function(e){var r=this;(0,F.lub)(function(){var o=r.weights;if(o.length!==e.length)throw new Ve('You called setWeights(weights) on layer "'+r.name+'" with a weight list of length '+e.length+", but the layer was expecting "+o.length+" weights. Provided weights: "+e+"...");if(0!==o.length){for(var p=[],g=TA(o),b=0;b<g.length;++b){var I=g[b],z=o[b],G=e[b];if(!F.D5U.arraysEqual(I.shape,G.shape))throw new Ve("Layer weight shape "+I.shape+" not compatible with provided weight shape "+G.shape);p.push([z,G])}kS(p)}})},t.prototype.addWeight=function(e,r,o,p,g,b,I){if(-1!==this._addedWeightNames.indexOf(e))throw new Ve("Duplicate weight name "+e+" for layer "+this.name);this._addedWeightNames.push(e),null==o&&(o="float32");var z=new IA(p.apply(r,o),o,e,b,I);return null!=g&&this.addLoss(function(){return g.apply(z.read())}),null==b&&(b=!0),b?this._trainableWeights.push(z):this._nonTrainableWeights.push(z),z},t.prototype.addLoss=function(e){var r;null==e||Array.isArray(e)&&0===e.length||(e=Di(e),null!=this._losses&&(r=this.losses).push.apply(r,e))},t.prototype.computeOutputShape=function(e){return e},t.prototype.computeMask=function(e,r){var o=this;if(!this.supportsMasking){if(null!=r){if(!Array.isArray(r))throw new TypeError("Layer "+this.name+" does not support masking,but was passed an inputMask.");r.forEach(function(p){if(null!=p)throw new TypeError("Layer "+o.name+" does not support masking,but was passed an inputMask.")})}return null}return r},t.prototype.addInboundNode=function(e,r,o,p,g,b,I){void 0===I&&(I=null);var z=Di(e);r=Di(r),o=Di(o),p=Di(p),g=PS(g),b=PS(b);for(var G=[],te=[],he=[],_e=0,ye=z;_e<ye.length;_e++){var ge=ye[_e];G.push(ge.sourceLayer),te.push(ge.nodeIndex),he.push(ge.tensorIndex)}new FS({outboundLayer:this,inboundLayers:G,nodeIndices:te,tensorIndices:he,inputTensors:z,outputTensors:r,inputMasks:o,outputMasks:p,inputShapes:g,outputShapes:b},I);for(var Re=0;Re<r.length;Re++)r[Re].sourceLayer=this,r[Re].nodeIndex=this.inboundNodes.length-1,r[Re].tensorIndex=Re},t.prototype.getConfig=function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e},t.prototype.disposeWeights=function(){return this.weights.forEach(function(e){return e.dispose()}),this.weights.length},t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}},t}(F.m7h.Serializable);function iR(n,t,e){if((null==t||null!=e&&e>0)&&(t=n.sourceLayer,e=n.nodeIndex),0===t.inboundNodes.length)return[n];var r=t.inboundNodes[e];if(0===r.inboundLayers.length)return r.inputTensors;for(var o=[],p=0;p<r.inboundLayers.length;p++)for(var g=0,b=iR(r.inputTensors[p],r.inboundLayers[p],r.nodeIndices[p]);g<b.length;g++){var I=b[g];-1===o.indexOf(I)&&o.push(I)}return o}var oR,Kb=function(n){function t(e){var r=n.call(this,{dtype:e.dtype,name:null!=e.name?e.name:TS("input").toString()})||this;if(null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Ve("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var o=e.batchInputShape;if(null==o){if(null==e.inputShape)throw new Ve("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");o=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Ve("Cannot specify batchSize if batchInputShape isspecified when creating an InputLayer.");var p=e.dtype||"float32";r.batchInputShape=o,r.dtype=p,r.inputSpec=[{shape:o}];var g=new Af(r.dtype,r.batchInputShape,r,[],{},r.name);return g.nodeIndex=0,g.tensorIndex=0,new FS({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[g],outputTensors:[g],inputMasks:[null],outputMasks:[null],inputShapes:[o],outputShapes:[o]}),r}return gt(t,n),t.prototype.apply=function(e,r){throw new Ve("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},t.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},t.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},t.className="InputLayer",t}(Qr);function sR(n){if(null==n.batchShape&&null==n.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=n.batchShape&&null!=n.shape)throw new Ve("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=n.batchShape;null!=n.shape&&null==t&&(t=[null].concat(n.shape));var e=n.dtype;return null==e&&(e="float32"),new Kb({batchInputShape:t,name:n.name,dtype:e,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}function oy(n){return Zn(this,void 0,void 0,function(){var t,e,r,o,p,g,b,I;return qn(this,function(z){switch(z.label){case 0:if(null==n)return[2];for(o in t=[],e=[],r=[],n)"number"!=typeof(p=n[o])&&(t.push((g=p).data()),e.push(o),r.push(g));return[4,Promise.all(t)];case 1:for(b=z.sent(),I=0;I<b.length;++I)n[e[I]]=b[I][0];return(0,F.B90)(r),[2]}})})}function aR(n){if(null!=n)for(var t in n){var e=n[t];"number"!=typeof e&&e.dispose()}}F.m7h.registerClass(Kb),function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"}(oR||(oR={}));var Zb=function(){function n(){this.validationData=null}return n.prototype.setParams=function(t){this.params=t},n.prototype.onEpochBegin=function(t,e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){return[2]})})},n.prototype.onEpochEnd=function(t,e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){return[2]})})},n.prototype.onBatchBegin=function(t,e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){return[2]})})},n.prototype.onBatchEnd=function(t,e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){return[2]})})},n.prototype.onTrainBegin=function(t){return Zn(this,void 0,void 0,function(){return qn(this,function(e){return[2]})})},n.prototype.onTrainEnd=function(t){return Zn(this,void 0,void 0,function(){return qn(this,function(e){return[2]})})},n.prototype.setModel=function(t){},n}(),lR=function(){function n(t,e){void 0===e&&(e=10),null==t&&(t=[]),this.callbacks=t,this.queueLength=e}return n.prototype.append=function(t){this.callbacks.push(t)},n.prototype.setParams=function(t){for(var e=0,r=this.callbacks;e<r.length;e++)r[e].setParams(t)},n.prototype.setModel=function(t){for(var e=0,r=this.callbacks;e<r.length;e++)r[e].setModel(t)},n.prototype.onEpochBegin=function(t,e){return Zn(this,void 0,void 0,function(){var r,o;return qn(this,function(p){switch(p.label){case 0:null==e&&(e={}),r=0,o=this.callbacks,p.label=1;case 1:return r<o.length?[4,o[r].onEpochBegin(t,e)]:[3,4];case 2:p.sent(),p.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},n.prototype.onEpochEnd=function(t,e){return Zn(this,void 0,void 0,function(){var r,o;return qn(this,function(p){switch(p.label){case 0:null==e&&(e={}),r=0,o=this.callbacks,p.label=1;case 1:return r<o.length?[4,o[r].onEpochEnd(t,e)]:[3,4];case 2:p.sent(),p.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},n.prototype.onBatchBegin=function(t,e){return Zn(this,void 0,void 0,function(){var r,o;return qn(this,function(p){switch(p.label){case 0:null==e&&(e={}),r=0,o=this.callbacks,p.label=1;case 1:return r<o.length?[4,o[r].onBatchBegin(t,e)]:[3,4];case 2:p.sent(),p.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},n.prototype.onBatchEnd=function(t,e){return Zn(this,void 0,void 0,function(){var r,o;return qn(this,function(p){switch(p.label){case 0:return null==e&&(e={}),[4,oy(e)];case 1:p.sent(),r=0,o=this.callbacks,p.label=2;case 2:return r<o.length?[4,o[r].onBatchEnd(t,e)]:[3,5];case 3:p.sent(),p.label=4;case 4:return r++,[3,2];case 5:return[2]}})})},n.prototype.onTrainBegin=function(t){return Zn(this,void 0,void 0,function(){var e,r;return qn(this,function(o){switch(o.label){case 0:null==t&&(t={}),e=0,r=this.callbacks,o.label=1;case 1:return e<r.length?[4,r[e].onTrainBegin(t)]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},n.prototype.onTrainEnd=function(t){return Zn(this,void 0,void 0,function(){var e,r;return qn(this,function(o){switch(o.label){case 0:null==t&&(t={}),e=0,r=this.callbacks,o.label=1;case 1:return e<r.length?[4,r[e].onTrainEnd(t)]:[3,4];case 2:o.sent(),o.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},n}(),p3=function(){function n(t){this.yieldEvery=t,this.batchCount=0,this.batchDurationsMillis=[],this.autoYieldEveryBatches=null,this.batchStartMillis=F.D5U.now()}return n.prototype.resolveOneTensorInLogs=function(t){return Zn(this,void 0,void 0,function(){var e,r,o,g;return qn(this,function(b){switch(b.label){case 0:for(r in e=[],t)e.push(r);o=0,b.label=1;case 1:return o<e.length?"number"==typeof(g=t[e[o]])?[3,3]:[4,g.data()]:[3,4];case 2:return b.sent(),[3,4];case 3:return o++,[3,1];case 4:return[2]}})})},n.prototype.maybeYieldOnBatch=function(t){return Zn(this,void 0,void 0,function(){var e,r;return qn(this,function(o){switch(o.label){case 0:return"auto"!==this.yieldEvery?[3,7]:(this.batchCount++,null!=this.autoYieldEveryBatches?[3,3]:[4,this.resolveOneTensorInLogs(t)]);case 1:return o.sent(),e=F.D5U.now(),[4,(0,F.glt)()];case 2:return o.sent(),this.batchCount>n.SKIP_FIRST_BATCHES&&(this.batchDurationsMillis.push(e-this.batchStartMillis),this.batchDurationsMillis.length>=n.DECISION_BATCH_COUNT&&(r=this.batchDurationsMillis.reduce(function(p,g){return p+g})/this.batchDurationsMillis.length,this.autoYieldEveryBatches=Math.round(n.THRESHOLD_MILLIS/r),this.autoYieldEveryBatches<1&&(this.autoYieldEveryBatches=1))),this.batchStartMillis=F.D5U.now(),this.lastYieldBatchCount=this.batchCount,[3,6];case 3:return this.batchCount-this.lastYieldBatchCount>=this.autoYieldEveryBatches?[4,(0,F.glt)()]:[3,6];case 4:return o.sent(),[4,this.resolveOneTensorInLogs(t)];case 5:o.sent(),this.lastYieldBatchCount=this.batchCount,o.label=6;case 6:return[3,9];case 7:return"batch"!==this.yieldEvery?[3,9]:[4,(0,F.glt)()];case 8:o.sent(),o.label=9;case 9:return[2]}})})},n.prototype.maybeYieldOnEpoch=function(){return Zn(this,void 0,void 0,function(){return qn(this,function(t){switch(t.label){case 0:return"epoch"!==this.yieldEvery?[3,2]:[4,(0,F.glt)()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.SKIP_FIRST_BATCHES=1,n.DECISION_BATCH_COUNT=2,n.THRESHOLD_MILLIS=16,n}(),f3=function(n){function t(e){var r=n.call(this)||this;return r.yieldEvery=e||"auto",r}return gt(t,n),t.prototype.onTrainBegin=function(e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){return this.autoYielder=new p3(this.yieldEvery),[2]})})},t.prototype.onEpochBegin=function(e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){return this.seen=0,this.totals={},[2]})})},t.prototype.onBatchEnd=function(e,r){return Zn(this,void 0,void 0,function(){var o,p,g,b,I=this;return qn(this,function(z){switch(z.label){case 0:return[4,this.autoYielder.maybeYieldOnBatch(r)];case 1:for(b in z.sent(),null==r&&(r={}),this.seen+=o=null==r.size?0:r.size,p=function(G){var te=r[G];if("number"==typeof te)g.totals.hasOwnProperty(G)||(g.totals[G]=0),g.totals[G]=g.totals[G]+te*o;else{var he=void 0;G in g.totals?he=g.totals[G]:g.totals[G]=In(0),g.totals[G]=(0,F.lub)(function(){return(0,F.IHx)(I.totals[G],(0,F.dC7)(te,In(o)))}),he?.dispose()}},g=this,r)p(b);return[2]}})})},t.prototype.onEpochEnd=function(e,r){return Zn(this,void 0,void 0,function(){var o,p,g,b,z=this;return qn(this,function(G){switch(G.label){case 0:return[4,this.autoYielder.maybeYieldOnEpoch()];case 1:if(G.sent(),null!=r)for(o=function(te){if(null==p.totals[te])return"continue";"number"==typeof p.totals[te]?r[te]=p.totals[te]/p.seen:(0,F.lub)(function(){r[te]=(0,F.dC7)((0,F.hiC)(In(1),In(z.seen)),z.totals[te]),z.totals[te].dispose(),(0,F.CnY)(r[te])})},p=this,g=0,b=this.params.metrics;g<b.length;g++)o(b[g]);return[2]}})})},t}(Zb),uR=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.onTrainBegin=function(e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){return this.epoch=[],this.history={},[2]})})},t.prototype.onEpochEnd=function(e,r){return Zn(this,void 0,void 0,function(){var o;return qn(this,function(p){for(o in null==r&&(r={}),this.epoch.push(e),r)null==this.history[o]&&(this.history[o]=[]),this.history[o].push(r[o]);return[2]})})},t.prototype.syncData=function(){return Zn(this,void 0,void 0,function(){var e,r,o,p,g,b,z,G;return qn(this,function(te){switch(te.label){case 0:for(p in e=[],r=[],o=[],this.history)for(g=this.history[p],b=0;b<g.length;++b)"number"!=typeof g[b]&&(e.push(g[b].data()),r.push(p),o.push(b));return[4,Promise.all(e)];case 1:for(z=te.sent(),G=0;G<z.length;++G)this.history[r[G]][o[G]].dispose(),this.history[r[G]][o[G]]=z[G][0];return[2]}})})},t}(Zb),cR=function(n){function t(e){var r=n.call(this)||this;return r.trainBegin=e.onTrainBegin,r.trainEnd=e.onTrainEnd,r.epochBegin=e.onEpochBegin,r.epochEnd=e.onEpochEnd,r.batchBegin=e.onBatchBegin,r.batchEnd=e.onBatchEnd,r}return gt(t,n),t.prototype.onEpochBegin=function(e,r){return Zn(this,void 0,void 0,function(){return qn(this,function(o){switch(o.label){case 0:return null==this.epochBegin?[3,3]:[4,oy(r)];case 1:return o.sent(),[4,this.epochBegin(e,r)];case 2:o.sent(),o.label=3;case 3:return[2]}})})},t.prototype.onEpochEnd=function(e,r){return Zn(this,void 0,void 0,function(){return qn(this,function(o){switch(o.label){case 0:return null==this.epochEnd?[3,3]:[4,oy(r)];case 1:return o.sent(),[4,this.epochEnd(e,r)];case 2:o.sent(),o.label=3;case 3:return[2]}})})},t.prototype.onBatchBegin=function(e,r){return Zn(this,void 0,void 0,function(){return qn(this,function(o){switch(o.label){case 0:return null==this.batchBegin?[3,3]:[4,oy(r)];case 1:return o.sent(),[4,this.batchBegin(e,r)];case 2:o.sent(),o.label=3;case 3:return[2]}})})},t.prototype.onBatchEnd=function(e,r){return Zn(this,void 0,void 0,function(){return qn(this,function(o){switch(o.label){case 0:return null==this.batchEnd?[3,3]:[4,oy(r)];case 1:return o.sent(),[4,this.batchEnd(e,r)];case 2:o.sent(),o.label=3;case 3:return[2]}})})},t.prototype.onTrainBegin=function(e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){switch(r.label){case 0:return null==this.trainBegin?[3,3]:[4,oy(e)];case 1:return r.sent(),[4,this.trainBegin(e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.onTrainEnd=function(e){return Zn(this,void 0,void 0,function(){return qn(this,function(r){switch(r.label){case 0:return null==this.trainEnd?[3,3]:[4,oy(e)];case 1:return r.sent(),[4,this.trainEnd(e)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t}(Zb);function dR(n){return null==n?null:n instanceof Zb?[n]:Array.isArray(n)&&n[0]instanceof Zb?n:Di(n).map(function(t){return new cR(t)})}var hR=function(){function n(){}return n.registerCallbackConstructor=function(t,e){F.D5U.assert(t>=0&&Number.isInteger(t),"Verbosity level is expected to be an integer >= 0, but got "+t),n.checkForDuplicate(e),null==n.constructors[t]&&(n.constructors[t]=[]),n.constructors[t].push(e)},n.checkForDuplicate=function(t){for(var e in n.constructors)n.constructors[+e].forEach(function(r){if(r===t)throw new Ve("Duplicate callback constructor.")})},n.clear=function(){n.constructors={}},n.createCallbacks=function(t){var e=[];for(var r in n.constructors){var o=+r;t>=o&&e.push.apply(e,n.constructors[o])}return e.map(function(p){return new p})},n.constructors={},n}();function pR(n,t,e,r,o,p,g,b,I,z){var G=new uR,te=[new f3(t)].concat(hR.createCallbacks(e));null!=n&&te.push.apply(te,n),te.push(G);var he=new lR(te);return he.setParams({epochs:r,initialEpoch:o,samples:p,steps:g,batchSize:b,verbose:e,doValidation:I,metrics:z}),{callbackList:he,history:G}}function LS(n,t){return(0,F.lub)(function(){var e=(0,F.Smz)($x(n),t,!0),r=(0,F.dC7)((0,F.iD$)(Os()),(0,F.JpU)(n)),o=(0,F._b3)((0,F.gWQ)(e,r));return(0,F.hiC)(n,o)})}function sy(n,t){return(0,F.lub)(function(){return(0,F.J69)($x((0,F.luU)(t,n)),-1)})}function BS(n,t){return(0,F.lub)(function(){return(0,F.J69)((0,F.WnP)((0,F.luU)(t,n)),-1)})}function Yb(n,t){return(0,F.lub)(function(){var e=(0,F.luU)(n,t),r=(0,F.iUl)((0,F.WnP)(n),Os(),Number.MAX_VALUE),o=(0,F.WnP)((0,F.hiC)(e,r));return(0,F.dC7)(In(100),(0,F.J69)(o,-1))})}function m3(n,t){return(0,F.lub)(function(){var e=In(1),r=(0,F.iUl)(t,Os(),Number.MAX_VALUE),o=(0,F.cM7)((0,F.IHx)(e,r)),p=(0,F.iUl)(n,Os(),Number.MAX_VALUE),g=(0,F.cM7)((0,F.IHx)(e,p));return(0,F.J69)($x((0,F.luU)(o,g)),-1)})}function g3(n,t){return(0,F.lub)(function(){var e=In(0),r=In(1),o=(0,F.gWQ)(e,(0,F.luU)(r,(0,F.dC7)(n,t)));return(0,F.J69)($x(o),-1)})}function _3(n,t){return(0,F.lub)(function(){var e=In(0),r=In(1),o=(0,F.gWQ)(e,(0,F.luU)(r,(0,F.dC7)(n,t)));return(0,F.J69)(o,-1)})}function y3(n,t){return(0,F.lub)(function(){var e=In(0),r=In(1),o=(0,F.Smz)((0,F.dC7)(n,t),-1),p=(0,F.Fp7)((0,F.dC7)((0,F.luU)(r,n),t),-1);return(0,F.gWQ)(e,(0,F.IHx)(r,(0,F.luU)(p,o)))})}function v3(n,t){return(0,F.lub)(function(){var e=In(Math.log(2)),r=(0,F.luU)(t,n),o=(0,F.luU)((0,F.IHx)(r,(0,F.Wvh)((0,F.dC7)(In(-2),r))),e);return(0,F.J69)(o,-1)})}function Wx(n,t,e){return void 0===e&&(e=!1),(0,F.lub)(function(){if(e)t=(0,F.XAC)(t);else{var r=(0,F.Smz)(t,t.shape.length-1,!0);t=(0,F.hiC)(t,r)}return t=(0,F.iUl)(t,Os(),1-Os()),(0,F.W76)((0,F.Smz)((0,F.dC7)(n.toFloat(),(0,F.cM7)(t)),t.shape.length-1))})}function VS(n,t,e){return void 0===e&&(e=!1),(0,F.lub)(function(){var r=(0,F.GWj)(function LV(n){var t=[If(n.shape)];return n.reshape(t)}(n)).toInt(),o=t.shape;return Wx((0,F.lfX)(r,o[o.length-1]).reshape(o),t,e)})}function US(n,t){return(0,F.lub)(function(){var e;return e=(0,F.iUl)(t,Os(),1-Os()),e=(0,F.cM7)((0,F.hiC)(e,(0,F.luU)((0,F.JpU)(e),e))),(0,F.J69)(function b3(n,t){return(0,F.lub)(function(){var e=(0,F.gWQ)(t,(0,F.P84)(t)),r=(0,F.dC7)(t,n),o=(0,F.cM7)((0,F.IHx)(In(1),(0,F.Qqt)((0,F.W76)((0,F.WnP)(t)))));return(0,F.IHx)((0,F.luU)(e,r),o)})}(n,e),-1)})}function w3(n,t){return(0,F.lub)(function(){var e=(0,F.iUl)(n,Os(),1),r=(0,F.iUl)(t,Os(),1);return(0,F.Smz)((0,F.dC7)(n,(0,F.cM7)((0,F.hiC)(e,r))),-1)})}function x3(n,t){return(0,F.lub)(function(){var e=(0,F.cM7)((0,F.IHx)(In(Os()),t));return(0,F.J69)((0,F.luU)(t,(0,F.dC7)(n,e)),-1)})}function AA(n,t){return(0,F.lub)(function(){var e=LS(n,-1),r=LS(t,-1),o=(0,F.dC7)(e,r);return(0,F.W76)((0,F.Smz)(o,-1))})}function MA(n){var t={meanSquaredError:sy,meanAbsoluteError:BS,meanAbsolutePercentageError:Yb,meanSquaredLogarithmicError:m3,squaredHinge:g3,hinge:_3,categoricalHinge:y3,logcosh:v3,categoricalCrossentropy:Wx,sparseCategoricalCrossentropy:VS,binaryCrossentropy:US,kullbackLeiblerDivergence:w3,poisson:x3,cosineProximity:AA};if("string"==typeof n){if(n in t)return t[n];var e="Unknown loss "+n;throw n.toLowerCase().includes("softmaxcrossentropy")&&(e="Unknown loss "+n+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new Ve(e)}return n}function NA(n,t){return(0,F.lub)(function(){var e=(0,F.dC7)(In(.5),(0,F.JpU)(t)),r=NS((0,F.pjt)(t,e),n.dtype);return(0,F.J69)((0,F.DgJ)(n,r),-1)})}function OA(n,t){return(0,F.lub)(function(){return NS((0,F.DgJ)((0,F.NqF)(n,-1),(0,F.NqF)(t,-1)),"float32")})}function fR(n,t){return(0,F.lub)(function(){var e=In(1);return(0,F.HvI)(n.equal(e),t.equal(e)).sum().cast("float32")})}function mR(n,t){return(0,F.lub)(function(){var e=In(0),r=fR(n,t),o=function C3(n,t){return(0,F.lub)(function(){var e=In(1),r=In(0);return(0,F.HvI)(n.equal(r),t.equal(e)).sum().cast("float32")})}(n,t),p=r.add(o);return(0,F.arb)((0,F.pjt)(p,e),r.div(p),e).cast("float32")})}function gR(n,t){return US(n,t)}function D3(n,t){throw new Dn}var I3=sy,T3=sy,A3=BS,M3=BS,N3=Yb,O3=Yb,PA=Wx,P3=AA,_R=VS;function zS(n,t,e){void 0===e&&(e=console.log);for(var r="",o=0;o<n.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=n[o]).slice(0,t[o]),r+=" ".repeat(t[o]-r.length);e(r)}function V3(n,t,e){var r;try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}zS([n.name+" ("+n.getClassName()+")",r,n.countParams().toString()],t,e)}function U3(n,t,e,r){var o;try{o=JSON.stringify(n.outputShape)}catch{o="multiple"}for(var p=[],g=0,b=n.inboundNodes;g<b.length;g++){var I=b[g];if(!(null!=e&&e.length>0&&-1===e.indexOf(I)))for(var z=0;z<I.inboundLayers.length;++z)p.push(I.inboundLayers[z].name+"["+I.nodeIndices[z]+"]["+I.tensorIndices[z]+"]")}var _e=n.name,ye=n.getClassName(),ge=0===p.length?"":p[0];for(zS([_e+" ("+ye+")",o,n.countParams().toString(),ge],t,r),z=1;z<p.length;++z)zS(["","","",p[z]],t,r)}function Mf(n,t){return void 0===t&&(t={}),Ux(n,F.m7h.SerializationMap.getMap().classNameMap,t,"layer")}function yR(n,t,e){return("inboundNodes"===n||"outputLayers"===n||"inputLayers"===n)&&0===t&&"string"==typeof e}function jS(n,t){if(null===n)return null;if("string"==typeof n)return OP(n);if("number"==typeof n||"boolean"==typeof n)return n;if(n instanceof Array){for(var e=[],r=n.length,o=0;o<r;++o){var p=n[o];yR(t,o,p)?e.push(p):e.push(jS(p,t))}return e}for(var g={},b=0,I=Object.keys(n);b<I.length;b++){var z=I[b],G=n[z];if("name"===z&&"string"==typeof G)g[z]=G;else{var te=OP(z);g[te]=jS(G,te)}}return g}function RA(n,t){if(null==n)return null;if("string"==typeof n)return pA(n);if("number"==typeof n||"boolean"==typeof n)return n;if(n instanceof Array){for(var e=[],r=n.length,o=0;o<r;++o){var p=n[o];yR(t,o,p)?e.push(p):e.push(RA(p,t))}return e}for(var g={},b=0,I=Object.keys(n);b<I.length;b++){var z=I[b],G=n[z];g[pA(z)]="name"!==z&&"className"!==z||"string"!=typeof G?RA(G,z):G}return g}var kA="0.8.5";function z3(n,t,e,r){if(!e.startsWith("2."))throw new Ve("Unsupported Keras version in weights being loaded: "+e);return t}function j3(n,t,e){var r=function xV(n){if("float32"===n)return"float32";throw new Ve("Invalid dtype: "+n)}(n);return F.esB.make(t,{values:0===t.length?e:F.D5U.flatten(e)},r)}var W3=function(n){function t(e){var r=n.call(this,{})||this;if(r.containerNodes=new Set,r.name=e.name,null==r.name){var o=r.getClassName().toLowerCase();r.name=TS(o)}if(r.supportsMasking=!1,r.trainable=!0,r.updatable=!0,r.inputs=Array.isArray(e.inputs)?e.inputs.slice():[e.inputs],r.outputs=Array.isArray(e.outputs)?e.outputs.slice():[e.outputs],iy(r.inputs).length!==r.inputs.length)throw new Ve("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(Jr){return Jr.name}));iy(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(Jr){return Jr.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[];for(var p=0,g=r.outputs;p<g.length;p++){var b=(zn=g[p]).sourceLayer,I=zn.nodeIndex,z=zn.tensorIndex;r.outputLayers.push(b),r.outputLayersNodeIndices.push(I),r.outputLayersTensorIndices.push(z)}for(var G=0,te=r.inputs;G<te.length;G++)b=(zn=te[G]).sourceLayer,z=zn.tensorIndex,Df(0===(I=zn.nodeIndex),"input layer has >1 nodes"),Df(0===z,"input layer has >1 tensors"),r.inputLayers.push(b),r.inputLayersNodeIndices.push(I),r.inputLayersTensorIndices.push(z);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var he=0;he<r.inputLayers.length;he++){if(!((b=r.inputLayers[he])instanceof Kb))throw new TypeError("Input layers to a Model must be InputLayer objects. Received inputs: "+e.inputs+". Input "+he+" (0-based) originates from layer type "+b.getClassName()+".");r.inputNames.push(b.name),r.feedInputShapes.push(b.batchInputShape),r.feedInputNames.push(b.name)}for(var _e=0,ye=r.outputLayers;_e<ye.length;_e++)r.outputNames.push((b=ye[_e]).name);r.internalInputShapes=r.inputs.map(function(Jr){return Jr.shape}),r.internalOutputShapes=r.outputs.map(function(Jr){return Jr.shape});for(var ge={},Re={},Je={},et={},Xe={},Qe=[],_t=function(Jr,Zm,Bc,op,KS,Fk){null!=op&&null!=KS&&null!=Fk||(op=Jr.sourceLayer,KS=Jr.nodeIndex,Fk=Jr.tensorIndex);var ju=op.inboundNodes[KS];if(-1!==Bc.indexOf(ju))throw new np("The tensor "+Jr.name+' at layer "'+op.name+'" is part of a cycle.');if(-1===Zm.indexOf(ju)){r.containerNodes.add(t.nodeKey(op,KS)),op.id in Xe||(Xe[op.id]=Object.keys(Xe).length),-1===Bc.indexOf(ju)&&Bc.push(ju);for(var kj=ju.inboundLayers.length,n0=0;n0<kj;n0++)_t(ju.inputTensors[n0],Zm,Bc,ju.inboundLayers[n0],ju.nodeIndices[n0],ju.tensorIndices[n0]);for(Zm.push(ju);Bc.indexOf(ju)>=0;)Bc.splice(Bc.indexOf(ju),1);Qe.push(ju)}},Ot=[],an=[],cn=0,Jn=r.outputs;cn<Jn.length;cn++){var zn=Jn[cn];_t(zn,Ot,an)}for(var yi=0,Sr=Qe.slice().reverse();yi<Sr.length;yi++){Re[(la=Sr[yi]).id]=la,la.id in ge||(ge[la.id]=0);var bn=ge[la.id];for(bn=Math.max(bn,null==Je[la.outboundLayer.id]?0:Je[la.outboundLayer.id]),Je[la.outboundLayer.id]=bn,et[la.outboundLayer.id]=la.outboundLayer,ge[la.id]=bn,he=0;he<la.inboundLayers.length;he++){var Lt=la.inboundLayers[he].inboundNodes[I=la.nodeIndices[he]];ge[Lt.id]=Math.max(bn+1,null==ge[Lt.id]?0:ge[Lt.id]),Re[Lt.id]=Lt}}var Xt={};for(var Pn in ge)(bn=ge[Pn])in Xt||(Xt[bn]=[]),Xt[bn].push(Re[Pn]);var Xn={};for(var Ps in Je)(bn=Je[Ps])in Xn||(Xn[bn]=[]),Xn[bn].push(et[Ps]);var ao=Object.keys(Xn).map(function(Jr){return parseInt(Jr,10)}).sort(MS);r.layers=[];for(var Oa=0,cr=ao;Oa<cr.length;Oa++){var Hd=Xn[bn=cr[Oa]];Hd.sort(function(Jr,Zm){var Bc=Xe[Jr.id],op=Xe[Zm.id];return Bc<op?-1:Bc>op?1:0});for(var $d=0,So=Hd;$d<So.length;$d++)r.layers.push(b=So[$d])}r.layersByDepth=Xn,ao=Object.keys(Xt).map(function(Jr){return parseInt(Jr,10)}).sort(MS);for(var ip=r.inputs.slice(),sl=[],Km=0,t0=ao;Km<t0.length;Km++)for(var e1=0,Ok=Xt[bn=t0[Km]];e1<Ok.length;e1++){var la;if(null!=(b=(la=Ok[e1]).outboundLayer)){for(var t1=0,Pk=la.inputTensors;t1<Pk.length;t1++)if(-1===ip.indexOf(zn=Pk[t1]))throw new np("Graph disconnected: cannot obtain value for tensor "+zn+' at layer "'+b.name+'". The following previous layers were accessed without issue: '+sl);for(var n1=0,Rk=la.outputTensors;n1<Rk.length;n1++)ip.push(zn=Rk[n1]);sl.push(b.name)}}r.nodesByDepth=Xt;for(var r1=r.layers.map(function(Jr){return Jr.name}),Rj=function(Jr){var Zm=r1.filter(function(Bc){return Bc===Jr}).length;if(1!==Zm)throw new np('The name "'+Jr+'" is used '+Zm+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(r1))},o1=0,kk=r1;o1<kk.length;o1++)Rj(kk[o1]);return r.outboundNodes=[],r.inboundNodes=[],new FS({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(Jr){return null}),outputMasks:r.outputs.map(function(Jr){return null}),inputShapes:r.inputs.map(function(Jr){return Jr.shape}),outputShapes:r.outputs.map(function(Jr){return Jr.shape})}),r.built=!0,r._refCount=1,r}return gt(t,n),t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount)for(var r=0,o=this.layers;r<o.length;r++)e.numDisposedVariables+=o[r].dispose().numDisposedVariables;return e.refCountAfterDispose=this._refCount,e},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new Ve("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var e=[],r=0,o=this.layers;r<o.length;r++)e=e.concat(o[r].trainableWeights);return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],r=0,o=this.layers;r<o.length;r++){var p=o[r];e.push.apply(e,p.nonTrainableWeights)}if(!this.trainable){for(var g=[],b=0,I=this.layers;b<I.length;b++)g.push.apply(g,(p=I[b]).trainableWeights);return g.concat(e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.loadWeights=function(e,r,o,p){void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===p&&(p=!0),o?function $3(n,t,e){void 0===e&&(e=!0);for(var r={},o=0,p=0,g=t;p<g.length;p++)for(var b=0,I=g[p].weights;b<I.length;b++){var z=I[b];if(null!=r[z.originalName])throw new Ve("Duplicate weight name: "+z.originalName);r[z.originalName]=z,o++}var G=[];for(var te in n){if(null!=r[te])G.push([r[te],n[te]]);else if(e)throw new Ve("Provided weight data has no target variable: "+te);delete r[te]}if(e){var he=[];for(var _e in r)he.push(_e);if(he.length>0)throw new Ve(he.length+" of "+o+" weights are not set: "+he)}kS(G)}(e,this.layers,p):function H3(n,t,e){void 0===e&&(e=!1);for(var r=n.keras_version,p=t.map(function(Ot){return Ot.name}),g={},b=0,I=t;b<I.length;b++)null!=(Xe=I[b]).name&&(null==g[Xe.name]&&(g[Xe.name]=[]),g[Xe.name].push(Xe));for(var z=n.weights,G=[],te=0;te<p.length;++te){var he=p[te],_e=z[he];null==_e&&(_e=[]);for(var ye=[],ge=0;ge<_e.length;++ge){var Re=_e[ge];ye.push(new IA(j3(Re.dtype,Re.shape,Re.value)))}for(var Je=0,et=g[he];Je<et.length;Je++){var Xe,Qe=(Xe=et[Je]).weights;if((ye=z3(0,ye,r)).length!==Qe.length){if(!e)throw new Ve("Layer #"+te+' (named "'+Xe.name+'") expects '+Qe.length+" weight(s), but the saved weights have "+ye.length+" element(s).");console.warn("Skipping loading of weights of layer "+Xe.name+" due to mismatch in number of weights: ("+ye.length+" vs "+Qe.length+").")}for(var _t=0;_t<ye.length;++_t)!e||F.D5U.arraysEqual(Qe[_t].shape,ye[_t].shape)?G.push([Qe[_t],ye[_t].read()]):console.warn("Skipping loading of weights for layer "+Xe.name+" due to mismatch in shape ("+Qe[_t].shape+" vs "+ye[_t].shape+")")}}kS(G)}(e,this.layers,r)},t.prototype.updatedConfig=function(){var e=this.getConfig();return{className:this.getClassName(),config:e,kerasVersion:"tfjs-layers "+kA,backend:"TensorFlow.js"}},t.prototype.toJSON=function(e,r){void 0===r&&(r=!0);var o=RA(this.updatedConfig());return r?JSON.stringify(o):o},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p;return e=Di(e),p="mask"in r?Di(r.mask):ry(null,e.length),o.runInternalGraph(e,p)[0]})},t.prototype.computeMask=function(e,r){var o=this;return(0,F.lub)(function(){var p;return e=Di(e),p=null==r?ry(null,e.length):Di(r),o.runInternalGraph(e,p)[1]})},t.prototype.computeOutputShape=function(e){var r=PS(e);if(r.length!==this.inputLayers.length)throw new Ve("Invalid inputShape argument "+e+": model has "+this.inputLayers.length+" tensor inputs.");for(var o={},p=0;p<r.length;p++){var g=this.inputLayers[p];o[Jn=g.name+"_0_0"]=r[p]}var I=Object.keys(this.nodesByDepth).map(function(yi){return parseInt(yi,10)}).sort(MS);if(I.length>1)for(var z=0,G=I;z<G.length;z++)for(var he=0,_e=this.nodesByDepth[G[z]];he<_e.length;he++){var ye=_e[he];if(g=ye.outboundLayer,-1===this.inputLayers.map(function(yi){return yi.id}).indexOf(g.id)){for(var ge=[],Re=0;Re<ye.inboundLayers.length;Re++){var Xe=ye.tensorIndices[Re],Qe=o[Jn=ye.inboundLayers[Re].name+"_"+ye.nodeIndices[Re]+"_"+Xe];ge.push(Qe)}var _t=PS(g.computeOutputShape(Zl(ge))),Ot=g.inboundNodes.indexOf(ye);for(Re=0;Re<_t.length;Re++)o[Jn=g.name+"_"+Ot+"_"+Re]=_t[Re]}}var an=[],cn=[];for(p=0;p<this.outputLayers.length;p++){var Jn=(g=this.outputLayers[p]).name+"_"+(Ot=this.outputLayersNodeIndices[p])+"_"+(Xe=this.outputLayersTensorIndices[p]);cn.push(Jn)}for(p=0;p<cn.length;p++){var zn=cn[p];Df(zn in o),an.push(o[zn])}return Zl(an)},t.prototype.runInternalGraph=function(e,r){null==r&&(r=ry(null,e.length));for(var o={},p=0;p<this.inputs.length;++p){var g=this.inputs[p],b=e[p],I=r[p];o[g.id]=[b,I]}for(var z=0,G=Object.keys(this.nodesByDepth).map(function(Xn){return parseInt(Xn,10)}).sort(MS);z<G.length;z++)for(var he=0,_e=this.nodesByDepth[G[z]];he<_e.length;he++){for(var ye=_e[he],ge=ye.outboundLayer,Re=ye.inputTensors,Je=ye.outputTensors,et=new Array,Xe=0,Qe=Re;Xe<Qe.length;Xe++)(g=Qe[Xe]).id in o&&et.push(o[g.id]);if(et.length===Re.length){var _t={},Ot=void 0,an=void 0,cn=void 0,Jn=void 0;if(null!=ye.callArgs&&(_t=ye.callArgs),1===et.length){var zn=et[0],yi=zn[0],Sr=zn[1];null==_t.mask&&(_t.mask=Sr),cn=Di(ge.call(yi,_t)),Jn=Di(ge.computeMask(yi,Sr)),Ot=[yi],an=[Sr]}else Ot=et.map(function(Xn){return Xn[0]}),an=et.map(function(Xn){return Xn[1]}),null==_t.mask&&(_t.mask=an),cn=Di(ge.call(Ot,_t)),Jn=Di(ge.computeMask(Ot,an));if(ge.activityRegularizer)throw new Dn("Model invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(p=0;p<Je.length;++p)o[(g=Je[p]).id]=[b=cn[p],I=Jn[p]]}}for(var bn=[],$r=[],Ii=[],Lt=0,Wt=this.outputs;Lt<Wt.length;Lt++){Df((g=Wt[Lt]).id in o,"Could not compute output "+g.name+" : "+g.id);var Xt=o[g.id],Pn=Xt[0];I=Xt[1],Ii.push(Pn.shape),bn.push(Pn),$r.push(I)}return[bn,$r,Ii]},t.prototype.buildNodeConversionMap=function(e){for(var r,o={},p=0,g=this.layers;p<g.length;p++){var b=g[p];r=b instanceof t?1:0;for(var I=0;I<b.inboundNodes.length;I++){var z=t.nodeKey(b,I);this.containerNodes.has(z)&&(o[z]=r,r+=1)}}return o},t.prototype.getLayer=function(e,r){if(null!=r){if(this.layers.length<=r)throw new Ve("Was asked to retrieve layer at index "+r+", but model only has "+this.layers.length+" layer(s).");return this.layers[r]}if(null==e)throw new Ve("Provide either a layer name or layer index");for(var o=0,p=this.layers;o<p.length;o++){var g=p[o];if(g.name===e)return g}throw new Ve("No such layer: "+e)},t.prototype.calculateLosses=function(){var e=this;return(0,F.lub)(function(){for(var r=[],o=0,p=e.layers;o<p.length;o++)for(var g=p[o],b=0;b<g.inboundNodes.length;++b){var I=t.nodeKey(g,b);e.containerNodes.has(I)&&r.push.apply(r,g.calculateLosses())}return r})},t.prototype.getConfig=function(){for(var e={name:this.name},r=this.buildNodeConversionMap(this.layers),o=[],p=0,g=this.layers;p<g.length;p++){for(var b=(Qe=g[p]).getClassName(),I=Qe.getConfig(),z=[],G=0;G<Qe.inboundNodes.length;G++){var te=Qe.inboundNodes[G],he=t.nodeKey(Qe,G),_e={};if(this.containerNodes.has(he)){if(te.callArgs)try{JSON.stringify(te.callArgs),_e=te.callArgs}catch{console.warn("Layer "+Qe.name+" was passed non-serializable keyword arguments: "+te.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),_e={}}if(te.inboundLayers.length>0){for(var ye=[],ge=0;ge<te.inboundLayers.length;ge++){var Re=te.inboundLayers[ge],Je=te.nodeIndices[ge],et=te.tensorIndices[ge];null==(Ot=r[t.nodeKey(Re,Je)])&&(Ot=0),ye.push([Re.name,Ot,et,_e])}z.push(ye)}}}o.push({name:Qe.name,className:b,config:I,inboundNodes:z})}e.layers=o;var Xe=[];for(ge=0;ge<this.inputLayers.length;ge++){var Qe=this.inputLayers[ge];he=t.nodeKey(Qe,Je=this.inputLayersNodeIndices[ge]),this.containerNodes.has(he)&&(null!==(Ot=r[he])&&void 0!==Ot||(Ot=0),Xe.push([Qe.name,Ot,et=this.inputLayersTensorIndices[ge]]))}e.inputLayers=Xe;var _t=[];for(ge=0;ge<this.outputLayers.length;ge++)if(he=t.nodeKey(Qe=this.outputLayers[ge],Je=this.outputLayersNodeIndices[ge]),this.containerNodes.has(he)){var Ot;null!==(Ot=r[he])&&void 0!==Ot||(Ot=0),_t.push([Qe.name,Ot,et=this.outputLayersTensorIndices[ge]])}return e.outputLayers=_t,e},t.fromConfig=function(e,r){var o={},p={};function g($r,Ii){$r.name in p?p[$r.name].push(Ii):p[$r.name]=[Ii]}function b($r,Ii){for(var Lt,Wt=[],Xt=0,Pn=Ii;Xt<Pn.length;Xt++){var Xn=Pn[Xt],Ps=Xn[0],ao=Xn[1],Oa=Xn[2];if(3===Xn.length)Lt={};else{if(4!==Xn.length)throw new Ve("Improperly formatted model config for layer "+JSON.stringify($r)+": "+JSON.stringify(Xn));Lt=Xn[3]}if(!(Ps in o))return void g($r,Ii);var cr=o[Ps];if(cr.inboundNodes.length<=ao)return void g($r,Ii);Wt.push(cr.inboundNodes[ao].outputTensors[Oa])}Wt.length>0&&$r.apply(Zl(Wt),Lt)}function I($r){var Ii=$r.name,Lt=Mf($r,null!=r.customObjects?r.customObjects:{});o[Ii]=Lt;for(var Wt=0,Xt=$r.inboundNodes;Wt<Xt.length;Wt++){var Pn=Xt[Wt];if(!(Pn instanceof Array))throw new Ve("Corrupted configuration, expected array for nodeData: "+Pn);g(Lt,Pn)}}for(var z=r.name,G=r.layers,te=0,he=G;te<he.length;te++)I(ge=he[te]);for(;!EV(p);)for(var _e=0,ye=G;_e<ye.length;_e++){var ge=ye[_e];if((bn=o[ge.name]).name in p){var Re=p[bn.name];delete p[bn.name];for(var Je=0,et=Re;Je<et.length;Je++)b(bn,et[Je])}}for(var Xe=[],Qe=[],_t=0,Ot=r.inputLayers;_t<Ot.length;_t++){var an=(ge=Ot[_t])[0],cn=ge[1],Jn=ge[2];Df(an in o);var zn=(bn=o[an]).inboundNodes[cn].outputTensors;Xe.push(zn[Jn])}for(var yi=0,Sr=r.outputLayers;yi<Sr.length;yi++){var bn;an=(ge=Sr[yi])[0],cn=ge[1],Jn=ge[2],Df(an in o),zn=(bn=o[an]).inboundNodes[cn].outputTensors,Qe.push(zn[Jn])}return new e({inputs:Xe,outputs:Qe,name:z})},Object.defineProperty(t.prototype,"stateful",{get:function(){if(this._stateful)throw new Ve("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var e=0,r=this.layers;e<r.length;e++)if(r[e].stateful)return!0;return!1},enumerable:!0,configurable:!0}),t.prototype.resetStates=function(){var e=this;(0,F.lub)(function(){e.layers.forEach(function(r){r.stateful&&r.resetStates()})})},t}(Qr),Gx=function(){function n(t){if(this.id2Value={},t instanceof n)for(var e in t.id2Value)this.id2Value[e]=t.id2Value[e];else{if(null==t)return;for(var r=0,o=t;r<o.length;r++){var p=o[r];this.add(p.key,p.value)}}}return n.prototype.add=function(t,e){if(null!=this.id2Value[t.id])throw new Ve("Duplicate key: name="+t.name+", id="+t.id);return this.id2Value[t.id]=function G3(n,t){if(null!=n.shape){if(n.shape.length!==t.shape.length)throw new Ve("The rank of feed ("+t.shape.length+") does not match the rank of the key ("+n.shape.length+").");for(var e=0;e<n.shape.length;++e)if(null!=n.shape[e]&&n.shape[e]!==t.shape[e])throw new Ve("The "+e+"-th dimension of the feed ("+t.shape[e]+") is incompatible with that of the key ("+n.shape[e]+").")}if(null==n.dtype||n.dtype===t.dtype)return t;try{return(0,F.pju)(t,n.dtype)}catch{throw new Ve("The dtype of the feed ("+t.dtype+") can not be cast to the dtype of the key '"+n.name+"' ("+n.dtype+").")}}(t,e),this},n.prototype.addFeed=function(t){this.add(t.key,t.value)},n.prototype.hasKey=function(t){return null!=this.id2Value[t.id]},n.prototype.getValue=function(t){if(null==this.id2Value[t.id])throw new Ve("Nonexistent key: "+JSON.stringify(t));return this.id2Value[t.id]},n}();function HS(n,t,e){for(var r=Array.isArray(n),o=r?n:[n],p=[],g=new Gx(t),b=0,I=o;b<I.length;b++)p.push(vR(I[b],g,e));return r?p:p[0]}function vR(n,t,e){if(t.hasKey(n))return t.getValue(n);if(n.sourceLayer instanceof Kb)throw new Ve("Missing a feed value for SymbolicTensor from InputLayer '"+Kb.name+"'");for(var r=[],o=0,p=n.inputs;o<p.length;o++){var g=vR(p[o],t,e);r.push(g)}var b=n.sourceLayer.apply(r,e);Array.isArray(b)||(b=[b]);for(var I=function q3(n){var t;if(1===n.sourceLayer.inboundNodes.length)t=n.sourceLayer.output;else{for(var e=null,r=0;r<n.sourceLayer.inboundNodes.length;++r)for(var o=0,p=n.sourceLayer.inboundNodes[r].outputTensors;o<p.length;o++)if(p[o].id===n.id){e=r;break}t=n.sourceLayer.getOutputAt(e)}return t}(n),z=Array.isArray(I)?I:[I],G=0;G<z.length;++G)t.add(z[G],b[G]);return 1===b.length?b[0]:b[n.outputTensorIndex]}function bR(n,t){if(n.outputs.length>1)throw new Dn("Support for training a model with multiple output tensors with a dataset object is not implemented yet.");F.D5U.assert(Array.isArray(t)&&2===t.length,"Dataset iterator for fitDataset() is expected to generate an Array of length 2: `[xs, ys]`, but instead generates "+t);var e=t[1],r=t[0];if(r instanceof F.esB)return F.D5U.assert(1===n.inputs.length,"Model has multiple "+n.inputs.length+" inputs, hence it expects the input dataset to generate a dictionary of tensors  (with keys "+JSON.stringify(n.inputNames)+", but received a single tensor."),F.D5U.assert(r.shape[0]===e.shape[0],"Mismatch in batch size between x and y tensors ("+r.shape[0]+" vs. "+e.shape[0]+")"),[r,e];for(var o=void 0,p=[],g=0,b=n.inputNames;g<b.length;g++){var I=b[g];if(null==r[I])throw new Ve("The feature data generated by the dataset lacks the required input key '"+I+"'.");p.push(r[I]),null==o?o=r[I].shape[0]:F.D5U.assert(r[I].shape[0]===o,"Mismatch in batch size between x and y tensors ("+r[I].shape[0]+" vs. "+e.shape[0]+")")}return p.concat(e)}function Y3(n,t,e){return Zn(this,void 0,void 0,function(){var r,o,p,g,b,I,z,G,te,he,_e,ge,Re,Je,et,Xe,Qe,_t,Ot,an,Jn,zn,yi,Sr;return qn(this,function(bn){switch(bn.label){case 0:if(r=null!=e.batchesPerEpoch,F.D5U.assert(null!=n.optimizer,"You must compile a model before training/testing. Use Model.compile(modelCompileConfig)."),F.D5U.assert(null!=e,"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),F.D5U.assert(null!=e.epochs&&e.epochs>0&&Number.isInteger(e.epochs),"For fitDataset(), config.epochs is expected to be a positive integer, but got "+e.epochs),F.D5U.assert(!r||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+e.batchesPerEpoch),F.D5U.assert(null==e.validationSplit,"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0,bn.label=1;case 1:return bn.trys.push([1,,21,22]),p=void 0,g=void 0,(o=null!=e.validationData)&&(wR(e.validationData)?F.D5U.assert(null==e.validationBatches||e.validationBatches>0&&Number.isInteger(e.validationBatches),"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+e.validationBatches):(b=function Z3(n){if(3===n.length)throw new Dn("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}(e.validationData),p=b.xs,g=b.ys)),I=n.makeTrainFunction(),z=n.getDedupedMetricsNames(),G=o?z.slice().concat(z.map(function($r){return"val_"+$r})):z.slice(),te=dR(e.callbacks),he=pR(te,e.yieldEvery,e.verbose,e.epochs,null,null,e.batchesPerEpoch,null,o,G),_e=he.callbackList,n.history=he.history,[4,_e.onTrainBegin()];case 2:return bn.sent(),ge=null==e.initialEpoch?0:e.initialEpoch,Re={},[4,t.iterator()];case 3:Je=bn.sent(),bn.label=4;case 4:return ge<e.epochs?[4,_e.onEpochBegin(ge)]:[3,18];case 5:return bn.sent(),et=0,Xe=0,r?[3,7]:[4,t.iterator()];case 6:Je=bn.sent(),bn.label=7;case 7:return!r||et<e.batchesPerEpoch?[4,Je.next()]:[3,16];case 8:if(Qe=bn.sent(),r&&Qe.done)return console.warn("You provided `batchesPerEpoch` as "+e.batchesPerEpoch+", but your dataset iterator ran out of data after "+et+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+e.batchesPerEpoch*e.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,16];if(null==Qe.value)return[3,10];for(_t=bR(n,Qe.value),(Ot={}).batch=Xe,Ot.size=_t[0].shape[0],_e.onBatchBegin(Xe,Ot),an=I(_t),(0,F.B90)(_t),Sr=0;Sr<z.length;++Sr)Ot[z[Sr]]=Jn=an[Sr],(0,F.CnY)(Jn);return[4,_e.onBatchEnd(Xe,Ot)];case 9:bn.sent(),aR(Ot),Xe++,et++,bn.label=10;case 10:return(r?et>=e.batchesPerEpoch:Qe.done)?o?(zn=void 0,wR(e.validationData)?(yi=Di,[4,n.evaluateDataset(e.validationData,{batches:e.validationBatches})]):[3,12]):[3,14]:[3,15];case 11:return zn=yi.apply(void 0,[bn.sent()]),[3,13];case 12:zn=Di(n.evaluate(p,g,{batchSize:null==e.validationBatchSize?32:e.validationBatchSize,verbose:0})),bn.label=13;case 13:for(Sr=0;Sr<n.metricsNames.length;++Sr)Re["val_"+n.metricsNames[Sr]]=zn[Sr];bn.label=14;case 14:return[3,16];case 15:return n.stopTraining_?[3,16]:[3,7];case 16:return[4,_e.onEpochEnd(ge,Re)];case 17:return bn.sent(),ge++,n.stopTraining_?[3,18]:[3,4];case 18:return[4,_e.onTrainEnd()];case 19:return bn.sent(),[4,n.history.syncData()];case 20:return bn.sent(),[2,n.history];case 21:return n.isTraining=!1,[7];case 22:return[2]}})})}function wR(n){return"function"==typeof n.iterator}function Q3(n,t,e){return Zn(this,void 0,void 0,function(){var r,o,p,g,b,I,z,G,te,he;return qn(this,function(_e){switch(_e.label){case 0:if(r=null!=e.batches,o=n.testFunction,p=[],e.verbose>0)throw new Dn("Verbose mode is not implemented yet.");return F.D5U.assert(!r||e.batches>0&&Number.isInteger(e.batches),"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(e.batches)),function X3(n){return"function"==typeof n.next}(t)?(b=t,[3,3]):[3,1];case 1:return[4,t.iterator()];case 2:b=_e.sent(),_e.label=3;case 3:g=b,I=0,z=0,G=function(){var ye,ge,Re,Je,et,Xe;return qn(this,function(Qe){switch(Qe.label){case 0:return[4,g.next()];case 1:if((ye=Qe.sent()).value){if(ge=bR(n,ye.value),Re=(0,F.lub)(function(){return o(ge)}),(0,F.B90)(ge),0===z)for(Xe=0;Xe<Re.length;++Xe)p.push(In(0));for(Je=ge[0].shape[0],et=function(_t){var Ot=Re[_t],an=p[_t];p[_t]=(0,F.lub)(function(){return(0,F.IHx)(p[_t],(0,F.dC7)(In(Je),Ot))}),z>0&&(0,F.B90)(an)},Xe=0;Xe<Re.length;++Xe)et(Xe);(0,F.B90)(Re),I+=Je,++z}return ye.done?(r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+e.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}})},_e.label=4;case 4:return!r||z<e.batches?[5,G()]:[3,6];case 5:return"break"===_e.sent()?[3,6]:[3,4];case 6:for(te=function(ye){var ge=p[ye];p[ye]=(0,F.lub)(function(){return(0,F.hiC)(p[ye],In(I))}),(0,F.B90)(ge)},he=0;he<p.length;++he)te(he);return[2,Zl(p)]}})})}function FA(n){F.D5U.assert(n>0&&Number.isInteger(n),"batchSize is required to be a positive integer, but got "+n)}function qx(n,t,e){return null==n?[null]:Array.isArray(n)?n.map(function(r){return Wm(r,t,e-t)}):Wm(n,t,e-t)}function LA(n,t){return(0,F.lub)(function(){return null==n?null:Array.isArray(n)?n.map(function(e){return LA(e,t)}):GP(n,"int32"===t.dtype?t:t.toInt())})}function BA(n,t){for(var e=[],r=0,o=null;r<n;)(o=r+t)>=n&&(o=n),e.push([r,o]),r=o;return e}function J3(n,t,e,r,o,p,g,b,I,z,G,te,he,_e,ye,ge){return Zn(this,void 0,void 0,function(){var Re,Je,et,Xe,Qe,_t,Ot,an;return qn(this,function(cn){switch(cn.label){case 0:if(null==o&&(o=32),null==p&&(p=1),null==G&&(G=!0),null==he&&(he=0),Re=!1,null!=I&&null!=z&&(Re=!0),null!=ye&&(Re=!0,null==_e))throw new Ve("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return null!=(Je=n.checkNumSamples(e,o,_e,"steps_per_epoch"))&&(et=zd(0,Je)),null==g&&(g=1),Xe=pR(b,ge,g,p,he,Je,_e,o,Re,te),_t=Xe.history,(Qe=Xe.callbackList).setModel(n),n.history=_t,[4,Qe.onTrainBegin()];case 1:cn.sent(),n.stopTraining_=!1,Ot=function(Jn){var zn,yi,Sr,bn,$r;return qn(this,function(Ii){switch(Ii.label){case 0:return[4,Qe.onEpochBegin(Jn)];case 1:if(Ii.sent(),zn={},null==_e)return[3,2];throw new Dn("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===G)throw new Dn("batch shuffling is not implemneted yet");G&&F.D5U.shuffle(et),yi=(0,F.RRF)(et),Sr=BA(Je,o),bn=function(Lt){var Wt;return qn(this,function(Xt){switch(Xt.label){case 0:return[4,Qe.onBatchBegin(Lt,Wt={})];case 1:return Xt.sent(),(0,F.lub)(function(){var Pn=Sr[Lt][0],Xn=Sr[Lt][1],Ps=Wm(yi,Pn,Xn-Pn);Wt.batch=Lt,Wt.size=Xn-Pn;for(var ao=LA(e,Ps),Oa=t(ao),cr=0;cr<r.length;++cr){var Hd=r[cr],$d=Oa[cr];Wt[Hd]=$d,(0,F.CnY)($d)}if(Lt===Sr.length-1&&Re){var So=n.testLoop(I,z,o);for(cr=0;cr<r.length;++cr)Hd=r[cr],(0,F.CnY)($d=So[cr]),zn["val_"+Hd]=$d}}),[4,Qe.onBatchEnd(Lt,Wt)];case 2:return Xt.sent(),aR(Wt),n.stopTraining_?[2,"break"]:[2]}})},$r=0,Ii.label=3;case 3:return $r<Sr.length?[5,bn($r)]:[3,6];case 4:if("break"===Ii.sent())return[3,6];Ii.label=5;case 5:return++$r,[3,3];case 6:yi.dispose(),Ii.label=7;case 7:return[4,Qe.onEpochEnd(Jn,zn)];case 8:return Ii.sent(),n.stopTraining_?[2,"break"]:[2]}})},an=he,cn.label=2;case 2:return an<p?[5,Ot(an)]:[3,5];case 3:if("break"===cn.sent())return[3,5];cn.label=4;case 4:return++an,[3,2];case 5:return[4,Qe.onTrainEnd()];case 6:return cn.sent(),[4,n.history.syncData()];case 7:return cn.sent(),[2,n.history]}})})}function eU(n,t,e,r){return void 0===r&&(r={}),Zn(this,void 0,void 0,function(){var o,p,g,b,I,z,G,te,he,_e,ye,ge,Re,Je,et,Xe,Qe,_t,Ot,an;return qn(this,function(cn){switch(cn.label){case 0:if(n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0,cn.label=1;case 1:if(cn.trys.push([1,,3,4]),FA(G=null==r.batchSize?32:r.batchSize),te=n.standardizeUserData(t,e,!1,G),o=te[0],p=te[1],he=!1,_e=void 0,null!=r.validationData&&r.validationData.length>0){if(he=!0,2!==r.validationData.length)throw 3===r.validationData.length?new Dn("validationData including sample weights is not supported yet."):new Ve("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+r.validationData+" is invalid.");ye=n.standardizeUserData(g=r.validationData[0],b=r.validationData[1],!0,G),_e=(I=ye[0]).concat(z=ye[1])}else null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(he=!0,ge=Math.floor(o[0].shape[0]*(1-r.validationSplit)),I=qx(o,ge,Re=o[0].shape[0]),o=qx(o,0,ge),z=qx(p,ge,Re),p=qx(p,0,ge),_e=I.concat(z)):null!=r.validationSteps&&(he=!0);return Je=o.concat(p),n.checkTrainableWeightsConsistency(),et=n.makeTrainFunction(),Xe=n.getDedupedMetricsNames(),Qe=void 0,_t=void 0,he?(n.makeTestFunction(),Qe=n.testFunction,_t=Xe.slice().concat(Xe.map(function(Jn){return"val_"+Jn}))):(Qe=null,_e=[],_t=Xe.slice()),Ot=dR(r.callbacks),[4,J3(n,et,Je,Xe,G,r.epochs,r.verbose,Ot,Qe,_e,r.shuffle,_t,r.initialEpoch,null,null,r.yieldEvery)];case 2:return an=cn.sent(),n.isTraining=!1,[2,an];case 3:return n.isTraining=!1,ay(o,t),ay(p,e),ay(I,g),ay(z,b),[7];case 4:return[2]}})})}function xR(n){var t=[];n instanceof F.esB&&(n=[n]);for(var e=0;e<n.length;++e){var r=n[e];if(1===r.rank)t.push(Hx(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function ay(n,t){if(null!=n){var e=[];if(t instanceof F.esB)e.push(t.id);else if(Array.isArray(t))t.forEach(function(I){return e.push(I.id)});else if(null!=t)for(var r in t)e.push(t[r].id);var p=[];if(n instanceof F.esB)-1===e.indexOf(n.id)&&p.push(n);else if(Array.isArray(n))n.forEach(function(I){-1===e.indexOf(I.id)&&p.push(I)});else if(null!=n)for(var g in n){var b=n[g];-1===e.indexOf(b.id)&&p.push(b)}p.forEach(function(I){I.isDisposed||I.dispose()})}}function VA(n){return Array.isArray(n)}function ER(n){return!function tU(n){return n instanceof F.esB}(n)&&!VA(n)}function CR(n,t,e,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=""),null==t||0===t.length){if(null!=n){var p=!1;if(VA(n)&&n.length>0)p=!0;else if(ER(n)){for(var g in n)if(n.hasOwnProperty(g)){p=!0;break}}else p=!0;if(p)throw new Ve("Error when checking model "+o+" expected no data, but got "+n)}return[]}if(null==n)return t.map(function(Re){return null});var b;if(ER(n)){b=[];for(var I=0,z=t;I<z.length;I++){var G=z[I];if(null==n[G])throw new Ve('No data provided for "'+G+'". Need data for each key in: '+t);b.push(n[G])}}else if(VA(n)){if(n.length!==t.length)throw new Ve("Error when checking model "+o+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+t.length+" Tensor(s), but instead got the following list of Tensor(s): "+n);b=n}else{if(t.length>1)throw new Ve("The model "+o+" expects "+t.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+n.shape);b=[n]}if(b=xR(b),null!=e)for(var te=0;te<t.length;++te)if(null!=e[te]){var he=b[te];if(he.shape.length!==e[te].length)throw new Ve("Error when checking "+o+": expected "+t[te]+" to have "+e[te].length+" dimension(s). but got array with shape "+he.shape);for(var _e=0;_e<e[te].length;++_e)if(0!==_e||r){var ge=e[te][_e];if(null!=ge&&ge>=0&&he.shape[_e]!==ge)throw new Ve("Error when checking "+o+": expected "+t[te]+" to have shape ["+e[te]+"], but got array with shape ["+he.shape+"].")}}return b}function SR(n,t,e,r,o){var p;if(void 0===r&&(r=!0),void 0===o&&(o=""),Array.isArray(n)){if(n.length!==t.length)throw new Ve("Error when checking model "+o+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+t.length+" Tensor(s), but instead got "+n.length+" Tensors(s).");p=n}else{if(t.length>1)throw new Ve("The model expects "+t.length+" "+o+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(n.shape)+".");p=[n]}if(null!=e)for(var g=0;g<t.length;++g)if(null!=e[g]){var b=p[g];if(b.shape.length!==e[g].length)throw new Ve("Error when checking "+o+": expected "+t[g]+" to have "+e[g].length+" dimension(s), but got array with shape "+JSON.stringify(b.shape));for(var I=0;I<e[g].length;++I)if(0!==I||r){var G=e[g][I];if(null!=G&&G!==b.shape[I])throw new Ve("Error when checking "+o+": expected "+t[g]+" to have shape "+JSON.stringify(e[g])+" but got array with shape "+JSON.stringify(b.shape)+".")}}}var ly=function(n){function t(e){var r=n.call(this,e)||this;return r.isTraining=!1,r}return gt(t,n),t.prototype.summary=function(e,r,o){if(void 0===o&&(o=console.log),!this.built)throw new Ve("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function F3(n,t,e,r){void 0===r&&(r=console.log);var o,p=function B3(n){var t=!0,e=[],r=[];for(var o in n.nodesByDepth)e.push(n.nodesByDepth[o]);for(var p=0,g=e;p<g.length;p++){var b=g[p];if(b.length>1||1===b.length&&b[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,b)}if(t)for(var I=0,z=n.layers;I<z.length;I++){for(var G=!1,te=0,he=z[I].inboundNodes;te<he.length;te++)if(-1!==r.indexOf(he[te])){if(G){t=!1;break}G=!0}if(!t)break}return t}(n),g=["Layer (type)","Output shape","Param #"];if(p?(t=t||65,e=e||[.45,.85,1]):(t=t||98,e=e||[.33,.55,.67,1]),e[e.length-1]<=1&&(e=e.map(function(he){return Math.floor(t*he)})),!p)for(var b in g.push("Receives inputs"),o=[],n.nodesByDepth)o.push.apply(o,n.nodesByDepth[b]);r("_".repeat(t)),zS(g,e,r),r("=".repeat(t));for(var I=n.layers,z=0;z<I.length;++z)p?V3(I[z],e,r):U3(I[z],e,o,r),r((z===I.length-1?"=":"_").repeat(t));n.checkTrainableWeightsConsistency();var G=function L3(n){return RS(null!=n.collectedTrainableWeights?n.collectedTrainableWeights:n.trainableWeights)}(n),te=RS(n.nonTrainableWeights);r("Total params: "+(G+te)),r("Trainable params: "+G),r("Non-trainable params: "+te),r("_".repeat(t))}(this,e,r,o)},t.prototype.compile=function(e){var r=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer=function k3(n){var t={Adagrad:function(){return F.p_j.adagrad(.01)},Adadelta:function(){return F.p_j.adadelta(1,.95,Os())},Adam:function(){return F.p_j.adam(.001,.9,.999,Os())},Adamax:function(){return F.p_j.adamax(.002,.9,.999,Os(),0)},RMSProp:function(){return F.p_j.rmsprop(.001,.9,0,Os())},SGD:function(){return F.p_j.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,n in t)return t[n]();throw new Ve("Unknown Optimizer "+n)}(e.optimizer);else{if(!(e.optimizer instanceof F.gaJ))throw new Ve("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer=e.optimizer}var o=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Ve("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+e.loss+".");o=e.loss.map(function(ye){return MA(ye)})}else{var g=MA(e.loss);this.outputs.map(function(ye){o.push(g)})}else{for(var b in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(b))throw new Ve('Unknown entry in loss dictionary: "'+b+'". Only expect the following keys: '+this.outputNames);for(var I in this.outputNames)null==e.loss[I]&&console.warn('Output "'+I+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+I+" during training"),o.push(MA(e.loss[I]))}this.lossFunctions=o,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var z=0;z<this.outputs.length;++z){var G=this.internalOutputShapes[z];this.feedOutputNames.push(this.outputNames[z]),this.feedOutputShapes.push(G),this.feedLossFns.push(this.lossFunctions[z])}var he=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Gb("loss",function(){for(var ye=0;ye<r.outputs.length;++ye)-1===he.indexOf(ye)&&r.outputs.length>1&&(r.metricsTensors.push([r.lossFunctions[ye],ye]),r.metricsNames.push(r.outputNames[ye]+"_loss"))});var _e=function iU(n,t){if(null==n||Array.isArray(n)&&0===n.length)return t.map(function(b){return[]});if(Array.isArray(n))return t.map(function(b){return n});if(null!=n){for(var e=[],r=0,o=t;r<o.length;r++){var p=o[r],g=n.hasOwnProperty(p)?n[p]:[];Array.isArray(g)||(g=[g]),e.push(g)}return e}throw new TypeError("Type of metrics argument not understood. Expected an Array or Object, found: "+n)}(e.metrics,this.outputNames);Gb("metric",function(){for(var ye=function(Re){if(-1!==he.indexOf(Re))return"continue";!function(Je){for(var et,Xe,Qe,_t=function(cn){if(-1!==["accuracy","acc","crossentropy","ce"].indexOf(cn)){var Jn=r.internalOutputShapes[Re];1===Jn[Jn.length-1]||r.lossFunctions[Re]===US?-1!==["accuracy","acc"].indexOf(cn)?Xe=NA:-1!==["crossentropy","ce"].indexOf(cn)&&(Xe=gR):r.lossFunctions[Re]===VS?-1!==["accuracy","acc"].indexOf(cn)?Xe=D3:-1!==["crossentropy","ce"].indexOf(cn)&&(Xe=_R):-1!==["accuracy","acc"].indexOf(cn)?Xe=OA:-1!==["crossentropy","ce"].indexOf(cn)&&(Xe=PA);var zn=void 0;-1!==["accuracy","acc"].indexOf(cn)?zn="acc":-1!==["crossentropy","ce"].indexOf(cn)&&(zn="ce"),Qe=Xe,et=""+zn}else{var yi=function R3(n){var t={binaryAccuracy:NA,categoricalAccuracy:OA,precision:mR,categoricalCrossentropy:PA,sparseCategoricalCrossentropy:_R,mse:I3,MSE:T3,mae:A3,MAE:M3,mape:N3,MAPE:O3,cosine:P3};if("string"==typeof n&&n in t)return t[n];if("string"!=typeof n&&null!=n)return n;throw new Ve("Unknown metric "+n)}(cn);Qe=yi,et=""+cn}var Sr,bn,$r,Ii;Gb(et,function(){Sr=Qe}),bn=Re,$r=et,Ii=Sr,r.outputNames.length>1&&($r=r.outputNames[bn]+"_"+$r),r.metricsNames.push($r),r.metricsTensors.push([Ii,bn])},Ot=0,an=Je;Ot<an.length;Ot++)_t(an[Ot])}(_e[Re])},ge=0;ge<r.outputs.length;++ge)ye(ge)}),this.collectedTrainableWeights=this.trainableWeights},t.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},t.prototype.evaluate=function(e,r,o){void 0===o&&(o={});var p=null==o.batchSize?32:o.batchSize;FA(p);var g=this.standardizeUserData(e,r,!0,p);try{var b=g[0].concat(g[1]);return this.makeTestFunction(),Zl(this.testLoop(this.testFunction,b,p,o.verbose,o.steps))}finally{ay(g[0],e),ay(g[1],r)}},t.prototype.evaluateDataset=function(e,r){return Zn(this,void 0,void 0,function(){return qn(this,function(o){return this.makeTestFunction(),[2,Q3(this,e,r)]})})},t.prototype.checkNumSamples=function(e,r,o,p){var g;if(void 0===p&&(p="steps"),null!=o){if(g=null,null!=r)throw new Ve("If "+p+" is set, batchSize must be null or undefined.Got batchSize = "+r)}else{if(null==e)throw new Ve("Either the input data should have a defined shape, or "+p+" shoud be specified.");g=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return g},t.prototype.execute=function(e,r){if(Array.isArray(r)&&0===r.length)throw new Ve("`outputs` is an empty Array, which is not allowed.");var o=Array.isArray(r),g=this.retrieveSymbolicTensors(o?r:[r]),b=new Gx;if(e instanceof F.esB&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Ve("The number of inputs provided ("+e.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var I=0;I<this.inputs.length;++I)b.add(this.inputs[I],e[I])}else for(var z=0,G=this.inputs;z<G.length;z++){var te=G[z],he=e[te.name];if(null==he)throw new Ve("No value is provided for the model's input "+te.name);b.add(te,he)}var _e=HS(g,b);return o?_e:_e[0]},t.prototype.retrieveSymbolicTensors=function(e){for(var r=ry(null,e.length),o=e.length,p=0,g=this.layers;p<g.length;p++){for(var b=g[p],I=Array.isArray(b.output)?b.output:[b.output],z=I.map(function(_e){return _e.name}),G=0;G<e.length;++G){var te=z.indexOf(e[G]);if(-1!==te&&(r[G]=I[te],o--),0===o)break}if(0===o)break}if(o>0){var he=[];throw r.forEach(function(_e,ye){null==_e&&he.push(e[ye])}),new Ve("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(he))}return r},t.prototype.predictLoop=function(e,r,o){var p=this;return void 0===r&&(r=32),void 0===o&&(o=!1),(0,F.lub)(function(){var g=p.checkNumSamples(e);if(o)throw new Dn("Verbose predictLoop() is not implemented yet.");for(var b=BA(g,r),I=[],z=function(te){var he=(0,F.lub)(function(){var Xe=qx(e,b[te][0],b[te][1]),Qe=[];if(Array.isArray(Xe))for(var _t=0;_t<Xe.length;++_t)Qe.push({key:p.inputs[_t],value:Xe[_t]});else Qe.push({key:p.inputs[0],value:Xe});var Ot=new Gx(Qe);return HS(p.outputs,Ot)});if(0===te)for(var _e=0,ye=he;_e<ye.length;_e++)I.push(ye[_e]);else for(var Re=0;Re<he.length;++Re)I[Re]=yA(I[Re],he[Re])},G=0;G<b.length;++G)z(G);return Zl(I)})},t.prototype.predict=function(e,r){void 0===r&&(r={});var o=xR(e);SR(o,this.inputNames,this.feedInputShapes,!1);try{var p=null==r.batchSize?32:r.batchSize;return FA(p),this.predictLoop(o,p)}finally{ay(o,e)}},t.prototype.predictOnBatch=function(e){return SR(e,this.inputNames,this.feedInputShapes,!0),this.predictLoop(e,e.shape[0])},t.prototype.standardizeUserData=function(e,r,o,p){if(void 0===o&&(o=!0),null==this.optimizer)throw new np("You must compile a model before training/testing. Use Model.compile(modelCompileConfig).");for(var g=[],b=0;b<this.feedOutputShapes.length;++b){var I=this.feedOutputShapes[b];g.push(this.feedLossFns[b]===VS?I.slice(0,I.length-1).concat([1]):I)}if(function nU(n,t,e){var r=iy(n.map(function(p){return p.shape[0]}));r.sort();var o=iy(t.map(function(p){return p.shape[0]}));if(o.sort(),r.length>1)throw new Ve("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(n.map(function(p){return p.shape})));if(o.length>1)throw new Ve("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(function(p){return p.shape})));if(r.length>0&&o.length>0&&!F.D5U.arraysEqual(r,o))throw new Ve("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+o[0]+" target sample(s).")}(e=CR(e,this.feedInputNames,this.feedInputShapes,!1,"input"),r=CR(r,this.feedOutputNames,g,!1,"target")),function rU(n,t,e){for(var r=[sy,US,Wx],o=0;o<n.length;++o){var p=n[o],g=t[o],b=e[o];if(null!=g){if(g===Wx&&1===p.shape[p.shape.length-1])throw new Ve("You are passing a target array of shape "+p.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(g))for(var I=p.shape.slice(1),z=b.slice(1),G=0;G<I.length;++G){var he=z[G];if(null!=he&&I[G]!==he)throw new Ve("A target Tensor with shape "+p.shape+" was passed for an output of shape "+b+", while using a loss function that expects targets to have the same shape as the output.")}}}}(r,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=p&&p>0&&e[0].shape[0]%p!=0)throw new Ve("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+p+". Found: "+e[0].shape[0]+" sample(s).");return[e,r,null]},t.prototype.testLoop=function(e,r,o,p,g){var b=this;return void 0===p&&(p=0),(0,F.lub)(function(){var I=b.checkNumSamples(r,o,g,"steps"),z=[];if(p>0)throw new Dn("Verbose mode is not implemented yet.");if(null!=g)throw new Dn("steps mode in testLoop() is not implemented yet");for(var G=BA(I,o),te=(0,F.RRF)(zd(0,I)),he=0;he<G.length;++he){var _e=G[he][0],ye=G[he][1],ge=Wm(te,_e,ye-_e),Re=LA(r,ge),Je=e(Re);if(0===he)for(var et=0;et<Je.length;++et)z.push(In(0));for(et=0;et<Je.length;++et){var Xe=Je[et];z[et]=(0,F.IHx)(z[et],(0,F.dC7)(In(ye-_e),Xe))}}for(et=0;et<z.length;++et)z[et]=(0,F.hiC)(z[et],In(I));return z})},t.prototype.getDedupedMetricsNames=function(){for(var e=this.metricsNames,r=[],o=0;o<e.length;++o){var p=e[o],g=p;NP(e,p)>1&&(g+="_"+NP(e.slice(0,o),p)),r.push(g)}return r},t.prototype.makeTrainFunction=function(){var e=this;return function(r){var o=r.slice(0,e.inputs.length),p=r.slice(e.inputs.length,e.inputs.length+e.outputs.length),g=[],b=e.collectedTrainableWeights.map(function(I){return I.read()});return[e.optimizer.minimize(function(){for(var I=[],z=0;z<e.inputs.length;++z)I.push({key:e.inputs[z],value:o[z]});var G,te=new Gx(I),he=HS(e.outputs,te,{training:!0});for(z=0;z<e.lossFunctions.length;++z){var _e=(0,e.lossFunctions[z])(p[z],he[z]);(0,F.J69)(_e),G=0===z?_e:(0,F.IHx)(G,_e)}for(z=0;z<e.metricsTensors.length;++z){var ge=e.metricsTensors[z][1],Re=(0,F.J69)((0,e.metricsTensors[z][0])(p[ge],he[ge]));(0,F.CnY)(Re),g.push(Re)}return G=(0,F.J69)(G),e.calculateLosses().forEach(function(Je){G=(0,F.IHx)(G,Je)}),G},!0,b)].concat(g)}},t.prototype.makeTestFunction=function(){var e=this;this.testFunction=function(r){return(0,F.lub)(function(){for(var o,p=[],g=r.slice(0,e.inputs.length),b=r.slice(e.inputs.length,e.inputs.length+e.outputs.length),I=[],z=0;z<e.inputs.length;++z)I.push({key:e.inputs[z],value:g[z]});var G=new Gx(I),te=HS(e.outputs,G);for(z=0;z<e.lossFunctions.length;++z){var _e=(0,F.J69)((0,e.lossFunctions[z])(b[z],te[z]));o=0===z?_e:(0,F.IHx)(o,_e),p.push(o)}for(z=0;z<e.metricsTensors.length;++z){var ge=e.metricsTensors[z][1],Re=(0,F.J69)((0,e.metricsTensors[z][0])(b[ge],te[ge]));p.push(Re)}return p})}},t.prototype.fit=function(e,r,o){return void 0===o&&(o={}),Zn(this,void 0,void 0,function(){return qn(this,function(p){return[2,eU(this,e,r,o)]})})},t.prototype.fitDataset=function(e,r){return Zn(this,void 0,void 0,function(){return qn(this,function(o){return[2,Y3(this,e,r)]})})},t.prototype.getNamedWeights=function(e){for(var r={},o=null!=e&&e.trainableOnly,p=o?this.trainableWeights:this.weights,g=this.getWeights(o),b=0;b<p.length;++b)o&&!p[b].trainable||(r[p[b].originalName]=g[b]);return r},Object.defineProperty(t.prototype,"stopTraining",{set:function(e){this.stopTraining_=e},enumerable:!0,configurable:!0}),t.prototype.save=function(e,r){return Zn(this,void 0,void 0,function(){var o,p,I;return qn(this,function(z){switch(z.label){case 0:if("string"==typeof e){if(0===(o=F.io.getSaveHandlers(e)).length)throw new Ve("Cannot find any save handlers for URL '"+e+"'");if(o.length>1)throw new Ve("Found more than one ("+o.length+") save handlers for URL '"+e+"'");e=o[0]}if(null==e.save)throw new Ve("Model.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,F.io.encodeWeights(this.getNamedWeights(r))];case 1:return p=z.sent(),I=this.toJSON(null,!1),[2,e.save({modelTopology:I,weightData:p.data,weightSpecs:p.specs})]}})})},t.className="Model",t}(W3);function aU(n,t,e){return void 0===e&&(e=!0),Zn(this,void 0,void 0,function(){var r,o,p;return qn(this,function(I){switch(I.label){case 0:if(null==n.load)throw new Ve("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,n.load()];case 1:if(r=I.sent(),null!=(o=r.modelTopology).model_config&&(o=o.model_config),p=Mf(jS(o),t),null!=r.weightData){if(null==r.weightSpecs)throw new Ve("Model artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");p.loadWeights(F.io.decodeWeights(r.weightData,r.weightSpecs),!1,!0,e)}return[2,p]}})})}F.m7h.registerClass(ly);var UA=function(n){function t(e){var r=n.call(this,{inputs:[],outputs:[]})||this;if(e=e||{},r.trainable=!0,r._updatable=!0,r.built=!1,r.name=null!=e.name?e.name:TS("sequential_"),null!=e.layers)for(var o=0,p=e.layers;o<p.length;o++)r.add(p[o]);return r}return gt(t,n),t.prototype.checkShape=function(e){if(e.inboundNodes[0].outputTensors[0].shape.some(function(r){return r<0}))throw new Ve("Negative dimension size caused by adding layer "+e.name+" with input shape ["+e.inboundNodes[0].inputTensors[0].shape+"]")},t.prototype.add=function(e){var r,o=e instanceof t||e instanceof ly;if(o){if(1!==(r=e).outputs.length)throw new Ve("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==r.inputs.length)throw new Ve("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Ve("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var p=sR({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(p)}if(o)this.outputs=r.outputs,this.inputs=r.inputs;else{if(1!==e.inboundNodes.length)throw new Ve("A layer added to a Sequential model must not already be connected somewhere else. Model received layer "+e.name+" which has "+e.inboundNodes.length+" pre-existing inbound connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new Ve("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=iR(this.outputs[0])}this.inboundNodes=[],new FS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:ry(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(b){return b.shape}),outputShapes:this.outputs[0].shape})}else{var g=e.apply(this.outputs[0]);if(Array.isArray(g))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[g],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1},t.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},t.prototype.call=function(e,r){return null==this.model&&this.build(),this.model.call(e,r)},t.prototype.build=function(e){if(zi(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ly({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.model.updatable=this.updatable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},t.prototype.countParams=function(){return this.built||this.build(),n.prototype.countParams.call(this)},t.prototype.summary=function(e,r,o){void 0===o&&(o=console.log),this.built||this.build(),n.prototype.summary.call(this,e,r,o)},t.prototype.setWeights=function(e){null==this.model&&this.build(),this.model.setWeights(e)},Object.defineProperty(t.prototype,"updatable",{get:function(){return this._updatable},set:function(e){this.built&&(this.model.updatable=e),this._updatable=e},enumerable:!0,configurable:!0}),t.prototype.evaluate=function(e,r,o){if(void 0===o&&(o={}),!this.built)throw new np("The model needs to be compiled before being used.");return this.model.evaluate(e,r,o)},t.prototype.evaluateDataset=function(e,r){return Zn(this,void 0,void 0,function(){return qn(this,function(o){if(!this.built)throw new np("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(e,r)]})})},t.prototype.predict=function(e,r){return void 0===r&&(r={}),null==this.model&&this.build(),this.model.predict(e,r)},t.prototype.predictOnBatch=function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)},t.prototype.compile=function(e){this.build(),this.model.compile(e),this.optimizer=this.model.optimizer,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},t.prototype.fit=function(e,r,o){return void 0===o&&(o={}),Zn(this,void 0,void 0,function(){return qn(this,function(p){if(!this.built)throw new np("The model needs to be compiled before being used.");return[2,this.model.fit(e,r,o)]})})},t.prototype.fitDataset=function(e,r){return Zn(this,void 0,void 0,function(){return qn(this,function(o){if(!this.built)throw new np("The model needs to be compiled before being used.");return[2,this.model.fitDataset(e,r)]})})},t.fromConfig=function(e,r){var o,p={};if(r instanceof Array){if(null==r[0].className||"Merge"===r[0].className)throw new Ve("Legacy serialization format not supported yet.");o=r}else F.D5U.assert(null!=r.layers,"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),o=r.layers,delete r.layers,p=r;var g=new e(p);if(!(g instanceof t))throw new Dn("Sequential.fromConfig called on non-Sequential input: "+g);for(var b=0,I=o;b<I.length;b++){var z=Mf(I[b]);g.add(z)}return g},Object.defineProperty(t.prototype,"stopTraining",{set:function(e){this.model.stopTraining=e},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){for(var e=[],r=0,o=this.layers;r<o.length;r++){var p=o[r];e.push({className:p.getClassName(),config:p.getConfig()})}return e},t.className="Sequential",t}(ly);function lU(n){return new ly(n)}function uU(n){return new UA(n)}function cU(n,t){return void 0===t&&(t=!0),function sU(n,t){return void 0===t&&(t=!0),Zn(this,void 0,void 0,function(){var e;return qn(this,function(r){if("string"==typeof n){if(0===(e=F.io.getLoadHandlers(n)).length)e.push(F.io.browserHTTPRequest(n));else if(e.length>1)throw new Ve("Found more than one ("+e.length+") load handlers for URL '"+n+"'");n=e[0]}return[2,aU(n,void 0,t)]})})}(n,t)}function DR(n){return sR(n)}function dU(n,t){hR.registerCallbackConstructor(n,t)}F.m7h.registerClass(UA);var Lc=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.getConfig=function(){return{}},t}(F.m7h.Serializable),hU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e,r){return void 0===r&&(r=1),function VV(n,t){if(void 0===t&&(t=1),1!==t)throw new Dn("Support for alpha values other than 1 ("+t+") is not implemented yet.");return(0,F.pyx)(n)}(e,r)},t.className="elu",t}(Lc);F.m7h.registerClass(hU);var pU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return(0,F.U8D)(e)},t.className="selu",t}(Lc);F.m7h.registerClass(pU);var fU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return(0,F.UYe)(e)},t.className="relu",t}(Lc);F.m7h.registerClass(fU);var mU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return(0,F.lub)(function(){return(0,F.LTh)(In(6),(0,F.UYe)(e))})},t.className="relu6",t}(Lc);F.m7h.registerClass(mU);var gU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return e},t.className="linear",t}(Lc);F.m7h.registerClass(gU);var _U=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return(0,F.XD2)(e)},t.className="sigmoid",t}(Lc);F.m7h.registerClass(_U);var yU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return function zV(n){return(0,F.lub)(function(){var t=(0,F.IHx)(In(.5),(0,F.dC7)(In(.2),n));return(0,F.iUl)(t,0,1)})}(e)},t.className="hardSigmoid",t}(Lc);F.m7h.registerClass(yU);var vU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return(0,F.Wvh)(e)},t.className="softplus",t}(Lc);F.m7h.registerClass(vU);var bU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return function UV(n){return(0,F.lub)(function(){return(0,F.hiC)(n,(0,F.IHx)(In(1),(0,F.WnP)(n)))})}(e)},t.className="softsign",t}(Lc);F.m7h.registerClass(bU);var wU=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e){return(0,F.AEp)(e)},t.className="tanh",t}(Lc);F.m7h.registerClass(wU);var IR=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.apply=function(e,r){return void 0===r&&(r=-1),(0,F.XAC)(e,r)},t.className="softmax",t}(Lc);function zu(n){return n.getClassName()}function zA(n,t){return void 0===t&&(t={}),Ux(n,F.m7h.SerializationMap.getMap().classNameMap,t,"activation")}function qm(n){return null==n?zA({className:"linear",config:{}}):"string"==typeof n?zA({className:n,config:{}}):n instanceof Lc?n:zA(n)}F.m7h.registerClass(IR);var TR=function(n){function t(e){var r=n.call(this,e??{})||this;return r.supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return gt(t,n),t.prototype.call=function(e,r){e=Hr(e);var o=(0,F.UYe)(e);return null!=this.maxValue&&(o=(0,F.iUl)(o,0,this.maxValue)),o},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var e={maxValue:this.maxValue},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="ReLU",t}(Qr);F.m7h.registerClass(TR);var AR=function(n){function t(e){var r=n.call(this,e??{})||this;return r.DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return gt(t,n),t.prototype.call=function(e,r){var o=Hr(e);return(0,F.hi7)(o,this.alpha)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var e={alpha:this.alpha},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="LeakyReLU",t}(Qr);F.m7h.registerClass(AR);var MR=function(n){function t(e){var r=n.call(this,e??{})||this;if(r.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new Dn("Non-default alpha value ("+e.alpha+") is not supported by the ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return gt(t,n),t.prototype.call=function(e,r){var o=Hr(e);return(0,F.pyx)(o)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var e={alpha:this.alpha},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="ELU",t}(Qr);F.m7h.registerClass(MR);var NR=function(n){function t(e){var r=n.call(this,e??{})||this;return r.DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r.thetaTensor=In(r.theta),r}return gt(t,n),t.prototype.call=function(e,r){var o=Hr(e);return o.mul(NS(o.greater(this.thetaTensor),"float32"))},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var e={theta:this.theta},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="ThresholdedReLU",t}(Qr);F.m7h.registerClass(NR);var OR=function(n){function t(e){var r=n.call(this,e??{})||this;return r.DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new IR).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return gt(t,n),t.prototype.call=function(e,r){var o=Hr(e);return this.softmax(o,this.axis)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var e={axis:this.axis},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Softmax",t}(Qr);F.m7h.registerClass(OR);var PR=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t}(F.m7h.Serializable),$S=function(n){function t(e){var r=n.call(this)||this,o=null==e||null==e.l1?.01:e.l1,p=null==e||null==e.l2?.01:e.l2;return r.hasL1=0!==o,r.hasL2=0!==p,r.l1=In(o),r.l2=In(p),r}return gt(t,n),t.prototype.apply=function(e){var r=this;return(0,F.lub)(function(){var o=(0,F.lls)([1]);return r.hasL1&&(o=(0,F.IHx)(o,(0,F.Smz)((0,F.dC7)(r.l1,(0,F.WnP)(e))))),r.hasL2&&(o=(0,F.IHx)(o,(0,F.Smz)((0,F.dC7)(r.l2,$x(e))))),o.asScalar()})},t.prototype.getConfig=function(){return{l1:this.l1.dataSync()[0],l2:this.l2.dataSync()[0]}},t.fromConfig=function(e,r){return new e({l1:r.l1,l2:r.l2})},t.className="L1L2",t}(PR);F.m7h.registerClass($S);var RR={l1l2:"L1L2"};function gr(n){return fA(n)}function kR(n,t){return void 0===t&&(t={}),Ux(n,F.m7h.SerializationMap.getMap().classNameMap,t,"regularizer")}function so(n){return null==n?null:"string"==typeof n?kR({className:n in RR?RR[n]:n,config:{}}):n instanceof PR?n:kR(n)}function jA(n,t,e){if("number"==typeof n)return ry(n,t);if(n.length!==t)throw new Ve("The "+e+" argument must be a tuple of "+t+" integers. Received: "+n.length+" elements.");for(var r=0;r<t;++r){var o=n[r];if(!kV(o))throw new Ve("The "+e+" argument must be a tuple of "+t+" integers. Received: "+JSON.stringify(n)+" including a non-integer number "+o)}return n}function Xb(n,t,e,r,o){return void 0===o&&(o=1),null==n?n:Math.floor((("same"===e?n:n-(t+(t-1)*(o-1))+1)+r-1)/r)}function WS(n,t,e,r){if(null==n)return null;if("valid"===r)n=n*t+$m([e-t,0]);else{if("same"!==r)throw new Ve("Unsupport padding mode: "+r+".");n*=t}return n}function HA(n,t){return(0,F.lub)(function(){return Yl(t),"channelsFirst"===t?(0,F.p4s)(n,[0,2,3,1]):n})}var FR=function(n){function t(e,r){var o=n.call(this,r)||this;if(o.bias=null,o.DEFAULT_KERNEL_INITIALIZER="glorotNormal",o.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyConfig(r),o.rank=e,1!==o.rank&&2!==o.rank)throw new Dn("Convolution layer for rank other than 1 or 2 ("+o.rank+") is not implemented yet.");if(o.kernelSize=jA(r.kernelSize,e,"kernelSize"),o.strides=jA(null==r.strides?1:r.strides,e,"strides"),o.padding=null==r.padding?"valid":r.padding,Hm(o.padding),o.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,Yl(o.dataFormat),o.activation=qm(r.activation),o.useBias=null==r.useBias||r.useBias,o.biasInitializer=Co(r.biasInitializer||o.DEFAULT_BIAS_INITIALIZER),o.biasConstraint=cs(r.biasConstraint),o.biasRegularizer=so(r.biasRegularizer),o.activityRegularizer=so(r.activityRegularizer),o.dilationRate=jA(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===o.rank&&Array.isArray(o.dilationRate)&&1!==o.dilationRate.length)throw new Ve("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(o.dilationRate));if(2===o.rank)if("number"==typeof o.dilationRate)o.dilationRate=[o.dilationRate,o.dilationRate];else if(2!==o.dilationRate.length)throw new Ve("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(o.dilationRate));return o}return gt(t,n),t.verifyConfig=function(e){if(Df("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!mA(e.kernelSize,"number",1,2))throw new Ve("BaseConv expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},t.prototype.getConfig=function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:zu(this.activation),useBias:this.useBias,biasInitializer:qr(this.biasInitializer),biasRegularizer:gr(this.biasRegularizer),activityRegularizer:gr(this.activityRegularizer),biasConstraint:di(this.biasConstraint)},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t}(Qr),$A=function(n){function t(e,r){var o=n.call(this,e,r)||this;return o.kernel=null,t.verifyConfig(r),o.filters=r.filters,o.kernelInitializer=Co(r.kernelInitializer||o.DEFAULT_KERNEL_INITIALIZER),o.kernelConstraint=cs(r.kernelConstraint),o.kernelRegularizer=so(r.kernelRegularizer),o}return gt(t,n),t.prototype.build=function(e){e=zi(e);var r="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[r])throw new Ve("The channel dimension of the input should be defined. Found "+e[r]);var o,p=e[r],g=this.kernelSize.concat([p,this.filters]);this.kernel=this.addWeight("kernel",g,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(o={},o[r]=p,o)}],this.built=!0},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p;e=Hr(e);var g=null==o.bias?null:o.bias.read();if(1===o.rank)p=function CU(n,t,e,r,o,p,g){return void 0===r&&(r=1),void 0===o&&(o="valid"),void 0===g&&(g=1),(0,F.lub)(function(){if(null==p&&(p="channelsLast"),Yl(p),3!==n.shape.length)throw new Ve("The input of a conv1dWithBias operation should be 3, but is "+n.shape.length+" instead.");if(3!==t.shape.length)throw new Ve("The kernel for a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead");if(null!=e&&1!==e.shape.length)throw new Ve("The bias for a conv1dWithBias operation should be 1, but is "+t.shape.length+" instead");if("channelsFirst"===p&&(n=(0,F.p4s)(n,[0,2,1])),"causal"===o)throw new Dn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var b=(0,F.PAt)(n,t,r,"same"===o?"same":"valid","NWC",g);return null!=e&&(b=Tf(b,e)),b})}(e,o.kernel.read(),g,o.strides[0],o.padding,o.dataFormat,o.dilationRate[0]);else if(2===o.rank)p=function SU(n,t,e,r,o,p,g){return void 0===r&&(r=[1,1]),void 0===o&&(o="valid"),(0,F.lub)(function(){if(null==p&&(p="channelsLast"),Yl(p),3!==n.rank&&4!==n.rank)throw new Ve("conv2dWithBias expects input to be of rank 3 or 4, but received "+n.rank+".");if(3!==t.rank&&4!==t.rank)throw new Ve("conv2dWithBias expects kernel to be of rank 3 or 4, but received "+n.rank+".");var b=HA(n,p);if("causal"===o)throw new Dn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return b=(0,F.Tek)(b,t,r,"same"===o?"same":"valid","NHWC",g),null!=e&&(b=Tf(b,e)),"channelsFirst"===p&&(b=(0,F.p4s)(b,[0,3,1,2])),b})}(e,o.kernel.read(),g,o.strides,o.padding,o.dataFormat,o.dilationRate);else if(3===o.rank)throw new Dn("3D convolution is not implemented yet.");return null!=o.activation&&(p=o.activation.apply(p)),p})},t.prototype.computeOutputShape=function(e){e=zi(e);for(var r=[],o="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),p=0;p<o.length;++p){var g=Xb(o[p],this.kernelSize[p],this.padding,this.strides[p],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[p]);r.push(g)}var b=[e[0]];return"channelsLast"===this.dataFormat?(b=b.concat(r)).push(this.filters):(b.push(this.filters),b=b.concat(r)),b},t.prototype.getConfig=function(){var e={filters:this.filters,kernelInitializer:qr(this.kernelInitializer),kernelRegularizer:gr(this.kernelRegularizer),kernelConstraint:di(this.kernelConstraint)},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.verifyConfig=function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new Ve("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))},t}(FR),WA=function(n){function t(e){var r=n.call(this,2,e)||this;return t.verifyConfig(e),r}return gt(t,n),t.prototype.getConfig=function(){var e=n.prototype.getConfig.call(this);return delete e.rank,e},t.verifyConfig=function(e){if("number"!=typeof e.kernelSize&&!mA(e.kernelSize,"number",1,2))throw new Ve("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv2D",t}($A);F.m7h.registerClass(WA);var LR=function(n){function t(e){var r=n.call(this,e)||this;if(r.inputSpec=[new Na({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new Ve("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+r.padding);return r}return gt(t,n),t.prototype.build=function(e){if(4!==(e=zi(e)).length)throw new Ve("Input should have rank 4; Received input shape: "+JSON.stringify(e));var r="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[r])throw new Ve("The channel dimension of the inputs should be defined. Found `None`.");var o,p=e[r],g=this.kernelSize.concat([this.filters,p]);this.kernel=this.addWeight("kernel",g,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Na({ndim:4,axes:(o={},o[r]=p,o)})],this.built=!0},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p=Hr(e);if(4!==p.shape.length)throw new Ve("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+p.shape.length);var g,b,I=p.shape;"channelsFirst"===o.dataFormat?(g=2,b=3):(g=1,b=2);var te=I[b],_e=o.kernelSize[1],ge=o.strides[1],Re=[I[0],WS(I[g],o.strides[0],o.kernelSize[0],o.padding),WS(te,ge,_e,o.padding),o.filters];"channelsLast"!==o.dataFormat&&(p=(0,F.p4s)(p,[0,2,3,1]));var Je=(0,F.bc)(p,o.kernel.read(),Re,o.strides,o.padding);return"channelsLast"!==o.dataFormat&&(Je=(0,F.p4s)(Je,[0,3,1,2])),null!=o.bias&&(Je=Tf(Je,o.bias.read(),o.dataFormat)),null!=o.activation&&(Je=o.activation.apply(Je)),Je})},t.prototype.computeOutputShape=function(e){var r,o,p,g=(e=zi(e)).slice();"channelsFirst"===this.dataFormat?(r=1,o=2,p=3):(r=3,o=1,p=2);var b=this.kernelSize[0],I=this.kernelSize[1],z=this.strides[0],G=this.strides[1];return g[r]=this.filters,g[o]=WS(g[o],z,b,this.padding),g[p]=WS(g[p],G,I,this.padding),g},t.prototype.getConfig=function(){var e=n.prototype.getConfig.call(this);return delete e.dilationRate,e},t.className="Conv2DTranspose",t}(WA);F.m7h.registerClass(LR);var DU=function(n){function t(e,r){var o=n.call(this,e,r)||this;if(o.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",o.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",o.depthwiseKernel=null,o.pointwiseKernel=null,null==r.filters)throw new Ve("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new Ve("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new Ve("SeparableConv"+o.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(r.padding));return o.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,o.depthwiseInitializer=Co(r.depthwiseInitializer||o.DEFAULT_DEPTHWISE_INITIALIZER),o.depthwiseRegularizer=so(r.depthwiseRegularizer),o.depthwiseConstraint=cs(r.depthwiseConstraint),o.pointwiseInitializer=Co(r.depthwiseInitializer||o.DEFAULT_POINTWISE_INITIALIZER),o.pointwiseRegularizer=so(r.pointwiseRegularizer),o.pointwiseConstraint=cs(r.pointwiseConstraint),o}return gt(t,n),t.prototype.build=function(e){if((e=zi(e)).length<this.rank+2)throw new Ve("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(e));var I,r="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[r]||e[r]<0)throw new Ve("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[r]));for(var o=e[r],p=this.kernelSize.concat([o,this.depthMultiplier]),g=[],b=0;b<this.rank;++b)g.push(1);g.push(o*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",p,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",g,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new Na({ndim:this.rank+2,axes:(I={},I[r]=o,I)})],this.built=!0},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p;if(e=Hr(e),1===o.rank)throw new Dn("1D separable convolution is not implemented yet.");return 2===o.rank&&("channelsFirst"===o.dataFormat&&(e=(0,F.p4s)(e,[0,2,3,1])),p=(0,F.U_I)(e,o.depthwiseKernel.read(),o.pointwiseKernel.read(),o.strides,o.padding,o.dilationRate,"NHWC")),o.useBias&&(p=Tf(p,o.bias.read(),o.dataFormat)),null!=o.activation&&(p=o.activation.apply(p)),"channelsFirst"===o.dataFormat&&(p=(0,F.p4s)(p,[0,3,1,2])),p})},t.prototype.getConfig=function(){var e=n.prototype.getConfig.call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=qr(this.depthwiseInitializer),e.pointwiseInitializer=qr(this.pointwiseInitializer),e.depthwiseRegularizer=gr(this.depthwiseRegularizer),e.pointwiseRegularizer=gr(this.pointwiseRegularizer),e.depthwiseConstraint=di(this.depthwiseConstraint),e.pointwiseConstraint=di(this.pointwiseConstraint),e},t.className="SeparableConv",t}($A),BR=function(n){function t(e){return n.call(this,2,e)||this}return gt(t,n),t.className="SeparableConv2D",t}(DU);F.m7h.registerClass(BR);var VR=function(n){function t(e){var r=n.call(this,1,e)||this;return t.verifyConfig(e),r.inputSpec=[{ndim:3}],r}return gt(t,n),t.prototype.getConfig=function(){var e=n.prototype.getConfig.call(this);return delete e.rank,delete e.dataFormat,e},t.verifyConfig=function(e){if("number"!=typeof e.kernelSize&&!mA(e.kernelSize,"number",1,1))throw new Ve("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(e.kernelSize)+".")},t.className="Conv1D",t}($A);F.m7h.registerClass(VR);var UR=function(n){function t(e){var r=n.call(this,e)||this;return r.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return gt(t,n),t.prototype.computeOutputShape=function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return e=Hr(e),"channelsLast"===o.dataFormat?OS(OS(e,o.cropping[0][0],e.shape[1]-o.cropping[0][0]-o.cropping[0][1],2),o.cropping[1][0],e.shape[2]-o.cropping[1][1]-o.cropping[1][0],3):OS(OS(e,o.cropping[0][0],e.shape[2]-o.cropping[0][0]-o.cropping[0][1],3),o.cropping[1][0],e.shape[3]-o.cropping[1][1]-o.cropping[1][0],4)})},t.prototype.getConfig=function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Cropping2D",t}(Qr);F.m7h.registerClass(UR);var zR=function(n){function t(e){var r=n.call(this,e)||this;return r.DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,r}return gt(t,n),t.prototype.computeOutputShape=function(e){if("channelsFirst"===this.dataFormat){var r=null==e[2]?null:this.size[0]*e[2],o=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],r,o]}return[e[0],r=null==e[1]?null:this.size[0]*e[1],o=null==e[2]?null:this.size[1]*e[2],e[3]]},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p=Hr(e),g=p.shape;if("channelsFirst"===o.dataFormat){p=(0,F.p4s)(p,[0,2,3,1]);var b=o.size[0]*g[2],I=o.size[1]*g[3],z=p.resizeNearestNeighbor([b,I]);return(0,F.p4s)(z,[0,3,1,2])}return p.resizeNearestNeighbor([b=o.size[0]*g[1],I=o.size[1]*g[2]])})},t.prototype.getConfig=function(){var e={size:this.size,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="UpSampling2D",t}(Qr);F.m7h.registerClass(zR);var jR=function(n){function t(e){var r=n.call(this,2,e)||this;return r.depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=Co(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=cs(e.depthwiseConstraint),r.depthwiseRegularizer=so(e.depthwiseRegularizer),r}return gt(t,n),t.prototype.build=function(e){if((e=zi(e)).length<4)throw new Ve("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(e)+".");var r="channelsFirst"===this.dataFormat?1:3;if(null==e[r]||e[r]<0)throw new Ve("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+e[r]+").");var o=e[r];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],o,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[o*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p=function IU(n,t,e,r,o,p){return void 0===e&&(e=[1,1]),void 0===r&&(r="valid"),(0,F.lub)(function(){null==o&&(o="channelsLast"),Yl(o);var g=HA(n,o);if(4!==n.rank)throw new Ve("Input for depthwiseConv2d is required to be 4-D, but is instead "+n.rank+"-D");if(4!==t.rank)throw new Ve("depthwiseKernel is required to be 4-D, but is instead "+t.rank+"-D");return g=(0,F.B10)(g,t,e,"same"===r?"same":"valid","NHWC",p),"channelsFirst"===o&&(g=(0,F.p4s)(g,[0,3,1,2])),g})}(e=Hr(e),o.depthwiseKernel.read(),o.strides,o.padding,o.dataFormat,null);return o.useBias&&(p=Tf(p,o.bias.read(),o.dataFormat)),null!=o.activation&&(p=o.activation.apply(p)),p})},t.prototype.computeOutputShape=function(e){e=zi(e);var o="channelsFirst"===this.dataFormat?e[3]:e[2],p="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,g=Xb("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),b=Xb(o,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],p,g,b]:[e[0],g,b,p]},t.prototype.getConfig=function(){var e=n.prototype.getConfig.call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=qr(this.depthwiseInitializer),e.depthwiseRegularizer=gr(this.depthwiseRegularizer),e.depthwiseConstraint=di(this.depthwiseRegularizer),e},t.className="DepthwiseConv2D",t}(FR);F.m7h.registerClass(jR);var HR=function(n){function t(e){var r=n.call(this,e)||this;if(r.rate=Math.max(Math.min(e.rate,1),0),r.rateScalar=In(r.rate),r.noiseShape=e.noiseShape,r.seed=e.seed,null!=r.seed)throw new Dn("Non-default seed is not implemented in Dropout layer yet: "+r.seed);return r.supportsMasking=!0,r}return gt(t,n),t.prototype.getNoiseShape=function(e){if(null==this.noiseShape)return this.noiseShape;for(var r=e.shape,o=[],p=0;p<this.noiseShape.length;++p)o.push(null==this.noiseShape[p]?r[p]:this.noiseShape[p]);return o},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){o.invokeCallHook(e,r);var p=Hr(e);if(null!=o.noiseShape&&!F.D5U.arraysEqual(p.shape,o.noiseShape))throw new Dn("Non-default noise shape is not implemented in Dropout layer yet: "+JSON.stringify(o.noiseShape));if(0<o.rate&&o.rate<1){var g=null!=r.training&&r.training,b=o.getNoiseShape(p);return bA(function(){return qP(p,o.rateScalar,b,o.seed)},function(){return p},g)}return e})},t.prototype.getConfig=function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Dropout",t}(Qr);F.m7h.registerClass(HR);var $R=function(n){function t(e){var r=n.call(this,e)||this;if(r.activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var o=null;null!=e.batchSize&&(o=e.batchSize),r.batchInputShape=[o,e.inputDim]}return r.units=e.units,r.activation=qm(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=Co(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=Co(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=cs(e.kernelConstraint),r.biasConstraint=cs(e.biasConstraint),r.kernelRegularizer=so(e.kernelRegularizer),r.biasRegularizer=so(e.biasRegularizer),r.activityRegularizer=so(e.activityRegularizer),r.inputSpec=[{minNDim:2}],r}return gt(t,n),t.prototype.build=function(e){var r,o=(e=zi(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[o,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(r={},r[-1]=o,r)}],this.built=!0},t.prototype.computeOutputShape=function(e){var r=(e=zi(e)).slice();return r[r.length-1]=this.units,r},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){o.invokeCallHook(e,r);var p=Gm(Hr(e),o.kernel.read());return null!=o.bias&&(p=Tf(p,o.bias.read())),null!=o.activation&&(p=o.activation.apply(p)),p})},t.prototype.getConfig=function(){var e={units:this.units,activation:zu(this.activation),useBias:this.useBias,kernelInitializer:qr(this.kernelInitializer),biasInitializer:qr(this.biasInitializer),kernelRegularizer:gr(this.kernelRegularizer),biasRegularizer:gr(this.biasRegularizer),activityRegularizer:gr(this.activityRegularizer),kernelConstraint:di(this.kernelConstraint),biasConstraint:di(this.biasConstraint)},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Dense",t}(Qr);F.m7h.registerClass($R);var WR=function(n){function t(e){var r=n.call(this,e||{})||this;return r.inputSpec=[{minNDim:3}],r}return gt(t,n),t.prototype.computeOutputShape=function(e){for(var r=0,o=(e=zi(e)).slice(1);r<o.length;r++)if(null==o[r])throw new Ve('The shape of the input to "Flatten" is not fully defined (got '+e.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[e[0],If(e,1)]},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return o.invokeCallHook(e,r),function BV(n){if(n.rank<=1)throw new Ve("batchFlatten requires a minimum rank of 2. Got rank: "+n.rank+".");var t=[n.shape[0],If(n.shape,1)];return n.reshape(t)}(Hr(e))})},t.className="Flatten",t}(Qr);F.m7h.registerClass(WR);var GR=function(n){function t(e){var r=n.call(this,e)||this;return r.supportsMasking=!0,r.activation=qm(e.activation),r}return gt(t,n),t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){o.invokeCallHook(e,r);var p=Hr(e);return o.activation.apply(p)})},t.prototype.getConfig=function(){var e={activation:zu(this.activation)},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Activation",t}(Qr);F.m7h.registerClass(GR);var qR=function(n){function t(e){var r=n.call(this,e)||this;return r.n=e.n,r.inputSpec=[{ndim:2}],r}return gt(t,n),t.prototype.computeOutputShape=function(e){return[e[0],this.n,e[1]]},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return function FV(n,t){return(0,F.lub)(function(){if(2!==n.shape.length)throw new Ve("repeat() expects a rank-2 tensor, but received a rank-"+n.shape.length+" tensor.");return vA(Hx(n,1),[1,t,1])})}(e=Hr(e),o.n)})},t.prototype.getConfig=function(){var e={n:this.n},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="RepeatVector",t}(Qr);F.m7h.registerClass(qR);var KR=function(n){function t(e){var r=n.call(this,e)||this;r.targetShape=e.targetShape;for(var o=0;o<r.targetShape.length;++o)r.isUnknown(r.targetShape[o])&&(r.targetShape[o]=null);return r}return gt(t,n),t.prototype.isUnknown=function(e){return e<0||null==e},t.prototype.fixUnknownDimension=function(e,r){for(var o="Total size of new array must be unchanged.",p=r.slice(),g=1,b=null,I=0;I<p.length;++I){var z=p[I];if(this.isUnknown(z)){if(null!==b)throw new Ve("Can only specifiy one unknown dimension.");b=I}else g*=z}var G=If(e);if(null!==b){if(0===g||G%g!=0)throw new Ve(o);p[b]=G/g}else if(G!==g)throw new Ve(o);return p},t.prototype.computeOutputShape=function(e){for(var r=!1,o=0;o<e.length;++o)if(this.isUnknown(e[o])){r=!0;break}return r?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){o.invokeCallHook(e,r);var p=Hr(e),g=p.shape,b=g.slice(0,1).concat(o.fixUnknownDimension(g.slice(1),o.targetShape));return p.reshape(b)})},t.prototype.getConfig=function(){var e={targetShape:this.targetShape},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Reshape",t}(Qr);F.m7h.registerClass(KR);var ZR=function(n){function t(e){var r=n.call(this,e)||this;if(null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+e.dims+" instead.");var o=zd(1,e.dims.length+1);if(!F.D5U.arraysEqual(e.dims.slice().sort(),o))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Na({ndim:r.dims.length+1})],r}return gt(t,n),t.prototype.computeOutputShape=function(e){var r=(e=zi(e)).slice();return this.dims.forEach(function(o,p){r[p+1]=e[o]}),r},t.prototype.call=function(e,r){return(0,F.p4s)(Hr(e),this.dimsIncludingBatch)},t.prototype.getConfig=function(){var e={dims:this.dims},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Permute",t}(Qr);F.m7h.registerClass(ZR);var YR=function(n){function t(e){var r=n.call(this,e)||this;if(r.embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var o=null;null!=e.batchSize&&(o=e.batchSize),r.batchInputShape=null==e.inputLength?[o,null]:[o].concat(Di(e.inputLength))}return r.inputDim=e.inputDim,r.outputDim=e.outputDim,r.embeddingsInitializer=Co(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=so(e.embeddingsRegularizer),r.activityRegularizer=so(e.activityRegularizer),r.embeddingsConstraint=cs(e.embeddingsConstraint),r.maskZero=e.maskZero,r.inputLength=e.inputLength,r}return gt(t,n),t.prototype.build=function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},t.prototype.warnOnIncompatibleInputShape=function(e){},t.prototype.computeMask=function(e,r){throw new Dn("computeMask has not been implemented for Embedding yet")},t.prototype.computeOutputShape=function(e){if(e=zi(e),null==this.inputLength)return e.concat([this.outputDim]);var r=Di(this.inputLength);if(r.length!==e.length-1)throw new Ve('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);for(var o=0,p=0;p<r.length;++p){var g=r[p],b=e[p+1];if(null!=g&&null!=b&&g!==b)throw new Ve('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);null==g&&(r[o]=b),o++}return[e[0]].concat(r,[this.outputDim])},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){o.invokeCallHook(e,r);var p=Hr(e);return"int32"!==p.dtype&&(p=NS(p,"int32")),GP(o.embeddings.read(),p.as1D()).reshape(zi(o.computeOutputShape(p.shape)))})},t.prototype.getConfig=function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:qr(this.embeddingsInitializer),embeddingsRegularizer:gr(this.embeddingsRegularizer),activityRegularizer:gr(this.activityRegularizer),embeddingsConstraint:di(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Embedding",t}(Qr);F.m7h.registerClass(YR);var uy=function(n){function t(e){var r=n.call(this,e||{})||this;return r.supportsMasking=!0,r}return gt(t,n),t.prototype.mergeFunction=function(e){throw new Dn},t.prototype.computeElementwiseOpOutputShape=function(e,r){if(null==e||null==r)return null;if(e.length<r.length)return this.computeElementwiseOpOutputShape(r,e);if(0===r.length)return e;for(var o=e.slice(0,e.length-r.length),p=0;p<r.length;++p){var g=e[e.length-r.length+p],b=r[p];if(null==g||null==b||g<0||b<0)o.push(null);else if(1===g)o.push(b);else if(1===b)o.push(g);else{if(g!==b)throw new Ve("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(r));o.push(g)}}return o},t.prototype.build=function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[zi(e)]),e.length<2)throw new Ve("A merge layer should be called on an Array of at least 2 inputs. Got "+e.length+" input(s).");for(var r=[],o=0,p=e;o<p.length;o++)null!=(I=p[o])&&null!==I[0]&&r.push(I[0]);if((r=iy(r)).length>1)throw new Ve("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(e)+".");for(var g=null==e[0]?null:e[0].slice(1),b=1;b<e.length;++b){var I=null==e[b]?null:e[b].slice(1);g=this.computeElementwiseOpOutputShape(g,I)}var z=e.map(function(G){return G.length});this.reshapeRequired=-1!==e.indexOf(null)||1!==iy(z).length},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){if(o.reshapeRequired){var p=[],g=e.map(function(cn){return cn.rank});if(-1===g.indexOf(null)){for(var b=$m(g),I=0,z=e;I<z.length;I++){for(var G=(ge=z[I]).rank,te=0;te<b-G;++te)ge=Hx(ge,1);p.push(ge)}return o.mergeFunction(p)}for(var he=!1,_e=0,ye=e;_e<ye.length;_e++){var ge;if(null==(G=(ge=ye[_e]).rank)){var Re=ge.shape,Je=Re[0],et=Re.slice(1).concat([Je]),Xe=ge.reshape([Je].concat(If(Re.slice(1))));Xe=(Xe=(0,F.p4s)(Xe,[1,0])).reshape(et),p.push(Xe),he=!0}else if(G>1){var Qe=zd(1,G).concat([0]);p.push((0,F.p4s)(ge,Qe)),he=!0}else p.push(ge)}var _t=o.mergeFunction(p),Ot=_t.rank;if(he)if(null==Ot){var an=_t.shape;et=[Je=an[an.length-1]].concat(an.slice(0,an.length-1)),_t=(0,F.p4s)(_t.reshape([-1,Je]),[1,0]).reshape(et)}else Ot>1&&(Qe=[Ot-1].concat(zd(0,Ot-1)),_t=(0,F.p4s)(_t,Qe));return _t}return o.mergeFunction(e)})},t.prototype.computeOutputShape=function(e){var r;r=null==e[0]?null:e[0].slice(1);for(var o=1;o<e.length;++o){var p=null==e[o]?null:e[o].slice(1);r=this.computeElementwiseOpOutputShape(r,p)}for(var g=[],b=0,I=e;b<I.length;b++)null!=(p=I[b])&&null!==p[0]&&g.push(p[0]);return 1===(g=iy(g)).length?g.concat(r):[null].concat(r)},t.prototype.computeMask=function(e,r){throw new Dn("computeMask has not been implemented for Merge yet")},t}(Qr),XR=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.mergeFunction=function(e){return(0,F.lub)(function(){for(var r=e[0].clone(),o=1;o<e.length;++o)r=(0,F.IHx)(r,e[o]);return r})},t.className="Add",t}(uy);F.m7h.registerClass(XR);var QR=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.mergeFunction=function(e){return(0,F.lub)(function(){for(var r=e[0].clone(),o=1;o<e.length;++o)r=(0,F.dC7)(r,e[o]);return r})},t.className="Multiply",t}(uy);F.m7h.registerClass(QR);var JR=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.mergeFunction=function(e){return(0,F.lub)(function(){for(var r=e[0].clone(),o=1;o<e.length;++o)r=(0,F.IHx)(r,e[o]);return(0,F.dC7)(In(1/e.length),r)})},t.className="Average",t}(uy);F.m7h.registerClass(JR);var ek=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.mergeFunction=function(e){return(0,F.lub)(function(){for(var r=e[0],o=1;o<e.length;++o)r=(0,F.gWQ)(r,e[o]);return r})},t.className="Maximum",t}(uy);F.m7h.registerClass(ek);var tk=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.mergeFunction=function(e){return(0,F.lub)(function(){for(var r=e[0],o=1;o<e.length;++o)r=(0,F.LTh)(r,e[o]);return r})},t.className="Minimum",t}(uy);F.m7h.registerClass(tk);var nk=function(n){function t(e){var r=n.call(this,e)||this;return r.DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return gt(t,n),t.prototype.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Ve("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var r=!0,o=0,p=e;o<p.length;o++)if(null!=(he=p[o])){r=!1;break}if(!r){for(var g=[],b=0;b<e.length;++b){var I=e[b].slice();I.splice(this.axis,1);for(var z=!1,G=0,te=g;G<te.length;G++){var he=te[G];if(F.D5U.arraysEqual(he,I)){z=!0;break}}z||g.push(I)}if(g.length>1)throw new Ve("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},t.prototype.mergeFunction=function(e){var r=this;return(0,F.lub)(function(){return $P(e,r.axis)})},t.prototype.computeOutputShape=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Ve("A `Concatenate` layer should be called on a list of inputs.");for(var r=e,o=r[0].slice(),p=this.axis<0?o.length+this.axis:this.axis,g=0,b=r.slice(1);g<b.length;g++){var I=b[g];if(null==o[p]||null==I[p]){o[p]=null;break}o[p]+=I[p]}return o},t.prototype.computeMask=function(e,r){throw new Dn("computeMask has not been implemented for Concatenate yet")},t.prototype.getConfig=function(){var e={axis:this.axis},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Concatenate",t}(uy);function Kx(n,t){for(;n<0;)n+=t;return n}F.m7h.registerClass(nk);var rk=function(n){function t(e){var r=n.call(this,e)||this;return r.axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return gt(t,n),t.prototype.build=function(e){F.D5U.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),"A `Dot` layer should be called on a list of exactly 2 inputs.");var r=e[0],o=e[1];if(r.length>3||o.length>3)throw new Dn("Dot layer does not support tensors of 4D or higher rank yet.");var p=this.interpretAxes(r,o);if(r[p[0]]!==o[p[1]])throw new Ve("Dimension incompatibility: "+r[p[0]]+" !== "+o[p[1]])},t.prototype.mergeFunction=function(e){if(2!==e.length)throw new Ve("A `Dot` layer must be called on exactly 2 inputs, but received "+e.length+" input(s).");var r,o=e[0],p=e[1];return r=Array.isArray(this.axes)?this.axes.map(function(g,b){return Kx(g,e[b].shape.length)}):[Kx(this.axes,o.shape.length),Kx(this.axes,p.shape.length)],this.normalize&&(o=LS(o,r[0]),p=LS(p,r[1])),function TU(n,t,e){if(n.shape.length>3||t.shape.length>3)throw new Dn("batchDot is not implemented for tensors of 4D or higher rank yet");if(F.D5U.assert(n.shape.length>=2,"batchDot requires the rank of x to be >= 2, but got "+n.shape.length),F.D5U.assert(n.shape.length>=2,"batchDot requires the rank of y to be >= 2, but got "+t.shape.length),"number"==typeof e&&(e=[e,e]),"complex64"===n.dtype||"complex64"===t.dtype)throw new Dn("batchDot is not implemented for complex64-type Tensors yet.");var r=n.shape.length,o=t.shape.length;null==e&&(e=[r-1,o-2]);var p=e;return(0,F.lub)(function(){var g,b;if(r>o){g=r-o;for(var I=[],z=0;z<g;++z)I.push(1);t=t.reshape(t.shape.concat(I))}else if(o>r){for(g=o-r,I=[],z=0;z<g;++z)I.push(1);n=n.reshape(n.shape.concat(I))}else g=0;if(b=2===n.shape.length&&2===t.shape.length?p[0]===p[1]?n.mulStrict(t).sum(p[0]):n.transpose([1,0]).mulStrict(t).sum(p[1]):n.matMul(t,p[0]!==n.shape.length-1||null,p[1]===t.shape.length-1||null),g>0){var he,_e=[];for(z=he=r>o?r+o-3:r-1;z<he+g;++z)_e.push(z);b=b.squeeze(_e)}return 1===b.shape.length&&(b=b.expandDims(1)),b})}(o,p,r)},t.prototype.interpretAxes=function(e,r){return Array.isArray(this.axes)?this.axes:[Kx(this.axes,e.length),Kx(this.axes,r.length)]},t.prototype.computeOutputShape=function(e){F.D5U.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),"A `Dot` layer should be called on a list of exactly 2 inputs.");var r=e[0].slice(),o=e[1].slice();if(r.length>3||o.length>3)throw new Dn("Dot layer does not support tensors of 4D or higher rank yet.");var p=this.interpretAxes(r,o);r.splice(p[0],1),o.splice(p[1],1),o.splice(0,1);var g=r.concat(o);return 1===g.length&&g.push(1),g},t.prototype.computeMask=function(e,r){throw new Dn("computeMask has not been implemented for Dot yet")},t.prototype.getConfig=function(){var e={axes:this.axes,normalize:this.normalize},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="Dot",t}(uy);function GS(n,t,e,r,o,p){var g;if(void 0===p&&(p=.001),2===n.rank)g=(0,F.JHc)(n,t,e,p,o,r);else if(3===n.rank)g=(0,F.csF)(n,t,e,p,o,r);else{if(4!==n.rank)throw new Dn("batchNormalization is not implemented for array of rank "+n.rank+" yet");g=(0,F.bVb)(n,t,e,p,o,r)}return g}F.m7h.registerClass(rk);var ik=function(n){function t(e){var r=this;return null==e&&(e={}),(r=n.call(this,e)||this).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=Co(e.betaInitializer||"zeros"),r.gammaInitializer=Co(e.gammaInitializer||"ones"),r.movingMeanInitializer=Co(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=Co(e.movingVarianceInitializer||"ones"),r.betaConstraint=cs(e.betaConstraint),r.gammaConstraint=cs(e.gammaConstraint),r.betaRegularizer=so(e.betaRegularizer),r.gammaRegularizer=so(e.gammaRegularizer),r.stepCount=0,r}return gt(t,n),t.prototype.build=function(e){e=zi(e);var r=this.axis>=0?this.axis:this.axis+e.length,o=e[r];if(null==o)throw new Ve("Axis "+r+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(e)+".");this.inputSpec=[new Na({ndim:e.length,axes:(p={},p[r]=o,p)})];var p,g=[o];this.scale&&(this.gamma=this.addWeight("gamma",g,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",g,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",g,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",g,null,this.movingVarianceInitializer,null,!1),this.built=!0},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p=null!=r.training&&r.training,g=Hr(e),b=g.shape,I=b.length,z=zd(0,I),G=o.axis>=0?o.axis:o.axis+I;z.splice(G,1);var te=ry(1,I);te[G]=b[G];var he=z.slice();he.sort();var _e=!F.D5U.arraysEqual(he,zd(0,I).slice(0,I-1));if(!p)return function(){if(_e){var Qe=o.movingMean.read().reshape(te),_t=o.movingVariance.read().reshape(te),Ot=o.center?o.beta.read().reshape(te):null,an=o.scale?o.gamma.read().reshape(te):null;return GS(g,Qe,_t,Ot,an,o.epsilon)}return GS(g,o.movingMean.read(),o.movingVariance.read(),null==o.beta?null:o.beta.read(),null==o.gamma?null:o.gamma.read(),o.epsilon)}();var ye=function NU(n,t,e,r,o){return void 0===o&&(o=.001),F.D5U.arraysEqual(r.slice().sort(),zd(0,n.rank-1))?function AU(n,t,e,r,o){return void 0===o&&(o=.001),(0,F.lub)(function(){var p=(0,F.Gi7)(n,r),g=p.mean,b=p.variance;return[GS(n,g,b,e,t,o),g,b]})}(n,t,e,r,o):function MU(n,t,e,r,o){return void 0===o&&(o=.001),(0,F.lub)(function(){for(var p=(0,F.Gi7)(n,r),g=p.mean,b=p.variance,I=[],z=0,G=zd(0,n.rank);z<G.length;z++){var te=G[z];-1!==r.indexOf(te)?I.push(1):I.push(n.shape[te])}var he=g.reshape(I),_e=b.reshape(I),ye=null==t?null:t.reshape(I),ge=null==e?null:e.reshape(I);return[GS(n,he,_e,ge,ye,o),g,b]})}(n,t,e,r,o)}(g,o.gamma.read(),o.beta.read(),z,o.epsilon),ge=ye[0],Re=ye[1],Je=ye[2],et=If(z.map(function(Qe){return g.shape[Qe]})),Xe=Je.mul(In(et/(et-(1+o.epsilon))));return function(){o.stepCount++;var Qe=(0,F.p_)(o.movingMean.read(),Re,o.momentum,o.stepCount);o.movingMean.write(Qe);var _t=(0,F.p_)(o.movingVariance.read(),Xe,o.momentum,o.stepCount);o.movingVariance.write(_t)}(),ge})},t.prototype.getConfig=function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:qr(this.betaInitializer),gammaInitializer:qr(this.gammaInitializer),movingMeanInitializer:qr(this.movingMeanInitializer),movingVarianceInitializer:qr(this.movingVarianceInitializer),betaRegularizer:gr(this.betaRegularizer),gammaRegularizer:gr(this.gammaRegularizer),betaConstraint:di(this.betaConstraint),gammaConstraint:di(this.gammaConstraint)},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="BatchNormalization",t}(Qr);F.m7h.registerClass(ik);var ok=function(n){function t(e){var r=this;if(null==e&&(e={}),(r=n.call(this,e)||this).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Ve("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+e.padding.length+" array.");var o=void 0,p=void 0;if("number"==typeof e.padding[0])o=[e.padding[0],e.padding[0]],p=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Ve("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+e.padding[0].length+" array.");if(o=e.padding[0],2!==e.padding[1].length)throw new Ve("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+e.padding[1].length+" array.");p=e.padding[1]}r.padding=[o,p]}return r.inputSpec=[new Na({ndim:4})],r}return gt(t,n),t.prototype.computeOutputShape=function(e){return e=zi(e),"channelsFirst"===this.dataFormat?[e[0],e[1],null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null]:[e[0],null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,e[3]]},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return function OU(n,t,e){return(0,F.lub)(function(){if(4!==n.rank)throw new Ve("temporalPadding expects input tensor to be 4-D, but received a "+n.rank+"-D tensor.");if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new Ve("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==e&&(e="channelsLast"),"channelsLast"!==e&&"channelsFirst"!==e)throw new Ve("Unknown data format: "+e+". Supported data formats are 'channelsLast' and 'channelsFirst.");return(0,F.vku)(n,"channelsFirst"===e?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]])})}(Hr(e),o.padding,o.dataFormat)})},t.prototype.getConfig=function(){var e={padding:this.padding,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="ZeroPadding2D",t}(Qr);function qS(n,t,e,r,o,p){return(0,F.lub)(function(){var g;Yl(o),function OV(n){$b(NV,"PoolMode",n)}(p),Hm(r),null==e&&(e=[1,1]),null==r&&(r="valid"),null==o&&(o="channelsLast"),null==p&&(p="max"),n=HA(n,o);var b="same"===r?"same":"valid";return g="max"===p?(0,F._sB)(n,t,e,b):(0,F.wS1)(n,t,e,b),"channelsFirst"===o&&(g=(0,F.p4s)(g,[0,3,1,2])),g})}F.m7h.registerClass(ok);var sk=function(n){function t(e){var r=this;if(null==e.poolSize&&(e.poolSize=2),r=n.call(this,e)||this,"number"==typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new Ve("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));r.poolSize=e.poolSize}if(null==e.strides)r.strides=r.poolSize;else if("number"==typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new Ve("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));r.strides=e.strides}return r.padding=null==e.padding?"valid":e.padding,Hm(r.padding),r.inputSpec=[new Na({ndim:3})],r}return gt(t,n),t.prototype.computeOutputShape=function(e){var r=Xb((e=zi(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],r,e[2]]},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){o.invokeCallHook(e,r),e=Hx(Hr(e),2);var p=o.poolingFunction(Hr(e),[o.poolSize[0],1],[o.strides[0],1],o.padding,"channelsLast");return(0,F.L9e)(p,[2])})},t.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t}(Qr),ak=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.poolingFunction=function(e,r,o,p,g){return Yl(g),Hm(p),qS(e,r,o,p,g,"max")},t.className="MaxPooling1D",t}(sk);F.m7h.registerClass(ak);var lk=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.poolingFunction=function(e,r,o,p,g){return Yl(g),Hm(p),qS(e,r,o,p,g,"avg")},t.className="AveragePooling1D",t}(sk);F.m7h.registerClass(lk);var uk=function(n){function t(e){var r=this;if(null==e.poolSize&&(e.poolSize=[2,2]),(r=n.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Ve("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+e.strides.length+".");r.strides=e.strides}else r.strides=[e.strides,e.strides];return r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Yl(r.dataFormat),Hm(r.padding),r.inputSpec=[new Na({ndim:4})],r}return gt(t,n),t.prototype.computeOutputShape=function(e){e=zi(e);var r="channelsFirst"===this.dataFormat?e[2]:e[1],o="channelsFirst"===this.dataFormat?e[3]:e[2];return r=Xb(r,this.poolSize[0],this.padding,this.strides[0]),o=Xb(o,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],r,o]:[e[0],r,o,e[3]]},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return o.invokeCallHook(e,r),o.poolingFunction(Hr(e),o.poolSize,o.strides,o.padding,o.dataFormat)})},t.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t}(Qr),ck=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.poolingFunction=function(e,r,o,p,g){return Yl(g),Hm(p),qS(e,r,o,p,g,"max")},t.className="MaxPooling2D",t}(uk);F.m7h.registerClass(ck);var dk=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.poolingFunction=function(e,r,o,p,g){return Yl(g),Hm(p),qS(e,r,o,p,g,"avg")},t.className="AveragePooling2D",t}(uk);F.m7h.registerClass(dk);var hk=function(n){function t(e){var r=n.call(this,e)||this;return r.inputSpec=[new Na({ndim:3})],r}return gt(t,n),t.prototype.computeOutputShape=function(e){return[e[0],e[2]]},t.prototype.call=function(e,r){throw new Dn},t}(Qr),pk=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.call=function(e,r){return(0,F.lub)(function(){var o=Hr(e);return(0,F.J69)(o,1)})},t.className="GlobalAveragePooling1D",t}(hk);F.m7h.registerClass(pk);var fk=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.call=function(e,r){return(0,F.lub)(function(){var o=Hr(e);return(0,F.Fp7)(o,1)})},t.className="GlobalMaxPooling1D",t}(hk);F.m7h.registerClass(fk);var mk=function(n){function t(e){var r=n.call(this,e)||this;return r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Yl(r.dataFormat),r.inputSpec=[new Na({ndim:4})],r}return gt(t,n),t.prototype.computeOutputShape=function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]},t.prototype.call=function(e,r){throw new Dn},t.prototype.getConfig=function(){var e={dataFormat:this.dataFormat},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t}(Qr),gk=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p=Hr(e);return(0,F.J69)(p,"channelsLast"===o.dataFormat?[1,2]:[2,3])})},t.className="GlobalAveragePooling2D",t}(mk);F.m7h.registerClass(gk);var _k=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p=Hr(e);return(0,F.Fp7)(p,"channelsLast"===o.dataFormat?[1,2]:[2,3])})},t.className="GlobalMaxPooling2D",t}(mk);function yk(n,t,e,r){if(Array.isArray(n)){if(null!=t||null!=e)throw new Ve("When inputs is an array, neither initialState or constants should be provided");null!=r&&(e=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(t=n.slice(1,n.length)),n=n[0]}function o(p){return null==p||Array.isArray(p)?p:[p]}return{inputs:n,initialState:t=o(t),constants:e=o(e)}}function vk(n,t,e,r,o,p,g,b){void 0===r&&(r=!1),void 0===g&&(g=!1),void 0===b&&(b=!1);var I=t.shape.length;if(I<3)throw new Ve("Input should be at least 3D, but is "+I+"D.");var z,G,te=[1,0].concat(zd(2,I));if(t=(0,F.p4s)(t,te),null!=o)throw new Dn("The rnn() function of the deeplearn.js backend does not support masking yet.");if(null!=p)throw new Dn("The rnn() functoin of the deeplearn.js backend does not support constants yet.");g&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r&&(t=(0,F.GYS)(t,0));for(var he=e,_e=t.shape[0],ye=function(Re){var Je=Wm(t,Re,1);Je=Je.reshape(Je.shape.slice(1));var et=(0,F.lub)(function(){return n(Je,he)});if(G=et[0],b)if(0===Re)z=G.expandDims(1);else{var Xe=(0,F.zoF)([z,G.expandDims(1)],1);z.dispose(),z=Xe}he=et[1]},ge=0;ge<_e;++ge)ye(ge);return[G,z,he]}F.m7h.registerClass(_k);var cy=function(n){function t(e){var r,o=n.call(this,e)||this;if(null==e.cell)throw new Ve("cell property is missing for the constructor of RNN.");if(null==(r=Array.isArray(e.cell)?new ZA({cells:e.cell}):e.cell).stateSize)throw new Ve("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return o.cell=r,o.returnSequences=null!=e.returnSequences&&e.returnSequences,o.returnState=null!=e.returnState&&e.returnState,o.goBackwards=null!=e.goBackwards&&e.goBackwards,o._stateful=null!=e.stateful&&e.stateful,o.unroll=null!=e.unroll&&e.unroll,o.supportsMasking=!0,o.inputSpec=[new Na({ndim:3})],o.stateSpec=null,o.states=null,o.numConstants=null,o.keptStates=[],o}return gt(t,n),t.prototype.getStates=function(){return null==this.states?zd(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(e){return null}):this.states},t.prototype.setStates=function(e){this.states=e},t.prototype.computeOutputShape=function(e){DA(e)&&(e=e[0]);var r=this.cell.stateSize;Array.isArray(r)||(r=[r]);var o,p=r[0];if(o=this.returnSequences?[e[0],e[1],p]:[e[0],p],this.returnState){for(var g=[],b=0,I=r;b<I.length;b++)g.push([e[0],I[b]]);return[o].concat(g)}return o},t.prototype.computeMask=function(e,r){throw new Dn("computeMask has not been implemented for RNN yet")},t.prototype.build=function(e){if(null!=this.numConstants)throw new Dn("Constants support is not implemented in RNN yet.");DA(e)&&(e=e[0]),this.inputSpec[0]=new Na({shape:[this.stateful?e[0]:null,null,e[e.length-1]]});var p,g=[e[0]].concat(e.slice(2));if(this.cell.build(g),p=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!F.D5U.arraysEqual(this.stateSpec.map(function(b){return b.shape[b.shape.length-1]}),p))throw new Ve("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=p.map(function(b){return new Na({shape:[null,b]})});this.stateful&&this.resetStates()},t.prototype.resetStates=function(e,r){var o=this;void 0===r&&(r=!1),(0,F.lub)(function(){if(!o.stateful)throw new ny("Cannot call resetStates() on an RNN Layer that is not stateful.");var p=o.inputSpec[0].shape[0];if(null==p)throw new Ve("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==o.states)o.states=Array.isArray(o.cell.stateSize)?o.cell.stateSize.map(function(G){return(0,F.lls)([p,G])}):[(0,F.lls)([p,o.cell.stateSize])];else if(null==e)(0,F.B90)(o.states),null!=o.keptStates&&((0,F.B90)(o.keptStates),o.keptStates=[]),Array.isArray(o.cell.stateSize)?o.states=o.cell.stateSize.map(function(G){return(0,F.lls)([p,G])}):o.states[0]=(0,F.lls)([p,o.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==o.states.length)throw new Ve("Layer "+o.name+" expects "+o.states.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);!0===r?o.keptStates.push(o.states.slice()):(0,F.B90)(o.states);for(var g=0;g<o.states.length;++g){var b=e[g],I=Array.isArray(o.cell.stateSize)?o.cell.stateSize[g]:o.cell.stateSize,z=[p,I];if(!F.D5U.arraysEqual(b.shape,z))throw new Ve("State "+g+" is incompatible with layer "+o.name+": expected shape="+z+", received shape="+b.shape);o.states[g]=b}}o.states.forEach(function(G){return(0,F.CnY)(G)})})},t.prototype.apply=function(e,r){var o=null==r?null:r.initialState,p=null==r?null:r.constants;null==r&&(r={});var g=yk(e,o,p,this.numConstants);e=g.inputs,p=g.constants;var b=[],I=[];if(null!=(o=g.initialState)){r.initialState=o,b=b.concat(o),this.stateSpec=[];for(var z=0,G=o;z<G.length;z++)this.stateSpec.push(new Na({shape:G[z].shape}));I=I.concat(this.stateSpec)}if(null!=p&&(r.constants=p,b=b.concat(p),this.numConstants=p.length),b[0]instanceof Af){var he=[e].concat(b),_e=this.inputSpec.concat(I),ye=this.inputSpec;this.inputSpec=_e;var ge=n.prototype.apply.call(this,he,r);return this.inputSpec=ye,ge}return n.prototype.apply.call(this,e,r)},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p=null==r?null:r.mask,g=null==r?null:r.training,b=null==r?null:r.initialState;if(e=Hr(e),null==b&&(b=o.stateful?o.states:o.getInitialState(e)),null!=p)throw new Dn("Masking is not implemented for RNN yet");var I=Array.isArray(o.cell.stateSize)?o.cell.stateSize.length:1;if(b.length!==I)throw new Ve("RNN Layer has "+I+" state(s) but was passed "+b.length+" initial state(s).");o.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var z={training:g},G=vk(function(ge,Re){var Je=o.cell.call([ge].concat(Re),z);return[Je[0],Je.slice(1)]},e,b,o.goBackwards,null,null,o.unroll,o.returnSequences),te=G[0],he=G[1],_e=G[2];o.stateful&&o.resetStates(_e,g);var ye=o.returnSequences?he:te;return o.returnState?[ye].concat(_e):ye})},t.prototype.getInitialState=function(e){var r=this;return(0,F.lub)(function(){var o=(0,F.lls)(e.shape);return o=Hx(o=(0,F.Smz)(o,[1,2])),Array.isArray(r.cell.stateSize)?r.cell.stateSize.map(function(p){return p>1?vA(o,[1,p]):o}):r.cell.stateSize>1?[vA(o,[1,r.cell.stateSize])]:[o]})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);var r=this.cell.getConfig();e.cell={className:this.cell.getClassName(),config:r};var o=n.prototype.getConfig.call(this);return Object.assign(e,o),e},t.className="RNN",t}(Qr);F.m7h.registerClass(cy);var Zx=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t}(Qr),GA=function(n){function t(e){var r=n.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,r.activation=qm(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Co(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Co(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Co(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=so(e.kernelRegularizer),r.recurrentRegularizer=so(e.recurrentRegularizer),r.biasRegularizer=so(e.biasRegularizer),r.kernelConstraint=cs(e.kernelConstraint),r.recurrentConstraint=cs(e.recurrentConstraint),r.biasConstraint=cs(e.biasConstraint),r.dropout=qb([1,$m([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qb([1,$m([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return gt(t,n),t.prototype.build=function(e){e=zi(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){if(2!==e.length)throw new Ve("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var p=e[1];e=e[0];var g,b=null!=r.training&&r.training;0<o.dropout&&o.dropout<1&&null==o.dropoutMask&&(o.dropoutMask=Qb(function(){return(0,F.JpU)(e)},o.dropout,b)),0<o.recurrentDropout&&o.recurrentDropout<1&&null==o.recurrentDropoutMask&&(o.recurrentDropoutMask=Qb(function(){return(0,F.JpU)(p)},o.recurrentDropout,b));var I=o.dropoutMask,z=o.recurrentDropoutMask;g=Gm(null!=I?(0,F.dC7)(e,I):e,o.kernel.read()),null!=o.bias&&(g=Tf(g,o.bias.read())),null!=z&&(p=(0,F.dC7)(p,z));var G=(0,F.IHx)(g,Gm(p,o.recurrentKernel.read()));return null!=o.activation&&(G=o.activation.apply(G)),[G,G]})},t.prototype.getConfig=function(){var e={units:this.units,activation:zu(this.activation),useBias:this.useBias,kernelInitializer:qr(this.kernelInitializer),recurrentInitializer:qr(this.recurrentInitializer),biasInitializer:qr(this.biasInitializer),kernelRegularizer:gr(this.kernelRegularizer),recurrentRegularizer:gr(this.recurrentRegularizer),biasRegularizer:gr(this.biasRegularizer),activityRegularizer:gr(this.activityRegularizer),kernelConstraint:di(this.kernelConstraint),recurrentConstraint:di(this.recurrentConstraint),biasConstraint:di(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="SimpleRNNCell",t}(Zx);F.m7h.registerClass(GA);var bk=function(n){function t(e){return e.cell=new GA(e),n.call(this,e)||this}return gt(t,n),t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return null!=o.cell.dropoutMask&&((0,F.B90)(o.cell.dropoutMask),o.cell.dropoutMask=null),null!=o.cell.recurrentDropoutMask&&((0,F.B90)(o.cell.recurrentDropoutMask),o.cell.recurrentDropoutMask=null),n.prototype.call.call(o,e,{mask:null==r?null:r.mask,training:null==r?null:r.training,initialState:null==r?null:r.initialState})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var e={units:this.units,activation:zu(this.activation),useBias:this.useBias,kernelInitializer:qr(this.kernelInitializer),recurrentInitializer:qr(this.recurrentInitializer),biasInitializer:qr(this.biasInitializer),kernelRegularizer:gr(this.kernelRegularizer),recurrentRegularizer:gr(this.recurrentRegularizer),biasRegularizer:gr(this.biasRegularizer),activityRegularizer:gr(this.activityRegularizer),kernelConstraint:di(this.kernelConstraint),recurrentConstraint:di(this.recurrentConstraint),biasConstraint:di(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},r=n.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},t.className="SimpleRNN",t}(cy);F.m7h.registerClass(bk);var qA=function(n){function t(e){var r=n.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,r.activation=qm(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=qm(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Co(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Co(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Co(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=so(e.kernelRegularizer),r.recurrentRegularizer=so(e.recurrentRegularizer),r.biasRegularizer=so(e.biasRegularizer),r.kernelConstraint=cs(e.kernelConstraint),r.recurrentConstraint=cs(e.recurrentConstraint),r.biasConstraint=cs(e.biasConstraint),r.dropout=qb([1,$m([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qb([1,$m([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return gt(t,n),t.prototype.build=function(e){var r=(e=zi(e))[e.length-1];this.kernel=this.addWeight("kernel",[r,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){if(2!==e.length)throw new Ve("GRUCell expects 2 input Tensors (inputs, h, c), got "+e.length+".");var p=null!=r.training&&r.training,g=e[1];e=e[0],0<o.dropout&&o.dropout<1&&null==o.dropoutMask&&(o.dropoutMask=Qb(function(){return(0,F.JpU)(e)},o.dropout,p,3)),0<o.recurrentDropout&&o.recurrentDropout<1&&null==o.recurrentDropoutMask&&(o.recurrentDropoutMask=Qb(function(){return(0,F.JpU)(g)},o.recurrentDropout,p,3));var b,I,z,te=o.recurrentDropoutMask;0<o.dropout&&o.dropout<1&&(e=(0,F.dC7)(e,o.dropoutMask[0]));var he=Gm(e,o.kernel.read());o.useBias&&(he=Tf(he,o.bias.read())),0<o.recurrentDropout&&o.recurrentDropout<1&&(g=(0,F.dC7)(g,te[0]));var _e=o.recurrentKernel.read(),ye=(0,F.Vl2)(_e,[2*o.units,o.units],_e.rank-1),Re=ye[1],Je=Gm(g,ye[0]),et=(0,F.Vl2)(he,3,he.rank-1),Xe=et[0],Qe=et[1],_t=et[2],Ot=(0,F.Vl2)(Je,2,Je.rank-1),cn=Ot[1];b=o.recurrentActivation.apply((0,F.IHx)(Xe,Ot[0])),I=o.recurrentActivation.apply((0,F.IHx)(Qe,cn));var Jn=Gm((0,F.dC7)(I,g),Re);z=o.activation.apply((0,F.IHx)(_t,Jn));var zn=(0,F.IHx)((0,F.dC7)(b,g),(0,F.dC7)((0,F.IHx)(In(1),(0,F.W76)(b)),z));return[zn,zn]})},t.prototype.getConfig=function(){var e={units:this.units,activation:zu(this.activation),recurrentActivation:zu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:qr(this.kernelInitializer),recurrentInitializer:qr(this.recurrentInitializer),biasInitializer:qr(this.biasInitializer),kernelRegularizer:gr(this.kernelRegularizer),recurrentRegularizer:gr(this.recurrentRegularizer),biasRegularizer:gr(this.biasRegularizer),activityRegularizer:gr(this.activityRegularizer),kernelConstraint:di(this.kernelConstraint),recurrentConstraint:di(this.recurrentConstraint),biasConstraint:di(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="GRUCell",t}(Zx);F.m7h.registerClass(qA);var wk=function(n){function t(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new qA(e),n.call(this,e)||this}return gt(t,n),t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return null!=o.cell.dropoutMask&&((0,F.B90)(o.cell.dropoutMask),o.cell.dropoutMask=null),null!=o.cell.recurrentDropoutMask&&((0,F.B90)(o.cell.recurrentDropoutMask),o.cell.recurrentDropoutMask=null),n.prototype.call.call(o,e,{mask:null==r?null:r.mask,training:null==r?null:r.training,initialState:null==r?null:r.initialState})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var e={units:this.units,activation:zu(this.activation),recurrentActivation:zu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:qr(this.kernelInitializer),recurrentInitializer:qr(this.recurrentInitializer),biasInitializer:qr(this.biasInitializer),kernelRegularizer:gr(this.kernelRegularizer),recurrentRegularizer:gr(this.recurrentRegularizer),biasRegularizer:gr(this.biasRegularizer),activityRegularizer:gr(this.activityRegularizer),kernelConstraint:di(this.kernelConstraint),recurrentConstraint:di(this.recurrentConstraint),biasConstraint:di(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=n.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},t.fromConfig=function(e,r){return 0===r.implmentation&&(r.implementation=1),new e(r)},t.className="GRU",t}(cy);F.m7h.registerClass(wk);var KA=function(n){function t(e){var r=n.call(this,e)||this;return r.DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,r.activation=qm(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=qm(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Co(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Co(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Co(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=so(e.kernelRegularizer),r.recurrentRegularizer=so(e.recurrentRegularizer),r.biasRegularizer=so(e.biasRegularizer),r.kernelConstraint=cs(e.kernelConstraint),r.recurrentConstraint=cs(e.recurrentConstraint),r.biasConstraint=cs(e.biasConstraint),r.dropout=qb([1,$m([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qb([1,$m([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return gt(t,n),t.prototype.build=function(e){var r,o,p=(e=zi(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[p,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var g=this.biasInitializer,b=this.units;r=new((o=function(I){function z(){return null!==I&&I.apply(this,arguments)||this}return gt(z,I),z.prototype.apply=function(G,te){var he=g.apply([b]),_e=(new wA).apply([b]),ye=g.apply([2*b]);return yA(yA(he,_e),ye)},z}(jd)).className="CustomInit",o)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){var p=null!=r.training&&r.training;if(3!==e.length)throw new Ve("LSTMCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var g=e[1],b=e[2];e=e[0],0<o.dropout&&o.dropout<1&&null==o.dropoutMask&&(o.dropoutMask=Qb(function(){return(0,F.JpU)(e)},o.dropout,p,4)),0<o.recurrentDropout&&o.recurrentDropout<1&&null==o.recurrentDropoutMask&&(o.recurrentDropoutMask=Qb(function(){return(0,F.JpU)(g)},o.recurrentDropout,p,4));var I,z,G,te,_e=o.recurrentDropoutMask;0<o.dropout&&o.dropout<1&&(e=(0,F.dC7)(e,o.dropoutMask[0]));var ye=Gm(e,o.kernel.read());0<o.recurrentDropout&&o.recurrentDropout<1&&(g=(0,F.dC7)(g,_e[0])),ye=(0,F.IHx)(ye,Gm(g,o.recurrentKernel.read())),o.useBias&&(ye=Tf(ye,o.bias.read()));var ge=(0,F.Vl2)(ye,4,ye.rank-1),Je=ge[1],et=ge[2],Xe=ge[3];I=o.recurrentActivation.apply(ge[0]),z=o.recurrentActivation.apply(Je),G=(0,F.IHx)((0,F.dC7)(z,b),(0,F.dC7)(I,o.activation.apply(et))),te=o.recurrentActivation.apply(Xe);var Qe=(0,F.dC7)(te,o.activation.apply(G));return[Qe,Qe,G]})},t.prototype.getConfig=function(){var e={units:this.units,activation:zu(this.activation),recurrentActivation:zu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:qr(this.kernelInitializer),recurrentInitializer:qr(this.recurrentInitializer),biasInitializer:qr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:gr(this.kernelRegularizer),recurrentRegularizer:gr(this.recurrentRegularizer),biasRegularizer:gr(this.biasRegularizer),activityRegularizer:gr(this.activityRegularizer),kernelConstraint:di(this.kernelConstraint),recurrentConstraint:di(this.recurrentConstraint),biasConstraint:di(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.className="LSTMCell",t}(Zx);F.m7h.registerClass(KA);var xk=function(n){function t(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new KA(e),n.call(this,e)||this}return gt(t,n),t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return null!=o.cell.dropoutMask&&((0,F.B90)(o.cell.dropoutMask),o.cell.dropoutMask=null),null!=o.cell.recurrentDropoutMask&&((0,F.B90)(o.cell.recurrentDropoutMask),o.cell.recurrentDropoutMask=null),n.prototype.call.call(o,e,{mask:null==r?null:r.mask,training:null==r?null:r.training,initialState:null==r?null:r.initialState})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var e={units:this.units,activation:zu(this.activation),recurrentActivation:zu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:qr(this.kernelInitializer),recurrentInitializer:qr(this.recurrentInitializer),biasInitializer:qr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:gr(this.kernelRegularizer),recurrentRegularizer:gr(this.recurrentRegularizer),biasRegularizer:gr(this.biasRegularizer),activityRegularizer:gr(this.activityRegularizer),kernelConstraint:di(this.kernelConstraint),recurrentConstraint:di(this.recurrentConstraint),biasConstraint:di(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},r=n.prototype.getConfig.call(this);return delete r.cell,Object.assign(e,r),e},t.fromConfig=function(e,r){return 0===r.implmentation&&(r.implementation=1),new e(r)},t.className="LSTM",t}(cy);F.m7h.registerClass(xk);var ZA=function(n){function t(e){var r=n.call(this,e)||this;return r.cells=e.cells,r}return gt(t,n),Object.defineProperty(t.prototype,"stateSize",{get:function(){for(var e=[],r=0,o=this.cells.slice().reverse();r<o.length;r++){var p=o[r];Array.isArray(p.stateSize)?e.push.apply(e,p.stateSize):e.push(p.stateSize)}return e},enumerable:!0,configurable:!0}),t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){for(var p=e.slice(1),g=[],b=0,I=o.cells.slice().reverse();b<I.length;b++){var z=I[b];Array.isArray(z.stateSize)?g.push(p.splice(0,z.stateSize.length)):g.push(p.splice(0,1))}g.reverse();for(var G,te=[],he=0;he<o.cells.length;++he)z=o.cells[he],p=g[he],G=0===he?[e[0]].concat(p):[G[0]].concat(p),G=z.call(G,r),te.push(G.slice(1));p=[];for(var _e=0,ye=te.slice().reverse();_e<ye.length;_e++)p.push.apply(p,ye[_e]);return[G[0]].concat(p)})},t.prototype.build=function(e){var r;DA(e)&&(e=e[0]);for(var o=0,p=this.cells;o<p.length;o++){var g=p[o];g.build(e),r=Array.isArray(g.stateSize)?g.stateSize[0]:g.stateSize,e=[e[0],r]}this.built=!0},t.prototype.getConfig=function(){for(var e=[],r=0,o=this.cells;r<o.length;r++){var p=o[r];e.push({className:this.getClassName(),config:p.getConfig()})}var g={cells:e},b=n.prototype.getConfig.call(this);return Object.assign(g,b),g},t.fromConfig=function(e,r,o){void 0===o&&(o={});for(var p=[],g=0,b=r.cells;g<b.length;g++)p.push(Mf(b[g],o));return new e({cells:p})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var e=[],r=0,o=this.cells;r<o.length;r++)e.push.apply(e,o[r].trainableWeights);return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],r=0,o=this.cells;r<o.length;r++){var p=o[r];e.push.apply(e,p.nonTrainableWeights)}if(!this.trainable){for(var g=[],b=0,I=this.cells;b<I.length;b++)g.push.apply(g,(p=I[b]).trainableWeights);return g.concat(e)}return e},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){for(var e=[],r=0,o=this.cells;r<o.length;r++)e.push.apply(e,o[r].weights);return TA(e)},t.prototype.setWeights=function(e){for(var r=[],o=0,p=this.cells;o<p.length;o++)for(var g=p[o],I=e.splice(g.weights.length),z=0;z<g.weights.length;++z)r.push([g.weights[z],I[z]]);kS(r)},t.className="StackedRNNCells",t}(Zx);function Qb(n,t,e,r){function o(){return qP(n(),In(t))}if(void 0===e&&(e=null),void 0===r&&(r=1),r>1){for(var p=[],g=0;g<r;g++)p.push(bA(o,n,e));return p.forEach(function(b){return(0,F.CnY)(b)}),p}return(0,F.CnY)(bA(o,n,e))}F.m7h.registerClass(ZA);var Ek=function(n){function t(e){var r=n.call(this,e)||this;return r.layer=e.layer,r}return gt(t,n),t.prototype.build=function(e){this.built=!0},Object.defineProperty(t.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.layer.getWeights()},t.prototype.setWeights=function(e){this.layer.setWeights(e)},t.prototype.getConfig=function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.fromConfig=function(e,r,o){void 0===o&&(o={});var p=Mf(r.layer,o);delete r.layer;var g={layer:p};return Object.assign(g,r),new e(g)},t}(Qr),Ck=function(n){function t(e){var r=n.call(this,e)||this;return r.supportsMasking=!0,r}return gt(t,n),t.prototype.build=function(e){if((e=zi(e)).length<3)throw new Ve("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];var r=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(r),this.layer.built=!0),n.prototype.build.call(this,e)},t.prototype.computeOutputShape=function(e){var r=[(e=zi(e))[0]].concat(e.slice(2)),o=this.layer.computeOutputShape(r);return[o[0],e[1]].concat(o.slice(1))},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){return vk(function(p,g){return[Hr(o.layer.call(p,r)),[]]},e=Hr(e),[],!1,null,null,!1,!0)[1]})},t.className="TimeDistributed",t}(Ek);F.m7h.registerClass(Ck);var PU=["sum","mul","concat","ave"],Sk=function(n){function t(e){var r=n.call(this,e)||this,o=e.layer.getConfig();if(r.forwardLayer=Mf({className:e.layer.getClassName(),config:o}),o.goBackwards=!0!==o.goBackwards,r.backwardLayer=Mf({className:e.layer.getClassName(),config:o}),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,function RU(n){$b(PU,"BidirectionalMergeMode",n)}(e.mergeMode),r.mergeMode=e.mergeMode,e.weights)throw new Dn("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return gt(t,n),Object.defineProperty(t.prototype,"trainable",{get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},t.prototype.setWeights=function(e){var o=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,o)),this.backwardLayer.setWeights(e.slice(o))},t.prototype.computeOutputShape=function(e){var r,o,p,g=this.forwardLayer.computeOutputShape(e);return Array.isArray(g)&&Array.isArray(g[0])||(g=[g]),this.returnState&&(p=g.slice(1)),r=g[0],"concat"===this.mergeMode?(r[r.length-1]*=2,o=[r]):o=null==this.mergeMode?[r,r.slice()]:[r],this.returnState?null==this.mergeMode?o.concat(p).concat(p.slice()):[r].concat(p).concat(p.slice()):Zl(o)},t.prototype.apply=function(e,r){var o=null==r?null:r.initialState,p=null==r?null:r.constants;null==r&&(r={});var g=yk(e,o,p,this.numConstants);if(e=g.inputs,o=g.initialState,p=g.constants,Array.isArray(e)&&(o=e.slice(1),e=e[0]),(null==o||0===o.length)&&null==p)return n.prototype.apply.call(this,e,r);var b=[],I=[];if(null!=o){var z=o.length;if(z%2>0)throw new Ve("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");r.initialState=o,b.push.apply(b,o);var G=o.map(function(et){return new Na({shape:et.shape})});this.forwardLayer.stateSpec=G.slice(0,z/2),this.backwardLayer.stateSpec=G.slice(z/2),I.push.apply(I,G)}if(null!=p)throw new Dn("Support for constants in Bidirectional layers is not implemented yet.");for(var te=b[0]instanceof Af,he=0,_e=b;he<_e.length;he++)if(_e[he]instanceof Af!==te)throw new Ve("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(te){var ye=[e].concat(b),ge=this.inputSpec.concat(I),Re=this.inputSpec;this.inputSpec=ge;var Je=n.prototype.apply.call(this,ye,r);return this.inputSpec=Re,Je}return n.prototype.apply.call(this,e,r)},t.prototype.call=function(e,r){var o=this;return(0,F.lub)(function(){if(null!=r.mask)throw new Dn("The support for masking is not implemented for Bidirectional layers yet.");var p,g,b,I,z=r.initialState;if(null==z)p=o.forwardLayer.call(e,r),g=o.backwardLayer.call(e,r);else{var G=z.slice(0,z.length/2),te=z.slice(z.length/2);p=o.forwardLayer.call(e,Object.assign(r,{initialState:G})),g=o.backwardLayer.call(e,Object.assign(r,{initialState:te}))}return o.returnState&&(Array.isArray(p)&&(b=p.slice(1).concat(g.slice(1))),p=p[0],g=g[0]),o.returnSequences&&(g=(0,F.GYS)(g,1)),"concat"===o.mergeMode?I=$P([p,g]):"sum"===o.mergeMode?I=(0,F.IHx)(p,g):"ave"===o.mergeMode?I=(0,F.dC7)(In(.5),(0,F.IHx)(p,g)):"mul"===o.mergeMode?I=(0,F.dC7)(p,g):null==o.mergeMode&&(I=[p,g]),o.returnState?null==o.mergeMode?I.concat(b):[I].concat(b):I})},t.prototype.resetStates=function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},t.prototype.build=function(e){var r=this;Gb(this.forwardLayer.name,function(){r.forwardLayer.build(e)}),Gb(this.backwardLayer.name,function(){r.backwardLayer.build(e)}),this.built=!0},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var e={mergeMode:this.mergeMode},r=n.prototype.getConfig.call(this);return Object.assign(e,r),e},t.fromConfig=function(e,r){var o=Mf(r.layer);if(delete r.layer,null!=r.numConstants)throw new Dn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var p=r;return p.layer=o,new e(p)},t.className="Bidirectional",t}(Ek);function YA(n){return new lk(n)}function XA(n){return new dk(n)}function Dk(n){return new fk(n)}function Ik(n){return new _k(n)}function Tk(n){return new ak(n)}function Ak(n){return new ck(n)}F.m7h.registerClass(Sk);var Nz=Object.freeze({inputLayer:function kU(n){return new Kb(n)},elu:function FU(n){return new MR(n)},reLU:function LU(n){return new TR(n)},leakyReLU:function BU(n){return new AR(n)},softmax:function VU(n){return new OR(n)},thresholdedReLU:function UU(n){return new NR(n)},conv1d:function zU(n){return new VR(n)},conv2d:function jU(n){return new WA(n)},conv2dTranspose:function HU(n){return new LR(n)},separableConv2d:function $U(n){return new BR(n)},cropping2D:function WU(n){return new UR(n)},upSampling2d:function GU(n){return new zR(n)},depthwiseConv2d:function qU(n){return new jR(n)},activation:function KU(n){return new GR(n)},dense:function ZU(n){return new $R(n)},dropout:function YU(n){return new HR(n)},flatten:function XU(n){return new WR(n)},repeatVector:function QU(n){return new qR(n)},reshape:function JU(n){return new KR(n)},permute:function ez(n){return new ZR(n)},embedding:function tz(n){return new YR(n)},add:function nz(n){return new XR(n)},average:function rz(n){return new JR(n)},concatenate:function iz(n){return new nk(n)},maximum:function oz(n){return new ek(n)},minimum:function sz(n){return new tk(n)},multiply:function az(n){return new QR(n)},dot:function lz(n){return new rk(n)},batchNormalization:function uz(n){return new ik(n)},zeroPadding2d:function cz(n){return new ok(n)},averagePooling1d:YA,avgPool1d:function dz(n){return YA(n)},avgPooling1d:function hz(n){return YA(n)},averagePooling2d:XA,avgPool2d:function pz(n){return XA(n)},avgPooling2d:function fz(n){return XA(n)},globalAveragePooling1d:function mz(n){return new pk(n)},globalAveragePooling2d:function gz(n){return new gk(n)},globalMaxPooling1d:Dk,globalMaxPooling2d:Ik,maxPooling1d:Tk,maxPooling2d:Ak,gru:function _z(n){return new wk(n)},gruCell:function yz(n){return new qA(n)},lstm:function vz(n){return new xk(n)},lstmCell:function bz(n){return new KA(n)},simpleRNN:function wz(n){return new bk(n)},simpleRNNCell:function xz(n){return new GA(n)},rnn:function Ez(n){return new cy(n)},stackedRNNCells:function Cz(n){return new ZA(n)},bidirectional:function Sz(n){return new Sk(n)},timeDistributed:function Dz(n){return new Ck(n)},globalMaxPool1d:Dk,globalMaxPool2d:Ik,maxPool1d:Tk,maxPool2d:Ak,Layer:Qr,RNN:cy,RNNCell:Zx,input:DR}),Oz=Object.freeze({modelFromJSON:function oU(n,t){return Zn(this,void 0,void 0,function(){var e,r,o,p,g,b,I,z;return qn(this,function(he){switch(he.label){case 0:return"modelTopology"in n||(n={modelTopology:n}),null!=(e=n.modelTopology).model_config&&(e=e.model_config),r=jS(e),o=Mf(r,t),null==n.weightsManifest?[3,2]:[4,F.io.loadWeights(n.weightsManifest,n.pathPrefix,o.weights.map(function(_e){return _e.originalName}))];case 1:for(p=he.sent(),g={},b=0,I=o.weights;b<I.length;b++)g[(z=I[b]).originalName]=p[z.originalName];o.loadWeights(g,null,!0),he.label=2;case 2:return[2,o]}})})}}),qz=Object.freeze({binaryAccuracy:function Pz(n,t){return NA(n,t)},binaryCrossentropy:function Rz(n,t){return gR(n,t)},categoricalAccuracy:function kz(n,t){return OA(n,t)},categoricalCrossentropy:function Fz(n,t){return PA(n,t)},precision:function Lz(n,t){return mR(n,t)},recall:function Bz(n,t){return function S3(n,t){return(0,F.lub)(function(){var e=In(0),r=fR(n,t),o=function E3(n,t){return(0,F.lub)(function(){var e=In(1),r=In(0);return(0,F.HvI)(n.equal(e),t.equal(r)).sum().cast("float32")})}(n,t),p=r.add(o);return(0,F.arb)((0,F.pjt)(p,e),r.div(p),e).cast("float32")})}(n,t)},cosineProximity:function Vz(n,t){return AA(n,t)},meanAbsoluteError:function Uz(n,t){return BS(n,t)},meanAbsolutePercentageError:function zz(n,t){return Yb(n,t)},MAPE:function jz(n,t){return Yb(n,t)},mape:function Hz(n,t){return Yb(n,t)},meanSquaredError:function $z(n,t){return sy(n,t)},MSE:function Wz(n,t){return sy(n,t)},mse:function Gz(n,t){return sy(n,t)}}),Xz=Object.freeze({l1l2:function Kz(n){return new $S(n)},l1:function Zz(n){return function xU(n){return new $S({l1:null!=n?n.l1:null,l2:0})}(n)},l2:function Yz(n){return function EU(n){return new $S({l2:null!=n?n.l2:null,l1:0})}(n)}}),Qz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.model=null,e}return gt(t,n),t.prototype.setModel=function(e){if(!(e instanceof ly))throw new Error("model must be a Model, not some other Container");this.model=e},t}(Zb),Yx=S(2298),ej={"tfjs-core":F.jTM,"tfjs-layers":kA,"tfjs-converter":Yx.gJ,tfjs:"0.13.5"};function Jb(n,t,e,r){return new(e||(e=Promise))(function(o,p){function g(z){try{I(r.next(z))}catch(G){p(G)}}function b(z){try{I(r.throw(z))}catch(G){p(G)}}function I(z){z.done?o(z.value):new e(function(G){G(z.value)}).then(g,b)}I((r=r.apply(n,t||[])).next())})}function e0(n,t){var e,r,o,p,g={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return p={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function b(I){return function(z){return function(G){if(e)throw new TypeError("Generator is already executing.");for(;g;)try{if(e=1,r&&(o=2&G[0]?r.return:G[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,G[1])).done)return o;switch(r=0,o&&(G=[2&G[0],o.value]),G[0]){case 0:case 1:o=G;break;case 4:return g.label++,{value:G[1],done:!1};case 5:g.label++,r=G[1],G=[0];continue;case 7:G=g.ops.pop(),g.trys.pop();continue;default:if(!(o=(o=g.trys).length>0&&o[o.length-1])&&(6===G[0]||2===G[0])){g=0;continue}if(3===G[0]&&(!o||G[1]>o[0]&&G[1]<o[3])){g.label=G[1];break}if(6===G[0]&&g.label<o[1]){g.label=o[1],o=G;break}if(o&&g.label<o[2]){g.label=o[2],g.ops.push(G);break}o[2]&&g.ops.pop(),g.trys.pop();continue}G=t.call(n,g)}catch(te){G=[6,te],r=0}finally{e=o=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([I,z])}}}var nj={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}},Mk="https://storage.googleapis.com/tfjs-models/savedmodel/",ij=function(){function n(t){this.modelPath=""+Mk+this.getPrefix(t)+"/tensorflowjs_model.pb",this.weightPath=""+Mk+this.getPrefix(t)+"/weights_manifest.json"}return n.prototype.getPrefix=function(t){return"lite_mobilenet_v2"===t?"ssd"+t:"ssd_"+t},n.prototype.load=function(){return Jb(this,void 0,void 0,function(){var t,e,r=this;return e0(this,function(o){switch(o.label){case 0:return t=this,[4,(0,Yx.xG)(this.modelPath,this.weightPath)];case 1:return t.model=o.sent(),[4,this.model.executeAsync((0,F.lls)([1,300,300,3]))];case 2:return(e=o.sent()).map(function(p){return Jb(r,void 0,void 0,function(){return e0(this,function(g){switch(g.label){case 0:return[4,p.data()];case 1:return[2,g.sent()]}})})}),e.map(function(p){return Jb(r,void 0,void 0,function(){return e0(this,function(g){return[2,p.dispose()]})})}),[2]}})})},n.prototype.infer=function(t,e){return Jb(this,void 0,void 0,function(){var r,o,p,g,b,I,z,G,te,he,_e,ye;return e0(this,function(ge){switch(ge.label){case 0:return r=(0,F.lub)(function(){return t instanceof F.esB||(t=(0,F.nXo)(t)),t.expandDims(0)}),o=r.shape[1],p=r.shape[2],[4,this.model.executeAsync(r)];case 1:return g=ge.sent(),b=g[0].dataSync(),I=g[1].dataSync(),r.dispose(),(0,F.B90)(g),z=function tj(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,p=e.call(n),g=[];try{for(;(void 0===t||t-- >0)&&!(r=p.next()).done;)g.push(r.value)}catch(b){o={error:b}}finally{try{r&&!r.done&&(e=p.return)&&e.call(p)}finally{if(o)throw o.error}}return g}(this.calculateMaxScores(b,g[0].shape[1],g[0].shape[2]),2),G=z[0],te=z[1],he=(0,F.N_N)(),(0,F.CQI)("cpu"),_e=(0,F.lub)(function(){var Re=(0,F.odF)(I,[g[1].shape[1],g[1].shape[3]]);return F.BHj.nonMaxSuppression(Re,G,e,.5,.5)}),ye=_e.dataSync(),_e.dispose(),(0,F.CQI)(he),[2,this.buildDetectedObjects(p,o,I,G,ye,te)]}})})},n.prototype.buildDetectedObjects=function(t,e,r,o,p,g){for(var b=p.length,I=[],z=0;z<b;z++){for(var G=[],te=0;te<4;te++)G[te]=r[4*p[z]+te];var he=G[0]*e,_e=G[1]*t,ye=G[2]*e,ge=G[3]*t;G[0]=_e,G[1]=he,G[2]=ge-_e,G[3]=ye-he,I.push({bbox:G,class:nj[g[p[z]]+1].displayName,score:o[p[z]]})}return I},n.prototype.calculateMaxScores=function(t,e,r){for(var o=[],p=[],g=0;g<e;g++){for(var b=Number.MIN_VALUE,I=-1,z=0;z<r;z++)t[g*r+z]>b&&(b=t[g*r+z],I=z);o[g]=b,p[g]=I}return[o,p]},n.prototype.detect=function(t,e){return void 0===e&&(e=20),Jb(this,void 0,void 0,function(){return e0(this,function(r){return[2,this.infer(t,e)]})})},n.prototype.dispose=function(){this.model&&this.model.dispose()},n}();let oj=(()=>{class n{constructor(){this.title="TF-ObjectDetection",this.answerSubmitted=new c.vpe,this.recognizedCount=0,this.detectFrame=(e,r)=>{r.detect(e).then(o=>{o.forEach(p=>this.handlePrediction(p)),this.renderPredictions(o),requestAnimationFrame(()=>{this.detectFrame(e,r)})})},this.renderPredictions=e=>{const r=document.getElementById("canvas");if(!r)return;const o=r.getContext("2d");r.width=300,r.height=300,o.clearRect(0,0,o.canvas.width,o.canvas.height);const p="16px sans-serif";o.font=p,o.textBaseline="top",o.drawImage(this.video,0,0,300,300),e.forEach(g=>{const b=g.bbox[0],I=g.bbox[1],z=g.bbox[2],G=g.bbox[3];o.strokeStyle="#00FFFF",o.lineWidth=2,o.strokeRect(b,I,z,G),o.fillStyle="#00FFFF";const te=o.measureText(g.class).width,he=parseInt(p,10);o.fillRect(b,I,te+4,he+4)}),e.forEach(g=>{const b=g.bbox[0],I=g.bbox[1];o.fillStyle="#000000",o.fillText(g.class,b,I)})}}ngOnInit(){this.webcam_init(),this.predictWithCocoModel()}predictWithCocoModel(){var e=this;return(0,Kl.Z)(function*(){const r=yield function rj(n){return void 0===n&&(n="lite_mobilenet_v2"),Jb(this,void 0,void 0,function(){var t;return e0(this,function(e){switch(e.label){case 0:if(null==P)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(-1===["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(n))throw new Error("ObjectDetection constructed with invalid base model "+n+". Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.");return[4,(t=new ij(n)).load()];case 1:return e.sent(),[2,t]}})})}("lite_mobilenet_v2");e.detectFrame(e.video,r),console.log("model loaded")})()}webcam_init(){this.video=document.getElementById("vid"),navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then(e=>{this.video.srcObject=e,this.video.onloadedmetadata=()=>{this.video.play()}})}handlePrediction(e){this.question&&this.question.answerOptions.map(o=>o.toLowerCase()).includes(e.class.toLowerCase())&&(this.recognizedCount++,this.recognizedCount>100&&this.answerSubmitted.emit(this.question.answerOptions))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-object-recognition"]],inputs:{question:"question"},outputs:{answerSubmitted:"answerSubmitted"},decls:6,vars:2,consts:[[2,"text-align","center"],["hidden","","id","vid","width","300","height","300"],["id","canvas"],["mode","determinate",3,"value"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0)(1,"h1"),c._uU(2),c.qZA(),c._UZ(3,"video",1)(4,"canvas",2)(5,"mat-progress-bar",3),c.qZA()),2&e&&(c.xp6(2),c.Oqu(null==r.question?null:r.question.question),c.xp6(3),c.Q6J("value",r.recognizedCount))},dependencies:[XO],styles:["mat-progress-bar[_ngcontent-%COMP%]{height:2rem}"]}),n})(),sj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-quiz-summary"]],inputs:{summary:"summary"},decls:28,vars:4,consts:[[1,"container","mt-5"],[1,"text-center","mb-5"],[1,"card"],[1,"card-header"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"badge","bg-primary","rounded-pill"],[1,"badge","bg-success","rounded-pill"],[1,"badge","bg-info","text-dark","rounded-pill"]],template:function(e,r){if(1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"h1"),c._uU(3,"Quiz Summary"),c.qZA()(),c.TgZ(4,"div",2)(5,"div",3),c._uU(6," Score Details "),c.qZA(),c.TgZ(7,"ul",4)(8,"li",5)(9,"strong"),c._uU(10,"Total Score:"),c.qZA(),c.TgZ(11,"span",6),c._uU(12),c.qZA()(),c.TgZ(13,"li",5)(14,"strong"),c._uU(15,"Correct Answers:"),c.qZA(),c.TgZ(16,"span",7),c._uU(17),c.qZA()(),c.TgZ(18,"li",5)(19,"strong"),c._uU(20,"Total Time:"),c.qZA(),c.TgZ(21,"span",8),c._uU(22),c.qZA()(),c.TgZ(23,"li",5)(24,"strong"),c._uU(25,"Id"),c.qZA(),c.TgZ(26,"span",8),c._uU(27),c.qZA()()()()()),2&e){let o;c.xp6(12),c.Oqu(null==r.summary?null:r.summary.score),c.xp6(5),c.Oqu(null==r.summary?null:r.summary.correctQuestions),c.xp6(5),c.Oqu((null!==(o=null==r.summary?null:r.summary.timeInMillis)&&void 0!==o?o:0)/1e3),c.xp6(5),c.Oqu(null==r.summary?null:r.summary.contestantId)}}}),n})();function aj(n,t){1&n&&c._UZ(0,"div",10),2&n&&c.Q6J("ngClass","filled-"+t.$implicit.filled)}function lj(n,t){if(1&n&&(c.TgZ(0,"div",8),c.YNc(1,aj,1,1,"div",9),c.qZA()),2&n){const e=t.$implicit;c.xp6(1),c.Q6J("ngForOf",e)}}let uj=(()=>{class n{constructor(){this.stagingType=0,this.score=0,this.lines=0,this.level=1,this.activeBlock={type:-1,coords:[[{x:0,y:0}]]},this.pause=!1,this.timeout=1e3,this.gameScreen=[],this.targetScore=0,this.answerSubmitted=new c.vpe}ngOnInit(){this.main(),this.targetScore=Number(this.question?.answerOptions[0]??0)}main(){this.initializeGameScreen(),this.runGameTimer()}runGameTimer(){setTimeout(()=>{console.log("gameloop",this.timeout),this.gameLoop(),this.runGameTimer()},this.timeout);let e=250;for(let r=1;r<=this.level;r++)e*=.9;this.timeout=this.timeout>e?e:this.timeout}clearStagingScreen(){}setStagingScreen(){}renderPreviewScreen(){}gameLoop(){this.pause||(0===this.stagingType&&(this.clearStagingScreen(),this.stagingType=Math.floor(7*Math.random())+1,console.log(this.stagingType),this.setStagingScreen(),this.renderPreviewScreen()),-1===this.activeBlock.type&&(this.scoreForCompleteRows(),this.initiateNewGameBlock(),this.stagingType=0),this.moveDown(),this.renderScreen())}handleArrowKeys(e){if(!this.pause&&-1!=this.activeBlock.type)switch(e){case"ArrowLeft":this.moveSideways(-1),this.renderScreen();break;case"ArrowRight":this.moveSideways(1),this.renderScreen();break;case"ArrowUp":this.rotate(),this.renderScreen();break;case"ArrowDown":this.moveDown(),this.renderScreen()}}getLevel(){let e=1;return this.lines>10&&(e=Math.round(this.lines/10)+1),e}setScoreAndLevel(){}scoreForCompleteRows(){const e=document.querySelector(".tetris-view");let r=0;if(this.gameScreen.forEach((o,p)=>{if(o.every(b=>b.filled>0)){r++;const b=this.getNewRow(10);o[0].div.parentNode.parentNode.removeChild(o[0].div.parentElement),this.gameScreen.splice(p,1),this.gameScreen.splice(0,0,b.blocks),e.insertBefore(b.rowDiv,e.children[0])}}),r>0){switch(this.level=this.getLevel(),r){case 1:this.score+=100*this.level;break;case 2:this.score+=200*this.level;break;case 3:this.score+=500*this.level;break;case 4:this.score+=800*this.level}this.lines+=r,this.setScoreAndLevel();let o=this.question?.answerOptions[0];if(o){const p=Number.parseInt(o);this.score>=p&&this.answerSubmitted.emit([o])}}}renderScreen(){this.gameScreen.forEach(e=>{e.forEach(r=>{r.div.className="tetris-block filled-"+r.filled})})}initializeGameScreen(){const e=document.querySelector(".tetris-view");Array.from(Array(20).keys()).forEach((r,o)=>{const{rowDiv:p,blocks:g}=this.getNewRow(10);e.appendChild(p),this.gameScreen.push(g)})}getNewRow(e){const r=this.createDivWithClass("tetris-row"),o=[];return Array.from(Array(e).keys()).forEach((p,g)=>{const b=this.createDivWithClass("tetris-block");r.appendChild(b),o.push({filled:0,div:b})}),{rowDiv:r,blocks:o}}createDivWithClass(e){const r=document.createElement("div");return r.className=e,r}moveSideways(e){const r=this.activeBlock.coords;this.canMoveSideways(r,e)&&this.activeBlockIsNotReset()&&r.forEach(o=>{o.forEach(p=>{p.y>=0?(this.blocksOnPos(p)<=1&&(this.gameScreen[p.y][p.x].filled=0),p.x+=e,this.gameScreen[p.y][p.x].filled=this.activeBlock.type):p.x+=e})})}canMoveSideways(e,r){let o=!0;e:for(let p of e)for(let g of p){const b=g.x+r;if(b>9||b<0){o=!1;break e}if(g.y>=0){const I=this.gameScreen[g.y][b],z=this.anyMatch(G=>G.x===b&&G.y===g.y);if(I.filled>0&&!z){o=!1;break e}}}return o}activeBlockIsNotReset(){return-1!==this.activeBlock.type}anyMatch(e){return this.activeBlock.coords.some(r=>r.some(o=>e(o)))}getRotateCoords(e,r,o){return{yNew:e.x+(r-o),xNew:o+(r-e.y)}}rotate(){const e=Math.max(...this.activeBlock.coords.flatMap(o=>o.map(p=>p.y))),r=Math.min(...this.activeBlock.coords.flatMap(o=>o.map(p=>p.x)));this.canRotate(e,r)&&this.activeBlock.coords.forEach(o=>o.forEach(p=>{const g=p.x,b=p.y,{yNew:I,xNew:z}=this.getRotateCoords(p,e,r);b>=0&&this.blocksOnPos(p)<=1&&(this.gameScreen[b][g].filled=0),I>=0&&(this.gameScreen[I][z].filled=this.activeBlock.type),p.x=z,p.y=I}))}canRotate(e,r){let o=!0;return this.activeBlock.coords.forEach(p=>p.forEach(g=>{if(o){const{yNew:b,xNew:I}=this.getRotateCoords(g,e,r);if(r>=0&&b<this.gameScreen.length&&I<=9){const z=this.gameScreen[b][I];this.anyMatch(G=>G.x===I&&G.y===b)||(o=1!==z.filled)}else o=!1}})),o}initiateNewGameBlock(){this.activeBlock.type=this.stagingType,this.activeBlock.coords=this.getStartCoordsForType(this.stagingType)}resetActiveBlock(){this.activeBlock.type=-1}blocksOnPos(e){let r=0;return this.activeBlock.coords.some(o=>o.some(p=>{p.x===e.x&&p.y===e.y&&r++})),r}restartGame(){this.resetActiveBlock(),this.score=0,this.level=1,this.lines=0,this.timeout=1e3,this.setScoreAndLevel(),this.pause=!1}resetGame(){this.gameScreen.slice().forEach((e,r)=>{setTimeout(()=>{r===this.gameScreen.length-1&&this.restartGame(),e.forEach(o=>o.filled=0),this.renderScreen()},100*r)})}loseGame(){this.pause=!0,this.gameScreen.slice().reverse().forEach((e,r)=>{setTimeout(()=>{e.forEach(o=>o.filled=8),this.renderScreen(),r===this.gameScreen.length-1&&(this.answerSubmitted.emit(["-1"]),this.resetGame())},100*r),console.log()})}moveDown(){let e=!1;const r=this.activeBlock.coords.length-1;for(let o=r;o>=0;o--)this.activeBlock.coords[o].forEach((g,b)=>{const I=g.y+1;if(I>=0&&!e){if(e=I>=this.gameScreen.length,!e){const z=this.anyMatch(G=>G.x===g.x&&G.y===I);o===r?z||(e=this.gameScreen[I][g.x].filled>0):this.activeBlock.coords[o+1].some(te=>te.x===g.x&&te.y===I)||z||(e=this.gameScreen[I][g.x].filled>0)}e&&this.resetActiveBlock()}});if(e)this.activeBlock.coords.flatMap(p=>p.map(g=>g.y)).every(p=>p<0)&&this.loseGame();else for(let o=r;o>=0;o--)this.activeBlock.coords[o].forEach((g,b)=>{const I=g.y+1;g.y>=0&&this.blocksOnPos(g)<=1&&(this.gameScreen[g.y][g.x].filled=0),I>=0&&(this.gameScreen[I][g.x].filled=this.activeBlock.type),g.y=I})}getStartCoordsForType(e){let r=[];switch(e){case 1:r=[[{x:5,y:-4}],[{x:5,y:-3}],[{x:5,y:-2}],[{x:5,y:-1}]];break;case 2:r=[[{x:5,y:-3}],[{x:5,y:-2}],[{x:5,y:-1},{x:6,y:-1}]];break;case 3:r=[[{x:5,y:-3}],[{x:5,y:-2}],[{x:4,y:-1},{x:5,y:-1}]];break;case 4:r=[[{x:5,y:-2},{x:6,y:-2}],[{x:5,y:-1},{x:6,y:-1}]];break;case 5:r=[[{x:5,y:-2},{x:6,y:-2}],[{x:6,y:-1},{x:7,y:-1}]];break;case 6:r=[[{x:6,y:-2},{x:7,y:-2}],[{x:5,y:-1},{x:6,y:-1}]];break;case 7:r=[[{x:5,y:-3}],[{x:5,y:-2},{x:6,y:-2}],[{x:5,y:-1}]]}return r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tetris"]],inputs:{question:"question"},outputs:{answerSubmitted:"answerSubmitted"},decls:14,vars:3,consts:[[1,"game-view","disable-dbl-tap-zoom"],[1,"tetris-view"],["class","tetris-row",4,"ngFor","ngForOf"],[1,"action-bar"],["id","left",3,"click"],["id","up",3,"click"],["id","down",3,"click"],["id","right",3,"click"],[1,"tetris-row"],["class","tetris-block",3,"ngClass",4,"ngFor","ngForOf"],[1,"tetris-block",3,"ngClass"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0)(1,"h1"),c._uU(2),c.qZA(),c.TgZ(3,"div",1),c.YNc(4,lj,2,1,"div",2),c.qZA(),c.TgZ(5,"div",3)(6,"button",4),c.NdJ("click",function(){return r.handleArrowKeys("ArrowLeft")}),c._uU(7,"left"),c.qZA(),c.TgZ(8,"button",5),c.NdJ("click",function(){return r.handleArrowKeys("ArrowUp")}),c._uU(9,"rotate"),c.qZA(),c.TgZ(10,"button",6),c.NdJ("click",function(){return r.handleArrowKeys("ArrowDown")}),c._uU(11,"down"),c.qZA(),c.TgZ(12,"button",7),c.NdJ("click",function(){return r.handleArrowKeys("ArrowRight")}),c._uU(13,"right"),c.qZA()()()),2&e&&(c.xp6(2),c.AsE("Score ",r.score," / ",r.targetScore," "),c.xp6(2),c.Q6J("ngForOf",r.gameScreen))},dependencies:[ks,Fs],styles:[".disable-dbl-tap-zoom[_ngcontent-%COMP%]{touch-action:manipulation}body[_ngcontent-%COMP%]{background-color:#151a30;font-family:B612,sans-serif}.score-view[_ngcontent-%COMP%]{height:200px;display:flex;justify-content:center;align-items:center;flex-direction:row}.score-box[_ngcontent-%COMP%], .level-box[_ngcontent-%COMP%], .preview-box[_ngcontent-%COMP%]{border:2px solid #dfd9e8;padding:10px;margin-right:1rem;margin-left:1rem;color:#dfd9e8;border-radius:25px}.preview-box[_ngcontent-%COMP%]{height:100px;align-content:center}#pause[_ngcontent-%COMP%], #restart[_ngcontent-%COMP%]{margin:1rem;font-size:30px;background-color:#384268;color:#dfd9e8;padding:20px;border-radius:25px}.game-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.action-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.tetris-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:start;width:400px;min-width:400px;max-width:600px}.tetris-row[_ngcontent-%COMP%]{justify-content:center;display:flex;flex-direction:row;flex-wrap:nowrap}.filled-1[_ngcontent-%COMP%]{background:linear-gradient(#48f957 0%,#20b62c 60%,#043e09 100%)}.filled-2[_ngcontent-%COMP%]{background:linear-gradient(#f06060 0%,#a30505 60%,#4d0202 100%)}.filled-3[_ngcontent-%COMP%]{background:linear-gradient(#fda703 0%,#c17e02 60%,#3b2803 100%)}.filled-4[_ngcontent-%COMP%]{background:linear-gradient(#ef7afa 0%,#8d1199 60%,#3a073e 100%)}.filled-5[_ngcontent-%COMP%]{background:linear-gradient(#fbfcfc 0%,#919393 60%,#393838 100%)}.filled-6[_ngcontent-%COMP%]{background:linear-gradient(#04bcff 0%,#037099 60%,#013b50 100%)}.filled-7[_ngcontent-%COMP%]{background:linear-gradient(#ff006e 0%,#950242 60%,#530124 100%)}.filled-8[_ngcontent-%COMP%]{background:linear-gradient(#f86b0a 0%,#933d01 60%,#572401 100%)}.tetris-block[_ngcontent-%COMP%]{height:20px;width:20px;border:solid 2px #dfd9e8;z-index:1}button[_ngcontent-%COMP%]{width:5rem;height:4rem;padding-left:.5rem}"]}),n})();function cj(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const o=c.oxw(2);return c.KtG(o.name=void 0)}),c.TgZ(1,"mat-icon"),c._uU(2,"close"),c.qZA()()}}function dj(n,t){if(1&n){const e=c.EpF();c.ynx(0),c.TgZ(1,"div",4)(2,"mat-form-field",5)(3,"mat-label"),c._uU(4,"Name"),c.qZA(),c.TgZ(5,"input",6),c.NdJ("ngModelChange",function(o){c.CHM(e);const p=c.oxw();return c.KtG(p.name=o)}),c.qZA(),c.YNc(6,cj,3,0,"button",7),c.qZA()(),c.TgZ(7,"div",4)(8,"button",8),c.NdJ("click",function(){c.CHM(e);const o=c.oxw();return c.KtG(o.confirmName())}),c._uU(9," Connect "),c.qZA()(),c.BQk()}if(2&n){const e=c.oxw();c.xp6(5),c.Q6J("ngModel",e.name),c.xp6(1),c.Q6J("ngIf",e.name),c.xp6(2),c.Q6J("disabled",null==e.name||""===e.name)}}function hj(n,t){if(1&n){const e=c.EpF();c.ynx(0),c._UZ(1,"img",10),c.TgZ(2,"p"),c._uU(3,"This quiz tests your knowledge and other skills"),c.qZA(),c.TgZ(4,"p"),c._uU(5,"Answering fast is rewarded, you score points based on the time it takes to submit an answer"),c.qZA(),c.TgZ(6,"p"),c._uU(7,"Good Luck!"),c.qZA(),c.TgZ(8,"button",11),c.NdJ("click",function(){c.CHM(e);const o=c.oxw();return c.KtG(o.startGame())}),c._uU(9," START! "),c.qZA(),c.BQk()}}function pj(n,t){if(1&n){const e=c.EpF();c.TgZ(0,"app-sorting-question-view",17),c.NdJ("answerSubmitted",function(o){c.CHM(e);const p=c.oxw(2);return c.KtG(p.answerSubmitted(o))}),c.qZA()}if(2&n){const e=c.oxw(2);c.Q6J("question",e.activeQuestion)}}function fj(n,t){if(1&n){const e=c.EpF();c.ynx(0),c.TgZ(1,"app-single-answer",17),c.NdJ("answerSubmitted",function(o){c.CHM(e);const p=c.oxw(2);return c.KtG(p.answerSubmitted(o))}),c.qZA(),c.BQk()}if(2&n){const e=c.oxw(2);c.xp6(1),c.Q6J("question",e.activeQuestion)}}function mj(n,t){if(1&n){const e=c.EpF();c.ynx(0),c.TgZ(1,"app-moving-button-click",17),c.NdJ("answerSubmitted",function(o){c.CHM(e);const p=c.oxw(2);return c.KtG(p.answerSubmitted(o))}),c.qZA(),c.BQk()}if(2&n){const e=c.oxw(2);c.xp6(1),c.Q6J("question",e.activeQuestion)}}function gj(n,t){if(1&n){const e=c.EpF();c.ynx(0),c.TgZ(1,"app-object-recognition",17),c.NdJ("answerSubmitted",function(o){c.CHM(e);const p=c.oxw(2);return c.KtG(p.answerSubmitted(o))}),c.qZA(),c.BQk()}if(2&n){const e=c.oxw(2);c.xp6(1),c.Q6J("question",e.activeQuestion)}}function _j(n,t){if(1&n){const e=c.EpF();c.ynx(0),c.TgZ(1,"app-tetris",17),c.NdJ("answerSubmitted",function(o){c.CHM(e);const p=c.oxw(2);return c.KtG(p.answerSubmitted(o))}),c.qZA(),c.BQk()}if(2&n){const e=c.oxw(2);c.xp6(1),c.Q6J("question",e.activeQuestion)}}function yj(n,t){if(1&n&&(c.ynx(0),c._UZ(1,"mat-progress-bar",12),c.TgZ(2,"div",13),c.ynx(3,14),c.YNc(4,pj,1,1,"app-sorting-question-view",15),c.YNc(5,fj,2,1,"ng-container",16),c.YNc(6,mj,2,1,"ng-container",16),c.YNc(7,gj,2,1,"ng-container",16),c.YNc(8,_j,2,1,"ng-container",16),c.BQk(),c.qZA(),c.BQk()),2&n){const e=c.oxw();c.xp6(1),c.Q6J("value",e.progress),c.xp6(2),c.Q6J("ngSwitch",null==e.activeQuestion?null:e.activeQuestion.questionType),c.xp6(1),c.Q6J("ngSwitchCase","sorting"),c.xp6(1),c.Q6J("ngSwitchCase","single-choice"),c.xp6(1),c.Q6J("ngSwitchCase","click-count"),c.xp6(1),c.Q6J("ngSwitchCase","object-recognition"),c.xp6(1),c.Q6J("ngSwitchCase","tetris")}}function vj(n,t){if(1&n&&(c.ynx(0),c._UZ(1,"app-quiz-summary",18),c.BQk()),2&n){const e=c.oxw();c.xp6(1),c.Q6J("summary",e.summary)}}let bj=(()=>{class n{constructor(e){this.stompService=e,this.subscribed=!1,this.state=Ko.DISCONNECTED,this.questions=[],this.progress=0}ngOnInit(){this.identifier=localStorage.getItem("deviceIdentifier")??void 0,this.identifier||(this.identifier=W2.generateDeviceIdentifier(),localStorage.setItem("deviceIdentifier",this.identifier),console.log("Generated new device identifier: ",this.identifier)),this.subscribe()}ngOnDestroy(){this.unsubscribe()}confirmName(){this.name&&this.identifier&&this.stompService.publish({destination:"/app/updateName",body:JSON.stringify({uid:this.identifier,name:this.name})})}subscribe(){const e=QM;e.connectHeaders.uid=this.identifier,this.stompService.configure(e),this.stompService.activate(),this.identifier&&(this.stompSubscription=this.stompService.watch("/topic/gameclientupdate").subscribe(r=>this.on_next(r))),this.subscribed=!0}startQuiz(){this.identifier&&this.stompService.publish({destination:"/app/requestStart",body:JSON.stringify({uid:this.identifier})})}unsubscribe(){this.subscribed&&(this.stompSubscription?.unsubscribe(),this.subscribed=!1)}on_next(e){const r=JSON.parse(e.body);if(r.uid===this.identifier)switch(r.state){case Ko.DISCONNECTED:case Ko.BLOCKED:break;case"CONNECTED":this.state=Ko.CONNECTED;break;case Ko.STARTED:this.state=Ko.STARTED,this.questions=r.payload;const o=r.answeredQuestions;this.activeQuestion=o?this.questions[o.length]:this.questions[0];break;case Ko.RUNNING:this.state=Ko.RUNNING;break;case Ko.FINISHED:this.state=Ko.FINISHED,this.summary=r.payload}}startGame(){this.startQuiz()}answerSubmitted(e){this.identifier&&this.stompService.publish({destination:"/app/giveAnswer",body:JSON.stringify({uid:this.identifier,answer:e,questionId:this.activeQuestion?.id??-1})});const r=this.questions.findIndex(o=>o.id===this.activeQuestion?.id);if(r===this.questions.length-1)this.activeQuestion=void 0;else{const o=r+1,p=this.questions.length-1;this.progress=100*r/p,console.log(this.progress,o,p),this.activeQuestion=this.questions[o]}}}return n.\u0275fac=function(e){return new(e||n)(c.Y36(MT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-quiz-client"]],features:[c._Bn([MT])],decls:7,vars:4,consts:[[1,"container"],[1,"row"],[1,"col","content-window"],[4,"ngIf"],[1,"row","content-row"],[1,"example-form-field"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["src","/assets/P4C.png","alt","logo"],["mat-raised-button","","color","primary",1,"start-button",3,"click"],["mode","determinate",3,"value"],[1,"question-component-view"],[3,"ngSwitch"],[3,"question","answerSubmitted",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"question","answerSubmitted"],[3,"summary"]],template:function(e,r){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c.YNc(3,dj,10,3,"ng-container",3),c.YNc(4,hj,10,0,"ng-container",3),c.YNc(5,yj,9,7,"ng-container",3),c.YNc(6,vj,2,1,"ng-container",3),c.qZA()()()),2&e&&(c.xp6(3),c.Q6J("ngIf","DISCONNECTED"===r.state),c.xp6(1),c.Q6J("ngIf","CONNECTED"===r.state),c.xp6(1),c.Q6J("ngIf","STARTED"===r.state),c.xp6(1),c.Q6J("ngIf","FINISHED"===r.state))},dependencies:[Gr,Hi,Ql,Bm,H_,FB,NB,iA,SB,VT,uS,oO,QT,XO,oV,lV,gV,oj,sj,uj],styles:[".content-window[_ngcontent-%COMP%]{height:80vh;margin-top:10vh}.content-row[_ngcontent-%COMP%]{max-width:15rem;padding-left:5rem}.start-button[_ngcontent-%COMP%]{margin-left:5rem}[_nghost-%COMP%]     mat-progress-bar{height:10px}[_nghost-%COMP%]     mat-progress-bar .mdc-linear-progress__bar-inner{border-top-width:10px}.question-component-view[_ngcontent-%COMP%]{padding-top:.5rem}img[_ngcontent-%COMP%]{height:100px}"]}),n})();function Nk(n,t){return(0,Gi.m)(t)?(0,jr.w)(()=>n,t):(0,jr.w)(()=>n)}var QA=S(5137);const xj=new c.OlP("angularfire2.auth.use-emulator"),Ej=new c.OlP("angularfire2.auth.settings"),Cj=new c.OlP("angularfire2.auth.tenant-id"),Sj=new c.OlP("angularfire2.auth.langugage-code"),Dj=new c.OlP("angularfire2.auth.use-device-language"),Ij=new c.OlP("angularfire.auth.persistence");let JA=(()=>{class n{constructor(e,r,o,p,g,b,I,z,G,te,he,_e){const ye=new $t.x,ge=(0,qt.of)(void 0).pipe((0,Vm.Q)(g.outsideAngular),(0,jr.w)(()=>p.runOutsideAngular(()=>S.e(365).then(S.bind(S,6365)))),(0,en.U)(()=>(0,Vu.on)(e,p,r)),(0,en.U)(Re=>((n,t,e,r,o,p,g,b)=>(0,Vu.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=t.runOutsideAngular(()=>n.auth());if(e&&I.useEmulator(...e),r&&(I.tenantId=r),I.languageCode=o,p&&I.useDeviceLanguage(),g)for(const[z,G]of Object.entries(g))I.settings[z]=G;return b&&I.setPersistence(b),I},[e,r,o,p,g,b]))(Re,p,b,z,G,te,I,he)),XC({bufferSize:1,refCount:!1}));if(Vn(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,qt.of)(null);else{ge.pipe(Vi()).subscribe();const Je=ge.pipe((0,jr.w)(Qe=>Qe.getRedirectResult().then(_t=>_t,()=>null)),Ns.iC,XC({bufferSize:1,refCount:!1})),et=ge.pipe((0,jr.w)(Qe=>new Zr.y(_t=>({unsubscribe:p.runOutsideAngular(()=>Qe.onAuthStateChanged(Ot=>_t.next(Ot),Ot=>_t.error(Ot),()=>_t.complete()))})))),Xe=ge.pipe((0,jr.w)(Qe=>new Zr.y(_t=>({unsubscribe:p.runOutsideAngular(()=>Qe.onIdTokenChanged(Ot=>_t.next(Ot),Ot=>_t.error(Ot),()=>_t.complete()))}))));this.authState=Je.pipe(Nk(et),(0,QA.R)(g.outsideAngular),(0,Vm.Q)(g.insideAngular)),this.user=Je.pipe(Nk(Xe),(0,QA.R)(g.outsideAngular),(0,Vm.Q)(g.insideAngular)),this.idToken=this.user.pipe((0,jr.w)(Qe=>Qe?(0,Tr.D)(Qe.getIdToken()):(0,qt.of)(null))),this.idTokenResult=this.user.pipe((0,jr.w)(Qe=>Qe?(0,Tr.D)(Qe.getIdTokenResult()):(0,qt.of)(null))),this.credential=(0,Ub.T)(Je,ye,this.authState.pipe(Or(Qe=>!Qe))).pipe((0,en.U)(Qe=>Qe?.user?Qe:null),(0,QA.R)(g.outsideAngular),(0,Vm.Q)(g.insideAngular))}return(0,Vu.pX)(this,ge,p,{spy:{apply:(Re,Je,et)=>{(Re.startsWith("signIn")||Re.startsWith("createUser"))&&et.then(Xe=>ye.next(Xe))}}})}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Vu.Dh),c.LFG(Vu.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Ns.HU),c.LFG(xj,8),c.LFG(Ej,8),c.LFG(Cj,8),c.LFG(Sj,8),c.LFG(Dj,8),c.LFG(Ij,8),c.LFG(Ix,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Aj=(()=>{class n{constructor(e,r){this.afAuth=e,this.router=r,this.isAuthenticatedSubject=new $t.x,this.afAuth.authState.subscribe(o=>{this.isAuthenticatedSubject.next(null!=o)})}login(e,r){var o=this;return(0,Kl.Z)(function*(){return o.afAuth.signInWithEmailAndPassword(e,r)})()}logout(){return this.afAuth.signOut()}isAuthenticated(){return this.isAuthenticatedSubject.asObservable()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(JA),c.LFG($o))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mj=(()=>{class n{constructor(e,r){this.authService=e,this.router=r}canActivate(){return this.authService.isAuthenticated()}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(Aj),c.LFG($o))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Nj=(()=>{class n{constructor(e){this.afAuth=e,this.token=null,e.idToken.subscribe(r=>{this.token=r})}intercept(e,r){return this.afAuth.idToken.pipe((0,Yr.q)(1),(0,jr.w)(o=>(o&&(e=e.clone({setHeaders:{Authorization:`Bearer ${o}`}})),r.handle(e))))}}return n.\u0275fac=function(e){return new(e||n)(c.LFG(JA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Oj=[{path:"",component:bj},{path:"console",component:$2}];let Pj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[E0]}),n.\u0275inj=c.cJS({providers:[{provide:Jw,useClass:Nj,multi:!0},{provide:ZM,useValue:["localhost",5001]},Mj,{provide:tS,useFactory:vF},{provide:MT,useFactory:bF}],imports:[Vu.hO.initializeApp(vf_firebase),Wi,cC,nl,$w,MI,Og.forRoot(Oj),PI(()=>FI(vf_firebase)),ct(()=>mr()),LB,k2,GL,fV,zB,SN]}),n})();(0,c.G48)(),fr().bootstrapModule(Pj).catch(n=>console.error(n))},2298:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Gi:()=>FrozenModel,gJ:()=>version,xG:()=>loadFrozenModel});var _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2113),__assign=Object.assign||function(N){for(var M,S=1,P=arguments.length;S<P;S++)for(var c in M=arguments[S])Object.prototype.hasOwnProperty.call(M,c)&&(N[c]=M[c]);return N};function __awaiter(N,M,S,P){return new(S||(S=Promise))(function(c,B){function R(Q){try{Y(P.next(Q))}catch(pe){B(pe)}}function W(Q){try{Y(P.throw(Q))}catch(pe){B(pe)}}function Y(Q){Q.done?c(Q.value):new S(function(pe){pe(Q.value)}).then(R,W)}Y((P=P.apply(N,M||[])).next())})}function __generator(N,M){var S,P,c,B,R={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return B={next:W(0),throw:W(1),return:W(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function W(Y){return function(Q){return function(pe){if(S)throw new TypeError("Generator is already executing.");for(;R;)try{if(S=1,P&&(c=P[2&pe[0]?"return":pe[0]?"throw":"next"])&&!(c=c.call(P,pe[1])).done)return c;switch(P=0,c&&(pe=[0,c.value]),pe[0]){case 0:case 1:c=pe;break;case 4:return R.label++,{value:pe[1],done:!1};case 5:R.label++,P=pe[1],pe=[0];continue;case 7:pe=R.ops.pop(),R.trys.pop();continue;default:if(!(c=(c=R.trys).length>0&&c[c.length-1])&&(6===pe[0]||2===pe[0])){R=0;continue}if(3===pe[0]&&(!c||pe[1]>c[0]&&pe[1]<c[3])){R.label=pe[1];break}if(6===pe[0]&&R.label<c[1]){R.label=c[1],c=pe;break}if(c&&R.label<c[2]){R.label=c[2],R.ops.push(pe);break}c[2]&&R.ops.pop(),R.trys.pop();continue}pe=M.call(N,R)}catch(Ce){pe=[6,Ce],P=0}finally{S=c=0}if(5&pe[0])throw pe[1];return{value:pe[0]?pe[1]:void 0,done:!0}}([Y,Q])}}}var commonjsGlobal=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function createCommonjsModule(N,M){return N(M={exports:{}},M.exports),M.exports}var aspromise=asPromise;function asPromise(N,M){for(var S=new Array(arguments.length-1),P=0,c=2,B=!0;c<arguments.length;)S[P++]=arguments[c++];return new Promise(function(R,W){S[P]=function(Y){if(B)if(B=!1,Y)W(Y);else{for(var Q=new Array(arguments.length-1),pe=0;pe<Q.length;)Q[pe++]=arguments[pe];R.apply(null,Q)}};try{N.apply(M||null,S)}catch(Y){B&&(B=!1,W(Y))}})}var base64_1=createCommonjsModule(function(N,M){var S=M;S.length=function(R){var W=R.length;if(!W)return 0;for(var Y=0;--W%4>1&&"="===R.charAt(W);)++Y;return Math.ceil(3*R.length)/4-Y};for(var P=new Array(64),c=new Array(123),B=0;B<64;)c[P[B]=B<26?B+65:B<52?B+71:B<62?B-4:B-59|43]=B++;S.encode=function(R,W,Y){for(var Q,pe=null,Ce=[],ce=0,me=0;W<Y;){var Ne=R[W++];switch(me){case 0:Ce[ce++]=P[Ne>>2],Q=(3&Ne)<<4,me=1;break;case 1:Ce[ce++]=P[Q|Ne>>4],Q=(15&Ne)<<2,me=2;break;case 2:Ce[ce++]=P[Q|Ne>>6],Ce[ce++]=P[63&Ne],me=0}ce>8191&&((pe||(pe=[])).push(String.fromCharCode.apply(String,Ce)),ce=0)}return me&&(Ce[ce++]=P[Q],Ce[ce++]=61,1===me&&(Ce[ce++]=61)),pe?(ce&&pe.push(String.fromCharCode.apply(String,Ce.slice(0,ce))),pe.join("")):String.fromCharCode.apply(String,Ce.slice(0,ce))},S.decode=function(R,W,Y){for(var Q,pe=Y,Ce=0,ce=0;ce<R.length;){var me=R.charCodeAt(ce++);if(61===me&&Ce>1)break;if(void 0===(me=c[me]))throw Error("invalid encoding");switch(Ce){case 0:Q=me,Ce=1;break;case 1:W[Y++]=Q<<2|(48&me)>>4,Q=me,Ce=2;break;case 2:W[Y++]=(15&Q)<<4|(60&me)>>2,Q=me,Ce=3;break;case 3:W[Y++]=(3&Q)<<6|me,Ce=0}}if(1===Ce)throw Error("invalid encoding");return Y-pe},S.test=function(R){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(R)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(N,M,S){return(this._listeners[N]||(this._listeners[N]=[])).push({fn:M,ctx:S||this}),this},EventEmitter.prototype.off=function(N,M){if(void 0===N)this._listeners={};else if(void 0===M)this._listeners[N]=[];else for(var S=this._listeners[N],P=0;P<S.length;)S[P].fn===M?S.splice(P,1):++P;return this},EventEmitter.prototype.emit=function(N){var M=this._listeners[N];if(M){for(var S=[],P=1;P<arguments.length;)S.push(arguments[P++]);for(P=0;P<M.length;)M[P].fn.apply(M[P++].ctx,S)}return this};var float_1=factory(factory);function factory(N){return typeof Float32Array<"u"?function(){var M=new Float32Array([-0]),S=new Uint8Array(M.buffer),P=128===S[3];function c(Y,Q,pe){M[0]=Y,Q[pe]=S[0],Q[pe+1]=S[1],Q[pe+2]=S[2],Q[pe+3]=S[3]}function B(Y,Q,pe){M[0]=Y,Q[pe]=S[3],Q[pe+1]=S[2],Q[pe+2]=S[1],Q[pe+3]=S[0]}function R(Y,Q){return S[0]=Y[Q],S[1]=Y[Q+1],S[2]=Y[Q+2],S[3]=Y[Q+3],M[0]}function W(Y,Q){return S[3]=Y[Q],S[2]=Y[Q+1],S[1]=Y[Q+2],S[0]=Y[Q+3],M[0]}N.writeFloatLE=P?c:B,N.writeFloatBE=P?B:c,N.readFloatLE=P?R:W,N.readFloatBE=P?W:R}():function(){function M(P,c,B,R){var W=c<0?1:0;if(W&&(c=-c),0===c)P(1/c>0?0:2147483648,B,R);else if(isNaN(c))P(2143289344,B,R);else if(c>34028234663852886e22)P((W<<31|2139095040)>>>0,B,R);else if(c<11754943508222875e-54)P((W<<31|Math.round(c/1401298464324817e-60))>>>0,B,R);else{var Y=Math.floor(Math.log(c)/Math.LN2);P((W<<31|Y+127<<23|8388607&Math.round(c*Math.pow(2,-Y)*8388608))>>>0,B,R)}}function S(P,c,B){var R=P(c,B),W=2*(R>>31)+1,Y=R>>>23&255,Q=8388607&R;return 255===Y?Q?NaN:W*(1/0):0===Y?1401298464324817e-60*W*Q:W*Math.pow(2,Y-150)*(Q+8388608)}N.writeFloatLE=M.bind(null,writeUintLE),N.writeFloatBE=M.bind(null,writeUintBE),N.readFloatLE=S.bind(null,readUintLE),N.readFloatBE=S.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var M=new Float64Array([-0]),S=new Uint8Array(M.buffer),P=128===S[7];function c(Y,Q,pe){M[0]=Y,Q[pe]=S[0],Q[pe+1]=S[1],Q[pe+2]=S[2],Q[pe+3]=S[3],Q[pe+4]=S[4],Q[pe+5]=S[5],Q[pe+6]=S[6],Q[pe+7]=S[7]}function B(Y,Q,pe){M[0]=Y,Q[pe]=S[7],Q[pe+1]=S[6],Q[pe+2]=S[5],Q[pe+3]=S[4],Q[pe+4]=S[3],Q[pe+5]=S[2],Q[pe+6]=S[1],Q[pe+7]=S[0]}function R(Y,Q){return S[0]=Y[Q],S[1]=Y[Q+1],S[2]=Y[Q+2],S[3]=Y[Q+3],S[4]=Y[Q+4],S[5]=Y[Q+5],S[6]=Y[Q+6],S[7]=Y[Q+7],M[0]}function W(Y,Q){return S[7]=Y[Q],S[6]=Y[Q+1],S[5]=Y[Q+2],S[4]=Y[Q+3],S[3]=Y[Q+4],S[2]=Y[Q+5],S[1]=Y[Q+6],S[0]=Y[Q+7],M[0]}N.writeDoubleLE=P?c:B,N.writeDoubleBE=P?B:c,N.readDoubleLE=P?R:W,N.readDoubleBE=P?W:R}():function(){function M(P,c,B,R,W,Y){var Q=R<0?1:0;if(Q&&(R=-R),0===R)P(0,W,Y+c),P(1/R>0?0:2147483648,W,Y+B);else if(isNaN(R))P(0,W,Y+c),P(2146959360,W,Y+B);else if(R>17976931348623157e292)P(0,W,Y+c),P((Q<<31|2146435072)>>>0,W,Y+B);else{var pe;if(R<22250738585072014e-324)P((pe=R/5e-324)>>>0,W,Y+c),P((Q<<31|pe/4294967296)>>>0,W,Y+B);else{var Ce=Math.floor(Math.log(R)/Math.LN2);1024===Ce&&(Ce=1023),P(4503599627370496*(pe=R*Math.pow(2,-Ce))>>>0,W,Y+c),P((Q<<31|Ce+1023<<20|1048576*pe&1048575)>>>0,W,Y+B)}}}function S(P,c,B,R,W){var Y=P(R,W+c),Q=P(R,W+B),pe=2*(Q>>31)+1,Ce=Q>>>20&2047,ce=4294967296*(1048575&Q)+Y;return 2047===Ce?ce?NaN:pe*(1/0):0===Ce?5e-324*pe*ce:pe*Math.pow(2,Ce-1075)*(ce+4503599627370496)}N.writeDoubleLE=M.bind(null,writeUintLE,0,4),N.writeDoubleBE=M.bind(null,writeUintBE,4,0),N.readDoubleLE=S.bind(null,readUintLE,0,4),N.readDoubleBE=S.bind(null,readUintBE,4,0)}(),N}function writeUintLE(N,M,S){M[S]=255&N,M[S+1]=N>>>8&255,M[S+2]=N>>>16&255,M[S+3]=N>>>24}function writeUintBE(N,M,S){M[S]=N>>>24,M[S+1]=N>>>16&255,M[S+2]=N>>>8&255,M[S+3]=255&N}function readUintLE(N,M){return(N[M]|N[M+1]<<8|N[M+2]<<16|N[M+3]<<24)>>>0}function readUintBE(N,M){return(N[M]<<24|N[M+1]<<16|N[M+2]<<8|N[M+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod$$1=eval("quire".replace(/^/,"re"))(moduleName);if(mod$$1&&(mod$$1.length||Object.keys(mod$$1).length))return mod$$1}catch(N){}return null}var utf8_1=createCommonjsModule(function(N,M){var S=M;S.length=function(P){for(var c=0,B=0,R=0;R<P.length;++R)(B=P.charCodeAt(R))<128?c+=1:B<2048?c+=2:55296==(64512&B)&&56320==(64512&P.charCodeAt(R+1))?(++R,c+=4):c+=3;return c},S.read=function(P,c,B){if(B-c<1)return"";for(var R,W=null,Y=[],Q=0;c<B;)(R=P[c++])<128?Y[Q++]=R:R>191&&R<224?Y[Q++]=(31&R)<<6|63&P[c++]:R>239&&R<365?(R=((7&R)<<18|(63&P[c++])<<12|(63&P[c++])<<6|63&P[c++])-65536,Y[Q++]=55296+(R>>10),Y[Q++]=56320+(1023&R)):Y[Q++]=(15&R)<<12|(63&P[c++])<<6|63&P[c++],Q>8191&&((W||(W=[])).push(String.fromCharCode.apply(String,Y)),Q=0);return W?(Q&&W.push(String.fromCharCode.apply(String,Y.slice(0,Q))),W.join("")):String.fromCharCode.apply(String,Y.slice(0,Q))},S.write=function(P,c,B){for(var R,W,Y=B,Q=0;Q<P.length;++Q)(R=P.charCodeAt(Q))<128?c[B++]=R:R<2048?(c[B++]=R>>6|192,c[B++]=63&R|128):55296==(64512&R)&&56320==(64512&(W=P.charCodeAt(Q+1)))?(++Q,c[B++]=(R=65536+((1023&R)<<10)+(1023&W))>>18|240,c[B++]=R>>12&63|128,c[B++]=R>>6&63|128,c[B++]=63&R|128):(c[B++]=R>>12|224,c[B++]=R>>6&63|128,c[B++]=63&R|128);return B-Y}}),pool_1=pool;function pool(N,M,S){var P=S||8192,c=P>>>1,B=null,R=P;return function(W){if(W<1||W>c)return N(W);R+W>P&&(B=N(P),R=0);var Y=M.call(B,R,R+=W);return 7&R&&(R=1+(7|R)),Y}}var longbits=LongBits;function LongBits(N,M){this.lo=N>>>0,this.hi=M>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(N){if(0===N)return zero;var M=N<0;M&&(N=-N);var S=N>>>0,P=(N-S)/4294967296>>>0;return M&&(P=~P>>>0,S=~S>>>0,++S>4294967295&&(S=0,++P>4294967295&&(P=0))),new LongBits(S,P)},LongBits.from=function(N){if("number"==typeof N)return LongBits.fromNumber(N);if(minimal.isString(N)){if(!minimal.Long)return LongBits.fromNumber(parseInt(N,10));N=minimal.Long.fromString(N)}return N.low||N.high?new LongBits(N.low>>>0,N.high>>>0):zero},LongBits.prototype.toNumber=function(N){if(!N&&this.hi>>>31){var M=1+~this.lo>>>0,S=~this.hi>>>0;return M||(S=S+1>>>0),-(M+4294967296*S)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(N){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,!!N):{low:0|this.lo,high:0|this.hi,unsigned:!!N}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(N){return N===zeroHash?zero:new LongBits((charCodeAt.call(N,0)|charCodeAt.call(N,1)<<8|charCodeAt.call(N,2)<<16|charCodeAt.call(N,3)<<24)>>>0,(charCodeAt.call(N,4)|charCodeAt.call(N,5)<<8|charCodeAt.call(N,6)<<16|charCodeAt.call(N,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var N=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^N)>>>0,this.lo=(this.lo<<1^N)>>>0,this},LongBits.prototype.zzDecode=function(){var N=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^N)>>>0,this.hi=(this.hi>>>1^N)>>>0,this},LongBits.prototype.length=function(){var N=this.lo,M=(this.lo>>>28|this.hi<<4)>>>0,S=this.hi>>>24;return 0===S?0===M?N<16384?N<128?1:2:N<2097152?3:4:M<16384?M<128?5:6:M<2097152?7:8:S<128?9:10};var minimal=createCommonjsModule(function(N,M){var S=M;function P(B,R,W){for(var Y=Object.keys(R),Q=0;Q<Y.length;++Q)void 0!==B[Y[Q]]&&W||(B[Y[Q]]=R[Y[Q]]);return B}function c(B){function R(W,Y){if(!(this instanceof R))return new R(W,Y);Object.defineProperty(this,"message",{get:function(){return W}}),Error.captureStackTrace?Error.captureStackTrace(this,R):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),Y&&P(this,Y)}return(R.prototype=Object.create(Error.prototype)).constructor=R,Object.defineProperty(R.prototype,"name",{get:function(){return B}}),R.prototype.toString=function(){return this.name+": "+this.message},R}S.asPromise=aspromise,S.base64=base64_1,S.EventEmitter=eventemitter,S.float=float_1,S.inquire=inquire_1,S.utf8=utf8_1,S.pool=pool_1,S.LongBits=longbits,S.emptyArray=Object.freeze?Object.freeze([]):[],S.emptyObject=Object.freeze?Object.freeze({}):{},S.isNode=!!(commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),S.isInteger=Number.isInteger||function(B){return"number"==typeof B&&isFinite(B)&&Math.floor(B)===B},S.isString=function(B){return"string"==typeof B||B instanceof String},S.isObject=function(B){return B&&"object"==typeof B},S.isset=S.isSet=function(B,R){var W=B[R];return!(null==W||!B.hasOwnProperty(R))&&("object"!=typeof W||(Array.isArray(W)?W.length:Object.keys(W).length)>0)},S.Buffer=function(){try{var B=S.inquire("buffer").Buffer;return B.prototype.utf8Write?B:null}catch{return null}}(),S._Buffer_from=null,S._Buffer_allocUnsafe=null,S.newBuffer=function(B){return"number"==typeof B?S.Buffer?S._Buffer_allocUnsafe(B):new S.Array(B):S.Buffer?S._Buffer_from(B):typeof Uint8Array>"u"?B:new Uint8Array(B)},S.Array=typeof Uint8Array<"u"?Uint8Array:Array,S.Long=commonjsGlobal.dcodeIO&&commonjsGlobal.dcodeIO.Long||S.inquire("long"),S.key2Re=/^true|false|0|1$/,S.key32Re=/^-?(?:0|[1-9][0-9]*)$/,S.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,S.longToHash=function(B){return B?S.LongBits.from(B).toHash():S.LongBits.zeroHash},S.longFromHash=function(B,R){var W=S.LongBits.fromHash(B);return S.Long?S.Long.fromBits(W.lo,W.hi,R):W.toNumber(!!R)},S.merge=P,S.lcFirst=function(B){return B.charAt(0).toLowerCase()+B.substring(1)},S.newError=c,S.ProtocolError=c("ProtocolError"),S.oneOfGetter=function(B){for(var R={},W=0;W<B.length;++W)R[B[W]]=1;return function(){for(var Y=Object.keys(this),Q=Y.length-1;Q>-1;--Q)if(1===R[Y[Q]]&&null!=this[Y[Q]])return Y[Q]}},S.oneOfSetter=function(B){return function(R){for(var W=0;W<B.length;++W)B[W]!==R&&delete this[B[W]]}},S.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},S._configure=function(){var B=S.Buffer;B?(S._Buffer_from=B.from!==Uint8Array.from&&B.from||function(R,W){return new B(R,W)},S._Buffer_allocUnsafe=B.allocUnsafe||function(R){return new B(R)}):S._Buffer_from=S._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(N,M,S){this.fn=N,this.len=M,this.next=void 0,this.val=S}function noop(){}function State(N){this.head=N.head,this.tail=N.tail,this.len=N.len,this.next=N.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}function writeByte(N,M,S){M[S]=255&N}function writeVarint32(N,M,S){for(;N>127;)M[S++]=127&N|128,N>>>=7;M[S]=N}function VarintOp(N,M){this.len=N,this.next=void 0,this.val=M}function writeVarint64(N,M,S){for(;N.hi;)M[S++]=127&N.lo|128,N.lo=(N.lo>>>7|N.hi<<25)>>>0,N.hi>>>=7;for(;N.lo>127;)M[S++]=127&N.lo|128,N.lo=N.lo>>>7;M[S++]=N.lo}function writeFixed32(N,M,S){M[S]=255&N,M[S+1]=N>>>8&255,M[S+2]=N>>>16&255,M[S+3]=N>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(N){return new minimal.Array(N)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(N,M,S){return this.tail=this.tail.next=new Op(N,M,S),this.len+=M,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(N){return this.len+=(this.tail=this.tail.next=new VarintOp((N>>>=0)<128?1:N<16384?2:N<2097152?3:N<268435456?4:5,N)).len,this},Writer.prototype.int32=function(N){return N<0?this._push(writeVarint64,10,LongBits$1.fromNumber(N)):this.uint32(N)},Writer.prototype.sint32=function(N){return this.uint32((N<<1^N>>31)>>>0)},Writer.prototype.uint64=function(N){var M=LongBits$1.from(N);return this._push(writeVarint64,M.length(),M)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(N){var M=LongBits$1.from(N).zzEncode();return this._push(writeVarint64,M.length(),M)},Writer.prototype.bool=function(N){return this._push(writeByte,1,N?1:0)},Writer.prototype.fixed32=function(N){return this._push(writeFixed32,4,N>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(N){var M=LongBits$1.from(N);return this._push(writeFixed32,4,M.lo)._push(writeFixed32,4,M.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(N){return this._push(minimal.float.writeFloatLE,4,N)},Writer.prototype.double=function(N){return this._push(minimal.float.writeDoubleLE,8,N)};var writeBytes=minimal.Array.prototype.set?function(N,M,S){M.set(N,S)}:function(N,M,S){for(var P=0;P<N.length;++P)M[S+P]=N[P]};Writer.prototype.bytes=function(N){var M=N.length>>>0;if(!M)return this._push(writeByte,1,0);if(minimal.isString(N)){var S=Writer.alloc(M=base64.length(N));base64.decode(N,S,0),N=S}return this.uint32(M)._push(writeBytes,M,N)},Writer.prototype.string=function(N){var M=utf8.length(N);return M?this.uint32(M)._push(utf8.write,M,N):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var N=this.head,M=this.tail,S=this.len;return this.reset().uint32(S),S&&(this.tail.next=N.next,this.tail=M,this.len+=S),this},Writer.prototype.finish=function(){for(var N=this.head.next,M=this.constructor.alloc(this.len),S=0;N;)N.fn(N.val,M,S),S+=N.len,N=N.next;return M},Writer._configure=function(N){BufferWriter=N};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(N){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(N)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&"set"===Buffer.prototype.set.name?function(N,M,S){M.set(N,S)}:function(N,M,S){if(N.copy)N.copy(M,S,0,N.length);else for(var P=0;P<N.length;)M[S++]=N[P++]};function writeStringBuffer(N,M,S){N.length<40?minimal.utf8.write(N,M,S):M.utf8Write(N,S)}BufferWriter$1.prototype.bytes=function(N){minimal.isString(N)&&(N=minimal._Buffer_from(N,"base64"));var M=N.length>>>0;return this.uint32(M),M&&this._push(writeBytesBuffer,M,N),this},BufferWriter$1.prototype.string=function(N){var M=Buffer.byteLength(N);return this.uint32(M),M&&this._push(writeStringBuffer,M,N),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(N,M){return RangeError("index out of range: "+N.pos+" + "+(M||1)+" > "+N.len)}function Reader(N){this.buf=N,this.pos=0,this.len=N.length}var create_array=typeof Uint8Array<"u"?function(N){if(N instanceof Uint8Array||Array.isArray(N))return new Reader(N);throw Error("illegal buffer")}:function(N){if(Array.isArray(N))return new Reader(N);throw Error("illegal buffer")},N;function readLongVarint(){var N=new LongBits$2(0,0),M=0;if(!(this.len-this.pos>4)){for(;M<3;++M){if(this.pos>=this.len)throw indexOutOfRange(this);if(N.lo=(N.lo|(127&this.buf[this.pos])<<7*M)>>>0,this.buf[this.pos++]<128)return N}return N.lo=(N.lo|(127&this.buf[this.pos++])<<7*M)>>>0,N}for(;M<4;++M)if(N.lo=(N.lo|(127&this.buf[this.pos])<<7*M)>>>0,this.buf[this.pos++]<128)return N;if(N.lo=(N.lo|(127&this.buf[this.pos])<<28)>>>0,N.hi=(N.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return N;if(M=0,this.len-this.pos>4){for(;M<5;++M)if(N.hi=(N.hi|(127&this.buf[this.pos])<<7*M+3)>>>0,this.buf[this.pos++]<128)return N}else for(;M<5;++M){if(this.pos>=this.len)throw indexOutOfRange(this);if(N.hi=(N.hi|(127&this.buf[this.pos])<<7*M+3)>>>0,this.buf[this.pos++]<128)return N}throw Error("invalid varint encoding")}function readFixed32_end(N,M){return(N[M-4]|N[M-3]<<8|N[M-2]<<16|N[M-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(N){return(Reader.create=function(M){return minimal.Buffer.isBuffer(M)?new BufferReader(M):create_array(M)})(N)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(N=4294967295,function(){if(N=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(N=(N|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(N=(N|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(N=(N|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(N=(N|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return N;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return N}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var N=this.uint32();return N>>>1^-(1&N)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var N=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,N},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var N=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,N},Reader.prototype.bytes=function(){var N=this.uint32(),M=this.pos,S=this.pos+N;if(S>this.len)throw indexOutOfRange(this,N);return this.pos+=N,Array.isArray(this.buf)?this.buf.slice(M,S):M===S?new this.buf.constructor(0):this._slice.call(this.buf,M,S)},Reader.prototype.string=function(){var N=this.bytes();return utf8$1.read(N,0,N.length)},Reader.prototype.skip=function(N){if("number"==typeof N){if(this.pos+N>this.len)throw indexOutOfRange(this,N);this.pos+=N}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(N){switch(N){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(N=7&this.uint32());)this.skipType(N);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+N+" at offset "+this.pos)}return this},Reader._configure=function(N){BufferReader=N;var M=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[M](!1)},uint64:function(){return readLongVarint.call(this)[M](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[M](!1)},fixed64:function(){return readFixed64.call(this)[M](!0)},sfixed64:function(){return readFixed64.call(this)[M](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(N){reader.call(this,N)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var N=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+N,this.len))};var service=Service;function Service(N,M,S){if("function"!=typeof N)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=N,this.requestDelimited=!!M,this.responseDelimited=!!S}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function N(M,S,P,c,B){if(!c)throw TypeError("request must be specified");var R=this;if(!B)return minimal.asPromise(N,R,M,S,P,c);if(R.rpcImpl)try{return R.rpcImpl(M,S[R.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(W,Y){if(W)return R.emit("error",W,M),B(W);if(null!==Y){if(!(Y instanceof P))try{Y=P[R.responseDelimited?"decodeDelimited":"decode"](Y)}catch(Q){return R.emit("error",Q,M),B(Q)}return R.emit("data",Y,M),B(null,Y)}R.end(!0)})}catch(W){return R.emit("error",W,M),void setTimeout(function(){B(W)},0)}else setTimeout(function(){B(Error("already ended"))},0)},Service.prototype.end=function(N){return this.rpcImpl&&(N||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(N,M){M.Service=service}),roots={},indexMinimal=createCommonjsModule(function(N,M){var S=M;function P(){S.Reader._configure(S.BufferReader),S.util._configure()}S.build="minimal",S.Writer=writer,S.BufferWriter=writer_buffer,S.Reader=reader,S.BufferReader=reader_buffer,S.util=minimal,S.rpc=rpc_1,S.roots=roots,S.configure=P,S.Writer._configure(S.BufferWriter),P()}),minimal$1=indexMinimal,minimal_1=minimal$1.roots,minimal_2=minimal$1.Reader,minimal_3=minimal$1.util,$Reader=minimal$1.Reader,$util=minimal$1.util,$root=minimal$1.roots.default||(minimal$1.roots.default={});$root.tensorflow=function(){var N,M,S={};return S.Any=function(){function P(c){if(c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.typeUrl="",P.prototype.value=$util.newBuffer([]),P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.Any;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.typeUrl=c.string();break;case 2:W.value=c.bytes();break;default:c.skipType(7&Y)}}return W},P}(),S.DataType=(N={},(M=Object.create(N))[N[0]="DT_INVALID"]=0,M[N[1]="DT_FLOAT"]=1,M[N[2]="DT_DOUBLE"]=2,M[N[3]="DT_INT32"]=3,M[N[4]="DT_UINT8"]=4,M[N[5]="DT_INT16"]=5,M[N[6]="DT_INT8"]=6,M[N[7]="DT_STRING"]=7,M[N[8]="DT_COMPLEX64"]=8,M[N[9]="DT_INT64"]=9,M[N[10]="DT_BOOL"]=10,M[N[11]="DT_QINT8"]=11,M[N[12]="DT_QUINT8"]=12,M[N[13]="DT_QINT32"]=13,M[N[14]="DT_BFLOAT16"]=14,M[N[101]="DT_FLOAT_REF"]=101,M[N[102]="DT_DOUBLE_REF"]=102,M[N[103]="DT_INT32_REF"]=103,M[N[104]="DT_UINT8_REF"]=104,M[N[105]="DT_INT16_REF"]=105,M[N[106]="DT_INT8_REF"]=106,M[N[107]="DT_STRING_REF"]=107,M[N[108]="DT_COMPLEX64_REF"]=108,M[N[109]="DT_INT64_REF"]=109,M[N[110]="DT_BOOL_REF"]=110,M[N[111]="DT_QINT8_REF"]=111,M[N[112]="DT_QUINT8_REF"]=112,M[N[113]="DT_QINT32_REF"]=113,M[N[114]="DT_BFLOAT16_REF"]=114,M),S.TensorShape=function(){function P(c){if(this.dim=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.dim=$util.emptyArray,P.prototype.unknownRank=!1,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.TensorShape;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 2:W.dim&&W.dim.length||(W.dim=[]),W.dim.push($root.tensorflow.TensorShape.Dim.decode(c,c.uint32()));break;case 3:W.unknownRank=c.bool();break;default:c.skipType(7&Y)}}return W},P.Dim=function(){function c(B){if(B)for(var R=Object.keys(B),W=0;W<R.length;++W)null!=B[R[W]]&&(this[R[W]]=B[R[W]])}return c.prototype.size=$util.Long?$util.Long.fromBits(0,0,!1):0,c.prototype.name="",c.decode=function(B,R){B instanceof $Reader||(B=$Reader.create(B));for(var W=void 0===R?B.len:B.pos+R,Y=new $root.tensorflow.TensorShape.Dim;B.pos<W;){var Q=B.uint32();switch(Q>>>3){case 1:Y.size=B.int64();break;case 2:Y.name=B.string();break;default:B.skipType(7&Q)}}return Y},c}(),P}(),S.Tensor=function(){function P(c){if(this.floatVal=[],this.doubleVal=[],this.intVal=[],this.stringVal=[],this.scomplexVal=[],this.int64Val=[],this.boolVal=[],this.uint32Val=[],this.uint64Val=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.dtype=0,P.prototype.tensorShape=null,P.prototype.versionNumber=0,P.prototype.tensorContent=$util.newBuffer([]),P.prototype.floatVal=$util.emptyArray,P.prototype.doubleVal=$util.emptyArray,P.prototype.intVal=$util.emptyArray,P.prototype.stringVal=$util.emptyArray,P.prototype.scomplexVal=$util.emptyArray,P.prototype.int64Val=$util.emptyArray,P.prototype.boolVal=$util.emptyArray,P.prototype.uint32Val=$util.emptyArray,P.prototype.uint64Val=$util.emptyArray,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.Tensor;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.dtype=c.int32();break;case 2:W.tensorShape=$root.tensorflow.TensorShape.decode(c,c.uint32());break;case 3:W.versionNumber=c.int32();break;case 4:W.tensorContent=c.bytes();break;case 5:if(W.floatVal&&W.floatVal.length||(W.floatVal=[]),2==(7&Y))for(var Q=c.uint32()+c.pos;c.pos<Q;)W.floatVal.push(c.float());else W.floatVal.push(c.float());break;case 6:if(W.doubleVal&&W.doubleVal.length||(W.doubleVal=[]),2==(7&Y))for(Q=c.uint32()+c.pos;c.pos<Q;)W.doubleVal.push(c.double());else W.doubleVal.push(c.double());break;case 7:if(W.intVal&&W.intVal.length||(W.intVal=[]),2==(7&Y))for(Q=c.uint32()+c.pos;c.pos<Q;)W.intVal.push(c.int32());else W.intVal.push(c.int32());break;case 8:W.stringVal&&W.stringVal.length||(W.stringVal=[]),W.stringVal.push(c.bytes());break;case 9:if(W.scomplexVal&&W.scomplexVal.length||(W.scomplexVal=[]),2==(7&Y))for(Q=c.uint32()+c.pos;c.pos<Q;)W.scomplexVal.push(c.float());else W.scomplexVal.push(c.float());break;case 10:if(W.int64Val&&W.int64Val.length||(W.int64Val=[]),2==(7&Y))for(Q=c.uint32()+c.pos;c.pos<Q;)W.int64Val.push(c.int64());else W.int64Val.push(c.int64());break;case 11:if(W.boolVal&&W.boolVal.length||(W.boolVal=[]),2==(7&Y))for(Q=c.uint32()+c.pos;c.pos<Q;)W.boolVal.push(c.bool());else W.boolVal.push(c.bool());break;case 16:if(W.uint32Val&&W.uint32Val.length||(W.uint32Val=[]),2==(7&Y))for(Q=c.uint32()+c.pos;c.pos<Q;)W.uint32Val.push(c.uint32());else W.uint32Val.push(c.uint32());break;case 17:if(W.uint64Val&&W.uint64Val.length||(W.uint64Val=[]),2==(7&Y))for(Q=c.uint32()+c.pos;c.pos<Q;)W.uint64Val.push(c.uint64());else W.uint64Val.push(c.uint64());break;default:c.skipType(7&Y)}}return W},P}(),S.AttrValue=function(){function P(B){if(B)for(var R=Object.keys(B),W=0;W<R.length;++W)null!=B[R[W]]&&(this[R[W]]=B[R[W]])}var c;return P.prototype.list=null,P.prototype.s=$util.newBuffer([]),P.prototype.i=$util.Long?$util.Long.fromBits(0,0,!1):0,P.prototype.f=0,P.prototype.b=!1,P.prototype.type=0,P.prototype.shape=null,P.prototype.tensor=null,P.prototype.placeholder="",P.prototype.func=null,Object.defineProperty(P.prototype,"value",{get:$util.oneOfGetter(c=["list","s","i","f","b","type","shape","tensor","placeholder","func"]),set:$util.oneOfSetter(c)}),P.decode=function(B,R){B instanceof $Reader||(B=$Reader.create(B));for(var W=void 0===R?B.len:B.pos+R,Y=new $root.tensorflow.AttrValue;B.pos<W;){var Q=B.uint32();switch(Q>>>3){case 1:Y.list=$root.tensorflow.AttrValue.ListValue.decode(B,B.uint32());break;case 2:Y.s=B.bytes();break;case 3:Y.i=B.int64();break;case 4:Y.f=B.float();break;case 5:Y.b=B.bool();break;case 6:Y.type=B.int32();break;case 7:Y.shape=$root.tensorflow.TensorShape.decode(B,B.uint32());break;case 8:Y.tensor=$root.tensorflow.Tensor.decode(B,B.uint32());break;case 9:Y.placeholder=B.string();break;case 10:Y.func=$root.tensorflow.NameAttrList.decode(B,B.uint32());break;default:B.skipType(7&Q)}}return Y},P.ListValue=function(){function B(R){if(this.s=[],this.i=[],this.f=[],this.b=[],this.type=[],this.shape=[],this.tensor=[],this.func=[],R)for(var W=Object.keys(R),Y=0;Y<W.length;++Y)null!=R[W[Y]]&&(this[W[Y]]=R[W[Y]])}return B.prototype.s=$util.emptyArray,B.prototype.i=$util.emptyArray,B.prototype.f=$util.emptyArray,B.prototype.b=$util.emptyArray,B.prototype.type=$util.emptyArray,B.prototype.shape=$util.emptyArray,B.prototype.tensor=$util.emptyArray,B.prototype.func=$util.emptyArray,B.decode=function(R,W){R instanceof $Reader||(R=$Reader.create(R));for(var Y=void 0===W?R.len:R.pos+W,Q=new $root.tensorflow.AttrValue.ListValue;R.pos<Y;){var pe=R.uint32();switch(pe>>>3){case 2:Q.s&&Q.s.length||(Q.s=[]),Q.s.push(R.bytes());break;case 3:if(Q.i&&Q.i.length||(Q.i=[]),2==(7&pe))for(var Ce=R.uint32()+R.pos;R.pos<Ce;)Q.i.push(R.int64());else Q.i.push(R.int64());break;case 4:if(Q.f&&Q.f.length||(Q.f=[]),2==(7&pe))for(Ce=R.uint32()+R.pos;R.pos<Ce;)Q.f.push(R.float());else Q.f.push(R.float());break;case 5:if(Q.b&&Q.b.length||(Q.b=[]),2==(7&pe))for(Ce=R.uint32()+R.pos;R.pos<Ce;)Q.b.push(R.bool());else Q.b.push(R.bool());break;case 6:if(Q.type&&Q.type.length||(Q.type=[]),2==(7&pe))for(Ce=R.uint32()+R.pos;R.pos<Ce;)Q.type.push(R.int32());else Q.type.push(R.int32());break;case 7:Q.shape&&Q.shape.length||(Q.shape=[]),Q.shape.push($root.tensorflow.TensorShape.decode(R,R.uint32()));break;case 8:Q.tensor&&Q.tensor.length||(Q.tensor=[]),Q.tensor.push($root.tensorflow.Tensor.decode(R,R.uint32()));break;case 9:Q.func&&Q.func.length||(Q.func=[]),Q.func.push($root.tensorflow.NameAttrList.decode(R,R.uint32()));break;default:R.skipType(7&pe)}}return Q},B}(),P}(),S.NameAttrList=function(){function P(c){if(this.attr={},c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.name="",P.prototype.attr=$util.emptyObject,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R,W=void 0===B?c.len:c.pos+B,Y=new $root.tensorflow.NameAttrList;c.pos<W;){var Q=c.uint32();switch(Q>>>3){case 1:Y.name=c.string();break;case 2:c.skip().pos++,Y.attr===$util.emptyObject&&(Y.attr={}),R=c.string(),c.pos++,Y.attr[R]=$root.tensorflow.AttrValue.decode(c,c.uint32());break;default:c.skipType(7&Q)}}return Y},P}(),S.NodeDef=function(){function P(c){if(this.input=[],this.attr={},c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.name="",P.prototype.op="",P.prototype.input=$util.emptyArray,P.prototype.device="",P.prototype.attr=$util.emptyObject,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R,W=void 0===B?c.len:c.pos+B,Y=new $root.tensorflow.NodeDef;c.pos<W;){var Q=c.uint32();switch(Q>>>3){case 1:Y.name=c.string();break;case 2:Y.op=c.string();break;case 3:Y.input&&Y.input.length||(Y.input=[]),Y.input.push(c.string());break;case 4:Y.device=c.string();break;case 5:c.skip().pos++,Y.attr===$util.emptyObject&&(Y.attr={}),R=c.string(),c.pos++,Y.attr[R]=$root.tensorflow.AttrValue.decode(c,c.uint32());break;default:c.skipType(7&Q)}}return Y},P}(),S.VersionDef=function(){function P(c){if(this.badConsumers=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.producer=0,P.prototype.minConsumer=0,P.prototype.badConsumers=$util.emptyArray,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.VersionDef;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.producer=c.int32();break;case 2:W.minConsumer=c.int32();break;case 3:if(W.badConsumers&&W.badConsumers.length||(W.badConsumers=[]),2==(7&Y))for(var Q=c.uint32()+c.pos;c.pos<Q;)W.badConsumers.push(c.int32());else W.badConsumers.push(c.int32());break;default:c.skipType(7&Y)}}return W},P}(),S.GraphDef=function(){function P(c){if(this.node=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.node=$util.emptyArray,P.prototype.versions=null,P.prototype.library=null,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.GraphDef;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.node&&W.node.length||(W.node=[]),W.node.push($root.tensorflow.NodeDef.decode(c,c.uint32()));break;case 4:W.versions=$root.tensorflow.VersionDef.decode(c,c.uint32());break;case 2:W.library=$root.tensorflow.FunctionDefLibrary.decode(c,c.uint32());break;default:c.skipType(7&Y)}}return W},P}(),S.CollectionDef=function(){function P(B){if(B)for(var R=Object.keys(B),W=0;W<R.length;++W)null!=B[R[W]]&&(this[R[W]]=B[R[W]])}var c;return P.prototype.nodeList=null,P.prototype.bytesList=null,P.prototype.int64List=null,P.prototype.floatList=null,P.prototype.anyList=null,Object.defineProperty(P.prototype,"kind",{get:$util.oneOfGetter(c=["nodeList","bytesList","int64List","floatList","anyList"]),set:$util.oneOfSetter(c)}),P.decode=function(B,R){B instanceof $Reader||(B=$Reader.create(B));for(var W=void 0===R?B.len:B.pos+R,Y=new $root.tensorflow.CollectionDef;B.pos<W;){var Q=B.uint32();switch(Q>>>3){case 1:Y.nodeList=$root.tensorflow.CollectionDef.NodeList.decode(B,B.uint32());break;case 2:Y.bytesList=$root.tensorflow.CollectionDef.BytesList.decode(B,B.uint32());break;case 3:Y.int64List=$root.tensorflow.CollectionDef.Int64List.decode(B,B.uint32());break;case 4:Y.floatList=$root.tensorflow.CollectionDef.FloatList.decode(B,B.uint32());break;case 5:Y.anyList=$root.tensorflow.CollectionDef.AnyList.decode(B,B.uint32());break;default:B.skipType(7&Q)}}return Y},P.NodeList=function(){function B(R){if(this.value=[],R)for(var W=Object.keys(R),Y=0;Y<W.length;++Y)null!=R[W[Y]]&&(this[W[Y]]=R[W[Y]])}return B.prototype.value=$util.emptyArray,B.decode=function(R,W){R instanceof $Reader||(R=$Reader.create(R));for(var Y=void 0===W?R.len:R.pos+W,Q=new $root.tensorflow.CollectionDef.NodeList;R.pos<Y;){var pe=R.uint32();pe>>>3==1?(Q.value&&Q.value.length||(Q.value=[]),Q.value.push(R.string())):R.skipType(7&pe)}return Q},B}(),P.BytesList=function(){function B(R){if(this.value=[],R)for(var W=Object.keys(R),Y=0;Y<W.length;++Y)null!=R[W[Y]]&&(this[W[Y]]=R[W[Y]])}return B.prototype.value=$util.emptyArray,B.decode=function(R,W){R instanceof $Reader||(R=$Reader.create(R));for(var Y=void 0===W?R.len:R.pos+W,Q=new $root.tensorflow.CollectionDef.BytesList;R.pos<Y;){var pe=R.uint32();pe>>>3==1?(Q.value&&Q.value.length||(Q.value=[]),Q.value.push(R.bytes())):R.skipType(7&pe)}return Q},B}(),P.Int64List=function(){function B(R){if(this.value=[],R)for(var W=Object.keys(R),Y=0;Y<W.length;++Y)null!=R[W[Y]]&&(this[W[Y]]=R[W[Y]])}return B.prototype.value=$util.emptyArray,B.decode=function(R,W){R instanceof $Reader||(R=$Reader.create(R));for(var Y=void 0===W?R.len:R.pos+W,Q=new $root.tensorflow.CollectionDef.Int64List;R.pos<Y;){var pe=R.uint32();if(pe>>>3==1)if(Q.value&&Q.value.length||(Q.value=[]),2==(7&pe))for(var Ce=R.uint32()+R.pos;R.pos<Ce;)Q.value.push(R.int64());else Q.value.push(R.int64());else R.skipType(7&pe)}return Q},B}(),P.FloatList=function(){function B(R){if(this.value=[],R)for(var W=Object.keys(R),Y=0;Y<W.length;++Y)null!=R[W[Y]]&&(this[W[Y]]=R[W[Y]])}return B.prototype.value=$util.emptyArray,B.decode=function(R,W){R instanceof $Reader||(R=$Reader.create(R));for(var Y=void 0===W?R.len:R.pos+W,Q=new $root.tensorflow.CollectionDef.FloatList;R.pos<Y;){var pe=R.uint32();if(pe>>>3==1)if(Q.value&&Q.value.length||(Q.value=[]),2==(7&pe))for(var Ce=R.uint32()+R.pos;R.pos<Ce;)Q.value.push(R.float());else Q.value.push(R.float());else R.skipType(7&pe)}return Q},B}(),P.AnyList=function(){function B(R){if(this.value=[],R)for(var W=Object.keys(R),Y=0;Y<W.length;++Y)null!=R[W[Y]]&&(this[W[Y]]=R[W[Y]])}return B.prototype.value=$util.emptyArray,B.decode=function(R,W){R instanceof $Reader||(R=$Reader.create(R));for(var Y=void 0===W?R.len:R.pos+W,Q=new $root.tensorflow.CollectionDef.AnyList;R.pos<Y;){var pe=R.uint32();pe>>>3==1?(Q.value&&Q.value.length||(Q.value=[]),Q.value.push($root.tensorflow.Any.decode(R,R.uint32()))):R.skipType(7&pe)}return Q},B}(),P}(),S.SaverDef=function(){function P(R){if(R)for(var W=Object.keys(R),Y=0;Y<W.length;++Y)null!=R[W[Y]]&&(this[W[Y]]=R[W[Y]])}var c,B;return P.prototype.filenameTensorName="",P.prototype.saveTensorName="",P.prototype.restoreOpName="",P.prototype.maxToKeep=0,P.prototype.sharded=!1,P.prototype.keepCheckpointEveryNHours=0,P.prototype.version=0,P.decode=function(R,W){R instanceof $Reader||(R=$Reader.create(R));for(var Y=void 0===W?R.len:R.pos+W,Q=new $root.tensorflow.SaverDef;R.pos<Y;){var pe=R.uint32();switch(pe>>>3){case 1:Q.filenameTensorName=R.string();break;case 2:Q.saveTensorName=R.string();break;case 3:Q.restoreOpName=R.string();break;case 4:Q.maxToKeep=R.int32();break;case 5:Q.sharded=R.bool();break;case 6:Q.keepCheckpointEveryNHours=R.float();break;case 7:Q.version=R.int32();break;default:R.skipType(7&pe)}}return Q},P.CheckpointFormatVersion=(c={},(B=Object.create(c))[c[0]="LEGACY"]=0,B[c[1]="V1"]=1,B[c[2]="V2"]=2,B),P}(),S.TensorInfo=function(){function P(B){if(B)for(var R=Object.keys(B),W=0;W<R.length;++W)null!=B[R[W]]&&(this[R[W]]=B[R[W]])}var c;return P.prototype.name="",P.prototype.cooSparse=null,P.prototype.dtype=0,P.prototype.tensorShape=null,Object.defineProperty(P.prototype,"encoding",{get:$util.oneOfGetter(c=["name","cooSparse"]),set:$util.oneOfSetter(c)}),P.decode=function(B,R){B instanceof $Reader||(B=$Reader.create(B));for(var W=void 0===R?B.len:B.pos+R,Y=new $root.tensorflow.TensorInfo;B.pos<W;){var Q=B.uint32();switch(Q>>>3){case 1:Y.name=B.string();break;case 4:Y.cooSparse=$root.tensorflow.TensorInfo.CooSparse.decode(B,B.uint32());break;case 2:Y.dtype=B.int32();break;case 3:Y.tensorShape=$root.tensorflow.TensorShape.decode(B,B.uint32());break;default:B.skipType(7&Q)}}return Y},P.CooSparse=function(){function B(R){if(R)for(var W=Object.keys(R),Y=0;Y<W.length;++Y)null!=R[W[Y]]&&(this[W[Y]]=R[W[Y]])}return B.prototype.valuesTensorName="",B.prototype.indicesTensorName="",B.prototype.denseShapeTensorName="",B.decode=function(R,W){R instanceof $Reader||(R=$Reader.create(R));for(var Y=void 0===W?R.len:R.pos+W,Q=new $root.tensorflow.TensorInfo.CooSparse;R.pos<Y;){var pe=R.uint32();switch(pe>>>3){case 1:Q.valuesTensorName=R.string();break;case 2:Q.indicesTensorName=R.string();break;case 3:Q.denseShapeTensorName=R.string();break;default:R.skipType(7&pe)}}return Q},B}(),P}(),S.SignatureDef=function(){function P(c){if(this.inputs={},this.outputs={},c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.inputs=$util.emptyObject,P.prototype.outputs=$util.emptyObject,P.prototype.methodName="",P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R,W=void 0===B?c.len:c.pos+B,Y=new $root.tensorflow.SignatureDef;c.pos<W;){var Q=c.uint32();switch(Q>>>3){case 1:c.skip().pos++,Y.inputs===$util.emptyObject&&(Y.inputs={}),R=c.string(),c.pos++,Y.inputs[R]=$root.tensorflow.TensorInfo.decode(c,c.uint32());break;case 2:c.skip().pos++,Y.outputs===$util.emptyObject&&(Y.outputs={}),R=c.string(),c.pos++,Y.outputs[R]=$root.tensorflow.TensorInfo.decode(c,c.uint32());break;case 3:Y.methodName=c.string();break;default:c.skipType(7&Q)}}return Y},P}(),S.AssetFileDef=function(){function P(c){if(c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.tensorInfo=null,P.prototype.filename="",P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.AssetFileDef;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.tensorInfo=$root.tensorflow.TensorInfo.decode(c,c.uint32());break;case 2:W.filename=c.string();break;default:c.skipType(7&Y)}}return W},P}(),S.OpDef=function(){function P(c){if(this.inputArg=[],this.outputArg=[],this.attr=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.name="",P.prototype.inputArg=$util.emptyArray,P.prototype.outputArg=$util.emptyArray,P.prototype.attr=$util.emptyArray,P.prototype.deprecation=null,P.prototype.summary="",P.prototype.description="",P.prototype.isCommutative=!1,P.prototype.isAggregate=!1,P.prototype.isStateful=!1,P.prototype.allowsUninitializedInput=!1,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.OpDef;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.name=c.string();break;case 2:W.inputArg&&W.inputArg.length||(W.inputArg=[]),W.inputArg.push($root.tensorflow.OpDef.ArgDef.decode(c,c.uint32()));break;case 3:W.outputArg&&W.outputArg.length||(W.outputArg=[]),W.outputArg.push($root.tensorflow.OpDef.ArgDef.decode(c,c.uint32()));break;case 4:W.attr&&W.attr.length||(W.attr=[]),W.attr.push($root.tensorflow.OpDef.AttrDef.decode(c,c.uint32()));break;case 8:W.deprecation=$root.tensorflow.OpDef.OpDeprecation.decode(c,c.uint32());break;case 5:W.summary=c.string();break;case 6:W.description=c.string();break;case 18:W.isCommutative=c.bool();break;case 16:W.isAggregate=c.bool();break;case 17:W.isStateful=c.bool();break;case 19:W.allowsUninitializedInput=c.bool();break;default:c.skipType(7&Y)}}return W},P.ArgDef=function(){function c(B){if(B)for(var R=Object.keys(B),W=0;W<R.length;++W)null!=B[R[W]]&&(this[R[W]]=B[R[W]])}return c.prototype.name="",c.prototype.description="",c.prototype.type=0,c.prototype.typeAttr="",c.prototype.numberAttr="",c.prototype.typeListAttr="",c.prototype.isRef=!1,c.decode=function(B,R){B instanceof $Reader||(B=$Reader.create(B));for(var W=void 0===R?B.len:B.pos+R,Y=new $root.tensorflow.OpDef.ArgDef;B.pos<W;){var Q=B.uint32();switch(Q>>>3){case 1:Y.name=B.string();break;case 2:Y.description=B.string();break;case 3:Y.type=B.int32();break;case 4:Y.typeAttr=B.string();break;case 5:Y.numberAttr=B.string();break;case 6:Y.typeListAttr=B.string();break;case 16:Y.isRef=B.bool();break;default:B.skipType(7&Q)}}return Y},c}(),P.AttrDef=function(){function c(B){if(B)for(var R=Object.keys(B),W=0;W<R.length;++W)null!=B[R[W]]&&(this[R[W]]=B[R[W]])}return c.prototype.name="",c.prototype.type="",c.prototype.defaultValue=null,c.prototype.description="",c.prototype.hasMinimum=!1,c.prototype.minimum=$util.Long?$util.Long.fromBits(0,0,!1):0,c.prototype.allowedValues=null,c.decode=function(B,R){B instanceof $Reader||(B=$Reader.create(B));for(var W=void 0===R?B.len:B.pos+R,Y=new $root.tensorflow.OpDef.AttrDef;B.pos<W;){var Q=B.uint32();switch(Q>>>3){case 1:Y.name=B.string();break;case 2:Y.type=B.string();break;case 3:Y.defaultValue=$root.tensorflow.AttrValue.decode(B,B.uint32());break;case 4:Y.description=B.string();break;case 5:Y.hasMinimum=B.bool();break;case 6:Y.minimum=B.int64();break;case 7:Y.allowedValues=$root.tensorflow.AttrValue.decode(B,B.uint32());break;default:B.skipType(7&Q)}}return Y},c}(),P.OpDeprecation=function(){function c(B){if(B)for(var R=Object.keys(B),W=0;W<R.length;++W)null!=B[R[W]]&&(this[R[W]]=B[R[W]])}return c.prototype.version=0,c.prototype.explanation="",c.decode=function(B,R){B instanceof $Reader||(B=$Reader.create(B));for(var W=void 0===R?B.len:B.pos+R,Y=new $root.tensorflow.OpDef.OpDeprecation;B.pos<W;){var Q=B.uint32();switch(Q>>>3){case 1:Y.version=B.int32();break;case 2:Y.explanation=B.string();break;default:B.skipType(7&Q)}}return Y},c}(),P}(),S.OpList=function(){function P(c){if(this.op=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.op=$util.emptyArray,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.OpList;c.pos<R;){var Y=c.uint32();Y>>>3==1?(W.op&&W.op.length||(W.op=[]),W.op.push($root.tensorflow.OpDef.decode(c,c.uint32()))):c.skipType(7&Y)}return W},P}(),S.MetaGraphDef=function(){function P(c){if(this.collectionDef={},this.signatureDef={},this.assetFileDef=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.metaInfoDef=null,P.prototype.graphDef=null,P.prototype.saverDef=null,P.prototype.collectionDef=$util.emptyObject,P.prototype.signatureDef=$util.emptyObject,P.prototype.assetFileDef=$util.emptyArray,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R,W=void 0===B?c.len:c.pos+B,Y=new $root.tensorflow.MetaGraphDef;c.pos<W;){var Q=c.uint32();switch(Q>>>3){case 1:Y.metaInfoDef=$root.tensorflow.MetaGraphDef.MetaInfoDef.decode(c,c.uint32());break;case 2:Y.graphDef=$root.tensorflow.GraphDef.decode(c,c.uint32());break;case 3:Y.saverDef=$root.tensorflow.SaverDef.decode(c,c.uint32());break;case 4:c.skip().pos++,Y.collectionDef===$util.emptyObject&&(Y.collectionDef={}),R=c.string(),c.pos++,Y.collectionDef[R]=$root.tensorflow.CollectionDef.decode(c,c.uint32());break;case 5:c.skip().pos++,Y.signatureDef===$util.emptyObject&&(Y.signatureDef={}),R=c.string(),c.pos++,Y.signatureDef[R]=$root.tensorflow.SignatureDef.decode(c,c.uint32());break;case 6:Y.assetFileDef&&Y.assetFileDef.length||(Y.assetFileDef=[]),Y.assetFileDef.push($root.tensorflow.AssetFileDef.decode(c,c.uint32()));break;default:c.skipType(7&Q)}}return Y},P.MetaInfoDef=function(){function c(B){if(this.tags=[],B)for(var R=Object.keys(B),W=0;W<R.length;++W)null!=B[R[W]]&&(this[R[W]]=B[R[W]])}return c.prototype.metaGraphVersion="",c.prototype.strippedOpList=null,c.prototype.anyInfo=null,c.prototype.tags=$util.emptyArray,c.prototype.tensorflowVersion="",c.prototype.tensorflowGitVersion="",c.decode=function(B,R){B instanceof $Reader||(B=$Reader.create(B));for(var W=void 0===R?B.len:B.pos+R,Y=new $root.tensorflow.MetaGraphDef.MetaInfoDef;B.pos<W;){var Q=B.uint32();switch(Q>>>3){case 1:Y.metaGraphVersion=B.string();break;case 2:Y.strippedOpList=$root.tensorflow.OpList.decode(B,B.uint32());break;case 3:Y.anyInfo=$root.tensorflow.Any.decode(B,B.uint32());break;case 4:Y.tags&&Y.tags.length||(Y.tags=[]),Y.tags.push(B.string());break;case 5:Y.tensorflowVersion=B.string();break;case 6:Y.tensorflowGitVersion=B.string();break;default:B.skipType(7&Q)}}return Y},c}(),P}(),S.SavedModel=function(){function P(c){if(this.metaGraphs=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.savedModelSchemaVersion=$util.Long?$util.Long.fromBits(0,0,!1):0,P.prototype.metaGraphs=$util.emptyArray,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.SavedModel;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.savedModelSchemaVersion=c.int64();break;case 2:W.metaGraphs&&W.metaGraphs.length||(W.metaGraphs=[]),W.metaGraphs.push($root.tensorflow.MetaGraphDef.decode(c,c.uint32()));break;default:c.skipType(7&Y)}}return W},P}(),S.FunctionDefLibrary=function(){function P(c){if(this.function=[],this.gradient=[],c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.function=$util.emptyArray,P.prototype.gradient=$util.emptyArray,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.FunctionDefLibrary;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.function&&W.function.length||(W.function=[]),W.function.push($root.tensorflow.FunctionDef.decode(c,c.uint32()));break;case 2:W.gradient&&W.gradient.length||(W.gradient=[]),W.gradient.push($root.tensorflow.GradientDef.decode(c,c.uint32()));break;default:c.skipType(7&Y)}}return W},P}(),S.FunctionDef=function(){function P(c){if(this.attr={},this.nodeDef=[],this.ret={},c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.signature=null,P.prototype.attr=$util.emptyObject,P.prototype.nodeDef=$util.emptyArray,P.prototype.ret=$util.emptyObject,P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R,W=void 0===B?c.len:c.pos+B,Y=new $root.tensorflow.FunctionDef;c.pos<W;){var Q=c.uint32();switch(Q>>>3){case 1:Y.signature=$root.tensorflow.OpDef.decode(c,c.uint32());break;case 5:c.skip().pos++,Y.attr===$util.emptyObject&&(Y.attr={}),R=c.string(),c.pos++,Y.attr[R]=$root.tensorflow.AttrValue.decode(c,c.uint32());break;case 3:Y.nodeDef&&Y.nodeDef.length||(Y.nodeDef=[]),Y.nodeDef.push($root.tensorflow.NodeDef.decode(c,c.uint32()));break;case 4:c.skip().pos++,Y.ret===$util.emptyObject&&(Y.ret={}),R=c.string(),c.pos++,Y.ret[R]=c.string();break;default:c.skipType(7&Q)}}return Y},P}(),S.GradientDef=function(){function P(c){if(c)for(var B=Object.keys(c),R=0;R<B.length;++R)null!=c[B[R]]&&(this[B[R]]=c[B[R]])}return P.prototype.functionName="",P.prototype.gradientFunc="",P.decode=function(c,B){c instanceof $Reader||(c=$Reader.create(c));for(var R=void 0===B?c.len:c.pos+B,W=new $root.tensorflow.GradientDef;c.pos<R;){var Y=c.uint32();switch(Y>>>3){case 1:W.functionName=c.string();break;case 2:W.gradientFunc=c.string();break;default:c.skipType(7&Y)}}return W},P}(),S}();var compiled_api=$root,compiled_api_1=compiled_api.tensorflow;function getParamValue(N,M,S,P){var c=M.params[N];if(c&&void 0!==c.inputIndex){if("tensor"===c.type)return getTensor(M.inputNames[c.inputIndex],S,P);if("tensors"===c.type)return(0===c.inputIndex?0===c.inputParamLength?M.inputNames:M.inputNames.slice(c.inputIndex,-c.inputParamLength):M.inputNames.splice(c.inputIndex)).map(function(R){return getTensor(R,S,P)});var B=Array.prototype.slice.call(getTensor(M.inputNames.slice(c.inputIndex)[0],S,P).dataSync());return"number"===c.type?B[0]:B}return c&&c.value}function getTensor(N,M,S){var P=parseNodeName(N),c=P[0],B=P[1],R=S.currentContextIds.find(function(W){return!!M[getNodeNameWithContextId(c,W)]});return void 0!==R?M[getNodeNameWithContextId(c,R)][B]:void 0}function getTensorsForCurrentContenxt(N,M,S){return M[getNodeNameWithContextId(N,S.currentContextId)]}function getNodeNameAndIndex(N,M){var S=parseNodeName(N),c=S[1];return[getNodeNameWithContextId(S[0],M&&M.currentContextId),c]}function getNodeNameWithContextId(N,M){return M?N+"-"+M:N}function parseNodeName(N){var M=N.lastIndexOf(":");return-1===M?[N,0]:[N.substring(0,M),Number(N.substring(M+1))]}function split$1(N,M){for(var S=[],P=0;P<N.length;P+=M)S.push(N.slice(P,P+M));return S}var json=[{tfOpName:"Add",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",dlOpName:"addN",category:"arithmetic",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",dlOpName:"sub",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",dlOpName:"floorDiv",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",dlOpName:"mul",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",dlOpName:"maximum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Minimum",dlOpName:"minimum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Pow",dlOpName:"pow",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",dlOpName:"squaredDifference",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],arithmetic=Object.freeze({json}),json$1=[{tfOpName:"Abs",dlOpName:"abs",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",dlOpName:"acos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",dlOpName:"asin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",dlOpName:"atan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",dlOpName:"atan2",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"y",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",dlOpName:"ceil",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"clip_value_min",dlParamName:"clipValueMin",type:"number"},{tfParamName:"clip_value_max",dlParamName:"clipValueMax",type:"number"}]},{tfOpName:"Cos",dlOpName:"cos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",dlOpName:"cosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",dlOpName:"elu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",dlOpName:"exp",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",dlOpName:"floor",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",dlOpName:"log",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",dlOpName:"neg",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",dlOpName:"relu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{dlParamName:"clipValueMin",type:"number",defaultValue:0},{dlParamName:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",dlOpName:"selu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",dlOpName:"sigmoid",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",dlOpName:"sin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",dlOpName:"sinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",dlOpName:"sqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",dlOpName:"rsqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",dlOpName:"square",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",dlOpName:"tan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",dlOpName:"tanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",dlOpName:"sign",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",dlOpName:"round",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",dlOpName:"expm1",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",dlOpName:"log1p",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",dlOpName:"softplus",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",dlOpName:"asinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",dlOpName:"acosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",dlOpName:"atanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",dlOpName:"erf",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",dlOpName:"prod",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axes",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool",notSupported:!0},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",dlOpName:"leakyRelu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"alpha",dlParamName:"alpha",type:"number",defaultValue:.2},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({json:json$1}),json$2=[{tfOpName:"LoopCond",dlOpName:"loopCond",category:"control",params:[{tfInputIndex:0,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Switch",dlOpName:"switch",category:"control",params:[{tfInputIndex:0,dlParamName:"data",type:"tensor"},{tfInputIndex:1,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Merge",dlOpName:"merge",category:"control",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"Enter",dlOpName:"enter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"frame_name",dlParamName:"frameName",type:"string"},{tfParamName:"is_constant",dlParamName:"isConstant",type:"bool"}]},{tfOpName:"Exit",dlOpName:"exit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",dlOpName:"nextIteration",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",dlOpName:"tensorArray",category:"control",params:[{tfInputIndex:0,dlParamName:"size",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"},{tfParamName:"dynamic_size",dlParamName:"dynamicSize",type:"bool"},{tfParamName:"clear_after_read",dlParamName:"clearAfterRead",type:"bool"},{tfParamName:"identical_element_shapes",dlParamName:"identicalElementShapes",type:"bool"},{tfParamName:"tensor_array_name",dlParamName:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",dlOpName:"tensorArrayWrite",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",dlOpName:"tensorArrayRead",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",dlOpName:"tensorArrayGather",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",dlOpName:"tensorArrayScatter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",dlOpName:"tensorArrayConcat",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape_except0",dlParamName:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",dlOpName:"tensorArraySplit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"tensor",type:"tensor"},{tfInputIndex:2,dlParamName:"lengths",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",dlOpName:"tensorArraySize",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",dlOpName:"tensorArrayClose",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"}]}],control=Object.freeze({json:json$2}),json$3=[{tfOpName:"AvgPool",dlOpName:"avgPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",dlOpName:"maxPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",dlOpName:"conv1d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"stride",dlParamName:"stride",type:"number"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NWC"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"dilation",dlParamName:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",dlOpName:"conv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"useCudnnOnGpu",dlParamName:"useCudnnOnGpu",type:"bool"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"Conv2DBackpropInput",dlOpName:"conv2dTranspose",category:"convolution",params:[{tfInputIndex:2,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfInputIndex:0,dlParamName:"outputShape",type:"number[]"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]}],convolution=Object.freeze({json:json$3}),json$4=[{tfOpName:"Fill",dlOpName:"fill",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfInputIndex:1,dlParamName:"value",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",dlOpName:"linspace",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"num",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",dlOpName:"oneHot",category:"creation",params:[{tfInputIndex:0,dlParamName:"indices",type:"tensor"},{tfInputIndex:1,dlParamName:"depth",type:"number"},{tfInputIndex:2,dlParamName:"onValue",type:"number",defaultValue:1},{tfInputIndex:3,dlParamName:"offValue",type:"number",defaultValue:0},{tfParamName:"axis",dlParamName:"axis",type:"number",notSupported:!0},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",dlOpName:"ones",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",dlOpName:"onesLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",dlOpName:"randomUniform",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"minval",dlParamName:"minval",type:"number",defaultValue:0},{tfParamName:"maxval",dlParamName:"maxval",type:"number",defaultValue:1},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"seed",dlParamName:"seed",type:"number",defaultValue:0},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",dlOpName:"range",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"step",type:"number",defaultValue:0},{tfParamName:"Tidx",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"truncatedNormal",dlOpName:"truncatedNormal",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"means",dlParamName:"mean",type:"number",defaultValue:0},{tfParamName:"stddev",dlParamName:"stdDev",type:"number",defaultValue:1},{tfParamName:"seed",dlParamName:"seed",type:"number"},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",dlOpName:"zeros",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",dlOpName:"zerosLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]}],creation=Object.freeze({json:json$4}),json$5=[{tfOpName:"NonMaxSuppressionV2",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"},{tfInputIndex:4,dlParamName:"scoreThreshold",type:"number"}]},{tfOpName:"Where",dlOpName:"whereAsync",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",dlOpName:"setdiff1dAsync",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"y",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],dynamic=Object.freeze({json:json$5}),json$6=[{tfOpName:"TopKV2",dlOpName:"topK",category:"evaluation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"k",type:"number"},{tfParamName:"sorted",dlParamName:"sorted",type:"bool"}]}],evaluation=Object.freeze({json:json$6}),json$7=[{tfOpName:"PlaceholderWithDefault",dlOpName:"placeholder",category:"graph",params:[{tfInputIndex:0,dlParamName:"default",type:"tensor"},{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",dlOpName:"placeholder",category:"graph",params:[{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Const",dlOpName:"const",category:"graph"},{tfOpName:"Identity",dlOpName:"identity",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Snapshot",dlOpName:"snapshot",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Rank",dlOpName:"rank",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Size",dlOpName:"size",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Shape",dlOpName:"shape",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"ShapeN",dlOpName:"shapeN",category:"graph",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"x",type:"tensors"}]},{tfOpName:"Print",dlOpName:"print",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfInputParamLength:1,dlParamName:"data",type:"tensors"},{tfParamName:"message",dlParamName:"message",type:"string"},{tfParamName:"first_n",dlParamName:"firstN",type:"number",notSupprted:!0},{tfParamName:"summarize",dlParamName:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",dlOpName:"noop",category:"graph",params:[]},{tfOpName:"StopGradient",dlOpName:"stopGradient",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",dlOpName:"fakeQuantWithMinMaxVars",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"min",dlParamName:"min",type:"number"},{tfParamName:"max",dlParamName:"max",type:"number"}]}],graph=Object.freeze({json:json$7}),json$8=[{tfOpName:"ResizeBilinear",dlOpName:"resizeBilinear",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",dlOpName:"resizeNearestNeighbor",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",dlOpName:"cropAndResize",category:"image",params:[{tfInputIndex:0,dlParamName:"image",type:"tensor"},{tfInputIndex:1,dlParamName:"boxes",type:"tensor"},{tfInputIndex:2,dlParamName:"boxInd",type:"tensor"},{tfInputIndex:3,dlParamName:"cropSize",type:"number[]"},{tfParamName:"method",dlParamName:"method",type:"string"},{tfParamName:"extrapolation_value",dlParamName:"extrapolationValue",type:"number"}]}],image$1=Object.freeze({json:json$8}),json$9=[{tfOpName:"Equal",dlOpName:"equal",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",dlOpName:"notEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",dlOpName:"greater",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",dlOpName:"greaterEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",dlOpName:"less",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",dlOpName:"lessEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",dlOpName:"logicalAnd",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",dlOpName:"logicalNot",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",dlOpName:"logicalOr",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",dlOpName:"where",category:"logical",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfInputIndex:1,dlParamName:"a",type:"tensor"},{tfInputIndex:2,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],logical=Object.freeze({json:json$9}),json$10=[{tfOpName:"MatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"transpose_a",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"transpose_b",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"adj_x",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"adj_y",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",dlOpName:"transpose",category:"matrices",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"perm",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],matrices=Object.freeze({json:json$10}),json$11=[{tfOpName:"FusedBatchNorm",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",dlOpName:"localResponseNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"depth_radius",dlParamName:"radius",type:"number",defaultValue:5},{tfParamName:"bias",dlParamName:"bias",type:"number",defaultValue:1},{tfParamName:"alpha",dlParamName:"alpha",type:"number",defaultValue:1},{tfParamName:"beta",dlParamName:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",dlOpName:"softmax",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",dlOpName:"logSoftmax",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"SparseToDense",dlOpName:"sparseToDense",category:"normalization",params:[{tfInputIndex:0,dlParamName:"sparseIndices",type:"tensor"},{tfInputIndex:1,dlParamName:"outputShape",type:"number[]"},{tfInputIndex:2,dlParamName:"sparseValues",type:"tensor"},{tfInputIndex:3,dlParamName:"defaultValue",type:"tensor"},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],normalization=Object.freeze({json:json$11}),json$12=[{tfOpName:"Max",dlOpName:"max",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Mean",dlOpName:"mean",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Min",dlOpName:"min",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Sum",dlOpName:"sum",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"All",dlOpName:"all",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Any",dlOpName:"any",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",dlOpName:"argMax",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ArgMin",dlOpName:"argMin",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"Prod",dlOpName:"prod",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]}],reduction=Object.freeze({json:json$12}),json$13=[{tfOpName:"ConcatV2",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:-1,dlParamName:"axis",type:"number"}]},{tfOpName:"Concat",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:1,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:0,dlParamName:"axis",type:"number"}]},{tfOpName:"GatherV2",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfInputIndex:2,dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"}]},{tfOpName:"Slice",dlOpName:"slice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"size",type:"number[]"}]},{tfOpName:"StridedSlice",dlOpName:"stridedSlice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"end",type:"number[]"},{tfInputIndex:3,dlParamName:"strides",type:"number[]"},{tfParamName:"begin_mask",dlParamName:"beginMask",type:"number",defaultValue:0},{tfParamName:"end_mask",dlParamName:"endMask",type:"number",defaultValue:0},{tfParamName:"new_axis_mask",dlParamName:"newAxisMask",type:"number",defaultValue:0},{tfParamName:"ellipsis_mask",dlParamName:"ellipsisMask",type:"number",defaultValue:0},{tfParamName:"shrink_axis_mask",dlParamName:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",dlOpName:"stack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",dlOpName:"unstack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"num",dlParamName:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",dlOpName:"tile",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"reps",type:"number[]"}]},{tfOpName:"Split",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"axis",type:"number",defaultValue:0},{tfInputIndex:1,dlParamName:"x",type:"tensor"},{tfParamName:"num_split",dlParamName:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"numOrSizeSplits",type:"number[]"},{tfInputIndex:2,dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",dlOpName:"scatterNd",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"indices",type:"tensor"},{tfInputIndex:1,dlParamName:"values",type:"tensor"},{tfInputIndex:2,dlParamName:"shape",type:"number[]"}]},{tfOpName:"GatherNd",dlOpName:"gatherNd",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",dlOpName:"sparseToDense",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"sparseIndices",type:"tensor"},{tfInputIndex:1,dlParamName:"outputShape",type:"number[]"},{tfInputIndex:2,dlParamName:"sparseValues",type:"tensor"},{tfInputIndex:3,dlParamName:"defaultValue",type:"tensor"},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],sliceJoin=Object.freeze({json:json$13}),json$14=[{tfOpName:"Cast",dlOpName:"cast",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"SrcT",dlParamName:"sdtype",type:"dtype",notSupported:!0},{tfParamName:"DstT",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",dlOpName:"expandDims",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfParamNameDeprecated:"dim",dlParamName:"axis",type:"number"}]},{tfOpName:"Pad",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfParamName:"constant_value",dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfInputIndex:2,dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",dlOpName:"reshape",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"shape",type:"number[]"}]},{tfOpName:"Squeeze",dlOpName:"squeeze",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"axis",tfParamNameDeprecated:"squeeze_dims",dlParamName:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",dlOpName:"spaceToBatchND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",dlOpName:"batchToSpaceND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",dlOpName:"depthToSpace",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"block_size",dlParamName:"blockSize",type:"number"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string"}]}],transformation=Object.freeze({json:json$14}),CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],DYNAMIC_SHAPE_OPS=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"],OperationMapper=function(){function N(){var S=[].concat.apply([],[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,logical,image$1,graph,matrices,normalization,reduction,sliceJoin,transformation].map(function(P){return P.json}));this.opMappers=S.reduce(function(P,c){return P[c.tfOpName]=c,P},{})}return Object.defineProperty(N,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),N.prototype.isControlFlow=function(M){return CONTROL_FLOW_OPS.some(function(S){return S===M.op})},N.prototype.isDynamicShape=function(M){return DYNAMIC_SHAPE_OPS.some(function(S){return S===M.op})},N.prototype.transformGraph=function(M){var S=this,P=!1,c=!1,B=[],R=[],W=M.node.reduce(function(pe,Ce){return pe[Ce.name]=S.mapNode(Ce),S.isControlFlow(Ce)&&(P=!0),S.isDynamicShape(Ce)&&(c=!0),"Placeholder"===Ce.op&&B.push(pe[Ce.name]),"Const"===Ce.op&&R.push(pe[Ce.name]),pe},{}),Y=[],Q=[];return Object.keys(W).forEach(function(pe){var Ce=W[pe];Ce.inputNames.forEach(function(ce){var me=getNodeNameAndIndex(ce)[0];Ce.inputs.push(W[me]),W[me].children.push(Ce)}),0===Ce.inputs.length&&Y.push(Ce)}),Object.keys(W).forEach(function(pe){var Ce=W[pe];0===Ce.children.length&&Q.push(Ce)}),{nodes:W,inputs:Y,outputs:Q,weights:R,placeholders:B,withControlFlow:P,withDynamicShape:c}},N.prototype.mapNode=function(M){var S=this,P=this.opMappers[M.op];if(void 0===P)throw new Error("Tensorflow Op is not supported: "+M.op);var c={name:M.name,op:P.dlOpName,category:P.category,inputNames:(M.input||[]).map(function(B){return B.startsWith("^")?B.substr(1):B}),inputs:[],children:[],params:{}};return P.params&&(c.params=P.params.reduce(function(B,R){var W=R.tfInputIndex,Y=R.tfInputParamLength,Q=R.type,pe=void 0;if(void 0===W)switch(R.type){case"string":void 0===(pe=S.getStringParam(M.attr,R.tfParamName,R.defaultValue))&&R.tfParamNameDeprecated&&(pe=S.getStringParam(M.attr,R.tfParamNameDeprecated,R.defaultValue));break;case"number":void 0===(pe=S.getNumberParam(M.attr,R.tfParamName,R.defaultValue))&&R.tfParamNameDeprecated&&(pe=S.getNumberParam(M.attr,R.tfParamNameDeprecated,R.defaultValue));break;case"number[]":void 0===(pe=S.getNumericArrayParam(M.attr,R.tfParamName,R.defaultValue))&&R.tfParamNameDeprecated&&(pe=S.getNumericArrayParam(M.attr,R.tfParamNameDeprecated,R.defaultValue));break;case"bool":void 0===(pe=S.getBoolParam(M.attr,R.tfParamName,R.defaultValue))&&R.tfParamNameDeprecated&&(pe=S.getBoolParam(M.attr,R.tfParamNameDeprecated,R.defaultValue));break;case"shape":void 0===(pe=S.getTensorShapeParam(M.attr,R.tfParamName,R.defaultValue))&&R.tfParamNameDeprecated&&(pe=S.getTensorShapeParam(M.attr,R.tfParamNameDeprecated,R.defaultValue));break;case"dtype":void 0===(pe=S.getDtypeParam(M.attr,R.tfParamName,R.defaultValue))&&R.tfParamNameDeprecated&&(pe=S.getDtypeParam(M.attr,R.tfParamNameDeprecated,R.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+R.type+" for op: "+M.op)}return B[R.dlParamName]={value:pe,inputIndex:W,type:Q,inputParamLength:Y},B},{})),c},N.prototype.getStringParam=function(M,S,P,c){void 0===c&&(c=!1);var B=M[S];if(void 0!==B){var R=String.fromCharCode.apply(null,B.s);return c?R:R.toLowerCase()}return P},N.prototype.getBoolParam=function(M,S,P){var c=M[S];return c?c.b:P},N.prototype.getNumberParam=function(M,S,P){var c=M[S],B=c?c[c.value]:P;return"number"==typeof B?B:B.toInt()},N.prototype.getDtypeParam=function(M,S,P){var c=M[S];if(c&&c.type)switch(c.type){case compiled_api_1.DataType.DT_FLOAT:return"float32";case compiled_api_1.DataType.DT_INT32:return"int32";case compiled_api_1.DataType.DT_BOOL:return"bool";default:return P}return P},N.prototype.getTensorShapeParam=function(M,S,P){var c=M[S];return c&&c.shape?c.shape.dim.map(function(B){return"number"==typeof B.size?B.size:B.size.toInt()}):P},N.prototype.getNumericArrayParam=function(M,S,P){var c=M[S];return c?(c.list.f&&c.list.f.length?c.list.f:c.list.i).map(function(B){return"number"==typeof B?B:B.toInt()}):P},N}(),executeOp=function(N,M,S){switch(N.op){case"add":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.IHx)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"addN":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.QBD)(getParamValue("tensors",N,M,S))];case"mod":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wQq)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"mul":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.dC7)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"div":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hiC)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"floorDiv":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.qPi)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"sub":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.luU)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"minimum":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.LTh)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"maximum":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.gWQ)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"pow":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.sQ3)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"squaredDifference":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.$i)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$1=function(N,M,S){switch(N.op){case"abs":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.WnP)(getParamValue("x",N,M,S))];case"acos":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Khb)(getParamValue("x",N,M,S))];case"acosh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.__u)(getParamValue("x",N,M,S))];case"asin":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ZRM)(getParamValue("x",N,M,S))];case"asinh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.VfV)(getParamValue("x",N,M,S))];case"atan":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.z4N)(getParamValue("x",N,M,S))];case"atan2":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.fvJ)(getParamValue("x",N,M,S),getParamValue("y",N,M,S))];case"atanh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.C80)(getParamValue("x",N,M,S))];case"ceil":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mDi)(getParamValue("x",N,M,S))];case"cos":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mCk)(getParamValue("x",N,M,S))];case"cosh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.f9Y)(getParamValue("x",N,M,S))];case"elu":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pyx)(getParamValue("x",N,M,S))];case"erf":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.qNN)(getParamValue("x",N,M,S))];case"exp":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qqt)(getParamValue("x",N,M,S))];case"expm1":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.t$B)(getParamValue("x",N,M,S))];case"floor":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.GWj)(getParamValue("x",N,M,S))];case"log":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.cM7)(getParamValue("x",N,M,S))];case"log1p":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Krr)(getParamValue("x",N,M,S))];case"neg":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.W76)(getParamValue("x",N,M,S))];case"reciprocal":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.M25)(getParamValue("x",N,M,S))];case"relu":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.UYe)(getParamValue("x",N,M,S))];case"round":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.NMM)(getParamValue("x",N,M,S))];case"selu":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.U8D)(getParamValue("x",N,M,S))];case"sigmoid":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XD2)(getParamValue("x",N,M,S))];case"sin":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.O$l)(getParamValue("x",N,M,S))];case"sign":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Xxe)(getParamValue("x",N,M,S))];case"sinh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.R_K)(getParamValue("x",N,M,S))];case"softplus":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wvh)(getParamValue("x",N,M,S))];case"sqrt":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__._b3)(getParamValue("x",N,M,S))];case"square":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.h62)(getParamValue("x",N,M,S))];case"tanh":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.AEp)(getParamValue("x",N,M,S))];case"tan":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ORZ)(getParamValue("x",N,M,S))];case"clipByValue":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iUl)(getParamValue("x",N,M,S),getParamValue("clipValueMin",N,M,S),getParamValue("clipValueMax",N,M,S))];case"rsqrt":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hiC)((0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1,"float32"),(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__._b3)(getTensor(N.inputNames[0],M,S)))];case"prod":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.WVs)(getParamValue("x",N,M,S),getParamValue("axes",N,M,S))];case"leakyRelu":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hi7)(getParamValue("x",N,M,S),getParamValue("alpha",N,M,S))];default:throw TypeError("Node type "+N.op+" is not implemented")}},TensorArray=function(){function N(M,S,P,c,B,R,W){this.name=M,this.dtype=S,this.maxSize=P,this.elementShape=c,this.identicalElementShapes=B,this.dynamicSize=R,this.clearAfterRead=W,this.tensors=[],this.closed_=!1,this.id=N.nextId++}return Object.defineProperty(N.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),N.prototype.clearAndClose=function(){this.tensors.forEach(function(M){return M.tensor.dispose()}),this.tensors=[],this.closed_=!0},N.prototype.size=function(){return this.tensors.length},N.prototype.read=function(M){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(M<0||M>=this.tensors.length)throw new Error("Tried to read from index "+M+", but array size is: "+this.tensors.length);var S=this.tensors[M];if(S.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+M+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(S.cleared=!0),S.read=!0,S.tensor},N.prototype.readMany=function(M){var S=this;return M.map(function(P){return S.read(P)})},N.prototype.write=function(M,S){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(M<0||!this.dynamicSize&&M>=this.maxSize)throw new Error("Tried to write to index "+M+", but array is not resizeable and size is: "+this.maxSize);var P=this.tensors[M]||{};if(S.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+M+",\n          because the value dtype is "+S.dtype+", but TensorArray dtype is "+this.dtype+".");if(0===this.size()&&0===this.elementShape.length&&(this.elementShape=S.shape),this.assertShapesMatch(this.elementShape,S.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+M+"."),P&&P.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+M+", because it has already been read.");if(P&&P.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+M+", because it has already been written.");P.tensor=S,P.written=!0,this.tensors[M]=P},N.prototype.writeMany=function(M,S){var P=this;if(M.length!==S.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+M.length+" is not the same as tensors size: "+S.length+".");M.forEach(function(c,B){return P.write(c,S[B])})},N.prototype.gather=function(M,S){if(S&&S!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+S);if(!M){M=[];for(var P=0;P<this.size();P++)M.push(P)}if(0===M.length)return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XeE)([],[0].concat(this.elementShape));var c=this.readMany(M);return this.assertShapesMatch(this.elementShape,c[0].shape,"TensorArray shape mismatch: "),(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.knu)(c,0)},N.prototype.concat=function(M){if(M&&M!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+M);if(0===this.size())return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XeE)([],[0].concat(this.elementShape));for(var S=[],P=0;P<this.size();P++)S.push(P);var c=this.readMany(S);return this.assertShapesMatch(this.elementShape,c[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+c[0].shape+")"),(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zoF)(c,0)},N.prototype.scatter=function(M,S){if(S.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+S.dtype);if(M.length!==S.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+M.length+" vs. "+S.shape[0]);var P=Math.max.apply(Math,M);if(!this.dynamicSize&&P>=this.maxSize)throw new Error("Max index must be < array size ("+P+"  vs. "+this.maxSize+")");this.writeMany(M,(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.HHK)(S,0))},N.prototype.split=function(M,S){var P=this;if(S.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+S.dtype);var c=0,B=M.map(function(pe){return c+=pe});if(c!==S.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+c+", and tensor's shape is: "+S.shape);if(!this.dynamicSize&&M.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+M.length+"), and the TensorArray is not marked as dynamically resizeable");var R=0===c?0:S.size/c,W=[];(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lub)(function(){S=S.reshape([1,c,R]);for(var pe=0;pe<M.length;++pe)W[pe]=(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tPi)(S,[0,0===pe?0:B[pe-1],0],[1,M[pe],R]).reshape(P.elementShape);return W});for(var Y=[],Q=0;Q<M.length;Q++)Y[Q]=Q;this.writeMany(Y,W)},N.prototype.assertShapesMatch=function(M,S,P){void 0===P&&(P=""),_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.assert(this.arraysEqual(M,S),P+" Shapes "+M+" and "+S+" must match")},N.prototype.arraysEqual=function(M,S){if(M.length!==S.length)return!1;for(var P=0;P<M.length;P++)if(-1!==M[P]&&-1!==S[P]&&M[P]!==S[P])return!1;return!0},N.nextId=0,N}();function executeOp$2(N,M,S){return __awaiter(this,void 0,void 0,function(){var P,c,B,R,W,Y,Q,pe,Ce,ce,me,Ne,at,tt,wt,lt,le,$e,xt,It,Ie,Vt,Ue,Ye,pt,kt,Oe,We,Fe,Mt,Pt,St,Yt,Yn,hi;return __generator(this,function(vn){switch(vn.label){case 0:switch(N.op){case"loopCond":return[3,1];case"switch":return[3,2];case"merge":return[3,4];case"enter":return[3,5];case"exit":return[3,6];case"nextIteration":return[3,7];case"tensorArray":return[3,8];case"tensorArrayWrite":return[3,9];case"tensorArrayRead":return[3,10];case"tensorArrayGather":return[3,11];case"tensorArrayScatter":return[3,12];case"tensorArrayConcat":return[3,13];case"tensorArraySplit":return[3,14];case"tensorArraySize":return[3,15];case"tensorArrayClose":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",N,M,S).clone()]];case 2:return P=getParamValue("pred",N,M,S),c=getParamValue("data",N,M,S),[4,P.data()];case 3:return[2,vn.sent()[0]?[void 0,c.clone()]:[c.clone(),void 0]];case 4:return[2,(B=N.inputNames.find(function(ft){return void 0!==getTensor(ft,M,S)}))?[getTensor(B,M,S).clone()]:void 0];case 5:return R=getParamValue("frameName",N,M,S),W=getParamValue("tensor",N,M,S),S.enterFrame(R),[2,[W.clone()]];case 6:return Y=getParamValue("tensor",N,M,S),S.exitFrame(),[2,[Y.clone()]];case 7:return Q=getParamValue("tensor",N,M,S),S.nextIteration(),[2,[Q.clone()]];case 8:return pe=getParamValue("size",N,M,S),Ce=getParamValue("dtype",N,M,S),ce=getParamValue("elementShape",N,M,S),me=getParamValue("dynamicSize",N,M,S),Ne=getParamValue("clearAfterRead",N,M,S),at=getParamValue("identicalElementShapes",N,M,S),tt=getParamValue("name",N,M,S),wt=new TensorArray(tt,Ce,pe,ce,at,me,Ne),S.addTensorArray(wt),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(wt.id),(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1)]];case 9:return lt=getParamValue("tensorArrayId",N,M,S),le=getParamValue("index",N,M,S),$e=getParamValue("tensor",N,M,S),S.getTensorArray(lt).write(le,$e),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1)]];case 10:return xt=getParamValue("tensorArrayId",N,M,S),It=getParamValue("index",N,M,S),[2,[S.getTensorArray(xt).read(It)]];case 11:return Ie=getParamValue("tensorArrayId",N,M,S),Vt=getParamValue("indices",N,M,S),Ue=getParamValue("dtype",N,M,S),[2,[S.getTensorArray(Ie).gather(Vt,Ue)]];case 12:return Ye=getParamValue("tensorArrayId",N,M,S),pt=getParamValue("indices",N,M,S),kt=getParamValue("tensor",N,M,S),S.getTensorArray(Ye).scatter(pt,kt),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1)]];case 13:return Oe=getParamValue("tensorArrayId",N,M,S),We=S.getTensorArray(Oe),Fe=getParamValue("dtype",N,M,S),[2,[We.concat(Fe)]];case 14:return Mt=getParamValue("tensorArrayId",N,M,S),Pt=getParamValue("tensor",N,M,S),St=getParamValue("lengths",N,M,S),S.getTensorArray(Mt).split(St,Pt),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(1)]];case 15:return Yt=getParamValue("tensorArrayId",N,M,S),Yn=S.getTensorArray(Yt),[2,[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(Yn.size(),"int32")]];case 16:return hi=getParamValue("tensorArrayId",N,M,S),S.getTensorArray(hi).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+N.op+" is not implemented")}})})}var executeOp$3=function(N,M,S){switch(N.op){case"conv1d":var P=getParamValue("stride",N,M,S),c=getParamValue("pad",N,M,S),B=getParamValue("dataFormat",N,M,S).toUpperCase(),R=getParamValue("dilation",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.PAt)(getParamValue("x",N,M,S),getParamValue("filter",N,M,S),P,c,B,R)];case"conv2d":P=getParamValue("strides",N,M,S),c=getParamValue("pad",N,M,S),B=getParamValue("dataFormat",N,M,S).toUpperCase();var W=getParamValue("dilations",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Tek)(getParamValue("x",N,M,S),getParamValue("filter",N,M,S),[P[1],P[2]],c,B,[W[0],W[1]])];case"conv2dTranspose":var Y=getParamValue("outputShape",N,M,S);return P=getParamValue("strides",N,M,S),c=getParamValue("pad",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bc)(getParamValue("x",N,M,S),getParamValue("filter",N,M,S),Y,[P[1],P[2]],c)];case"depthwiseConv2d":return P=getParamValue("strides",N,M,S),c=getParamValue("pad",N,M,S),W=getParamValue("dilations",N,M,S),B=getParamValue("dataFormat",N,M,S).toUpperCase(),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.B10)(getParamValue("input",N,M,S),getParamValue("filter",N,M,S),[P[1],P[2]],c,B,[W[0],W[1]])];case"avgPool":P=getParamValue("strides",N,M,S),c=getParamValue("pad",N,M,S);var Q=getParamValue("kernelSize",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wS1)(getParamValue("x",N,M,S),[Q[1],Q[2]],[P[1],P[2]],c)];case"maxPool":return P=getParamValue("strides",N,M,S),c=getParamValue("pad",N,M,S),Q=getParamValue("kernelSize",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__._sB)(getParamValue("x",N,M,S),[Q[1],Q[2]],[P[1],P[2]],c)];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$4=function(N,M,S){switch(N.op){case"fill":var P=getParamValue("shape",N,M,S),c=getParamValue("dtype",N,M,S),B=getParamValue("value",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hlL)(P,B,c)];case"linspace":var R=getParamValue("start",N,M,S),W=getParamValue("stop",N,M,S),Y=getParamValue("num",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.SX3)(R,W,Y)];case"oneHot":var Q=getParamValue("indices",N,M,S),pe=getParamValue("depth",N,M,S),Ce=getParamValue("onValue",N,M,S),ce=getParamValue("offValue",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lfX)(Q,pe,Ce,ce)];case"ones":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iUs)(getParamValue("shape",N,M,S),getParamValue("dtype",N,M,S))];case"onesLike":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.JpU)(getParamValue("x",N,M,S))];case"randomUniform":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.LGj)(getParamValue("shape",N,M,S),getParamValue("minval",N,M,S),getParamValue("maxval",N,M,S),getParamValue("dtype",N,M,S))];case"range":R=getParamValue("start",N,M,S);var me=getParamValue("stop",N,M,S),Ne=getParamValue("step",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.w6H)(R,me,Ne,getParamValue("dtype",N,M,S))];case"truncatedNormal":P=getParamValue("shape",N,M,S);var at=getParamValue("mean",N,M,S),tt=getParamValue("stdDev",N,M,S),wt=getParamValue("seed",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Xu6)(P,at,tt,getParamValue("dtype",N,M,S),wt)];case"zeros":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lls)(getParamValue("shape",N,M,S),getParamValue("dtype",N,M,S))];case"zerosLike":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.P84)(getParamValue("x",N,M,S))];default:throw TypeError("Node type "+N.op+" is not implemented")}};function executeOp$5(N,M,S){return __awaiter(this,void 0,void 0,function(){var P,c,B,R,W;return __generator(this,function(Y){switch(Y.label){case 0:switch(N.op){case"nonMaxSuppression":return[3,1];case"whereAsync":return[3,3];case"setdiff1dAsync":return[3,5]}return[3,7];case 1:return P=getParamValue("boxes",N,M,S),c=getParamValue("scores",N,M,S),B=getParamValue("maxOutputSize",N,M,S),R=getParamValue("iouThreshold",N,M,S),W=getParamValue("scoreThreshold",N,M,S),[4,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.BHj.nonMaxSuppressionAsync(P,c,B,R,W)];case 2:case 4:return[2,[Y.sent()]];case 3:return[4,(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.itS)(getParamValue("condition",N,M,S))];case 5:return[4,(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ODp)(getParamValue("x",N,M,S),getParamValue("y",N,M,S))];case 6:return[2,Y.sent()];case 7:throw TypeError("Node type "+N.op+" is not implemented")}})})}var executeOp$6=function(N,M,S){if("topK"===N.op){var P=getParamValue("x",N,M,S),c=getParamValue("k",N,M,S),B=getParamValue("sorted",N,M,S),R=(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hg7)(P,c,B);return[R.values,R.indices]}throw TypeError("Node type "+N.op+" is not implemented")},executeOp$7=function(N,M,S){switch(N.op){case"const":return M[N.name];case"placeholder":var P=getParamValue("default",N,M,S);return[getTensor(N.name,M,S)||P];case"identity":case"stopGradient":case"fakeQuantWithMinMaxVars":case"snapshot":return[getParamValue("x",N,M,S).clone()];case"shape":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.RRF)(getParamValue("x",N,M,S).shape,"int32")];case"shapeN":return getParamValue("x",N,M,S).map(function(Q){return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.RRF)(Q.shape)});case"size":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(getParamValue("x",N,M,S).size,"int32")];case"rank":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.iD$)(getParamValue("x",N,M,S).rank,"int32")];case"noop":return[];case"print":var c=getParamValue("x",N,M,S),B=getParamValue("data",N,M,S),R=getParamValue("message",N,M,S),W=getParamValue("summarize",N,M,S);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(R);for(var Y=0;Y<B.length;Y++)console.log(Array.prototype.slice.call(B[0].dataSync()).slice(0,W));return[c];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$8=function(N,M,S){switch(N.op){case"resizeBilinear":var P=getParamValue("images",N,M,S),c=getParamValue("size",N,M,S),B=getParamValue("alignCorners",N,M,S);return[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.BHj.resizeBilinear(P,[c[0],c[1]],B)];case"resizeNearestNeighbor":return P=getParamValue("images",N,M,S),c=getParamValue("size",N,M,S),B=getParamValue("alignCorners",N,M,S),[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.BHj.resizeNearestNeighbor(P,[c[0],c[1]],B)];case"cropAndResize":var R=getParamValue("image",N,M,S),W=getParamValue("boxes",N,M,S),Y=getParamValue("boxInd",N,M,S),Q=getParamValue("cropSize",N,M,S),pe=getParamValue("method",N,M,S),Ce=getParamValue("extrapolationValue",N,M,S);return[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.BHj.cropAndResize(R,W,Y,Q,pe,Ce)];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$9=function(N,M,S){switch(N.op){case"equal":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.DgJ)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"notEqual":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Quu)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"greater":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pjt)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"greaterEqual":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.brS)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"less":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.d9m)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"lessEqual":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zN1)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"logicalAnd":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.HvI)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"logicalNot":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hJK)(getParamValue("a",N,M,S))];case"logicalOr":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.K5V)(getParamValue("a",N,M,S),getParamValue("b",N,M,S))];case"where":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.arb)(getParamValue("condition",N,M,S),getParamValue("a",N,M,S),getParamValue("b",N,M,S))];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$10=function(N,M,S){switch(N.op){case"matMul":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.OI3)(getParamValue("a",N,M,S),getParamValue("b",N,M,S),getParamValue("transposeA",N,M,S),getParamValue("transposeB",N,M,S))];case"transpose":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.p4s)(getParamValue("x",N,M,S),getParamValue("perm",N,M,S))];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$11=function(N,M,S){switch(N.op){case"batchNormalization":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.F08)(getParamValue("x",N,M,S),getParamValue("mean",N,M,S),getParamValue("variance",N,M,S),getParamValue("epsilon",N,M,S),getParamValue("scale",N,M,S),getParamValue("offset",N,M,S))];case"localResponseNormalization":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.G9k)(getParamValue("x",N,M,S),getParamValue("radius",N,M,S),getParamValue("bias",N,M,S),getParamValue("alpha",N,M,S),getParamValue("beta",N,M,S))];case"softmax":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XAC)(getParamValue("x",N,M,S))];case"logSoftmax":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.CmS)(getParamValue("x",N,M,S))];case"sparseToDense":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ers)(getParamValue("sparseIndices",N,M,S),getParamValue("outputShape",N,M,S),getParamValue("sparseValues",N,M,S),getParamValue("defaultValue",N,M,S))];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$12=function(N,M,S){switch(N.op){case"max":var P=getParamValue("axis",N,M,S),c=getParamValue("keepDims",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fp7)(getParamValue("x",N,M,S),P,c)];case"mean":return P=getParamValue("axis",N,M,S),c=getParamValue("keepDims",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.J69)(getParamValue("x",N,M,S),P,c)];case"min":return P=getParamValue("axis",N,M,S),c=getParamValue("keepDims",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.VV$)(getParamValue("x",N,M,S),P,c)];case"sum":return P=getParamValue("axis",N,M,S),c=getParamValue("keepDims",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Smz)(getParamValue("x",N,M,S),P,c)];case"all":return P=getParamValue("axis",N,M,S),c=getParamValue("keepDims",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.$6P)(getParamValue("x",N,M,S),P,c)];case"any":return P=getParamValue("axis",N,M,S),c=getParamValue("keepDims",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.YjB)(getParamValue("x",N,M,S),P,c)];case"argMax":return P=getParamValue("axis",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.NqF)(getParamValue("x",N,M,S),P)];case"argMin":return P=getParamValue("axis",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vHJ)(getParamValue("x",N,M,S),P)];case"prod":return P=getParamValue("axis",N,M,S),c=getParamValue("keepDims",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.WVs)(getParamValue("x",N,M,S),P,c)];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$13=function(N,M,S){switch(N.op){case"concat":var P=getParamValue("axis",N,M,S),c=getParamValue("tensors",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zoF)(c,P)];case"gather":P=getParamValue("axis",N,M,S);var B=getParamValue("x",N,M,S),R=getParamValue("indices",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Iqj)(B,R,P)];case"reverse":return P=getParamValue("axis",N,M,S),B=getParamValue("x",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.GYS)(B,P)];case"slice":var W=getParamValue("begin",N,M,S),Y=getParamValue("size",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tPi)(getParamValue("x",N,M,S),W,Y)];case"stridedSlice":W=getParamValue("begin",N,M,S);var Q=getParamValue("end",N,M,S),pe=getParamValue("strides",N,M,S),Ce=getParamValue("beginMask",N,M,S),ce=getParamValue("endMask",N,M,S),me=getParamValue("ellipsisMask",N,M,S),Ne=getParamValue("newAxisMask",N,M,S),at=getParamValue("shrinkAxisMask",N,M,S),tt=getParamValue("x",N,M,S);if(1===W.length&&tt.shape.length>1)for(var wt=1;wt<tt.shape.length;wt++)W.push(0),Q.push(tt.shape[wt]),pe.push(pe[0]);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.NXj)(tt,W,Q,pe,Ce,ce,me,Ne,at)];case"stack":return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lub)(function(){var Ue=getParamValue("axis",N,M,S),Ye=getParamValue("tensors",N,M,S),pt=Ye[0].shape,kt=Ye[0].squeeze().shape,Oe=Ye.map(function(We){var Fe=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.arraysEqual(We.shape,pt);if(!Fe&&!_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.arraysEqual(We.squeeze().shape,kt))throw new Error("the input tensors shape does not match");return Fe?We:We.reshape(pt)});return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.knu)(Oe,Ue)]});case"unstack":return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lub)(function(){var Ue=getParamValue("axis",N,M,S),Ye=getParamValue("tensor",N,M,S);return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.HHK)(Ye,Ue)});case"tile":var lt=getParamValue("reps",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Gg6)(getParamValue("x",N,M,S),lt)];case"split":P=getParamValue("axis",N,M,S);var le=getParamValue("numOrSizeSplits",N,M,S);return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Vl2)(getParamValue("x",N,M,S),le,P);case"scatterNd":R=getParamValue("indices",N,M,S);var $e=getParamValue("values",N,M,S),xt=getParamValue("shape",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.snQ)(R,$e,xt)];case"gatherNd":var It=getParamValue("x",N,M,S);return R=getParamValue("indices",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.dbB)(It,R)];case"sparseToDense":R=getParamValue("sparseIndices",N,M,S),xt=getParamValue("outputShape",N,M,S);var Ie=getParamValue("sparseValues",N,M,S),Vt=getParamValue("defaultValue",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ers)(R,Ie,xt,Vt)];default:throw TypeError("Node type "+N.op+" is not implemented")}},executeOp$14=function(N,M,S){switch(N.op){case"cast":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pju)(getParamValue("x",N,M,S),getParamValue("dtype",N,M,S))];case"expandDims":var P=getParamValue("axis",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.dt4)(getParamValue("x",N,M,S),P)];case"squeeze":return P=getParamValue("axis",N,M,S),[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.L9e)(getParamValue("x",N,M,S),P)];case"reshape":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.XLQ)(getParamValue("x",N,M,S),getParamValue("shape",N,M,S))];case"pad":return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vku)(getParamValue("x",N,M,S),split$1(getParamValue("padding",N,M,S),2),getParamValue("constantValue",N,M,S))];case"spaceToBatchND":var c=getParamValue("blockShape",N,M,S),B=split$1(getParamValue("paddings",N,M,S),2);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.fBT)(getParamValue("x",N,M,S),c,B)];case"batchToSpaceND":c=getParamValue("blockShape",N,M,S);var R=split$1(getParamValue("crops",N,M,S),2);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.E4h)(getParamValue("x",N,M,S),c,R)];case"depthToSpace":var W=getParamValue("blockSize",N,M,S),Y=getParamValue("dataFormat",N,M,S);return[(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nTT)(getParamValue("x",N,M,S),W,Y)];default:throw TypeError("Node type "+N.op+" is not implemented")}};function executeOp$15(N,M,S){switch(N.category){case"arithmetic":return executeOp(N,M,S);case"basic_math":return executeOp$1(N,M,S);case"control":return executeOp$2(N,M,S);case"convolution":return executeOp$3(N,M,S);case"creation":return executeOp$4(N,M,S);case"dynamic":return executeOp$5(N,M,S);case"evaluation":return executeOp$6(N,M,S);case"image":return executeOp$8(N,M,S);case"graph":return executeOp$7(N,M,S);case"logical":return executeOp$9(N,M,S);case"matrices":return executeOp$10(N,M,S);case"normalization":return executeOp$11(N,M,S);case"reduction":return executeOp$12(N,M,S);case"slice_join":return executeOp$13(N,M,S);case"transformation":return executeOp$14(N,M,S);default:throw TypeError("Node type "+N.op+" is not implemented")}}var ExecutionContext=function(){function N(M,S){this.weightMap=M,this.tensorArrayMap=S,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return N.prototype.newFrame=function(M,S){return{id:M,frameName:S,iterationId:0}},Object.defineProperty(N.prototype,"currentContext",{get:function(){return this.contexts},set:function(M){this.contexts!==M&&(this.contexts=M,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),N.prototype.generateCurrentContextIds=function(){for(var M=[],S=0;S<this.contexts.length-1;S++){var P=this.contexts.slice(0,this.contexts.length-S);M.push(this.contextIdforContexts(P))}M.push(""),this._currentContextIds=M},N.prototype.contextIdforContexts=function(M){return M?M.map(function(S){return 0===S.id&&0===S.iterationId?"":S.frameName+"-"+S.iterationId}).join("/"):""},N.prototype.enterFrame=function(M){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,M)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},N.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},N.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var M=Object.assign({},this.contexts[this.contexts.length-1]);M.iterationId+=1,M.id=this.lastId,this.contexts.splice(-1,1,M),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},N.prototype.getWeight=function(M){return this.weightMap[M]},N.prototype.addTensorArray=function(M){this.tensorArrayMap[M.id]=M},N.prototype.getTensorArray=function(M){return this.tensorArrayMap[M]},N}(),GraphExecutor=function(){function N(M){this.graph=M,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=M.placeholders,this._outputs=M.outputs,this.compile()}return Object.defineProperty(N.prototype,"weightMap",{get:function(){return this._weightMap},set:function(M){var S=Object.keys(M).map(function(P){return M[P].map(function(c){return c.id})});this.weightIds=[].concat.apply([],S),this._weightMap=M},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"inputs",{get:function(){return this.placeholders.map(function(M){return{name:M.name,shape:M.params.shape?M.params.shape.value:void 0,dtype:M.params.dtype?M.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"outputs",{get:function(){return this._outputs.map(function(M){return{name:M.name,shape:M.params.shape?M.params.shape.value:void 0,dtype:M.params.dtype?M.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(M){return M.name})},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"outputNodes",{get:function(){return this.outputs.map(function(M){return M.name})},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"isControlFlowModel",{get:function(){return this.graph.withControlFlow},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"isDynamicShapeModel",{get:function(){return this.graph.withDynamicShape},enumerable:!0,configurable:!0}),N.prototype.compile=function(M){if(!this.graph.withControlFlow&&!this.graph.withDynamicShape){var S=[],P=M||this.graph.placeholders,c=P.map(function(Y){return Y.name}).sort().join(this.SEPERATOR);if(!this.compiledMap.get(c)){for(var B=P.concat(this.graph.weights),R={};B.length>0;){var W=B.pop();R[W.name]=!0,S.push(W),W.children.forEach(function(Y){!R[Y.name]&&Y.inputNames.every(function(Q){var pe=getNodeNameAndIndex(Q)[0];return R[pe]})&&B.push(Y)})}this.compiledMap.set(c,S)}}},N.prototype.execute=function(M,S,P){var c=this;void 0===S&&(S=!0);var B=Object.keys(M).sort();this.checkInput(M,S),this.checkInputShapeAndType(M,S),this.compile(B.map(function(Y){return c.graph.nodes[Y]}));var R=this.calculateOutputs(P);this.checkOutput(this.compiledMap.get(B.join(this.SEPERATOR)),R);var W={};return(0,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lub)(function(){for(var Y=new ExecutionContext(c._weightMap,W),Q=__assign({},c.weightMap,M),pe=c.getFrozenTensorIds(Q),Ce={},ce=c.compiledMap.get(B.join(c.SEPERATOR)),me=0;me<ce.length;me++){var Ne=ce[me];if(Q[Ne.name]||(Q[Ne.name]=executeOp$15(Ne,Q,Y),c.checkTensorForDisposal(Ne.name,Ne,Q,Y,pe,Ce)),R.every(function(at){return!!Q[at]}))break}return c.findOutputs(Q,Y,R)})},N.prototype.getFrozenTensorIds=function(M){var S=[].concat.apply([],Object.keys(M).map(function(P){return M[P]}).map(function(P){return P.map(function(c){return c.id})}));return new Set(S)},N.prototype.checkTensorForDisposal=function(M,S,P,c,B,R){"control"!==S.category&&(P[M].forEach(function(W){null!=W&&(R[W.id]=(R[W.id]||0)+S.children.length)}),S.inputs.forEach(function(W){if("control"!==W.category){var Y=getTensorsForCurrentContenxt(W.name,P,c);Y?.forEach(function(Q){if(Q&&!B.has(Q.id)){var pe=R[Q.id];1===pe?(Q.dispose(),delete R[Q.id]):null!=pe&&R[Q.id]--}})}}))},N.prototype.executeAsync=function(M,S){return __awaiter(this,void 0,void 0,function(){var c,B,R,W,Y,Q,pe=this;return __generator(this,function(Ce){switch(Ce.label){case 0:return this.checkInput(M,!1),this.checkInputShapeAndType(M,!1),c=new ExecutionContext(this._weightMap,{}),[4,this.executeWithControlFlow(M,c)];case 1:return B=Ce.sent(),R=this.findOutputs(B,c,S),W=Object.keys(R).map(function(ce){return R[ce].id}),Y=Object.keys(M).map(function(ce){return M[ce].map(function(me){return me.id})}),Q=[].concat.apply([],Y),Object.keys(B).forEach(function(ce){B[ce].forEach(function(me){me&&-1===W.indexOf(me.id)&&-1===Q.indexOf(me.id)&&-1===pe.weightIds.indexOf(me.id)&&me.dispose()})}),[2,R]}})})},N.prototype.executeWithControlFlow=function(M,S){return __awaiter(this,void 0,void 0,function(){var P,c,B,R,W,Y,Q,pe,Ce=this;return __generator(this,function(ce){switch(ce.label){case 0:P=Object.keys(M),c=P.map(function(me){return Ce.graph.nodes[me]}),B=c.concat(this.graph.weights).map(function(me){return{node:me,contexts:S.currentContext}}),R=__assign({},this.weightMap,M),W={},Y=this.getFrozenTensorIds(R),Q={},ce.label=1;case 1:return B.length>0?(pe=this.processStack(c,B,S,R,Q,Y,W),[4,Promise.all(pe)]):[3,3];case 2:return ce.sent(),[3,1];case 3:return[2,R]}})})},N.prototype.processStack=function(M,S,P,c,B,R,W){for(var Y=this,Q=[],pe=function(){var ce=S.pop();P.currentContext=ce.contexts;var me="";if("enter"===ce.node.op&&getParamValue("isConstant",ce.node,c,P)&&(me=getNodeNameAndIndex(ce.node.name,P)[0]),-1===M.indexOf(ce.node)){var Ne=executeOp$15(ce.node,c,P);me||(me=getNodeNameAndIndex(ce.node.name,P)[0]);var at=P.currentContext;Ne instanceof Promise?Q.push(Ne.then(function(tt){return c[me]=tt,P.currentContext=at,Y.checkTensorForDisposal(me,ce.node,c,P,R,W),Y.processChildNodes(ce.node,S,P,c,B),tt})):(c[me]=Ne,Ce.checkTensorForDisposal(me,ce.node,c,P,R,W),Ce.processChildNodes(ce.node,S,P,c,B))}else Ce.processChildNodes(ce.node,S,P,c,B)},Ce=this;S.length>0;)pe();return Q},N.prototype.processChildNodes=function(M,S,P,c,B){M.children.forEach(function(R){var W=getNodeNameAndIndex(R.name,P)[0];B[W]||("merge"===R.op?R.inputNames.some(function(Y){return!!getTensor(Y,c,P)})&&(B[W]=!0,S.push({contexts:P.currentContext,node:R})):R.inputNames.every(function(Y){return!!getTensor(Y,c,P)})&&(B[W]=!0,S.push({contexts:P.currentContext,node:R})))})},N.prototype.calculateOutputs=function(M){return!M||M instanceof Array||(M=[M]),M||this.graph.outputs.map(function(S){return S.name})},N.prototype.findOutputs=function(M,S,P){return this.calculateOutputs(P).reduce(function(c,B){return c[B]=getTensor(B,M,S),c},{})},N.prototype.dispose=function(){var M=this;Object.keys(this.weightMap).forEach(function(S){return M.weightMap[S].forEach(function(P){return P.dispose()})})},N.prototype.checkInputShapeAndType=function(M,S){void 0===S&&(S=!0),this.placeholders.forEach(function(P){var c=M[P.name];if(S||c){var B=c[0];if(P.params.shape&&P.params.shape.value){var R=P.params.shape.value,W=R.length===B.shape.length&&B.shape.every(function(Y,Q){return-1===R[Q]||R[Q]===Y});_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.assert(W,"The shape of dict['"+P.name+"'] provided in model.execute(dict) must be ["+R+"], but was ["+B.shape+"]")}P.params.dtype&&P.params.dtype.value&&_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.D5U.assert(B.dtype===P.params.dtype.value,"The dtype of dict['"+P.name+"'] provided in model.execute(dict) must be "+P.params.dtype.value+", but was "+B.dtype)}})},N.prototype.checkInput=function(M,S){var P=this;void 0===S&&(S=!0);var c=Object.keys(M),B=[],R=[];this.inputNodes.forEach(function(Y){-1===c.indexOf(Y)&&B.push(Y)}),c.forEach(function(Y){-1===P.inputNodes.indexOf(Y)&&R.push(Y)});var W=R.filter(function(Y){return!P.graph.nodes[Y]});if(B.length>0&&S)throw new Error("The dict provided in model.execute(dict) has the keys ["+c+"], but is missing the required keys: ["+B+"].");if(R.length>0&&S)throw new Error("The dict provided in model.execute(dict) has unused keys: ["+R+"]. Please provide only the following keys: ["+this.inputNodes+"].");if(W.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+W+"] not part of model graph.")},N.prototype.checkOutput=function(M,S){var P=M.map(function(B){return B.name}),c=[];if(S.forEach(function(B){-1===P.indexOf(B)&&c.push(B)}),c.length>0)throw new Error("The following outputs are not be generated by the execution: ["+c+"].")},N}(),FrozenModel=function(){function N(M,S,P){this.modelUrl=M,this.weightManifestUrl=S,this.requestOption=P,this.version="n/a"}return Object.defineProperty(N.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),N.prototype.findIOHandler=function(){var M=[this.modelUrl,this.weightManifestUrl];if(this.requestOption)this.handler=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.io.browserHTTPRequest(M,this.requestOption);else{var S=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.io.getLoadHandlers(M);if(0===S.length)S.push(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.io.browserHTTPRequest(M,this.requestOption));else if(S.length>1)throw new Error("Found more than one ("+S.length+") load handlers for URL '"+[M]+"'");this.handler=S[0]}},N.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var M,S,P;return __generator(this,function(c){switch(c.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return M=c.sent(),S=compiled_api_1.GraphDef.decode(new Uint8Array(M.modelTopology)),this.version=S.versions.producer+"."+S.versions.minConsumer,P=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.io.decodeWeights(M.weightData,M.weightSpecs),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(S)),this.executor.weightMap=this.convertTensorMapToTensorsMap(P),[2,!0]}})})},N.prototype.predict=function(M,S){return this.execute_(M,!0,this.outputNodes)},N.prototype.constructTensorMap=function(M){var S=M instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.esB?[M]:M;if(S.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the frozen model has "+this.inputNodes.length+" placeholders, while there are "+S.length+" input tensors.");return this.inputNodes.reduce(function(P,c,B){return P[c]=S[B],P},{})},N.prototype.execute=function(M,S){return this.execute_(M,!1,S)},N.prototype.execute_=function(M,S,P){if(void 0===S&&(S=!0),P=P||this.outputNodes,(M instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.esB||Array.isArray(M))&&(M=this.constructTensorMap(M)),this.executor.isControlFlowModel||this.executor.isDynamicShapeModel)throw new Error("The model contains control flow or dynamic shape ops, please use executeAsync method");var c=this.executor.execute(this.convertTensorMapToTensorsMap(M),S,P),B=Object.keys(c);return Array.isArray(P)&&P.length>1?P.map(function(R){return c[R]}):c[B[0]]},N.prototype.executeAsync=function(M,S){return __awaiter(this,void 0,void 0,function(){var P,c;return __generator(this,function(B){switch(B.label){case 0:if(!this.executor.isControlFlowModel&&!this.executor.isDynamicShapeModel)throw new Error("The model does not contain control flow or dynamic shape ops, please use execute method for better performance.");return S=S||this.outputNodes,(M instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.esB||Array.isArray(M))&&(M=this.constructTensorMap(M)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(M),S)];case 1:return P=B.sent(),c=Object.keys(P),[2,Array.isArray(S)&&S.length>1?S.map(function(R){return P[R]}):P[c[0]]]}})})},N.prototype.convertTensorMapToTensorsMap=function(M){return Object.keys(M).reduce(function(S,P){return S[P]=[M[P]],S},{})},N.prototype.dispose=function(){this.executor.dispose()},N}();function loadFrozenModel(N,M,S){return __awaiter(this,void 0,void 0,function(){var P;return __generator(this,function(c){switch(c.label){case 0:return[4,(P=new FrozenModel(N,M,S)).load()];case 1:return c.sent(),[2,P]}})})}var version="0.6.7"},2113:(N,M,S)=>{"use strict";S.d(M,{$6P:()=>pv,$i:()=>Nd,$r2:()=>Pd,AEp:()=>Bp,AKD:()=>Xy,AL3:()=>Sv,B10:()=>Qf,B90:()=>Pa,BHj:()=>jv,Bfx:()=>Gu,C1$:()=>mh,C80:()=>Vy,CQI:()=>Iw,CmS:()=>Fa,CnO:()=>uv,CnY:()=>Bn,D5U:()=>_r,DBS:()=>Dm,DYp:()=>mf,DgJ:()=>om,E4h:()=>bh,F08:()=>Vp,FGK:()=>Ss,Fp7:()=>im,G9k:()=>Yg,GWj:()=>Mh,GYS:()=>Qa,Gg6:()=>Xa,Gi7:()=>Lg,HHK:()=>zf,HeW:()=>Sm,HvI:()=>fm,IH3:()=>bo,IHx:()=>Bh,Ioh:()=>Mg,Iqj:()=>Qg,IrJ:()=>Ad,Izb:()=>Ya,J69:()=>Wp,JHc:()=>Ky,JLz:()=>ki,JpU:()=>Pi,K5V:()=>Cv,KOy:()=>Ou,Khb:()=>Ry,Krr:()=>wg,L9e:()=>Cy,LGj:()=>dg,LTh:()=>Uh,Lfl:()=>Ac,M25:()=>Nh,MB5:()=>cf,MNy:()=>Sp,N2O:()=>Qy,N5s:()=>Wd,N8o:()=>Tw,NMM:()=>xg,NT4:()=>$g,NXj:()=>bm,NZz:()=>Ze,N_N:()=>SE,Nbs:()=>Wy,NqF:()=>rm,O$l:()=>zy,ODp:()=>hg,OI3:()=>Yy,ORZ:()=>Oh,O_u:()=>Zp,P84:()=>Nn,PAt:()=>Ag,PYB:()=>Jt,QBD:()=>Qp,QEs:()=>$l,Qqt:()=>kp,Quu:()=>lm,RRF:()=>ko,R_K:()=>Zf,S0v:()=>Uf,SDf:()=>tv,SFm:()=>Kp,SJ_:()=>wy,SX3:()=>eu,SmN:()=>Hp,Smz:()=>Bg,Sxn:()=>$h,TN_:()=>Ey,Tek:()=>Ed,U8D:()=>Kg,ULw:()=>Nu,UQy:()=>He,UYe:()=>Wo,U_I:()=>Rh,VD$:()=>jn,VV$:()=>fv,VfV:()=>Ly,ViN:()=>ve,Vl2:()=>wu,W76:()=>qf,WVs:()=>Vg,WnP:()=>zl,Wvh:()=>jy,Wzl:()=>Mu,XAC:()=>Kn,XD2:()=>Lp,XLQ:()=>Ch,XVJ:()=>co,XeE:()=>vr,Xu6:()=>vd,Xxe:()=>Kf,YDk:()=>Vr,YjB:()=>nm,ZRM:()=>Fy,ZaL:()=>Dp,Zuw:()=>ca,__u:()=>ky,_b3:()=>Hy,_jk:()=>bv,_sB:()=>av,_wD:()=>Io,a4z:()=>S_,arb:()=>Gg,asL:()=>ua,bVb:()=>$o,bZ8:()=>B0,bc:()=>Sc,bp0:()=>Fp,brS:()=>Ug,cM7:()=>bg,cbc:()=>Rn,csF:()=>Eg,d9m:()=>Cs,d9v:()=>yy,dC7:()=>Md,d_R:()=>S0,dbB:()=>Ov,diP:()=>Pg,dt4:()=>wc,e_t:()=>Gf,egP:()=>H0,ers:()=>Nv,esB:()=>Tt,f3b:()=>lr,f9Y:()=>vg,fBT:()=>Sh,fNQ:()=>wn,fvJ:()=>hm,g1k:()=>am,gME:()=>bu,gVI:()=>D_,gWQ:()=>Td,gaJ:()=>Kh,glt:()=>Wv,h62:()=>$y,h76:()=>Qt,hJK:()=>Wg,hg7:()=>wm,hi7:()=>qg,hiC:()=>Vh,hlL:()=>Bs,iD$:()=>st,iUl:()=>g0,iUs:()=>Mr,io:()=>vw,itS:()=>zh,iyy:()=>vy,jTM:()=>Sw,jZU:()=>em,knu:()=>xu,koy:()=>Sa,kp_:()=>Hh,kwC:()=>fs,lGY:()=>xc,l_t:()=>Fg,lfX:()=>xh,lls:()=>Fr,luU:()=>ef,lub:()=>Sn,m7h:()=>vE,mAU:()=>bw,mCk:()=>yg,mDi:()=>Wf,mG2:()=>Rg,nGf:()=>Ec,nTT:()=>s0,nXo:()=>by,odF:()=>ms,op:()=>Te,p0P:()=>kg,p3L:()=>Cw,p4s:()=>K0,pNR:()=>Eh,pUJ:()=>vm,p_:()=>jh,p_j:()=>Dw,pjt:()=>Fh,pju:()=>wh,pnJ:()=>Ln,pyx:()=>gm,qAh:()=>pr,qNN:()=>Uy,qPi:()=>Id,r7z:()=>Jp,rIn:()=>ob,rq4:()=>Od,sQ3:()=>Da,snQ:()=>rE,sq6:()=>Aw,sx7:()=>nv,sz_:()=>vv,t$B:()=>jl,t1L:()=>xy,tPi:()=>Iu,tiA:()=>mt,uN7:()=>Mv,vHJ:()=>N0,vku:()=>yd,w6H:()=>tu,wOQ:()=>po,wQq:()=>Ja,wS1:()=>Cd,xZs:()=>Ji,yOA:()=>CE,yXz:()=>Ti,yw1:()=>gs,z4N:()=>By,zEQ:()=>el,zJI:()=>C_,zN1:()=>Lh,zVC:()=>sm,zbp:()=>o0,zoF:()=>is,zqr:()=>Au});var P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,i){u.__proto__=i}||function(u,i){for(var a in i)i.hasOwnProperty(a)&&(u[a]=i[a])};function c(u,i){function a(){this.constructor=u}P(u,i),u.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}var B=Object.assign||function(u){for(var i,a=1,d=arguments.length;a<d;a++)for(var f in i=arguments[a])Object.prototype.hasOwnProperty.call(i,f)&&(u[f]=i[f]);return u};function R(u,i,a,d){return new(a||(a=Promise))(function(f,y){function w(U){try{O(d.next(U))}catch(j){y(j)}}function C(U){try{O(d.throw(U))}catch(j){y(j)}}function O(U){U.done?f(U.value):new a(function(j){j(U.value)}).then(w,C)}O((d=d.apply(u,i||[])).next())})}function W(u,i){var a,d,f,y,w={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return y={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function C(O){return function(U){return function(j){if(a)throw new TypeError("Generator is already executing.");for(;w;)try{if(a=1,d&&(f=2&j[0]?d.return:j[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,j[1])).done)return f;switch(d=0,f&&(j=[2&j[0],f.value]),j[0]){case 0:case 1:f=j;break;case 4:return w.label++,{value:j[1],done:!1};case 5:w.label++,d=j[1],j=[0];continue;case 7:j=w.ops.pop(),w.trys.pop();continue;default:if(!(f=(f=w.trys).length>0&&f[f.length-1])&&(6===j[0]||2===j[0])){w=0;continue}if(3===j[0]&&(!f||j[1]>f[0]&&j[1]<f[3])){w.label=j[1];break}if(6===j[0]&&w.label<f[1]){w.label=f[1],f=j;break}if(f&&w.label<f[2]){w.label=f[2],w.ops.push(j);break}f[2]&&w.ops.pop(),w.trys.pop();continue}j=i.call(u,w)}catch(q){j=[6,q],d=0}finally{a=f=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([O,U])}}}var Y={},Q={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function pe(u){u in Y||(document.createElement("canvas").addEventListener("webglcontextlost",function(a){a.preventDefault(),delete Y[u]},!1),Y[u]=function Ce(u){if(1!==u&&2!==u)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var i=document.createElement("canvas");return 1===u?i.getContext("webgl",Q)||i.getContext("experimental-webgl",Q):i.getContext("webgl2",Q)}(u));var i=Y[u];return i.isContextLost()?(delete Y[u],pe(u)):(i.disable(i.DEPTH_TEST),i.disable(i.STENCIL_TEST),i.disable(i.BLEND),i.disable(i.DITHER),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SAMPLE_COVERAGE),i.enable(i.SCISSOR_TEST),i.enable(i.CULL_FACE),i.cullFace(i.BACK),Y[u])}function me(u){for(var i=u.length,a=0,d=0;i>0;)d=Math.random()*i|0,a=u[--i],u[i]=u[d],u[d]=a}function Ne(u,i,a){return Math.max(u,Math.min(i,a))}function at(u){return u%2==0?u:u+1}function tt(u){for(var i=0,a=0;a<u.length;a++)i+=u[a];return i}function wt(u,i){var a=Math.random();return i*a+(1-a)*u}function le(u,i){if(!u)throw new Error("string"==typeof i?i:i())}function $e(u,i,a){void 0===a&&(a=""),le(Ue(u,i),a+" Shapes "+u+" and "+i+" must match")}function xt(u){le(null!=u,"The input to the tensor constructor must be a non-null value.")}function It(u,i){if(void 0===i&&(i=[]),Array.isArray(u))for(var a=0;a<u.length;++a)It(u[a],i);else i.push(u);return i}function Ie(u){if(0===u.length)return 1;for(var i=u[0],a=1;a<u.length;a++)i*=u[a];return i}function Ue(u,i){if(u===i)return!0;if(null==u||null==i||u.length!==i.length)return!1;for(var a=0;a<u.length;a++)if(u[a]!==i[a])return!1;return!0}function Ye(u){return u%1==0}function pt(u){if(null!=Math.tanh)return Math.tanh(u);if(u===1/0)return 1;if(u===-1/0)return-1;var i=Math.exp(2*u);return(i-1)/(i+1)}function kt(u){for(var i=Math.floor(Math.sqrt(u));i>1;--i)if(u%i==0)return[i,u/i];return[1,u]}function We(u,i){return i<=u.length?u:u+" ".repeat(i-u.length)}function Fe(u,i,a){return void 0===i&&(i=function(d){return 0}),new Promise(function(d,f){var y=0,w=function(){if(u())d();else{var C=i(++y);null!=a&&y>=a?f():setTimeout(w,C)}};w()})}function Mt(u,i){for(var a=1,d=-1,f=0;f<u.length;++f)if(u[f]>=0)a*=u[f];else if(-1===u[f]){if(-1!==d)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+d+" and dim "+f);d=f}else if(u[f]<0)throw Error("Shapes can not be < 0. Found "+u[f]+" at dim "+f);if(-1===d){if(i>0&&i!==a)throw Error("Size("+i+") must match the product of shape "+u);return u}if(0===a)throw Error("Cannot infer the missing size in ["+u+"] when there are 0 elements");if(i%a!=0)throw Error("The implicit shape can't be a fractional number. Got "+i+" / "+a);var y=u.slice();return y[d]=i/a,y}function Pt(u,i){for(var a=[],d=[],f=0,y=0;y<u.length;++y){if(null!=i){if(i[f]===y&&1!==u[y])throw new Error("Can't squeeze axis "+y+" since its dim '"+u[y]+"' is not 1");(null==i[f]||i[f]>y)&&1===u[y]&&(a.push(u[y]),d.push(y)),i[f]<=y&&f++}1!==u[y]&&(a.push(u[y]),d.push(y))}return{newShape:a,keptDims:d}}function St(u,i){var a=null;if(null==u||"float32"===u)a=new Float32Array(i);else if("int32"===u)a=new Int32Array(i);else{if("bool"!==u)throw new Error("Unknown data type "+u);a=new Uint8Array(i)}return a}function Yt(u,i,a){if("float32"===i)for(var d=0;d<u.length;d++)if(isNaN(u[d]))throw Error("The result of the '"+a+"' has NaNs.")}function Yn(u,i){if("float32"!==i)for(var a=0;a<u.length;a++)if(isNaN(u[a]))throw Error("NaN is not a valid value for dtype: '"+i+"'.")}function hi(u,i){return!("complex64"===i||"float32"===i&&"complex64"!==u||"int32"===i&&"float32"!==u&&"complex64"!==u||"bool"===i&&"bool"===u)}function ft(u){return u instanceof Float32Array||u instanceof Int32Array||u instanceof Uint8Array}function Nt(u){if("float32"===u||"int32"===u)return 4;if("complex64"===u)return 8;if("bool"===u)return 1;throw new Error("Unknown dtype "+u)}function Ct(u){return!!(u&&u.constructor&&u.call&&u.apply)}function Zt(u,i){for(var a=i;a<u;++a)if(u%a==0)return a;return u}function nn(u){var i=u.length;if(i<2)return[];var a=new Array(i-1);a[i-2]=u[i-1];for(var d=i-3;d>=0;--d)a[d]=a[d+1]*u[d+1];return a}function fn(u,i,a){return function pn(u,i){return u instanceof Float32Array&&"float32"===i||u instanceof Int32Array&&"int32"===i||u instanceof Uint8Array&&"bool"===i}(u,i)?u:(Array.isArray(u)&&(u=It(u)),function vn(u,i,a){if(null==i||"float32"===i||"complex64"===i)return new Float32Array(u);if("int32"===i)return a&&Yn(u,i),new Int32Array(u);if("bool"===i){for(var d=new Uint8Array(u.length),f=0;f<d.length;++f)0!==Math.round(u[f])&&(d[f]=1);return d}throw new Error("Unknown data type "+i)}(u,i,a))}function Kr(u,i){for(var a=lo(u,i),d=0;d<a.length;d++)a[d]=1;return a}function lo(u,i){if(null==i||"float32"===i||"complex64"===i)return new Float32Array(u);if("int32"===i)return new Int32Array(u);if("bool"===i)return new Uint8Array(u);throw new Error("Unknown data type "+i)}function ei(){if(typeof performance<"u")return performance.now();if(typeof process<"u"){var u=process.hrtime();return 1e3*u[0]+u[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}var _r=Object.freeze({shuffle:me,clamp:Ne,nearestLargerEven:at,sum:tt,randUniform:wt,distSquared:function lt(u,i){for(var a=0,d=0;d<u.length;d++){var f=Number(u[d])-Number(i[d]);a+=f*f}return a},assert:le,assertShapesMatch:$e,assertNonNull:xt,flatten:It,sizeFromShape:Ie,isScalarShape:function Vt(u){return 0===u.length},arraysEqual:Ue,isInt:Ye,tanh:pt,sizeToSquarishShape:kt,createShuffledIndices:function Oe(u){for(var i=new Uint32Array(u),a=0;a<u;++a)i[a]=a;return me(i),i},rightPad:We,repeatedTry:Fe,inferFromImplicitShape:Mt,squeezeShape:Pt,getTypedArrayFromDType:St,checkComputationForNaN:Yt,checkConversionForNaN:Yn,hasEncodingLoss:hi,isTypedArray:ft,bytesPerElement:Nt,isFunction:Ct,nearestDivisor:Zt,computeStrides:nn,toTypedArray:fn,makeOnesTypedArray:Kr,makeZerosTypedArray:lo,now:ei}),Rs=function(){function u(i,a){this.backendTimer=i,this.logger=a,null==a&&(this.logger=new Do)}return u.prototype.profileKernel=function(i,a){var d,f=this,y=this.backendTimer.time(function(){d=a()});return(Array.isArray(d)?d:[d]).forEach(function(w){var C=w.dataSync();Yt(C,w.dtype,i),y.then(function(O){var U="";null!=O.getExtraProfileInfo&&(U=O.getExtraProfileInfo()),f.logger.logKernelProfile(i,w,C,O.kernelMs,U)})}),d},u}(),Do=function(){function u(){}return u.prototype.logKernelProfile=function(i,a,d,f,y){var w=We(f+"ms",9),C=We(i,25),O=a.rank,U=a.size,j=We(a.shape.toString(),14);console.log("%c"+C+"\t%c"+w+"\t%c"+O+"D "+j+"\t%c"+U+"\t%c"+y,"font-weight:bold","color:red","color:blue","color: orange","color: green")},u}(),ds=20,uo=3,er=7;function ti(u,i,a,d){var f=nn(i),y=function al(u,i,a,d){var f=Ie(i),y=d[d.length-1],w=new Array(y).fill(0),C=i.length,O="complex64"===a?Et(u):u;if(C>1)for(var U=0;U<f/y;U++)for(var j=U*y,q=0;q<y;q++)w[q]=Math.max(w[q],ni(O[j+q],0).length);return w}(u,i,a,f),w=i.length,C=Yi(u,i,a,f,y),O=["Tensor"];return d&&(O.push("  dtype: "+a),O.push("  rank: "+w),O.push("  shape: ["+i+"]"),O.push("  values:")),O.push(C.map(function(U){return"    "+U}).join("\n")),O.join("\n")}function ni(u,i){return We(Array.isArray(u)?parseFloat(u[0].toFixed(er))+" + "+parseFloat(u[1].toFixed(er))+"j":parseFloat(u.toFixed(er)).toString(),i)}function Yi(u,i,a,d,f,y){void 0===y&&(y=!0);var w="complex64"===a?2:1,C=i[0],O=i.length;if(0===O)return"complex64"===a?[ni(Et(u)[0],0)]:[u[0].toString()];if(1===O){if(C>ds){var j=Array.from(u.subarray(0,uo*w)),q=Array.from(u.subarray(C-uo*w,C));return"complex64"===a&&(j=Et(j),q=Et(q)),["["+j.map(function(Ge,rt){return ni(Ge,f[rt])}).join(", ")+", ..., "+q.map(function(Ge,rt){return ni(Ge,f[C-uo+rt])}).join(", ")+"]"]}return["["+("complex64"===a?Et(u):Array.from(u)).map(function(Ge,rt){return ni(Ge,f[rt])}).join(", ")+"]"]}var K=i.slice(1),re=d.slice(1),se=d[0]*w,oe=[];if(C>ds){for(var de=0;de<uo;de++){var xe=(Se=de*se)+se;oe.push.apply(oe,Yi(u.subarray(Se,xe),K,a,re,f,!1))}for(oe.push("..."),de=C-uo;de<C;de++)xe=(Se=de*se)+se,oe.push.apply(oe,Yi(u.subarray(Se,xe),K,a,re,f,de===C-1))}else for(de=0;de<C;de++){var Se;xe=(Se=de*se)+se,oe.push.apply(oe,Yi(u.subarray(Se,xe),K,a,re,f,de===C-1))}var ke=2===O?",":"";for(oe[0]="["+oe[0]+ke,de=1;de<oe.length-1;de++)oe[de]=" "+oe[de]+ke;var Ke=",\n";for(de=2;de<O;de++)Ke+="\n";return oe[oe.length-1]=" "+oe[oe.length-1]+"]"+(y?"":Ke),oe}function Et(u){for(var i=[],a=0;a<u.length;a+=2)i.push([u[a],u[a+1]]);return i}var Vr=function(){function u(i,a,d){if(this.dtype=a,this.shape=i.slice(),this.size=Ie(i),null!=d){var f=d.length;le(f===this.size,"Length of values '"+f+"' does not match the size inferred by the shape '"+this.size+"'.")}if("complex64"===a)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=d||St(a,Ie(this.shape)),this.strides=nn(i)}return u.prototype.set=function(i){for(var a=[],d=1;d<arguments.length;d++)a[d-1]=arguments[d];0===a.length&&(a=[0]),le(a.length===this.rank,"The number of provided coordinates ("+a.length+") must match the rank ("+this.rank+")");var f=this.locToIndex(a);this.values[f]=i},u.prototype.get=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];0===i.length&&(i=[0]);for(var d=i[i.length-1],f=0;f<i.length-1;++f)d+=this.strides[f]*i[f];return this.values[d]},u.prototype.locToIndex=function(i){if(0===this.rank)return 0;if(1===this.rank)return i[0];for(var a=i[i.length-1],d=0;d<i.length-1;++d)a+=this.strides[d]*i[d];return a},u.prototype.indexToLoc=function(i){if(0===this.rank)return[];if(1===this.rank)return[i];for(var a=new Array(this.shape.length),d=0;d<a.length-1;++d)a[d]=Math.floor(i/this.strides[d]),i-=a[d]*this.strides[d];return a[a.length-1]=i,a},Object.defineProperty(u.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),u.prototype.toTensor=function(){return Tt.make(this.shape,{values:this.values},this.dtype)},u}(),Ft=null,ze=null;function Gt(u){Ft=u}var Tt=function(){function u(i,a,d,f){this.isDisposedInternal=!1,this.shape=i.slice(),this.dtype=a||"float32",this.size=Ie(i),null!=d&&le(this.size===d.length,"Based on the provided shape, ["+i+"], and dtype "+this.dtype+", the tensor should have "+this.size+" values but has "+d.length),this.strides=nn(i),this.dataId=f??{},this.id=Ft().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",Ft().registerTensor(this),null!=d&&Ft().write(this.dataId,d)}return u.make=function(i,a,d){return new u(i,d,a.values,a.dataId)},u.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},u.prototype.asScalar=function(){return this.throwIfDisposed(),le(1===this.size,"The array must have only 1 element."),this.reshape([])},u.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},u.prototype.as2D=function(i,a){return this.throwIfDisposed(),this.reshape([i,a])},u.prototype.as3D=function(i,a,d){return this.throwIfDisposed(),this.reshape([i,a,d])},u.prototype.as4D=function(i,a,d,f){return this.throwIfDisposed(),this.reshape([i,a,d,f])},u.prototype.asType=function(i){return this.throwIfDisposed(),ze.cast(this,i)},Object.defineProperty(u.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),u.prototype.get=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];le(i.length===this.rank,"Number of coordinates in get() must match the rank of the tensor"),le("complex64"!==this.dtype,"Tensor.get() is not supported for complex64 tensors yet."),this.throwIfDisposed(),0===i.length&&(i=[0]);for(var d=i[i.length-1],f=0;f<i.length-1;++f)d+=this.strides[f]*i[f];return this.dataSync()[d]},u.prototype.buffer=function(){return ze.buffer(this.shape,this.dtype,this.dataSync())},u.prototype.data=function(){return R(this,void 0,void 0,function(){return W(this,function(i){return this.throwIfDisposed(),[2,Ft().read(this.dataId)]})})},u.prototype.dataSync=function(){return this.throwIfDisposed(),Ft().readSync(this.dataId)},u.prototype.dispose=function(){this.isDisposed||(Ft().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(u.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),u.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},u.prototype.toFloat=function(){return this.asType("float32")},u.prototype.toInt=function(){return this.asType("int32")},u.prototype.toBool=function(){return this.asType("bool")},u.prototype.print=function(i){return void 0===i&&(i=!1),ze.print(this,i)},u.prototype.reshape=function(i){return this.throwIfDisposed(),ze.reshape(this,i)},u.prototype.reshapeAs=function(i){return this.throwIfDisposed(),this.reshape(i.shape)},u.prototype.expandDims=function(i){return void 0===i&&(i=0),ze.expandDims(this,i)},u.prototype.cumsum=function(i,a,d){return void 0===i&&(i=0),void 0===a&&(a=!1),void 0===d&&(d=!1),ze.cumsum(this,i,a,d)},u.prototype.squeeze=function(i){return this.throwIfDisposed(),ze.squeeze(this,i)},u.prototype.clone=function(){return this.throwIfDisposed(),ze.clone(this)},u.prototype.toString=function(i){return void 0===i&&(i=!1),ti(this.dataSync(),this.shape,this.dtype,i)},u.prototype.tile=function(i){return this.throwIfDisposed(),ze.tile(this,i)},u.prototype.gather=function(i,a){return void 0===a&&(a=0),this.throwIfDisposed(),ze.gather(this,i,a)},u.prototype.matMul=function(i,a,d){return void 0===a&&(a=!1),void 0===d&&(d=!1),this.throwIfDisposed(),ze.matMul(this,i,a,d)},u.prototype.dot=function(i){return this.throwIfDisposed(),ze.dot(this,i)},u.prototype.norm=function(i,a,d){return void 0===i&&(i="euclidean"),void 0===a&&(a=null),void 0===d&&(d=!1),this.throwIfDisposed(),ze.norm(this,i,a,d)},u.prototype.slice=function(i,a){return this.throwIfDisposed(),ze.slice(this,i,a)},u.prototype.reverse=function(i){return this.throwIfDisposed(),ze.reverse(this,i)},u.prototype.concat=function(i,a){return void 0===a&&(a=0),this.throwIfDisposed(),ze.concat([this,i],a)},u.prototype.split=function(i,a){return void 0===a&&(a=0),this.throwIfDisposed(),ze.split(this,i,a)},u.prototype.stack=function(i,a){return void 0===a&&(a=0),ze.stack([this,i],a)},u.prototype.unstack=function(i,a){return void 0===a&&(a=0),ze.unstack(this,a)},u.prototype.pad=function(i,a){return void 0===a&&(a=0),ze.pad(this,i,a)},u.prototype.batchNormalization=function(i,a,d,f,y){return void 0===d&&(d=.001),this.throwIfDisposed(),ze.batchNormalization(this,i,a,d,f,y)},u.prototype.all=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=!1),this.throwIfDisposed(),ze.all(this,i,a)},u.prototype.any=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=!1),this.throwIfDisposed(),ze.any(this,i,a)},u.prototype.logSumExp=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=!1),this.throwIfDisposed(),ze.logSumExp(this,i,a)},u.prototype.sum=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=!1),this.throwIfDisposed(),ze.sum(this,i,a)},u.prototype.prod=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=!1),this.throwIfDisposed(),ze.prod(this,i,a)},u.prototype.mean=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=!1),this.throwIfDisposed(),ze.mean(this,i,a)},u.prototype.min=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=!1),this.throwIfDisposed(),ze.min(this,i,a)},u.prototype.max=function(i,a){return void 0===i&&(i=null),void 0===a&&(a=!1),this.throwIfDisposed(),ze.max(this,i,a)},u.prototype.argMin=function(i){return void 0===i&&(i=null),this.throwIfDisposed(),ze.argMin(this,i)},u.prototype.argMax=function(i){return void 0===i&&(i=null),this.throwIfDisposed(),ze.argMax(this,i)},u.prototype.cast=function(i){return this.throwIfDisposed(),ze.cast(this,i)},u.prototype.add=function(i){return this.throwIfDisposed(),ze.add(this,i)},u.prototype.addStrict=function(i){return this.throwIfDisposed(),ze.addStrict(this,i)},u.prototype.atan2=function(i){return this.throwIfDisposed(),ze.atan2(this,i)},u.prototype.sub=function(i){return this.throwIfDisposed(),ze.sub(this,i)},u.prototype.subStrict=function(i){return this.throwIfDisposed(),ze.subStrict(this,i)},u.prototype.pow=function(i){return this.throwIfDisposed(),ze.pow(this,i)},u.prototype.powStrict=function(i){return this.throwIfDisposed(),ze.powStrict(this,i)},u.prototype.mul=function(i){return this.throwIfDisposed(),ze.mul(this,i)},u.prototype.mulStrict=function(i){return this.throwIfDisposed(),ze.mulStrict(this,i)},u.prototype.div=function(i){return this.throwIfDisposed(),ze.div(this,i)},u.prototype.floorDiv=function(i){return this.throwIfDisposed(),ze.floorDiv(this,i)},u.prototype.divStrict=function(i){return this.throwIfDisposed(),ze.divStrict(this,i)},u.prototype.minimum=function(i){return this.throwIfDisposed(),ze.minimum(this,i)},u.prototype.minimumStrict=function(i){return this.throwIfDisposed(),ze.minimumStrict(this,i)},u.prototype.maximum=function(i){return this.throwIfDisposed(),ze.maximum(this,i)},u.prototype.maximumStrict=function(i){return this.throwIfDisposed(),ze.maximumStrict(this,i)},u.prototype.mod=function(i){return this.throwIfDisposed(),ze.mod(this,i)},u.prototype.modStrict=function(i){return this.throwIfDisposed(),ze.modStrict(this,i)},u.prototype.squaredDifference=function(i){return this.throwIfDisposed(),ze.squaredDifference(this,i)},u.prototype.squaredDifferenceStrict=function(i){return this.throwIfDisposed(),ze.squaredDifferenceStrict(this,i)},u.prototype.transpose=function(i){return this.throwIfDisposed(),ze.transpose(this,i)},u.prototype.notEqual=function(i){return this.throwIfDisposed(),ze.notEqual(this,i)},u.prototype.notEqualStrict=function(i){return this.throwIfDisposed(),ze.notEqualStrict(this,i)},u.prototype.less=function(i){return this.throwIfDisposed(),ze.less(this,i)},u.prototype.lessStrict=function(i){return this.throwIfDisposed(),ze.lessStrict(this,i)},u.prototype.equal=function(i){return this.throwIfDisposed(),ze.equal(this,i)},u.prototype.equalStrict=function(i){return this.throwIfDisposed(),ze.equalStrict(this,i)},u.prototype.lessEqual=function(i){return this.throwIfDisposed(),ze.lessEqual(this,i)},u.prototype.lessEqualStrict=function(i){return this.throwIfDisposed(),ze.lessEqualStrict(this,i)},u.prototype.greater=function(i){return this.throwIfDisposed(),ze.greater(this,i)},u.prototype.greaterStrict=function(i){return this.throwIfDisposed(),ze.greaterStrict(this,i)},u.prototype.greaterEqual=function(i){return this.throwIfDisposed(),ze.greaterEqual(this,i)},u.prototype.greaterEqualStrict=function(i){return this.throwIfDisposed(),ze.greaterEqualStrict(this,i)},u.prototype.logicalAnd=function(i){return this.throwIfDisposed(),ze.logicalAnd(this,i)},u.prototype.logicalOr=function(i){return this.throwIfDisposed(),ze.logicalOr(this,i)},u.prototype.logicalNot=function(){return this.throwIfDisposed(),ze.logicalNot(this)},u.prototype.logicalXor=function(i){return this.throwIfDisposed(),ze.logicalXor(this,i)},u.prototype.where=function(i,a){return this.throwIfDisposed(),ze.where(i,this,a)},u.prototype.neg=function(){return this.throwIfDisposed(),ze.neg(this)},u.prototype.ceil=function(){return this.throwIfDisposed(),ze.ceil(this)},u.prototype.floor=function(){return this.throwIfDisposed(),ze.floor(this)},u.prototype.sign=function(){return this.throwIfDisposed(),ze.sign(this)},u.prototype.exp=function(){return this.throwIfDisposed(),ze.exp(this)},u.prototype.expm1=function(){return this.throwIfDisposed(),ze.expm1(this)},u.prototype.log=function(){return this.throwIfDisposed(),ze.log(this)},u.prototype.log1p=function(){return this.throwIfDisposed(),ze.log1p(this)},u.prototype.sqrt=function(){return this.throwIfDisposed(),ze.sqrt(this)},u.prototype.rsqrt=function(){return this.throwIfDisposed(),ze.rsqrt(this)},u.prototype.square=function(){return this.throwIfDisposed(),ze.square(this)},u.prototype.reciprocal=function(){return this.throwIfDisposed(),ze.reciprocal(this)},u.prototype.abs=function(){return this.throwIfDisposed(),ze.abs(this)},u.prototype.clipByValue=function(i,a){return this.throwIfDisposed(),ze.clipByValue(this,i,a)},u.prototype.relu=function(){return this.throwIfDisposed(),ze.relu(this)},u.prototype.elu=function(){return this.throwIfDisposed(),ze.elu(this)},u.prototype.selu=function(){return this.throwIfDisposed(),ze.selu(this)},u.prototype.leakyRelu=function(i){return void 0===i&&(i=.2),this.throwIfDisposed(),ze.leakyRelu(this,i)},u.prototype.prelu=function(i){return this.throwIfDisposed(),ze.prelu(this,i)},u.prototype.sigmoid=function(){return this.throwIfDisposed(),ze.sigmoid(this)},u.prototype.logSigmoid=function(){return this.throwIfDisposed(),ze.logSigmoid(this)},u.prototype.softplus=function(){return this.throwIfDisposed(),ze.softplus(this)},u.prototype.zerosLike=function(){return this.throwIfDisposed(),ze.zerosLike(this)},u.prototype.onesLike=function(){return this.throwIfDisposed(),ze.onesLike(this)},u.prototype.sin=function(){return this.throwIfDisposed(),ze.sin(this)},u.prototype.cos=function(){return this.throwIfDisposed(),ze.cos(this)},u.prototype.tan=function(){return this.throwIfDisposed(),ze.tan(this)},u.prototype.asin=function(){return this.throwIfDisposed(),ze.asin(this)},u.prototype.acos=function(){return this.throwIfDisposed(),ze.acos(this)},u.prototype.atan=function(){return this.throwIfDisposed(),ze.atan(this)},u.prototype.sinh=function(){return this.throwIfDisposed(),ze.sinh(this)},u.prototype.cosh=function(){return this.throwIfDisposed(),ze.cosh(this)},u.prototype.tanh=function(){return this.throwIfDisposed(),ze.tanh(this)},u.prototype.asinh=function(){return this.throwIfDisposed(),ze.asinh(this)},u.prototype.acosh=function(){return this.throwIfDisposed(),ze.acosh(this)},u.prototype.atanh=function(){return this.throwIfDisposed(),ze.atanh(this)},u.prototype.erf=function(){return this.throwIfDisposed(),ze.erf(this)},u.prototype.round=function(){return this.throwIfDisposed(),ze.round(this)},u.prototype.step=function(i){return void 0===i&&(i=0),this.throwIfDisposed(),ze.step(this,i)},u.prototype.softmax=function(i){return void 0===i&&(i=-1),this.throwIfDisposed(),ze.softmax(this,i)},u.prototype.logSoftmax=function(i){return void 0===i&&(i=-1),this.throwIfDisposed(),ze.logSoftmax(this,i)},u.prototype.resizeBilinear=function(i,a){return void 0===a&&(a=!1),this.throwIfDisposed(),ze.image.resizeBilinear(this,i,a)},u.prototype.resizeNearestNeighbor=function(i,a){return void 0===a&&(a=!1),this.throwIfDisposed(),ze.image.resizeNearestNeighbor(this,i,a)},u.prototype.conv1d=function(i,a,d,f,y,w){return void 0===f&&(f="NWC"),void 0===y&&(y=1),this.throwIfDisposed(),ze.conv1d(this,i,a,d,f,y,w)},u.prototype.conv2d=function(i,a,d,f,y,w){return void 0===f&&(f="NHWC"),void 0===y&&(y=[1,1]),this.throwIfDisposed(),ze.conv2d(this,i,a,d,f,y,w)},u.prototype.conv2dTranspose=function(i,a,d,f,y){return this.throwIfDisposed(),ze.conv2dTranspose(this,i,a,d,f,y)},u.prototype.depthwiseConv2D=function(i,a,d,f,y,w){return void 0===f&&(f="NHWC"),void 0===y&&(y=[1,1]),this.throwIfDisposed(),ze.depthwiseConv2d(this,i,a,d,f,y,w)},u.prototype.separableConv2d=function(i,a,d,f,y,w){return void 0===y&&(y=[1,1]),void 0===w&&(w="NHWC"),this.throwIfDisposed(),ze.separableConv2d(this,i,a,d,f,y,w)},u.prototype.avgPool=function(i,a,d,f){return this.throwIfDisposed(),ze.avgPool(this,i,a,d,f)},u.prototype.maxPool=function(i,a,d,f){return this.throwIfDisposed(),ze.maxPool(this,i,a,d,f)},u.prototype.localResponseNormalization=function(i,a,d,f){return void 0===i&&(i=5),void 0===a&&(a=1),void 0===d&&(d=1),void 0===f&&(f=.5),ze.localResponseNormalization(this,i,a,d,f)},u.prototype.pool=function(i,a,d,f,y){return this.throwIfDisposed(),ze.pool(this,i,a,d,f,y)},u.prototype.variable=function(i,a,d){return void 0===i&&(i=!0),this.throwIfDisposed(),Io.variable(this,i,a,d)},u.prototype.unsortedSegmentSum=function(i,a){return this.throwIfDisposed(),ze.unsortedSegmentSum(this,i,a)},u.prototype.batchToSpaceND=function(i,a){return this.throwIfDisposed(),ze.batchToSpaceND(this,i,a)},u.prototype.spaceToBatchND=function(i,a){return this.throwIfDisposed(),ze.spaceToBatchND(this,i,a)},u.prototype.topk=function(i,a){return void 0===i&&(i=1),void 0===a&&(a=!0),this.throwIfDisposed(),ze.topk(this,i,a)},u.prototype.stridedSlice=function(i,a,d,f,y){return void 0===f&&(f=0),void 0===y&&(y=0),this.throwIfDisposed(),ze.stridedSlice(this,i,a,d,f,y)},u.prototype.depthToSpace=function(i,a){return this.throwIfDisposed(),ze.depthToSpace(this,i,a)},u.prototype.fft=function(){return this.throwIfDisposed(),ze.spectral.fft(this)},u.prototype.ifft=function(){return this.throwIfDisposed(),ze.spectral.ifft(this)},u}();Object.defineProperty(Tt,Symbol.hasInstance,{value:function(u){return!!u&&null!=u.shape&&null!=u.dtype}});var Io=function(u){function i(a,d,f){void 0===d&&(d=!0);var y=u.call(this,a.shape,a.dtype,null,a.dataId)||this;y.trainable=d,y.name=f,null==y.name&&(y.name=Ft().nextVariableId().toString());try{Ft().registerVariable(y)}catch(w){throw Ft().disposeTensor(y),w}return y}return c(i,u),i.variable=function(a,d,f,y){return void 0===d&&(d=!0),null!=y&&y!==a.dtype&&(a=a.asType(y)),new i(a,d,f)},i.prototype.assign=function(a){if(a.dtype!==this.dtype)throw new Error("dtype of the new value ("+a.dtype+") and previous value ("+this.dtype+") must match");if(!Ue(a.shape,this.shape))throw new Error("shape of the new value ("+a.shape+") and previous value ("+this.shape+") must match");Ft().disposeTensor(this),this.dataId=a.dataId,Ft().registerTensor(this)},i}(Tt);Object.defineProperty(Io,Symbol.hasInstance,{value:function(u){return u instanceof Tt&&null!=u.assign&&u.assign instanceof Function}});var jn=Io.variable;function Wr(u,i){le(u.dtype===i.dtype,"The dtypes of the first("+u.dtype+") and second("+i.dtype+") input must match")}function Wn(u){var i=[];return rn(u,i,new Set),i}function rn(u,i,a){if(null!=u)if(u instanceof Tt)i.push(u);else if(function ll(u){return Array.isArray(u)||"object"==typeof u}(u)){var d=u;for(var f in d){var y=d[f];a.has(y)||(a.add(y),rn(y,i,a))}}}var tr,u,Ao=function(){function u(i,a,d){this.backend=i,this.safeMode=a,this.debugMode=d,this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.profiling=!1,this.gradientScopeCount=0,this.customGradientDepth=0,this.keepTensors=new Set,this.tensorInfo=new WeakMap,this.activeScope={track:[],name:"default scope"},this.scopeStack=[this.activeScope],this.profiler=new Rs(i),this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return u.prototype.moveData=function(i){this.write(i,this.readSync(i))},u.prototype.tidy=function(i,a,d){var f=this;void 0===d&&(d=!1);var y,w=null;if(null==a){if("function"!=typeof i)throw new Error("Please provide a function to tidy()");a=i}else{if("string"!=typeof i&&!(i instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof a)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");w=i}return this.scopedRun(function(){return f.startScope(w,d)},function(){return f.endScope(y,d)},function(){return(y=a())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),y})},u.prototype.scopedRun=function(i,a,d){i();try{var f=d();return a(),f}catch(y){throw a(),y}},u.prototype.nextTensorId=function(){return u.nextTensorId++},u.prototype.nextVariableId=function(){return u.nextVariableId++},u.prototype.runKernel=function(i,a,d){var f,y=this,w=[],C=function(K){return w.push(K),K},O=this.activeScope.name,U=this.numBytes,j=this.numTensors;if(this.scopedRun(function(){return y.customGradientDepth++},function(){return y.customGradientDepth--},function(){f=y.debugMode()?y.profiler.profileKernel(O,function(){return i(y.backend,C)}):i(y.backend,C)}),this.shouldRecord()){var q={id:this.nextTapeNodeId++,name:O,inputs:a,outputs:Array.isArray(f)?f:[f]};null!=d&&(q.gradient=function(K){return d(K,w)}),this.activeTape.push(q)}return this.profiling&&this.activeProfile.kernels.push({name:O,bytesAdded:this.numBytes-U,totalBytesSnapshot:this.numBytes,tensorsAdded:this.numTensors-j,totalTensorsSnapshot:this.numTensors,inputShapes:Object.keys(a).map(function(K){return a[K].shape}),outputShape:Array.isArray(f)?f.map(function(K){return K.shape}):f.shape}),f},u.prototype.registerTensor=function(i){var a=this.tensorInfo.has(i.dataId)?this.tensorInfo.get(i.dataId).refCount:0;this.numTensors++,0===a&&(this.numDataBuffers++,"complex64"!==i.dtype&&(this.numBytes+=Ie(i.shape)*Nt(i.dtype)),this.tensorInfo.set(i.dataId,{backend:this.backend,dtype:i.dtype,shape:i.shape,refCount:0}),this.backend.register(i.dataId,i.shape,i.dtype)),this.tensorInfo.get(i.dataId).refCount++,i instanceof Io||this.track(i)},u.prototype.registerVariable=function(i){if(null!=this.registeredVariables[i.name])throw new Error("Variable with name "+i.name+" was already registered");this.registeredVariables[i.name]=i},u.prototype.disposeTensor=function(i){this.tensorInfo.has(i.dataId)&&(this.keepTensors.has(i.id)&&this.keepTensors.delete(i.id),this.numTensors--,this.tensorInfo.get(i.dataId).refCount<=1?(this.tensorInfo.get(i.dataId).backend.disposeData(i.dataId),this.numDataBuffers--,"complex64"!==i.dtype&&(this.numBytes-=Ie(i.shape)*Nt(i.dtype)),this.tensorInfo.delete(i.dataId)):this.tensorInfo.get(i.dataId).refCount--)},u.prototype.disposeVariables=function(){for(var i in this.registeredVariables)this.disposeTensor(this.registeredVariables[i]),delete this.registeredVariables[i]},u.prototype.memory=function(){var i=this.backend.memory();return i.numTensors=this.numTensors,i.numDataBuffers=this.numDataBuffers,i.numBytes=this.numBytes,i},u.prototype.profile=function(i){return R(this,void 0,void 0,function(){var a,d;return W(this,function(f){return this.profiling=!0,a=this.numBytes,d=this.numTensors,this.activeProfile.kernels=[],this.activeProfile.result=i(),this.profiling=!1,this.activeProfile.peakBytes=Math.max.apply(Math,this.activeProfile.kernels.map(function(y){return y.totalBytesSnapshot})),this.activeProfile.newBytes=this.numBytes-a,this.activeProfile.newTensors=this.numTensors-d,[2,this.activeProfile]})})},u.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},u.prototype.addTapeNode=function(i,a,d){var f={};i.forEach(function(w,C){f[C]=w});var y={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:f,outputs:[a],gradient:function(w){var C={};return d(w).forEach(function(O,U){C[U]=function(){return O}}),C}};this.activeTape.push(y)},u.prototype.keep=function(i){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return this.keepTensors.add(i.id),i},u.prototype.startScope=function(i,a){void 0===a&&(a=!1),a&&0===this.gradientScopeCount&&(this.activeTape=[]),a&&this.gradientScopeCount++;var d={track:[],name:"unnamed scope"};i&&(d.name=i),this.scopeStack.push(d),this.activeScope=d},u.prototype.endScope=function(i,a){var d=this;void 0===a&&(a=!1),a&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var f=new Set(this.keepTensors),y=Wn(i);y.forEach(function(U){return f.add(U.id)});for(var w=0;w<this.activeScope.track.length;w++){var C=this.activeScope.track[w];f.has(C.id)||(null!=this.activeTape?y.push(C):C.dispose())}var O=this.scopeStack.pop();this.activeScope=0===this.scopeStack.length?{track:[],name:"default scope"}:this.scopeStack[this.scopeStack.length-1],y.forEach(function(U){!d.keepTensors.has(U.id)&&function Qn(u,i){for(var a=0;a<i.length;a++)if(i[a].id===u.id)return!0;return!1}(U,O.track)&&d.track(U)})},u.prototype.gradients=function(i,a,d,f){var y=this;return void 0===f&&(f=!1),le(a.length>0,"gradients() received an empty list of xs."),this.tidy("gradients",function(){var w=i();le(w instanceof Tt,"The result y returned by f() must be a tensor.");var C=function To(u,i,a){for(var d={},f={},y=0;y<i.length;y++)d[i[y].id]=!0;for(y=0;y<u.length;y++){var w=(se=u[y]).inputs;for(var C in w){for(var O=w[C],U=!1,j=0;j<i.length;j++)if(d[O.id]){se.outputs.forEach(function(Se){return d[Se.id]=!0}),U=!0,f[se.id]=!0;break}if(U)break}}var q={};q[a.id]=!0;var K={};for(y=u.length-1;y>=0;y--)for(w=(se=u[y]).inputs,j=0;j<se.outputs.length;j++)if(q[se.outputs[j].id]){for(var C in w)q[w[C].id]=!0,K[se.id]=!0;break}var re=[];for(y=0;y<u.length;y++){var se;if(f[(se=u[y]).id]&&K[se.id]){var oe={};for(var C in se.inputs){var de=se.inputs[C];d[de.id]&&(oe[C]=de)}var xe=Object.assign({},se);xe.inputs=oe,xe.outputs=se.outputs,re.push(xe)}}return re}(y.activeTape,a,w);if(!f&&0===C.length&&a.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var O={};return O[w.id]=d??function pi(u){var i=Kr(Ie(u),"float32");return Tt.make(u,{values:i})}(w.shape),function ji(u,i){for(var a=function(f){var y=i[f],w=[];if(y.outputs.forEach(function(K){var re=u[K.id];if(null!=re)w.push(re);else{var se=Tt.make(K.shape,{values:lo(K.size,K.dtype)},K.dtype);w.push(se)}}),null==y.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+y.name+".");var C=y.gradient(1===y.outputs.length?w[0]:w);for(var O in y.inputs){if(!(O in C))throw new Error("Cannot backprop through input "+O+". Available gradients found: "+Object.keys(C)+".");var U=C[O](),j=y.inputs[O];if(!Ue(U.shape,j.shape))throw new Error("Error in gradient for op "+y.name+". The gradient of input '"+O+"' has shape '"+U.shape+"', which does not match the shape of the input '"+j.shape+"'");if(null==u[j.id])u[j.id]=U;else{var q=u[j.id];u[j.id]=q.add(U),q.dispose()}}},d=i.length-1;d>=0;d--)a(d)}(O,C),{value:w,grads:a.map(function(U){return O[U.id]})}},!0)},u.prototype.customGrad=function(i){var a=this;return le(Ct(i),"The f passed in customGrad(f) must be a function."),function(){for(var d,f,y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];return le(y.every(function(C){return C instanceof Tt}),"The args passed in customGrad(f)(x1, x2,...) must all be tensors"),a.scopedRun(function(){return a.customGradientDepth++},function(){return a.customGradientDepth--},function(){f=a.tidy(i.name,function(){var C=i.apply(void 0,y),O=C.value,U=C.gradFunc;return le(O instanceof Tt,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),le(Ct(U),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),d=U,O},!0)}),a.shouldRecord()&&a.addTapeNode(y,f,function(C){var O=d(C),U=Array.isArray(O)?O:[O];return le(U.length===y.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),le(U.every(function(j){return j instanceof Tt}),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),U}),f}},u.prototype.write=function(i,a){var d=this.tensorInfo.get(i);this.backend!==d.backend&&(d.backend.disposeData(i),d.backend=this.backend,this.backend.register(i,d.shape,d.dtype)),this.backend.write(i,a)},u.prototype.readSync=function(i){return this.tensorInfo.get(i).backend.readSync(i)},u.prototype.read=function(i){return this.tensorInfo.get(i).backend.read(i)},u.prototype.fromPixels=function(i,a){return this.backend.fromPixels(i,a)},u.prototype.time=function(i){return R(this,void 0,void 0,function(){var a,d;return W(this,function(f){switch(f.label){case 0:return a=ei(),[4,this.backend.time(i)];case 1:return(d=f.sent()).wallMs=ei()-a,[2,d]}})})},u.prototype.track=function(i){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(i),i},u.nextTensorId=0,u.nextVariableId=0,u}();(u=tr||(tr={}))[u.NUMBER=0]="NUMBER",u[u.BOOLEAN=1]="BOOLEAN",u[u.STRING=2]="STRING";var Oi,Mo=[{name:"DEBUG",type:tr.BOOLEAN},{name:"IS_BROWSER",type:tr.BOOLEAN},{name:"WEBGL_LAZILY_UNPACK",type:tr.BOOLEAN},{name:"WEBGL_CPU_FORWARD",type:tr.BOOLEAN},{name:"WEBGL_PACK_BATCHNORMALIZATION",type:tr.BOOLEAN},{name:"WEBGL_CONV_IM2COL",type:tr.BOOLEAN},{name:"WEBGL_MAX_TEXTURE_SIZE",type:tr.NUMBER},{name:"WEBGL_PAGING_ENABLED",type:tr.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:tr.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:tr.BOOLEAN},{name:"WEBGL_VERSION",type:tr.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:tr.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:tr.BOOLEAN},{name:"WEBGL_FENCE_API_ENABLED",type:tr.BOOLEAN},{name:"WEBGL_SIZE_UPLOAD_UNIFORM",type:tr.NUMBER},{name:"BACKEND",type:tr.STRING},{name:"EPSILON",type:tr.NUMBER},{name:"PROD",type:tr.BOOLEAN},{name:"TENSORLIKE_CHECK_SHAPE_CONSISTENCY",type:tr.BOOLEAN}];function ri(u){try{if(null!=pe(u))return!0}catch{return!1}return!1}var Me="tfjsflags";function nt(){var u={};if(typeof window>"u"||void 0===window.location||void 0===window.location.search)return u;var i=function on(u){var i={};return u.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(a){for(var d=[],f=1;f<arguments.length;f++)d[f-1]=arguments[f];return function Mn(u,i,a){u[decodeURIComponent(i)]=decodeURIComponent(a||"")}(i,d[0],d[1]),d.join("=")}),i}(window.location.search);if(Me in i){var a={};i[Me].split(",").forEach(function(d){var f=d.split(":");a[f[0]]=f[1]}),Mo.forEach(function(d){d.name in a&&(console.log("Setting feature override from URL "+d.name+": "+a[d.name]),d.type===tr.NUMBER?u[d.name]=+a[d.name]:d.type===tr.BOOLEAN?u[d.name]="true"===a[d.name]:d.type===tr.STRING?u[d.name]=a[d.name]:console.warn("Unknown URL param: "+d.name+"."))})}return u}function je(u,i){return null!=u.getExtension(i)}function Ht(u,i){var a=u.createFramebuffer(),d=u.createTexture();u.bindTexture(u.TEXTURE_2D,d),u.texImage2D(u.TEXTURE_2D,0,2===i?u.RGBA32F:u.RGBA,1,1,0,u.RGBA,u.FLOAT,null),u.bindFramebuffer(u.FRAMEBUFFER,a),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,d,0);var y=u.checkFramebufferStatus(u.FRAMEBUFFER)===u.FRAMEBUFFER_COMPLETE;return u.bindTexture(u.TEXTURE_2D,null),u.bindFramebuffer(u.FRAMEBUFFER,null),u.deleteTexture(d),u.deleteFramebuffer(a),y}var pr=function(){function u(i){this.features={},this.registry={},null!=i&&(this.features=i),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return u.setBackend=function(i,a){if(void 0===a&&(a=!1),!(i in ve.registry))throw new Error("Backend name '"+i+"' not found in registry");ve.engine.backend=ve.findBackend(i),ve.backendName=i},u.getBackend=function(){return ve.initEngine(),ve.backendName},u.disposeVariables=function(){ve.engine.disposeVariables()},u.memory=function(){return ve.engine.memory()},u.profile=function(i){return ve.engine.profile(i)},u.tidy=function(i,a,d){return void 0===d&&(d=!1),ve.engine.tidy(i,a,d)},u.dispose=function(i){Wn(i).forEach(function(a){return a.dispose()})},u.keep=function(i){return ve.engine.keep(i)},u.time=function(i){return ve.engine.time(i)},u.prototype.get=function(i){return i in this.features||(this.features[i]=this.evaluateFeature(i)),this.features[i]},u.prototype.getFeatures=function(){return this.features},u.prototype.set=function(i,a){this.features[i]=a},u.prototype.getBestBackendName=function(){var i=this;if(0===Object.keys(this.registry).length)throw new Error("No backend found in registry.");return Object.keys(this.registry).map(function(a){return{name:a,entry:i.registry[a]}}).sort(function(a,d){return d.entry.priority-a.entry.priority})[0].name},u.prototype.evaluateFeature=function(i){if("DEBUG"===i)return!1;if("IS_BROWSER"===i)return typeof window<"u";if("IS_NODE"===i)return typeof process<"u"&&void 0!==process.versions.node;if("IS_CHROME"===i)return function be(){return typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}();if("WEBGL_CPU_FORWARD"===i)return!0;if("WEBGL_PACK_BATCHNORMALIZATION"===i||"WEBGL_LAZILY_UNPACK"===i||"WEBGL_CONV_IM2COL"===i)return!1;if("WEBGL_PAGING_ENABLED"===i)return this.get("IS_BROWSER")&&!this.get("PROD");if("WEBGL_MAX_TEXTURE_SIZE"===i)return function Xi(u){if(null==Oi){var i=pe(u);Oi=i.getParameter(i.MAX_TEXTURE_SIZE)}return Oi}(this.get("WEBGL_VERSION"));if("IS_TEST"===i)return!1;if("BACKEND"===i)return this.getBestBackendName();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===i){var a=this.get("WEBGL_VERSION");return 0===a?0:function Ur(u){if(0===u)return 0;var i=pe(u);return je(i,"EXT_disjoint_timer_query_webgl2")&&2===u?2:je(i,"EXT_disjoint_timer_query")?1:0}(a)}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===i)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!function ce(){var u=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(u)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(u.substr(0,4))}();if("HAS_WEBGL"===i)return this.get("WEBGL_VERSION")>0;if("WEBGL_VERSION"===i)return ri(2)?2:ri(1)?1:0;if("WEBGL_RENDER_FLOAT32_ENABLED"===i)return function No(u){if(0===u)return!1;var i=pe(u);if(1===u){if(!je(i,"OES_texture_float"))return!1}else if(!je(i,"EXT_color_buffer_float"))return!1;return Ht(i,u)}(this.get("WEBGL_VERSION"));if("WEBGL_DOWNLOAD_FLOAT_ENABLED"===i)return function nr(u){if(0===u)return!1;var i=pe(u);if(1===u){if(!je(i,"OES_texture_float")||!je(i,"WEBGL_color_buffer_float"))return!1}else if(!je(i,"EXT_color_buffer_float"))return!1;return Ht(i,u)}(this.get("WEBGL_VERSION"));if("WEBGL_FENCE_API_ENABLED"===i)return function Ee(u){return 2===u&&null!=pe(u).fenceSync}(this.get("WEBGL_VERSION"));if("WEBGL_SIZE_UPLOAD_UNIFORM"===i)return this.get("WEBGL_RENDER_FLOAT32_ENABLED")?4:0;if("TEST_EPSILON"===i)return 32===this.backend.floatPrecision()?.001:.1;if("EPSILON"===i)return 32===this.backend.floatPrecision()?1e-7:.001;if("PROD"===i)return!1;if("TENSORLIKE_CHECK_SHAPE_CONSISTENCY"===i)return!this.get("PROD");throw new Error("Unknown feature "+i+".")},u.prototype.setFeatures=function(i){this.features=Object.assign({},i)},u.prototype.reset=function(){this.features=nt(),null!=this.globalEngine&&(this.globalEngine=null)},Object.defineProperty(u.prototype,"backend",{get:function(){return this.engine.backend},enumerable:!0,configurable:!0}),u.prototype.findBackend=function(i){return i in this.registry?this.registry[i].backend:null},u.prototype.registerBackend=function(i,a,d,f){var y=this;if(void 0===d&&(d=1),i in this.registry)return console.warn(i+" backend was already registered. Reusing existing backend"),f?.(function(){return y.engine}),!1;try{var w=a();return w.setDataMover({moveData:function(C){return y.engine.moveData(C)}}),this.registry[i]={backend:w,priority:d},!0}catch(C){return console.warn("Registration of backend "+i+" failed"),console.warn(C.stack||C.message),!1}},u.prototype.removeBackend=function(i){if(!(i in this.registry))throw new Error(i+" backend not found in registry");this.registry[i].backend.dispose(),delete this.registry[i]},Object.defineProperty(u.prototype,"engine",{get:function(){return this.initEngine(),this.globalEngine},enumerable:!0,configurable:!0}),u.prototype.initEngine=function(){var i=this;if(null==this.globalEngine){this.backendName=this.get("BACKEND");var a=this.findBackend(this.backendName);this.globalEngine=new Ao(a,!1,function(){return i.get("DEBUG")})}},u}(),ve=function Oo(){var u=function hs(){var u;if(typeof window<"u")u=window;else{if(typeof process>"u")throw new Error("Could not find a global object");u=process}return u}();return null==u.ENV&&(u.ENV=new pr(nt()),Gt(function(){return u.ENV.engine})),u.ENV}(),Ze=Object.freeze({Environment:pr,ENV:ve});function He(u){return le(Ct(u),"The f passed in grad(f) must be a function"),function(i,a){return le(i instanceof Tt,"The x passed in grad(f)(x) must be a tensor"),le(null==a||a instanceof Tt,"The dy passed in grad(f)(x, dy) must be a tensor"),ve.engine.tidy(function(){var d=ve.engine.gradients(function(){return u(i)},[i],a),y=d.grads;return null!=a&&$e(d.value.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Dr(y),y[0]})}}function mt(u){return le(Ct(u),"The f passed in grads(f) must be a function"),function(i,a){return le(Array.isArray(i)&&i.every(function(d){return d instanceof Tt}),"The args passed in grads(f)(args) must be an array of tensors"),le(null==a||a instanceof Tt,"The dy passed in grads(f)(args, dy) must be a tensor"),ve.engine.tidy(function(){var d=ve.engine.gradients(function(){return u.apply(void 0,i)},i,a),y=d.grads;return null!=a&&$e(d.value.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Dr(y),y})}}function Qt(u){return le(Ct(u),"The f passed in valueAndGrad(f) must be a function"),function(i,a){le(i instanceof Tt,"The x passed in valueAndGrad(f)(x) must be a tensor"),le(null==a||a instanceof Tt,"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");var d=ve.engine.gradients(function(){return u(i)},[i],a),f=d.grads,y=d.value;return Dr(f),{grad:f[0],value:y}}}function wn(u){return le(Ct(u),"The f passed in valueAndGrads(f) must be a function"),function(i,a){le(Array.isArray(i)&&i.every(function(f){return f instanceof Tt}),"The args passed in valueAndGrads(f)(args) must be array of tensors"),le(null==a||a instanceof Tt,"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");var d=ve.engine.gradients(function(){return u.apply(void 0,i)},i,a);return null!=a&&$e(d.value.shape,a.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Dr(d.grads),d}}function Ln(u,i){if(le(Ct(u),"The f passed in variableGrads(f) must be a function"),le(null==i||Array.isArray(i)&&i.every(function(O){return O instanceof Io}),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==i)for(var a in i=[],ve.engine.registeredVariables)i.push(ve.engine.registeredVariables[a]);var d=i.length;le((i=i.filter(function(O){return O.trainable})).length>0,"variableGrads() expects at least one of the input variables to be trainable, but none of the "+d+" variables is trainable.");var f=ve.engine.gradients(u,i,null,!0),y=f.value,w=f.grads;le(w.some(function(O){return null!=O}),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),le(0===y.rank,"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+y.rank+" tensor");var C={};return i.forEach(function(O,U){null!=w[U]&&(C[O.name]=w[U])}),{value:y,grads:C}}function Rn(u){return ve.engine.customGrad(u)}function Dr(u){if(u.filter(function(i){return null==i}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var Sn=pr.tidy,Bn=pr.keep,Pa=pr.dispose,co=pr.time,Wd=pr.profile;function vi(){for(var u=[],i=0;i<arguments.length;i++)u[i]=arguments[i];ve.get("IS_TEST")||console.warn.apply(console,u)}function ks(u,i,a,d){void 0===d&&(d=!0);var f=[];if(d)(f=f.concat(i.slice(0))).push(u[0]/a),f=f.concat(u.slice(1));else{f=f.concat(u[0]);for(var y=i.length,w=0;w<y;++w)f=f.concat([u[w+1]/i[w],i[w]]);f=f.concat(u.slice(y+1))}return f}function Po(u,i,a){void 0===a&&(a=!0);var d=[];if(a){d.push(i);for(var f=i+1;f<u;++f)f<=2*i?(d.push(f),d.push(f-(i+1))):d.push(f)}else{var y=[],w=[];for(f=1;f<u;++f)f>=2*i+1||f%2==1?w.push(f):y.push(f);d.push.apply(d,y),d.push(0),d.push.apply(d,w)}return d}function ul(u,i,a,d){void 0===d&&(d=!0);var f=[];f.push(d?u[0]/a:u[0]*a);for(var y=1;y<u.length;++y)f.push(y<=i.length?d?i[y-1]*u[y]:u[y]/i[y-1]:u[y]);return f}function Xl(u,i){for(var a=[0],d=0;d<i;++d)a.push(u[d][0]);return a}function Fs(u,i,a){for(var d=u.slice(0,1),f=0;f<a;++f)d.push(u[f+1]-i[f][0]-i[f][1]);return d}function Vc(u,i){for(var a=0;a<u.length;++a)if(u[u.length-a-1]!==i-1-a)return!1;return!0}function Gr(u,i){for(var a=[],d=u.length,f=0;f<d;f++)-1===i.indexOf(f)&&a.push(u[f]);return[a,i.map(function(y){return u[y]})]}function Ro(u,i){return function Hu(u,i,a){for(var d=u.length+i.length,f=[],y=0,w=0,C=0;C<d;C++)-1===a.indexOf(C)?f.push(u[y++]):f.push(i[w++]);return f}(u,i.map(function(a){return 1}),i)}function bi(u,i){var a=i.length;return le((u=null==u?i.map(function(d,f){return f}):[].concat(u)).every(function(d){return d>=-a&&d<a}),"All values in axis param must be in range [-"+a+", "+a+") but got axis "+u),le(u.every(function(d){return Ye(d)}),"All values in axis param must be integers but got axis "+u),u.map(function(d){return d<0?a+d:d})}function zr(u,i,a){le(Vc(i,a),u+" supports only inner-most axes for now. Got axes "+i+" and rank-"+a+" input.")}function Hi(u,i){if(Vc(u,i))return null;for(var a=[],d=0;d<i;++d)-1===u.indexOf(d)&&a.push(d);return u.forEach(function(f){return a.push(f)}),a}function Ql(u){return u.map(function(i,a){return[a,i]}).sort(function(i,a){return i[1]-a[1]}).map(function(i){return i[0]})}function ps(u,i){for(var a=[],d=i-u;d<i;++d)a.push(d);return a}function cl(u,i){for(var a=u[0].slice(),d=1;d<u.length;d++)a[i]+=u[d][i];return a}function dl(u,i){if(u.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+u.rank+".");if(i.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+i.rank+".");if("int32"!==i.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+i.dtype+".");if(i.shape[i.rank-1]>u.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+i.shape[i.rank-1]+" vs. "+u.rank);if(0===u.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+u.shape+".");for(var a=i.shape,d=a[a.length-1],f=1,y=0;y<a.length-1;++y)f*=a[y];var w=u.shape,C=a.slice();C.pop();var O=1;for(y=d;y<u.rank;++y)O*=w[y],C.push(w[y]);var U=nn(u.shape).map(function(j){return j/O}).concat([1]).slice(0,d);return[C,f,O,U]}function hl(u){return u<=30?u:Zt(u,Math.floor(Math.sqrt(u)))}function sr(u,i,a){for(var d=i.rank>1?i.shape[i.rank-1]:1,f=a.length,y=1,w=d;w<f;++w)y*=a[w];var O=i.size/(d<1?1:d),U=nn(a).concat([1]);return{sliceRank:d,numUpdates:O,sliceSize:y,strides:U.slice(U.length-d,U.length),outputSize:Ie(a)}}function pl(u,i,a,d,f,y,w,C,O){if(void 0===f&&(f=0),void 0===y&&(y=0),void 0===w&&(w=0),void 0===C&&(C=0),void 0===O&&(O=0),0!==w)throw new Error("ellipsis mask is not yet supported");if(0!==C)throw new Error("new axis mask is not yet supported");for(var U=[],j=[],q=[],K=0;K<u.length;K++)U[K]=Jl(f,i,d,u,K),j[K]=zc(y,a,d,u,K),O&1<<K&&(j[K]=U[K]+1,q.push(K));var re=new Array(u.length).fill(0);return re=re.map(function(se,oe){for(var de=0,xe=U[oe];!(d[oe]>0?xe>=j[oe]:xe<=j[oe]);xe+=d[oe])de+=1;return de}),[U,re,q]}function Jl(u,i,a,d,f){var y=i[f];u&1<<f&&(y=a[f]>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var w=d[f];return y<0&&(y+=w),Ne(0,y,w-1)}function zc(u,i,a,d,f){var y=i[f];u&1<<f&&(y=a[f]>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var w=d[f];return y<0&&(y+=w),a[f]>0?Ne(0,y,w):Ne(-1,y,w-1)}function ka(u){var i=u;if(ft(u))return[u.length];if(!Array.isArray(u))return[];for(var a=[];i instanceof Array;)a.push(i.length),i=i[0];return u instanceof Array&&ve.get("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ii(u,a,[]),a}function ii(u,i,a){if(a=a||[],u instanceof Array){le(i.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+u.length+" elements"}),le(u.length===i[0],function(){return"Element arr["+a.join("][")+"] should have "+i[0]+" elements, but has "+u.length+" elements"});for(var d=i.slice(1),f=0;f<u.length;++f)ii(u[f],d,a.concat(f))}else le(0===i.length,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array of "+i[0]+" elements"})}function ae(u,i,a,d){if(void 0===d&&(d="float32"),d=d||"float32",u instanceof Tt)return u;if(!ft(u)&&!Array.isArray(u)&&"number"!=typeof u&&"boolean"!=typeof u)throw new Error("Argument '"+i+"' passed to '"+a+"' must be a Tensor or TensorLike, but got "+u.constructor.name);var f=ka(u);return ft(u)||Array.isArray(u)||(u=[u]),Tt.make(f,{values:fn(u,d,ve.get("DEBUG"))},d)}function ln(u,i,a){if(!Array.isArray(u))throw new Error("Argument "+i+" passed to "+a+" must be a `Tensor[]` or `TensorLike[]`");return u.map(function(d,f){return ae(d,i+"["+f+"]",a)})}function Te(u){var i=Object.keys(u);if(1!==i.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+i.length+" keys.");var a=i[0],d=u[a];a.endsWith("_")&&(a=a.substring(0,a.length-1));var f=function(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];ve.engine.startScope(a);try{var C=d.apply(void 0,y);return C instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ve.engine.endScope(C),C}catch(O){throw ve.engine.endScope(null),O}};return Object.defineProperty(f,"name",{value:a,configurable:!0}),f}var Kn=Te({softmax_:function ho(u,i){void 0===i&&(i=-1);var a=ae(u,"logits","softmax");if(-1===i&&(i=a.rank-1),i!==a.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+a.rank+" and dim was "+i);return Rn(function(d){var f=d.logSumExp([i],!0),y=d.toFloat().sub(f).exp();return{value:y,gradFunc:function(w){var C=w.mul(y);return C.sub(C.sum([i],!0).mul(y))}}})(a)}}),Fa=Te({logSoftmax_:function Wu(u,i){void 0===i&&(i=-1);var a=ae(u,"logits","logSoftmax");if(-1===i&&(i=a.rank-1),i!==a.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+a.rank+" and axis was "+i);return Rn(function(d){var f=d.max(i,!0),y=d.sub(f),w=y.toFloat().sub(y.exp().sum(i,!0).log());return{value:w,gradFunc:function(C){var O=w.exp();return C.sub(C.sum(i,!0).mul(O))}}})(a)}}),Jt=Te({complex_:function fi(u,i){var a=ae(u,"real","complex"),d=ae(i,"imag","complex");return $e(a.shape,d.shape,"real and imag shapes, "+a.shape+" and "+d.shape+", must match in call to tf.complex()."),ve.engine.runKernel(function(f){return f.complex(a,d)},{$real:a,$imag:d})}}),fs=Te({real_:function Ls(u){var i=ae(u,"input","real");return ve.engine.runKernel(function(a){return a.real(i)},{$input:i})}}),ua=Te({imag_:function La(u){var i=ae(u,"input","imag");return ve.engine.runKernel(function(a){return a.imag(i)},{$input:i})}});function vr(u,i,a){if(void 0===a&&(a="float32"),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ft(u)&&!Array.isArray(u)&&"number"!=typeof u&&"boolean"!=typeof u)throw new Error("values passed to tensor(values) must be an array of numbers or booleans, or a TypedArray");var d=ka(u);return null!=i&&1!==d.length&&$e(i,d,"Error creating a new Tensor. Inferred shape ("+d+") does not match the provided shape ("+i+"). "),ft(u)||Array.isArray(u)||(u=[u]),Tt.make(i=i||d,{values:fn(u,a,ve.get("DEBUG"))},a)}function st(u,i){if(void 0===i&&(i="float32"),(ft(u)||Array.isArray(u))&&"complex64"!==i)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return vr(u,[],i)}function ko(u,i){void 0===i&&(i="float32"),xt(u);var a=ka(u);if(1!==a.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return vr(u,a,i)}function ms(u,i,a){if(void 0===a&&(a="float32"),xt(u),null!=i&&2!==i.length)throw new Error("tensor2d() requires shape to have two numbers");var d=ka(u);if(2!==d.length&&1!==d.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===d.length&&null==i)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return vr(u,i=i||d,a)}function po(u,i,a){if(void 0===a&&(a="float32"),xt(u),null!=i&&3!==i.length)throw new Error("tensor3d() requires shape to have three numbers");var d=ka(u);if(3!==d.length&&1!==d.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===d.length&&null==i)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return vr(u,i=i||d,a)}function Ti(u,i,a){if(void 0===a&&(a="float32"),xt(u),null!=i&&4!==i.length)throw new Error("tensor4d() requires shape to have four numbers");var d=ka(u);if(4!==d.length&&1!==d.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===d.length&&null==i)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return vr(u,i=i||d,a)}function Gu(u,i,a){if(void 0===a&&(a="float32"),xt(u),null!=i&&5!==i.length)throw new Error("tensor5d() requires shape to have five numbers");var d=ka(u);if(5!==d.length&&1!==d.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===d.length&&null==i)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return vr(u,i=i||d,a)}function Ji(u,i,a){if(void 0===a&&(a="float32"),xt(u),null!=i&&6!==i.length)throw new Error("tensor6d() requires shape to have six numbers");var d=ka(u);if(6!==d.length&&1!==d.length)throw new Error("tensor6d() requires values to be number[][][][] or flat/TypedArray");if(1===d.length&&null==i)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return vr(u,i=i||d,a)}function Mr(u,i){if(void 0===i&&(i="float32"),"complex64"===i){var a=Mr(u,"float32"),d=Mr(u,"float32");return Jt(a,d)}var f=Kr(Ie(u),i);return Tt.make(u,{values:f},i)}function Fr(u,i){if(void 0===i&&(i="float32"),"complex64"===i){var a=Fr(u,"float32"),d=Fr(u,"float32");return Jt(a,d)}var f=lo(Ie(u),i);return Tt.make(u,{values:f},i)}function Bs(u,i,a){void 0===a&&(a="float32");var d=St(a,Ie(u));return d.fill(i),Tt.make(u,{values:d},a)}function eu(u,i,a){if(0===a)throw new Error("Cannot request zero samples");var d=(i-u)/(a-1),f=lo(a,"float32");f[0]=u;for(var y=1;y<f.length;y++)f[y]=f[y-1]+d;return ko(f,"float32")}function tu(u,i,a,d){if(void 0===a&&(a=1),void 0===d&&(d="float32"),0===a)throw new Error("Cannot have a step of zero");if(u===i||u<i&&a<0||i<u&&a>1)return Fr([0],d);var f=lo(Math.abs(Math.ceil((i-u)/a)),d);i<u&&1===a&&(a=-1),f[0]=u;for(var y=1;y<f.length;y++)f[y]=f[y-1]+a;return ko(f,d)}var Fo,gs,Zo,Vs,mi,qu,Pi=Te({onesLike_:function Vn(u){var i=ae(u,"x","onesLike");return Mr(i.shape,i.dtype)}}),Nn=Te({zerosLike_:function Ym(u){var i=ae(u,"x","zerosLike");return Fr(i.shape,i.dtype)}});(function(u){u.float32="float32",u.int32="int32",u.bool="bool"})(Fo||(Fo={})),function(u){u.R0="R0",u.R1="R1",u.R2="R2",u.R3="R3",u.R4="R4",u.R5="R5",u.R6="R6"}(gs||(gs={})),function(u){u.float32="float32",u.int32="int32",u.bool="int32",u.complex64="complex64"}(Zo||(Zo={})),function(u){u.float32="float32",u.int32="int32",u.bool="bool",u.complex64="complex64"}(Vs||(Vs={})),function(u){u.float32="float32",u.int32="float32",u.bool="float32",u.complex64="complex64"}(mi||(mi={})),function(u){u.float32="complex64",u.int32="complex64",u.bool="complex64",u.complex64="complex64"}(qu||(qu={}));var Ku={float32:mi,int32:Zo,bool:Vs,complex64:qu};function Ir(u,i){return Ku[u][i]}function Ri(u){return Ir(u,"int32")}var ki=function(){function u(i){this.dataMover=i,this.data=new WeakMap}return u.prototype.get=function(i){return this.data.has(i)||this.dataMover.moveData(i),this.data.get(i)},u.prototype.set=function(i,a){this.data.set(i,a)},u.prototype.has=function(i){return this.data.has(i)},u.prototype.delete=function(i){return this.data.delete(i)},u}(),ca=function(){function u(){}return u.prototype.time=function(i){throw new Error("Not yet implemented.")},u.prototype.read=function(i){throw new Error("Not yet implemented.")},u.prototype.readSync=function(i){throw new Error("Not yet implemented.")},u.prototype.disposeData=function(i){throw new Error("Not yet implemented.")},u.prototype.write=function(i,a){throw new Error("Not yet implemented.")},u.prototype.fromPixels=function(i,a){throw new Error("Not yet implemented.")},u.prototype.register=function(i,a,d){throw new Error("Not yet implemented.")},u.prototype.memory=function(){throw new Error("Not yet implemented.")},u.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},u.prototype.batchMatMul=function(i,a,d,f){throw new Error("Not yet implemented")},u.prototype.slice=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.stridedSlice=function(i,a,d,f,y,w,C,O,U){throw new Error("Not yet implemented")},u.prototype.reverse=function(i,a){throw new Error("Not yet implemented")},u.prototype.concat=function(i,a){throw new Error("Not yet implemented")},u.prototype.neg=function(i){throw new Error("Not yet implemented")},u.prototype.add=function(i,a){throw new Error("Not yet implemented")},u.prototype.addN=function(i){throw new Error("Not yet implemented")},u.prototype.subtract=function(i,a){throw new Error("Not yet implemented")},u.prototype.multiply=function(i,a){throw new Error("Not yet implemented")},u.prototype.realDivide=function(i,a){throw new Error("Not yet implemented")},u.prototype.floorDiv=function(i,a){throw new Error("Not yet implemented")},u.prototype.sum=function(i,a){throw new Error("Not yet implemented")},u.prototype.prod=function(i,a){throw new Error("Not yet implemented")},u.prototype.unsortedSegmentSum=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.argMin=function(i,a){throw new Error("Not yet implemented")},u.prototype.argMax=function(i,a){throw new Error("Not yet implemented")},u.prototype.equal=function(i,a){throw new Error("Not yet implemented")},u.prototype.notEqual=function(i,a){throw new Error("Not yet implemented")},u.prototype.less=function(i,a){throw new Error("Not yet implemented")},u.prototype.lessEqual=function(i,a){throw new Error("Not yet implemented")},u.prototype.greater=function(i,a){throw new Error("Not yet implemented")},u.prototype.greaterEqual=function(i,a){throw new Error("Not yet implemented")},u.prototype.logicalNot=function(i){throw new Error("Not yet implemented")},u.prototype.logicalAnd=function(i,a){throw new Error("Not yet implemented")},u.prototype.logicalOr=function(i,a){throw new Error("Not yet implemented")},u.prototype.where=function(i){throw new Error("Not yet implemented")},u.prototype.select=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.topk=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.min=function(i,a){throw new Error("Not yet implemented")},u.prototype.minimum=function(i,a){throw new Error("Not yet implemented")},u.prototype.mod=function(i,a){throw new Error("Not yet implemented")},u.prototype.max=function(i,a){throw new Error("Not yet implemented")},u.prototype.maximum=function(i,a){throw new Error("Not yet implemented")},u.prototype.all=function(i,a){throw new Error("Not yet implemented")},u.prototype.any=function(i,a){throw new Error("Not yet implemented")},u.prototype.squaredDifference=function(i,a){throw new Error("Not yet implemented")},u.prototype.ceil=function(i){throw new Error("Not yet implemented")},u.prototype.floor=function(i){throw new Error("Not yet implemented")},u.prototype.round=function(i){throw new Error("Not yet implemented")},u.prototype.sign=function(i){throw new Error("Not yet implemented")},u.prototype.pow=function(i,a){throw new Error("Not yet implemented")},u.prototype.exp=function(i){throw new Error("Not yet implemented")},u.prototype.expm1=function(i){throw new Error("Not yet implemented")},u.prototype.log=function(i){throw new Error("Not yet implemented")},u.prototype.log1p=function(i){throw new Error("Not yet implemented")},u.prototype.sqrt=function(i){throw new Error("Not yet implemented")},u.prototype.rsqrt=function(i){throw new Error("Not yet implemented")},u.prototype.square=function(i){throw new Error("Not yet implemented")},u.prototype.reciprocal=function(i){throw new Error("Not yet implemented")},u.prototype.relu=function(i){throw new Error("Not yet implemented")},u.prototype.elu=function(i){throw new Error("Not yet implemented")},u.prototype.eluDer=function(i,a){throw new Error("Not yet implemented")},u.prototype.selu=function(i){throw new Error("Not yet implemented")},u.prototype.int=function(i){throw new Error("Not yet implemented")},u.prototype.clip=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.abs=function(i){throw new Error("Not yet implemented")},u.prototype.complexAbs=function(i){throw new Error("Not yet implemented")},u.prototype.sigmoid=function(i){throw new Error("Not yet implemented")},u.prototype.softplus=function(i){throw new Error("Not yet implemented")},u.prototype.sin=function(i){throw new Error("Not yet implemented")},u.prototype.cos=function(i){throw new Error("Not yet implemented")},u.prototype.tan=function(i){throw new Error("Not yet implemented")},u.prototype.asin=function(i){throw new Error("Not yet implemented")},u.prototype.acos=function(i){throw new Error("Not yet implemented")},u.prototype.atan=function(i){throw new Error("Not yet implemented")},u.prototype.atan2=function(i,a){throw new Error("Not yet implemented")},u.prototype.sinh=function(i){throw new Error("Not yet implemented")},u.prototype.cosh=function(i){throw new Error("Not yet implemented")},u.prototype.tanh=function(i){throw new Error("Not yet implemented")},u.prototype.asinh=function(i){throw new Error("Not yet implemented")},u.prototype.acosh=function(i){throw new Error("Not yet implemented")},u.prototype.atanh=function(i){throw new Error("Not yet implemented")},u.prototype.erf=function(i){throw new Error("Not yet implemented")},u.prototype.step=function(i,a){throw new Error("Not yet implemented")},u.prototype.conv2d=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.conv2dDerInput=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.conv2dDerFilter=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.depthwiseConv2D=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.depthwiseConv2DDerInput=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.depthwiseConv2DDerFilter=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.maxPool=function(i,a){throw new Error("Not yet implemented")},u.prototype.maxPoolBackprop=function(i,a,d,f){throw new Error("Not yet implemented")},u.prototype.avgPool=function(i,a){throw new Error("Not yet implemented")},u.prototype.avgPoolBackprop=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.reshape=function(i,a){throw new Error("Not yet implemented")},u.prototype.cast=function(i,a){throw new Error("Not yet implemented")},u.prototype.tile=function(i,a){throw new Error("Not yet implemented")},u.prototype.pad=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.transpose=function(i,a){throw new Error("Not yet implemented")},u.prototype.gather=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.gatherND=function(i,a){throw new Error("Not yet implemented")},u.prototype.scatterND=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.batchToSpaceND=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.spaceToBatchND=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.resizeBilinear=function(i,a,d,f){throw new Error("Not yet implemented")},u.prototype.resizeBilinearBackprop=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.resizeNearestNeighbor=function(i,a,d,f){throw new Error("Not yet implemented")},u.prototype.resizeNearestNeighborBackprop=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.batchNormalization=function(i,a,d,f,y,w){throw new Error("Not yet implemented")},u.prototype.localResponseNormalization4D=function(i,a,d,f,y){throw new Error("Not yet implemented")},u.prototype.LRNGrad=function(i,a,d,f,y,w,C){throw new Error("Not yet implemented")},u.prototype.multinomial=function(i,a,d,f){throw new Error("Not yet implemented")},u.prototype.oneHot=function(i,a,d,f){throw new Error("Not yet implemented")},u.prototype.cumsum=function(i,a,d,f){throw new Error("Not yet implemented")},u.prototype.nonMaxSuppression=function(i,a,d,f,y){throw new Error("Not yet implemented")},u.prototype.fft=function(i){throw new Error("Not yet implemented")},u.prototype.ifft=function(i){throw new Error("Not yet implemented")},u.prototype.complex=function(i,a){throw new Error("Not yet implemented")},u.prototype.real=function(i){throw new Error("Not yet implemented")},u.prototype.imag=function(i){throw new Error("Not yet implemented")},u.prototype.cropAndResize=function(i,a,d,f,y,w){throw new Error("Not yet implemented")},u.prototype.depthToSpace=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.split=function(i,a,d){throw new Error("Not yet implemented")},u.prototype.sparseToDense=function(i,a,d,f){throw new Error("Not yet implemented")},u.prototype.setDataMover=function(i){throw new Error("Not yet implemented")},u.prototype.dispose=function(){throw new Error("Not yet implemented")},u}();function fo(u,i,a){if("complex64"===i){if("complex64"===u.dtype)return u.clone();var d=Fr(u.shape),f=u.toFloat(),y=a.complex(f,d);return d.dispose(),f.dispose(),y}if(!hi(u.dtype,i))return Tt.make(u.shape,{dataId:u.dataId},i);if("complex64"===u.dtype){var w=a.real(u);return y=w.cast(i),w.dispose(),y}if("int32"===i)return a.int(u);if("bool"===i){var C=st(0,u.dtype);return y=a.notEqual(u,C),C.dispose(),y}throw new Error("Error in Cast: unknown dtype argument ("+i+")")}function qd(u,i){return Tt.make(i,{dataId:u.dataId},u.dtype)}function jc(u,i){if(u.length!==i.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+u.length+", imag: "+i.length+".");for(var a=new Float32Array(2*u.length),d=0;d<a.length;d+=2)a[d]=u[d/2],a[d+1]=i[d/2];return a}function Zd(u,i){return{real:u[2*i],imag:u[2*i+1]}}function da(u,i,a,d){u[2*d]=i,u[2*d+1]=a}function Xd(u,i,a){var d=(a?2:-2)*Math.PI*(u/i);return{real:Math.cos(d),imag:Math.sin(d)}}function Us(u,i,a,d,f){for(var y=Array.from(i).map(function(re,se){return{score:re,boxIndex:se}}).filter(function(re){return re.score>f}).sort(function(re,se){return se.score-re.score}),w=[],C=0;C<y.length;C++){var O=y[C],j=O.boxIndex;if(O.score<f)break;for(var q=!1,K=w.length-1;K>=0;--K)if(Nf(u,j,w[K])>=d){q=!0;break}if(!q&&(w.push(j),w.length>=a))break}return ko(w,"int32")}function Nf(u,i,a){var d=u.subarray(4*i,4*i+4),f=u.subarray(4*a,4*a+4),y=Math.min(d[0],d[2]),w=Math.min(d[1],d[3]),C=Math.max(d[0],d[2]),O=Math.max(d[1],d[3]),U=Math.min(f[0],f[2]),j=Math.min(f[1],f[3]),q=Math.max(f[0],f[2]),K=Math.max(f[1],f[3]),re=(C-y)*(O-w),se=(q-U)*(K-j);if(re<=0||se<=0)return 0;var oe=Math.max(y,U),de=Math.max(w,j),xe=Math.min(C,q),Se=Math.min(O,K),ke=Math.max(xe-oe,0)*Math.max(Se-de,0);return ke/(re+se-ke)}function sp(u,i,a){var d=Array(u.rank).fill(0),f=u.shape.slice();return i.map(function(y){f[a]=y;var w=u.slice(d,f);return d[a]+=y,w})}function Ba(u,i,a,d,f){for(var y=i[i.length-1],w=[u.length/y,y],C=w[0],O=w[1],U=St(a,C*d),j=St("int32",C*d),q=0;q<C;q++){for(var K=q*O,re=u.subarray(K,K+O),se=[],oe=0;oe<re.length;oe++)se.push({value:re[oe],index:oe});se.sort(function(Ke,Ge){return Ge.value-Ke.value});var de=q*d,xe=U.subarray(de,de+d),Se=j.subarray(de,de+d);for(oe=0;oe<d;oe++)xe[oe]=se[oe].value,Se[oe]=se[oe].index}var ke=i.slice();return ke[ke.length-1]=d,[vr(U,ke,a),vr(j,ke,"int32")]}var Qm=function(u,i,a){this.variableNames=["A"];var d=u.windowSize,f=u.batchSize,w=Math.ceil(u.inSize/d);a||this.variableNames.push("bestIndicesA"),this.outputShape=[f,w],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+d+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+d+"; i++) {\n          int inIdx = "+(a?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));")+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+("max"===i?">":"<")+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "},ap=function(u){this.variableNames=["dy"],this.outputShape=u.inShape;var C=u.effectiveFilterHeight,O=u.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(C-1-u.padInfo.top)+", "+(O-1-u.padInfo.left)+");\n      const float avgMultiplier = float("+1/(u.filterHeight*u.filterWidth)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+C+";\n            wR += "+u.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+u.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+u.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+O+";\n            wC+= "+u.dilationWidth+") {\n            float dyC = float(dyCCorner + wC) / "+u.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+u.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};function mo(u,i){for(var a=u.length,d=[],f=0;f<a;f++){var y=a-1-f;(i[i.length-1-f]||1)>1&&1===(u[y]||1)&&d.unshift(y)}return d}function Lr(u,i){for(var a=[],d=0;d<i.length;d++){var f=u[u.length-d-1],y=i.length-d-1;(null==f||1===f&&i[y]>1)&&a.unshift(y)}return a}function ar(u,i){for(var a=[],d=Math.max(u.length,i.length),f=0;f<d;f++){var y=u[u.length-f-1];null==y&&(y=1);var w=i[i.length-f-1];if(null==w&&(w=1),1===y)a.unshift(w);else if(1===w)a.unshift(y);else{if(y!==w)throw Error("Operands could not be broadcast together with shapes "+u+" and "+i+".");a.unshift(y)}}return a}var Jm=function(u,i,a,d,f,y){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],ar(u,i),ar(u,a);var w="0.0";null!=d&&(ar(u,d),this.variableNames.push("offset"),w="getOffsetAtOutCoords()");var C="1.0";null!=f&&(ar(u,f),this.variableNames.push("scale"),C="getScaleAtOutCoords()"),this.outputShape=u,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+w+";\n        float scale = "+C+";\n        float inv = scale * inversesqrt(variance + float("+y+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},oi=function(u,i,a,d,f,y){this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],ar(u,i),ar(u,a);var w=zs("mean",i.length),C=zs("variance",a.length),O="vec4 offset = vec4(0.0)";null!=d&&(ar(u,d),this.variableNames.push("offset"),O=zs("offset",d.length));var U="vec4 scale = vec4(1.0)";null!=f&&(ar(u,f),this.variableNames.push("scale"),U=zs("scale",f.length)),this.outputShape=u,this.userCode="\n      void main() {\n        ivec4 rc = getOutputCoords();\n\n        "+O+";\n        "+U+";\n\n        vec4 x = getX(rc.x, rc.y, rc.z, rc.w);\n        "+w+";\n        "+C+";\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+y+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "};function zs(u,i){var a="get"+u.charAt(0).toUpperCase()+u.slice(1);return 1===i?"\n      vec4 "+u+"Sample = "+a+"(rc.w);\n      vec4 "+u+" = vec4("+u+"Sample.xy, "+u+"Sample.xy);\n    ":"vec4 "+u+" = "+a+"(rc.x, rc.y, rc.z, rc.w)"}var Va=function(u,i,a){this.variableNames=["AReal","AImag","BReal","BImag"],this.supportsBroadcasting=!0,this.outputShape=ar(i,a),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+u+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},$i="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n",Qd="return a + b;",gl="return a - b;",Wc=$i+"\n  return max(a, b);\n",eh=$i+"\n  return min(a, b);\n",ru=$i+"\n  return atan(a, b);\n",Hn=function(){function u(i,a,d){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=ar(a,d),this.userCode="\n      uniform float NAN;\n      float binaryOperation(float a, float b) {\n        "+i+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}return u.prototype.getCustomSetupFunc=function(){var i=this;return function(a,d){null==i.startLoc&&(i.startLoc=a.getUniformLocationNoThrow(d,"NAN"),null==i.startLoc)||a.gl.uniform1f(i.startLoc,NaN)}},u}(),lp=function(u,i,a){this.variableNames=["A"],this.outputShape=u,this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, float("+i+"), float("+a+")));\n      }\n    "},th=function(u){this.variableNames=["real","imag"],this.outputShape=u,this.userCode="\n      void main() {\n        float real = getRealAtOutCoords();\n        float imag = getImagAtOutCoords();\n        vec2 v = vec2(real, imag);\n\n        setOutput(sqrt(dot(v, v)));\n      }\n    "},nh=function(u,i){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=cl([u,i],1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+u[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+u[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "},Zu=function(u){this.variableNames=["x","dy"],this.outputShape=u.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+u.batchSize+"; b++) {\n          for (int yR = 0; yR < "+u.outHeight+"; yR++) {\n            int xR = wR + yR * "+u.strideHeight+" - "+u.padInfo.top+";\n\n            if (xR < 0 || xR >= "+u.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+u.outWidth+"; yC++) {\n              int xC = wC + yC * "+u.strideWidth+" - "+u.padInfo.left+";\n\n              if (xC < 0 || xC >= "+u.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Gc=function(u){this.variableNames=["dy","W"],this.outputShape=u.inShape;var i=u.filterHeight,a=u.filterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(i-1-u.padInfo.top)+", "+(a-1-u.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+u.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+u.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+i+" - 1 - wR;\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+u.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+u.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+a+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+u.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},rh=function(u){this.variableNames=["x","dy"],this.outputShape=u.filterShape,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+u.outChannels/u.inChannels+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+u.batchSize+"; b++) {\n          for (int yR = 0; yR < "+u.outHeight+"; yR++) {\n            int xR = wR + yR * "+u.strideHeight+" - "+u.padInfo.top+";\n\n            if (xR < 0 || xR >= "+u.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+u.outWidth+"; yC++) {\n              int xC = wC + yC * "+u.strideWidth+" - "+u.padInfo.left+";\n\n              if (xC < 0 || xC >= "+u.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ha=function(u){this.variableNames=["dy","W"],this.outputShape=u.inShape;var i=u.filterHeight,a=u.filterWidth,C=u.outChannels/u.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+(i-1-u.padInfo.top)+", "+(a-1-u.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+i+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+u.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+u.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+i+" - 1 - wR;\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+u.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+u.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+a+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+C+"; dm++) {\n              int d2 = d1 * "+C+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},qc=function(u){this.variableNames=["x","W"],this.outputShape=u.outShape;var i=u.padInfo.top,a=u.padInfo.left,d=u.strideHeight,f=u.strideWidth,y=u.dilationHeight,w=u.dilationWidth,C=u.filterHeight,O=u.filterWidth,U=4*Math.floor(u.inChannels/4),j=u.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+d+", "+f+");\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+C+"; wR++) {\n          int xR = xRCorner + wR * "+y+";\n\n          if (xR < 0 || xR >= "+u.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+O+"; wC++) {\n            int xC = xCCorner + wC * "+w+";\n\n            if (xC < 0 || xC >= "+u.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+U+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===j)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+U+") *\n                getW(wR, wC, "+U+", d2);\n            } else if ("+(2===j)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+U+"),\n                getX(batch, xR, xC, "+U+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+U+", d2),\n                getW(wR, wC, "+U+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===j)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+U+"),\n                getX(batch, xR, xC, "+U+" + 1),\n                getX(batch, xR, xC, "+U+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+U+", d2),\n                getW(wR, wC, "+U+" + 1, d2),\n                getW(wR, wC, "+U+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ou=function(u){this.variableNames=["x","W"],this.outputShape=u.outShape;var q=u.outChannels/u.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+u.strideHeight+", "+u.strideWidth+");\n      const ivec2 pads = ivec2("+u.padInfo.top+", "+u.padInfo.left+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+q+";\n        int q = d2 - d1 * "+q+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+u.filterHeight+"; wR++) {\n          int xR = xRCorner + wR * "+u.dilationHeight+";\n\n          if (xR < 0 || xR >= "+u.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u.filterWidth+"; wC++) {\n            int xC = xCCorner + wC * "+u.dilationWidth+";\n\n            if (xC < 0 || xC >= "+u.inWidth+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vl=function(u,i,a,d,f){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var y=u[0],w=u[1],C=u[2],j=a[0],q=a[1];this.outputShape=[i[0],j,q,u[3]];var re=[w-1+".0",C-1+".0"],se=re[0],oe=re[1],de=j>1?[""+(w-1)/(j-1),"(y2-y1) * height_ratio","y1*"+se+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+se],Ke=q>1?[""+(C-1)/(q-1),"(x2-x1) * width_ratio","x1*"+oe+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+oe];this.userCode="\n      const float height_ratio = float("+de[0]+");\n      const float width_ratio = float("+Ke[0]+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+y+") {\n          return;\n        }\n\n        float height_scale = "+de[1]+";\n        float width_scale = "+Ke[1]+";\n\n        float in_y = "+de[2]+";\n        if( in_y < 0.0 || in_y > "+se+" ) {\n          setOutput(float("+f+"));\n          return;\n        }\n        float in_x = "+Ke[2]+";\n        if( in_x < 0.0 || in_x > "+oe+" ) {\n          setOutput(float("+f+"));\n          return;\n        }\n\n        vec2 sourceFracIndexRC = vec2(in_y,in_x);\n        if("+("bilinear"===d?1:0)+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n          ivec2 sourceCeilRC = ivec2(ceil(sourceFracIndexRC));\n\n          float topLeft = getImage(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          float bottomLeft = getImage(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          float topRight = getImage(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          float bottomRight = getImage(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n          float top = topLeft + (topRight - topLeft) * fracRC.y;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          float newValue = top + (bottom - top) * fracRC.x;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestRC = ivec2(floor(\n            sourceFracIndexRC + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestRC.x, sourceNearestRC.y, d);\n          setOutput(newValue);\n        }\n      }\n    "};function $a(u,i,a){void 0===a&&(a="index");var d=nn(i);return d.map(function(f,y){return"int "+u[y]+" = "+a+" / "+f+"; "+(y===d.length-1?"int "+u[y+1]+" = "+a+" - "+u[y]+" * "+f:"index -= "+u[y]+" * "+f)+";"}).join("")}function bl(u){return 1===u.length?""+u[0]:"vec"+u.length+"("+u.join(",")+")"}function Kc(u,i,a,d,f){var y=u.map(function(q){var K=Ie(q.shapeInfo.logicalShape);return q.shapeInfo.isUniform?"uniform float "+q.name+(K>1?"["+K+"]":"")+";":"uniform sampler2D "+q.name+";"});y=y.join("\n");var w,C,O=u.map(function(q){return function su(u,i,a){var d=function ec(u){var i=u.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1)+"Flat",d=Ie(u.shapeInfo.logicalShape);if(u.shapeInfo.isUniform)return 1===d?"float "+a+"(int index) {return "+i+";}":"\n      float "+a+"(int index) {\n        for (int i = 0; i < "+d+"; i++) {\n          if (i == index) {\n            return "+i+"[i];\n          }\n        }\n      }\n    ";var f=u.shapeInfo.texShape,y=f[0],w=f[1];return 1===w&&1===y?"\n      float "+a+"(int index) {\n        return sampleTexture("+i+", halfCR);\n      }\n    ":1===w?"\n      float "+a+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+y+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ":1===y?"\n      float "+a+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+w+".0, 0.5);\n        return sampleTexture("+i+", uv);\n      }\n    ":"\n    float "+a+"(int index) {\n      vec2 uv = UVfrom1D("+y+", "+w+", index);\n      return sampleTexture("+i+", uv);\n    }\n  "}(u);return d+=u.shapeInfo.isPacked?_s(u):Hs(u),(a||Ue(u.shapeInfo.logicalShape,i.logicalShape))&&(d+=function fp(u,i,a){var d=u.name,f=d.charAt(0).toUpperCase()+d.slice(1),y="get"+f+"AtOutCoords",w=mo(u.shapeInfo.logicalShape,i.logicalShape),U=a&&(i.logicalShape.length>u.shapeInfo.logicalShape.length||w.length>0),j=function fl(u){for(var i=0;i<u.length;i++)if(u[i]!==i)return!1;return!0}(w),q=u.shapeInfo.isUniform;if(U&&!j)return function wi(u,i,a,d){var f=u.shapeInfo.logicalShape.length,y=i.logicalShape.length,w="int";2===y?w="ivec2":3===y?w="ivec3":4===y&&(w="ivec4");var C=mo(u.shapeInfo.logicalShape,i.logicalShape),O=y-f;return"\n    float "+d+"() {\n      "+w+" coords = getOutputCoords();\n      "+(0===f?"":y<2&&C.length>=1?"coords = 0;":C.map(function(U){return"coords["+(U+O)+"] = 0;"}).join("\n"))+"\n      return get"+a+"("+(y<2&&f>0?"coords":u.shapeInfo.logicalShape.map(function(U,j){return"coords["+(j+O)+"]"}).join(", "))+");\n    }\n  "}(u,i,f,y);var K=Ie(u.shapeInfo.logicalShape),re="";U&&j&&(re="\n        int mainPart = index / "+K+";\n        index -= mainPart * "+K+";\n      ");var se=i.texShape;if(q)return 1===K?"float "+y+"() {return "+d+";}":"\n      float "+y+"() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                              vec2("+se[0]+", "+se[1]+"));\n        int index = resTexRC.x * "+se[1]+" + resTexRC.y;\n        "+re+"\n        return get"+f+"Flat(index);\n      }\n    ";var oe=u.shapeInfo.texShape;return Ue(oe,se)?"\n      float "+y+"() {\n        return sampleTexture("+d+", resultUV);\n      }\n    ":"\n    float "+y+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+se[0]+", "+se[1]+"));\n      int index = resTexRC.x * "+se[1]+" + resTexRC.y;\n      "+re+"\n      int texR = index / "+oe[1]+";\n      int texC = index - texR * "+oe[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+oe[1]+".0, "+oe[0]+".0);\n\n      return sampleTexture("+d+", uv);\n    }\n  "}(u,i,a)),d}(q,i,d)}).join("\n"),U=i.texShape,j=dp;return i.isPacked?(w=function ih(u,i){switch(u.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function Zc(u,i){var a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return 1===i[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+a[1]+".0);\n      }\n    ":1===i[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+a[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      return resTexRC.x * "+a[1]+" + resTexRC.y;\n    }\n  "}(0,i);case 2:return function hp(u,i){var a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(Ue(u,i))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+a[0]+", "+a[1]+"));\n      }\n    ";var d=Math.ceil(u[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n      int r = 2 * (index / "+d+");\n      int c = imod(index, "+d+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(u,i);case 3:return function Yc(u,i){var a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],d=Math.ceil(u[2]/2),f=d*Math.ceil(u[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b = index / "+f+";\n      index -= b * "+f+";\n\n      int r = 2 * (index / "+d+");\n      int c = imod(index, "+d+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  "}(u,i);case 4:return function Xc(u,i){var a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],d=Math.ceil(u[3]/2),f=d*Math.ceil(u[2]/2),y=f*u[1];return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b2 = index / "+y+";\n      index -= b2 * "+y+";\n\n      int b = index / "+f+";\n      index -= b * "+f+";\n\n      int r = 2 * (index / "+d+");\n      int c = imod(index, "+d+") * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  "}(u,i);default:throw new Error(u.length+"-D packed output coordinate fetching is not yet supported")}}(i.logicalShape,U),C=Yu):(w=function br(u,i){switch(u.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function pa(u,i){return 1===i[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+i[1]+".0);\n      }\n    ":1===i[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+i[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      return resTexRC.x * "+i[1]+" + resTexRC.y;\n    }\n  "}(0,i);case 2:return function au(u,i){return Ue(u,i)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+i[0]+", "+i[1]+"));\n      }\n    ":1===u[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+i[0]+", "+i[1]+"));\n        int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===u[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+i[0]+", "+i[1]+"));\n        int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n      int r = index / "+u[1]+";\n      int c = index - r * "+u[1]+";\n      return ivec2(r, c);\n    }\n  "}(u,i);case 3:return function fa(u,i){var a=$a(["r","c","d"],u);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n      "+a+"\n      return ivec3(r, c, d);\n    }\n  "}(u,i);case 4:return function dn(u,i){var a=$a(["r","c","d","d2"],u);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n      "+a+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(u,i);case 5:return function Qc(u,i){var a=$a(["r","c","d","d2","d3"],u);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+i[0]+",\n                             "+i[1]+"));\n\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      "+a+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(u,i);case 6:return function Xu(u,i){var a=$a(["r","c","d","d2","d3","d4"],u);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      "+a+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(u,i);default:throw new Error(u.length+"-D output sampling is not yet supported")}}(i.logicalShape,U),C=cp),f&&(j+=Bo),[j,Fi,C,y,w,O,a].join("\n")}function Hs(u){var i=u.shapeInfo.logicalShape;switch(i.length){case 0:return function pp(u){var i=u.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1);return u.shapeInfo.isUniform?"float "+a+"() {return "+i+";}":"\n    float "+a+"() {\n      return sampleTexture("+i+", halfCR);\n    }\n  "}(u);case 1:return function $s(u){var i=u.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1);return"\n    float "+a+"(int index) {\n      return "+a+"Flat(index);\n    }\n  "}(u);case 2:return function lu(u){var i=u.shapeInfo.logicalShape,a=u.name,d="get"+a.charAt(0).toUpperCase()+a.slice(1),f=u.shapeInfo.texShape;if(null!=f&&Ue(i,f))return"\n    float "+d+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+f[1]+".0, "+f[0]+".0);\n      return sampleTexture("+a+", uv);\n    }\n  ";var w=Pt(i),O=w.keptDims,U=w.newShape;if(U.length<i.length)return"\n      "+Hs(Li(u,U))+"\n      float "+d+"(int row, int col) {\n        return "+d+"("+Cl(["row","col"],O)+");\n      }\n    ";if(u.shapeInfo.isUniform)return"\n      float "+d+"(int row, int col) {\n        float index = dot(vec2(row, col), vec2("+i[1]+", 1));\n        return "+d+"Flat(round(index));\n      }\n    ";var j=f[0],q=f[1];return 1===q?"\n    float "+d+"(int row, int col) {\n      float index = dot(vec2(row, col), vec2("+i[1]+", 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+j+".0);\n      return sampleTexture("+a+", uv);\n    }\n  ":1===j?"\n    float "+d+"(int row, int col) {\n      float index = dot(vec2(row, col), vec2("+i[1]+", 1));\n      vec2 uv = vec2((index + 0.5) / "+q+".0, 0.5);\n      return sampleTexture("+a+", uv);\n    }\n  ":"\n  float "+d+"(int row, int col) {\n    vec2 uv = UVfrom2D("+j+", "+q+", "+i[1]+", row, col);\n    return sampleTexture("+a+", uv);\n  }\n"}(u);case 3:return function Pf(u){var i=u.shapeInfo.logicalShape,a=u.name,d="get"+a.charAt(0).toUpperCase()+a.slice(1),f=i[1]*i[2],y=i[2],w=Pt(i),O=w.keptDims,U=w.newShape;if(U.length<i.length)return"\n        "+Hs(Li(u,U))+"\n        float "+d+"(int row, int col, int depth) {\n          return "+d+"("+Cl(["row","col","depth"],O)+");\n        }\n      ";if(u.shapeInfo.isUniform)return"\n      float "+d+"(int row, int col, int depth) {\n        float index = dot(vec3(row, col, depth),\n                          vec3("+f+", "+y+", 1));\n        return "+d+"Flat(round(index));\n      }\n    ";var j=u.shapeInfo.texShape,q=j[0],K=j[1];return K===f?"\n        float "+d+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+y+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+K+".0, "+q+".0);\n          return sampleTexture("+a+", uv);\n        }\n      ":K===y?"\n    float "+d+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+i[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+K+".0, "+q+".0);\n      return sampleTexture("+a+", uv);\n    }\n  ":"\n      float "+d+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+q+", "+K+", "+f+", "+y+", row, col, depth);\n        return sampleTexture("+a+", uv);\n      }\n  "}(u);case 4:return function ut(u){var i=u.shapeInfo.logicalShape,a=u.name,d="get"+a.charAt(0).toUpperCase()+a.slice(1),f=i[3],y=i[2]*f,w=i[1]*y,C=Pt(i),O=C.newShape,U=C.keptDims;if(O.length<i.length)return"\n      "+Hs(Li(u,O))+"\n      float "+d+"(int row, int col, int depth, int depth2) {\n        return "+d+"("+Cl(["row","col","depth","depth2"],U)+");\n      }\n    ";if(u.shapeInfo.isUniform)return"\n      float "+d+"(int row, int col, int depth, int depth2) {\n        float index = dot(vec4(row, col, depth, depth2),\n                          vec4("+w+", "+y+", "+f+", 1));\n        return "+d+"Flat(round(index));\n      }\n    ";var j=u.shapeInfo.texShape,q=j[0],K=j[1];return K===w?"\n      float "+d+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2), vec3("+y+", "+f+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+K+".0, "+q+".0);\n        return sampleTexture("+a+", uv);\n      }\n    ":K===f?"\n      float "+d+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+i[1]*i[2]+", "+i[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+K+".0, "+q+".0);\n        return sampleTexture("+a+", uv);\n      }\n    ":"\n    float "+d+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+q+", "+K+", "+w+", "+y+",\n          "+f+", row, col, depth, depth2);\n      return sampleTexture("+a+", uv);\n    }\n  "}(u);case 5:return function Gn(u){var i=u.shapeInfo.logicalShape,a=u.name,d="get"+a.charAt(0).toUpperCase()+a.slice(1),f=i[4],y=i[3]*f,w=i[2]*y,C=i[1]*w,O=Pt(i),U=O.newShape,j=O.keptDims;if(U.length<i.length)return"\n      "+Hs(Li(u,U))+"\n      float "+d+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+d+"("+Cl(["row","col","depth","depth2","depth3"],j)+");\n      }\n    ";if(u.shapeInfo.isUniform)return"\n      float "+d+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+C+", "+w+", "+y+", "+f+")) +\n          depth3;\n        return "+d+"Flat(index);\n      }\n    ";var q=u.shapeInfo.texShape,K=q[0],re=q[1];return re===C?"\n      float "+d+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(\n          vec4(col, depth, depth2, depth3),\n          vec4("+w+", "+y+", "+f+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+re+".0, "+K+".0);\n        return sampleTexture("+a+", uv);\n      }\n    ":re===f?"\n      float "+d+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+i[1]*i[2]*i[3]+", "+i[2]*i[3]+",\n            "+i[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+re+".0, "+K+".0);\n        return sampleTexture("+a+", uv);\n      }\n    ":"\n    float "+d+"(int row, int col, int depth, int depth2, int depth3) {\n      vec2 uv = UVfrom5D("+K+", "+re+", "+C+", "+w+",\n          "+y+", "+f+", row, col, depth, depth2, depth3);\n      return sampleTexture("+a+", uv);\n    }\n  "}(u);case 6:return function ed(u){var i=u.shapeInfo.logicalShape,a=u.name,d="get"+a.charAt(0).toUpperCase()+a.slice(1),f=i[5],y=i[4]*f,w=i[3]*y,C=i[2]*w,O=i[1]*C,U=Pt(i),j=U.newShape,q=U.keptDims;if(j.length<i.length)return"\n      "+Hs(Li(u,j))+"\n      float "+d+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+d+"("+Cl(["row","col","depth","depth2","depth3","depth4"],q)+");\n      }\n    ";if(u.shapeInfo.isUniform)return"\n      float "+d+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+O+", "+C+", "+w+", "+y+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+f+", 1));\n        return "+d+"Flat(index);\n      }\n    ";var K=u.shapeInfo.texShape,re=K[0],se=K[1];return se===O?"\n      float "+d+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(\n          vec4(col, depth, depth2, depth3),\n          vec4("+C+", "+w+", "+y+", "+f+")) + depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+se+".0, "+re+".0);\n        return sampleTexture("+a+", uv);\n      }\n    ":se===f?"\n      float "+d+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+i[1]*i[2]*i[3]*i[4]+",\n               "+i[2]*i[3]*i[4]+",\n               "+i[3]*i[4]+",\n               "+i[4]+")) + depth3;\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+se+".0, "+re+".0);\n        return sampleTexture("+a+", uv);\n      }\n    ":"\n    float "+d+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      vec2 uv = UVfrom6D("+re+", "+se+", "+O+", "+C+",\n          "+w+", "+y+", "+f+"\n          ,row, col, depth, depth2, depth3, depth4);\n      return sampleTexture("+a+", uv);\n    }\n  "}(u);default:throw new Error(i.length+"-D input sampling is not yet supported")}}function _s(u){var i=u.shapeInfo.logicalShape;switch(i.length){case 1:return function Qu(u){var i=u.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),d=u.shapeInfo.texShape,f=[Math.ceil(d[0]/2),Math.ceil(d[1]/2)];return"\n    vec4 "+a+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+f[0]+", "+f[1]+", index);\n      return texture2D("+i+", uv);\n    }\n  "}(u);case 2:return function Ju(u){var i=u.shapeInfo.logicalShape,a=u.name,d="get"+a.charAt(0).toUpperCase()+a.slice(1),f=u.shapeInfo.texShape,y=f[0],w=f[1];if(null!=f&&Ue(i,f))return"\n      vec4 "+d+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+w+".0, "+y+".0);\n\n        return texture2D("+a+", uv);\n      }\n    ";var C=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)];return"\n    vec4 "+d+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(i[1]/2)+", "+C[0]+", "+C[1]+", row, col);\n      return texture2D("+a+", uv);\n    }\n  "}(u);case 3:return function Jc(u){var i=u.shapeInfo.logicalShape,a=u.name,d="get"+a.charAt(0).toUpperCase()+a.slice(1),f=u.shapeInfo.texShape,y=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)];if(1===i[0])return"\n        "+_s(Li(u,i.slice(1)))+"\n        vec4 "+d+"(int b, int row, int col) {\n          return "+d+"("+Cl(["b","row","col"],[1,2])+");\n        }\n      ";var w=y[0],C=y[1],O=Math.ceil(i[2]/2);return"\n    vec4 "+d+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+w+", "+C+", "+O*Math.ceil(i[1]/2)+", "+O+", b, row, col);\n      return texture2D("+a+", uv);\n    }\n  "}(u);case 4:return function Ga(u){var i=u.shapeInfo.logicalShape,a=u.name,d="get"+a.charAt(0).toUpperCase()+a.slice(1),f=u.shapeInfo.texShape,y=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)],w=y[0],C=y[1],O=Math.ceil(i[3]/2),U=O*Math.ceil(i[2]/2);return"\n    vec4 "+d+"(int b2, int b, int row, int col) {\n      vec2 uv = packedUVfrom4D(\n        "+w+", "+C+", "+U*i[1]+",\n        "+U+", "+O+", b2, b, row, col);\n      return texture2D("+a+", uv);\n    }\n  "}(u);default:throw new Error("Packed "+i.length+"-D input sampling is not yet supported")}}var Fi="\n  float sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n  }\n",cp="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",Yu="\n  void setOutput(vec4 val) {\n    gl_FragColor = val;\n  }\n",dp="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  struct ivec5\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n  };\n\n  struct ivec6\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n    int v;\n  };\n\n  bool isNaN(float val) {\n    return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  //Based on the work of Dave Hoskins\n  //https://www.shadertoy.com/view/4djSRW\n  #define HASHSCALE1 443.8975\n  float random(float seed){\n    vec2 p = resultUV * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom4D(int texNumR, int texNumC, int texelsInBatch2,\n    int texelsInBatch, int texelsInLogicalRow, int b2, int b,\n    int row, int col) {\n  int index = b2 * texelsInBatch2 + b * texelsInBatch +\n    (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom5D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int row, int col, int depth,\n    int depth2, int depth3) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 +\n              depth * stride2 + depth2 * stride3 + depth3;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom6D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int stride4,\n    int row, int col, int depth, int depth2, int depth3, int depth4) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2 *\n    stride3 + depth3 * stride4 + depth4;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n",Bo="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function xi(u){if(u<=1)return"int";if(2===u)return"ivec2";if(3===u)return"ivec3";if(4===u)return"ivec4";if(5===u)return"ivec5";if(6===u)return"ivec6";throw Error("GPU for rank "+u+" is not yet supported")}function Li(u,i){var a=JSON.parse(JSON.stringify(u));return a.shapeInfo.logicalShape=i,a}function Cl(u,i){return i.map(function(a){return u[a]}).join(", ")}var mp=function(u,i,a){this.variableNames=["x"],this.outputShape=u;var d=u.length,f=u[u.length-1],y=a?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(a?"return "+f+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+xi(d)+" coords = getOutputCoords();\n        int end = "+eg(d,"coords")+";\n        float val = 0.0;\n        for (int i = "+f+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+y+" end) {\n            continue;\n          }\n          if (idx == end && "+i+") {\n            continue;\n          }\n          "+eg(d,"coords")+" = idx;\n          val += getX("+function tc(u,i){if(1===u)return""+i;if(2===u)return i+".x, "+i+".y";if(3===u)return i+".x, "+i+".y, "+i+".z";if(4===u)return i+".x, "+i+".y, "+i+".z, "+i+".w";throw Error("Cumulative sum for rank "+u+" is not yet supported")}(d,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function eg(u,i){if(1===u)return""+i;if(2===u)return i+".y";if(3===u)return i+".z";if(4===u)return i+".w";throw Error("Cumulative sum for rank "+u+" is not yet supported")}var _o,Wi,gp=function(){function u(i,a,d){this.variableNames=["x"],this.outputShape=[],this.outputShape=i,this.blockSize=a,this.dataFormat=d,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+a+";\n      int offset_h = imod(h, "+a+");\n      int in_w = w / "+a+";\n      int offset_w = imod(w, "+a+");\n      int offset_d = (offset_h * "+a+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return u.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},u.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},u.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},u.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},u.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},u}(),to=function(u){this.variableNames=["A"],this.outputShape=u,this.userCode="\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        gl_FragColor = encode_float(x);\n      }\n    "},ma=function(u,i,a){this.variableNames=["real","imag"];var d=i[1];this.outputShape=i;var f=a?"2.0 * "+Math.PI:"-2.0 * "+Math.PI;this.userCode="\n      const float exponentMultiplier = "+f+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+u+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+d+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+d+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+(a?d+".0":"1.0")+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},fr=function(u){this.variableNames=["A"];var i=u[0],a=u[1];this.outputShape=u,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+a+".0, "+i+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Qo=function(u,i,a){this.variableNames=["A","indices"];var d=u.slice();d[a]=i,this.outputShape=d,this.rank=d.length;var f=xi(this.rank),y=function Bi(u,i){var a=u.length;if(a>4)throw Error("Gather for rank "+a+" is not yet supported");if(1===a)return"int(getIndices(resRC))";for(var d=["resRC.x","resRC.y","resRC.z","resRC.w"],f=[],y=0;y<u.length;y++)f.push(y===i?"int(getIndices("+d[y]+"))":""+d[y]);return f.join()}(u,a);this.userCode="\n      void main() {\n        "+f+" resRC = getOutputCoords();\n        setOutput(getA("+y+"));\n      }\n    "},tg=function(u,i,a){this.sliceDim=u,this.strides=i,this.variableNames=["x","indices"],this.outputShape=a;var d=xi(i.length),f=xi(a.length);this.userCode="\n        "+d+" strides = "+d+"("+this.strides+");\n         void main() {\n          "+f+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+(this.sliceDim>1?"strides[j]":"strides")+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function ga(u,i){return[i,u]}function qa(u,i){return u*i}function td(u,i,a){var d=function nc(u,i){if(u%i!=0)throw new Error("unpackedSize ("+u+") must be a multiple of "+i);return u/i}(u.length,a);if(i.length<d)throw new Error("matrix length ("+i.length+") must be >= "+d);for(var f=0,y=0;y<u.length;y+=a)i[f++]=u[y]}function _i(u,i){return[Math.ceil(i/2),Math.ceil(u/2)]}function Sl(u,i){var a=_i(u,i);return a[0]*a[1]*4}function zt(u,i){var a=i();return yp(u),a}(function(u){u[u.RENDER=0]="RENDER",u[u.UPLOAD=1]="UPLOAD",u[u.PIXELS=2]="PIXELS",u[u.DOWNLOAD=3]="DOWNLOAD"})(_o||(_o={})),function(u){u[u.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",u[u.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",u[u.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",u[u.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",u[u.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Wi||(Wi={}));var _p=!1;function ic(u){_p=u}function yp(u){if(_p){var i=u.getError();if(i!==u.NO_ERROR)throw new Error("WebGL Error: "+oc(u,i))}}function oc(u,i){switch(i){case u.NO_ERROR:return"NO_ERROR";case u.INVALID_ENUM:return"INVALID_ENUM";case u.INVALID_VALUE:return"INVALID_VALUE";case u.INVALID_OPERATION:return"INVALID_OPERATION";case u.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case u.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case u.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+i}}function Ei(u,i){return Ys(u,function(){return u.getExtension(i)},'Extension "'+i+'" not supported on this browser.')}function Gs(u,i){var a=Ys(u,function(){return u.createShader(u.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(zt(u,function(){return u.shaderSource(a,i)}),zt(u,function(){return u.compileShader(a)}),!1===u.getShaderParameter(a,u.COMPILE_STATUS))throw console.log(u.getShaderInfoLog(a)),new Error("Failed to compile vertex shader.");return a}function Er(u,i){var a=Ys(u,function(){return u.createShader(u.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(zt(u,function(){return u.shaderSource(a,i)}),zt(u,function(){return u.compileShader(a)}),!1===u.getShaderParameter(a,u.COMPILE_STATUS))throw function si(u,i){var a=sh.exec(i);if(null==a)return console.log("Couldn't parse line number in error: "+i),void console.log(u);for(var d=+a[1],f=u.split("\n"),y=f.length.toString().length+2,w=f.map(function(K,re){return We((re+1).toString(),y)+K}),C=0,O=0;O<w.length;O++)C=Math.max(w[O].length,C);var U=w.slice(0,d-1),j=w.slice(d-1,d),q=w.slice(d);console.log(U.join("\n")),console.log(i.split("\n")[0]),console.log("%c "+We(j[0],C),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(q.join("\n"))}(i,u.getShaderInfoLog(a)),new Error("Failed to compile fragment shader.");return a}var sh=/ERROR: [0-9]+:([0-9]+):/g;function nd(u){return Ys(u,function(){return u.createProgram()},"Unable to create WebGLProgram.")}function Dl(u,i){if(zt(u,function(){return u.linkProgram(i)}),!1===u.getProgramParameter(i,u.LINK_STATUS))throw console.log(u.getProgramInfoLog(i)),new Error("Failed to link vertex and fragment shaders.")}function uu(u,i){if(zt(u,function(){return u.validateProgram(i)}),!1===u.getProgramParameter(i,u.VALIDATE_STATUS))throw console.log(u.getProgramInfoLog(i)),new Error("Shader program validation failed.")}function Il(u,i){var a=Ys(u,function(){return u.createBuffer()},"Unable to create WebGLBuffer");return zt(u,function(){return u.bindBuffer(u.ARRAY_BUFFER,a)}),zt(u,function(){return u.bufferData(u.ARRAY_BUFFER,i,u.STATIC_DRAW)}),a}function ya(u,i){var a=Ys(u,function(){return u.createBuffer()},"Unable to create WebGLBuffer");return zt(u,function(){return u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a)}),zt(u,function(){return u.bufferData(u.ELEMENT_ARRAY_BUFFER,i,u.STATIC_DRAW)}),a}function va(){return 2===ve.get("WEBGL_VERSION")?1:4}function sc(u){return Ys(u,function(){return u.createTexture()},"Unable to create WebGLTexture.")}function cu(u,i){var a=ve.get("WEBGL_MAX_TEXTURE_SIZE");if(u<=0||i<=0){var d="["+u+"x"+i+"]";throw new Error("Requested texture size "+d+" is invalid.")}if(u>a||i>a)throw d="["+u+"x"+i+"]",new Error("Requested texture size "+d+" greater than WebGL maximum on this browser / GPU ["+a+"x"+a+"].")}function qs(u){return Ys(u,function(){return u.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Tl(u,i,a,d,f,y,w){var C=u.getAttribLocation(i,a);return-1!==C&&(zt(u,function(){return u.bindBuffer(u.ARRAY_BUFFER,d)}),zt(u,function(){return u.vertexAttribPointer(C,f,u.FLOAT,!1,y,w)}),zt(u,function(){return u.enableVertexAttribArray(C)}),!0)}function Ks(u,i,a){rd(u,a),zt(u,function(){return u.activeTexture(u.TEXTURE0+a)}),zt(u,function(){return u.bindTexture(u.TEXTURE_2D,i)})}function Zr(u,i,a){return Ys(u,function(){return u.getUniformLocation(i,a)},'uniform "'+a+'" not present in program.')}function Gi(u,i,a){return u.getUniformLocation(i,a)}function ys(u,i,a,d,f){zt(u,function(){return Ks(u,a,f)}),zt(u,function(){return u.uniform1i(d,f)})}function qt(u,i,a){zt(u,function(){return u.bindFramebuffer(u.FRAMEBUFFER,a)}),zt(u,function(){return u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0)})}function ai(u,i){zt(u,function(){return u.bindFramebuffer(u.FRAMEBUFFER,i)}),zt(u,function(){return u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,null,0)})}function Zs(u){var i=u.checkFramebufferStatus(u.FRAMEBUFFER);if(i!==u.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+ah(u,i))}function ah(u,i){switch(i){case u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case u.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+i}}function Ys(u,i,a){var d=zt(u,function(){return i()});if(null==d)throw new Error(a);return d}function rd(u,i){var a=u.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,d=i+u.TEXTURE0;if(d<u.TEXTURE0||d>a)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+a+"].")}function id(u,i){void 0===i&&(i=!1);var a=ve.get("WEBGL_MAX_TEXTURE_SIZE");if(i&&(a*=2,u=u.map(function(y,w){return w>=u.length-2?at(u[w]):u[w]})),2!==u.length){var d=Pt(u);u=d.newShape}var f=Ie(u);return u.length<=1&&f<=a?[f,1]:2===u.length&&u[0]<=a&&u[1]<=a?u:3===u.length&&u[0]*u[1]<=a&&u[2]<=a?[u[0]*u[1],u[2]]:3===u.length&&u[0]<=a&&u[1]*u[2]<=a?[u[0],u[1]*u[2]]:4===u.length&&u[0]*u[1]*u[2]<=a&&u[3]<=a?[u[0]*u[1]*u[2],u[3]]:4===u.length&&u[0]<=a&&u[1]*u[2]*u[3]<=a?[u[0],u[1]*u[2]*u[3]]:kt(f)}function du(u){return u%2==0}function Al(u,i){if(Ue(u=u.slice(-2),i=i.slice(-2))||!u.length||!i.length||0===u[0]||0===u[1]||0===i[0]||0===i[1])return!0;if(u.length!==i.length){if(Ue(Pt(u).newShape,Pt(i).newShape))return!0}else if(du(u[0])&&du(i[0])&&(du(u[1])&&du(i[1])||u[1]===i[1]))return!0;return!1}var en=Object.freeze({callAndCheck:zt,enableDebugWebGLErrorChecking:ic,checkWebGLError:yp,getWebGLErrorMessage:oc,getExtensionOrThrow:Ei,createVertexShader:Gs,createFragmentShader:Er,createProgram:nd,linkProgram:Dl,validateProgram:uu,createStaticVertexBuffer:Il,createStaticIndexBuffer:ya,getNumChannels:va,createTexture:sc,validateTextureSize:cu,createFramebuffer:qs,bindVertexBufferToProgramAttribute:Tl,bindTextureUnit:Ks,unbindTextureUnit:function ac(u,i){rd(u,i),zt(u,function(){return u.activeTexture(u.TEXTURE0+i)}),zt(u,function(){return u.bindTexture(u.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Zr,getProgramUniformLocation:Gi,bindTextureToProgramUniformSampler:ys,bindCanvasToFramebuffer:function Tr(u){zt(u,function(){return u.bindFramebuffer(u.FRAMEBUFFER,null)}),zt(u,function(){return u.viewport(0,0,u.canvas.width,u.canvas.height)}),zt(u,function(){return u.scissor(0,0,u.canvas.width,u.canvas.height)})},bindColorTextureToFramebuffer:qt,unbindColorTextureFromFramebuffer:ai,validateFramebuffer:Zs,getFramebufferErrorMessage:ah,getTextureShapeFromLogicalShape:id,isReshapeFree:Al});function od(u){return Gs(u,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Ml(u){return Il(u,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Vo(u){return ya(u,new Uint16Array([0,1,2,2,1,3]))}function vs(u,i){var a,d,f,y,w,C,O,U=u;return 2===ve.get("WEBGL_VERSION")?(a=U.R32F,d=U.R16F,f=U.RGBA32F,y=U.RED,w=4,C=1,O=U.HALF_FLOAT):(a=u.RGBA,d=u.RGBA,f=U.RGBA,y=u.RGBA,w=4,C=4,O=null!=i?i.HALF_FLOAT_OES:null),{internalFormatFloat:a,internalFormatHalfFloat:d,internalFormatPackedFloat:f,textureFormatFloat:y,downloadTextureFormat:u.RGBA,downloadUnpackNumChannels:w,defaultNumChannels:C,textureTypeHalfFloat:O}}function Nl(u,i,a,d,f,y){cu(i,a);var w=sc(u),C=u.TEXTURE_2D;return zt(u,function(){return u.bindTexture(C,w)}),zt(u,function(){return u.texParameteri(C,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE)}),zt(u,function(){return u.texParameteri(C,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE)}),zt(u,function(){return u.texParameteri(C,u.TEXTURE_MIN_FILTER,u.NEAREST)}),zt(u,function(){return u.texParameteri(C,u.TEXTURE_MAG_FILTER,u.NEAREST)}),zt(u,function(){return u.texImage2D(C,0,d,i,a,0,f,y,null)}),zt(u,function(){return u.bindTexture(u.TEXTURE_2D,null)}),w}function Nr(u,i,a,d){var f=ga(i,a);return Nl(u,f[0],f[1],d.internalFormatFloat,d.textureFormatFloat,u.FLOAT)}function Ka(u,i,a,d){var f=ga(i,a);return Nl(u,f[0],f[1],d.internalFormatFloat,d.textureFormatFloat,d.textureTypeHalfFloat)}function lc(u,i,a,d){var f=ga(i,a);return Nl(u,f[0],f[1],u.RGBA,u.RGBA,u.UNSIGNED_BYTE)}function Jo(u,i,a,d){var f=_i(i,a);return Nl(u,f[0],f[1],d.internalFormatPackedFloat,u.RGBA,u.FLOAT)}function sd(u,i,a,d){var f=_i(i,a);return Nl(u,f[0],f[1],d.internalFormatHalfFloat,u.RGBA,d.textureTypeHalfFloat)}function uc(u,i,a){return zt(u,function(){return u.bindBuffer(u.ARRAY_BUFFER,a)}),Tl(u,i,"clipSpacePos",a,3,20,0)&&Tl(u,i,"uv",a,2,20,12)}function ba(u,i,a){zt(u,function(){return u.bindTexture(u.TEXTURE_2D,i)}),zt(u,function(){return u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,a)}),zt(u,function(){return u.bindTexture(u.TEXTURE_2D,null)})}function wa(u,i,a,d,f,y){cu(a,d),zt(u,function(){return u.bindTexture(u.TEXTURE_2D,i)}),zt(u,function(){return u.texSubImage2D(u.TEXTURE_2D,0,0,0,a,d,y,u.FLOAT,f)}),zt(u,function(){return u.bindTexture(u.TEXTURE_2D,null)})}function Ol(u,i,a,d,f,y,w){var C,O=ga(a,d),U=O[0],j=O[1];1===w.defaultNumChannels?C=f:function _a(u,i,a){var d=qa(u.length,a);if(i.length<d)throw new Error("unpackedArray length ("+i.length+") must be >= "+d);for(var f=0,y=0;y<u.length;++y)i[f]=u[y],f+=a}(f,C=new Float32Array(qa(f.length,y)),y),wa(u,i,U,j,C,w.textureFormatFloat)}function Pl(u,i,a,d,f,y,w){var C=_i(d,f),O=C[0],U=C[1],j=new Float32Array(Sl(d,f));(function oh(u,i,a,d,f){var y=Sl(a,d);if(f.length<y)throw new Error("packedRGBA length ("+f.length+") must be >=\n        "+y);for(var w=d%2==1,C=a%2==1,O=Math.floor(d/2),U=Math.floor(a/2),j=Math.ceil(d/2),q=j*Math.ceil(a/2),K=at(a)*at(d),re=0;re<i;re++){for(var se=re*a*d,oe=re*K,de=w?4:0,xe=d,Se=oe,ke=0;ke<U;++ke){for(var Ke=2*ke*d,Ge=0;Ge<O;++Ge){var rt=se+Ke+2*Ge;f[Se]=u[rt],f[Se+1]=u[rt+1],f[Se+2]=u[rt+xe],f[Se+3]=u[rt+xe+1],Se+=4}Se+=de}if(w){rt=se+d-1,Se=oe+4*(j-1);var ht=2*d;for(de=4*j,ke=0;ke<U;++ke)f[Se]=u[rt],f[Se+2]=u[rt+d],rt+=ht,Se+=de}if(C){for(rt=se+(a-1)*d,Se=oe+4*(q-j),Ge=0;Ge<O;++Ge)f[Se++]=u[rt++],f[Se++]=u[rt++],Se+=2;w&&C&&(f[oe+K-4]=u[rt])}}})(y,a,d,f,j),wa(u,i,O,U,j,u.RGBA)}function Rl(u,i,a,d,f){var y=i;if(2===ve.get("WEBGL_VERSION")){var w=u,C=w.createBuffer();zt(u,function(){return u.bindBuffer(w.PIXEL_PACK_BUFFER,C)});var O=4*qa(a*d,f.downloadUnpackNumChannels);zt(u,function(){return u.bufferData(w.PIXEL_PACK_BUFFER,O,u.STATIC_DRAW)}),zt(u,function(){return w.readPixels(0,0,d,a,u.RGBA,u.FLOAT,0)}),zt(u,function(){return u.bindBuffer(w.PIXEL_PACK_BUFFER,null)}),y=C}return y}function xa(u,i,a,d,f){var y=u,w=new Float32Array(qa(a*d,f.downloadUnpackNumChannels));y.bindBuffer(u.ARRAY_BUFFER,i),y.getBufferSubData(u.ARRAY_BUFFER,0,w),y.bindBuffer(u.ARRAY_BUFFER,null);var C=new Float32Array(a*d);return td(w,C,f.downloadUnpackNumChannels),C}function lh(u,i,a,d){var f=ga(i,a),y=f[0],w=f[1],C=new Float32Array(qa(i*a,d.downloadUnpackNumChannels));zt(u,function(){return u.readPixels(0,0,y,w,d.downloadTextureFormat,u.FLOAT,C)});var O=new Float32Array(i*a);return td(C,O,d.downloadUnpackNumChannels),O}function Xs(u,i,a,d){var f=ga(i,a),y=f[0],w=f[1],C=new Uint8Array(qa(i*a,4));return zt(u,function(){return u.readPixels(0,0,y,w,d.downloadTextureFormat,u.UNSIGNED_BYTE,C)}),new Float32Array(C.buffer)}function Qs(u,i,a,d,f,y,w){var C=_i(f,y),O=C[0],U=C[1],j=new Float32Array(Sl(f,y));zt(u,function(){return u.readPixels(0,0,O,U,u.RGBA,u.FLOAT,j)});var q=new Float32Array(Ie([i,a,d]));return function rc(u,i,a,d,f){var y=a*d;if(f.length<y)throw new Error("matrix length ("+f.length+") must be >= "+y);for(var w=d%2==1,C=a%2==1,O=Math.floor(d/2),U=Math.floor(a/2),j=Math.ceil(d/2),q=j*Math.ceil(a/2),K=at(a)*at(d),re=0;re<i;re++){for(var se=re*a*d,oe=re*K,de=w?4:0,xe=d+(w?1:0),Se=oe,ke=se,Ke=se+d,Ge=0;Ge<U;++Ge){for(var rt=0;rt<O;++rt)f[ke++]=u[Se++],f[ke++]=u[Se++],f[Ke++]=u[Se++],f[Ke++]=u[Se++];Se+=de,ke+=xe,Ke+=xe}if(w){Se=oe+4*(j-1);var ht=se+d-1;for(de=4*j,xe=2*d,Ge=0;Ge<U;++Ge)f[ht]=u[Se],f[ht+d]=u[Se+2],Se+=de,ht+=xe}if(C){for(Se=oe+4*(q-j),ht=se+(a-1)*d,rt=0;rt<O;++rt)f[ht++]=u[Se++],f[ht++]=u[Se++],Se+=2;w&&(f[se+a*d-1]=u[Se])}}return f}(j,i,a,d,q)}var yo=Object.freeze({createVertexShader:od,createVertexBuffer:Ml,createIndexBuffer:Vo,getTextureConfig:vs,createFloat32MatrixTexture:Nr,createFloat16MatrixTexture:Ka,createUnsignedBytesMatrixTexture:lc,createPackedMatrixTexture:Jo,createFloat16PackedMatrixTexture:sd,bindVertexProgramAttributeStreams:uc,uploadPixelDataToTexture:ba,uploadMatrixToTexture:Ol,uploadMatrixToPackedTexture:Pl,maybeCreateBufferFromOutputTexture:Rl,downloadFloat32MatrixFromBuffer:xa,downloadFloat32MatrixFromOutputTexture:lh,downloadByteEncodedFloatMatrixFromOutputTexture:Xs,downloadMatrixFromPackedOutputTexture:Qs}),Ai=function(){function u(i){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[],this.gl=i??pe(ve.get("WEBGL_VERSION")),1===ve.get("WEBGL_VERSION")?(this.textureFloatExtension=Ei(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),ve.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=Ei(this.gl,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=Ei(this.gl,"EXT_color_buffer_float"),this.vertexBuffer=Ml(this.gl),this.indexBuffer=Vo(this.gl),this.framebuffer=qs(this.gl),this.textureConfig=vs(this.gl,this.textureHalfFloatExtension)}return u.prototype.dispose=function(){var i=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var a=this.gl;zt(a,function(){return a.finish()}),zt(a,function(){return a.bindFramebuffer(a.FRAMEBUFFER,null)}),zt(a,function(){return a.deleteFramebuffer(i.framebuffer)}),zt(a,function(){return a.bindBuffer(a.ARRAY_BUFFER,null)}),zt(a,function(){return a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}),zt(a,function(){return a.deleteBuffer(i.indexBuffer)}),this.disposed=!0}},u.prototype.enableAutomaticDebugValidation=function(i){this.autoDebugValidate=i,ic(i)},u.prototype.createFloat32MatrixTexture=function(i,a){return this.throwIfDisposed(),Nr(this.gl,i,a,this.textureConfig)},u.prototype.createFloat16MatrixTexture=function(i,a){return this.throwIfDisposed(),Ka(this.gl,i,a,this.textureConfig)},u.prototype.createUnsignedBytesMatrixTexture=function(i,a){return this.throwIfDisposed(),lc(this.gl,i,a)},u.prototype.uploadPixelDataToTexture=function(i,a){this.throwIfDisposed(),ba(this.gl,i,a)},u.prototype.createFloat16PackedMatrixTexture=function(i,a){return this.throwIfDisposed(),sd(this.gl,i,a,this.textureConfig)},u.prototype.createPackedMatrixTexture=function(i,a){return this.throwIfDisposed(),Jo(this.gl,i,a,this.textureConfig)},u.prototype.deleteMatrixTexture=function(i){var a=this;this.throwIfDisposed(),this.outputTexture===i&&(ai(this.gl,this.framebuffer),this.outputTexture=null),zt(this.gl,function(){return a.gl.deleteTexture(i)})},u.prototype.uploadMatrixToTexture=function(i,a,d,f){this.throwIfDisposed();var y=va();return Ol(this.gl,i,a,d,f,y,this.textureConfig)},u.prototype.uploadMatrixToPackedTexture=function(i,a,d,f,y){return this.throwIfDisposed(),Pl(this.gl,i,a,d,f,y)},u.prototype.downloadFloat32MatrixFromOutputTexture=function(i,a,d){var f=this;return this.downloadMatrixDriver(i,function(){return lh(f.gl,a,d,f.textureConfig)})},u.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(i,a,d){var f=this;return this.downloadMatrixDriver(i,function(){return Xs(f.gl,a,d,f.textureConfig)})},u.prototype.downloadFloat32MatrixFromBuffer=function(i,a,d){return xa(this.gl,i,a,d,this.textureConfig)},u.prototype.maybeCreateBufferFromTexture=function(i,a,d){this.bindTextureToFrameBuffer(i);var f=Rl(this.gl,i,a,d,this.textureConfig);return this.unbindTextureToFrameBuffer(),f},u.prototype.createAndWaitForFence=function(){var i=this.createFence(this.gl);return this.pollFence(i)},u.prototype.createFence=function(i){var a,d,f=this;if(ve.get("WEBGL_FENCE_API_ENABLED")){var y=i,w=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);i.flush(),d=function(){var C=y.clientWaitSync(w,0,0);return C===y.ALREADY_SIGNALED||C===y.CONDITION_SATISFIED},a=w}else ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(a=this.beginQuery(),this.endQuery(),d=function(){return f.isQueryAvailable(a,ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):d=function(){return!0};return{query:a,isFencePassed:d}},u.prototype.downloadMatrixFromPackedTexture=function(i,a,d,f,y,w){var C=this;return this.downloadMatrixDriver(i,function(){return Qs(C.gl,a,d,f,y,w)})},u.prototype.createProgram=function(i){this.throwIfDisposed();var a=this.gl,d=Er(a,i),f=od(a),y=nd(a);return zt(a,function(){return a.attachShader(y,f)}),zt(a,function(){return a.attachShader(y,d)}),Dl(a,y),this.autoDebugValidate&&uu(a,y),this.vertexAttrsAreBound||(this.setProgram(y),this.vertexAttrsAreBound=uc(a,this.program,this.vertexBuffer)),y},u.prototype.deleteProgram=function(i){var a=this;this.throwIfDisposed(),i===this.program&&(this.program=null),null!=i&&zt(this.gl,function(){return a.gl.deleteProgram(i)})},u.prototype.setProgram=function(i){var a=this;this.throwIfDisposed(),this.program=i,null!=this.program&&this.autoDebugValidate&&uu(this.gl,this.program),zt(this.gl,function(){return a.gl.useProgram(i)})},u.prototype.getUniformLocation=function(i,a,d){return void 0===d&&(d=!0),this.throwIfDisposed(),d?Zr(this.gl,i,a):Gi(this.gl,i,a)},u.prototype.getAttributeLocation=function(i,a){var d=this;return this.throwIfDisposed(),zt(this.gl,function(){return d.gl.getAttribLocation(i,a)})},u.prototype.getUniformLocationNoThrow=function(i,a){return this.throwIfDisposed(),this.gl.getUniformLocation(i,a)},u.prototype.setInputMatrixTexture=function(i,a,d){this.throwIfDisposed(),this.throwIfNoProgram(),ys(this.gl,0,i,a,d)},u.prototype.setOutputMatrixTexture=function(i,a,d){this.setOutputMatrixTextureDriver(i,d,a)},u.prototype.setOutputPackedMatrixTexture=function(i,a,d){this.throwIfDisposed();var f=_i(a,d);this.setOutputMatrixTextureDriver(i,f[0],f[1])},u.prototype.setOutputMatrixWriteRegion=function(i,a,d,f){this.setOutputMatrixWriteRegionDriver(d,i,f,a)},u.prototype.setOutputPackedMatrixWriteRegion=function(i,a,d,f){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},u.prototype.debugValidate=function(){null!=this.program&&uu(this.gl,this.program),Zs(this.gl)},u.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var i=this.gl;this.autoDebugValidate&&this.debugValidate(),zt(i,function(){return i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)})},u.prototype.blockUntilAllProgramsCompleted=function(){var i=this;this.throwIfDisposed(),zt(this.gl,function(){return i.gl.finish()})},u.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=Ei(this.gl,2===ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},u.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},u.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},u.prototype.beginQuery=function(){if(2===ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var i=this.gl,a=this.getQueryTimerExtensionWebGL2(),d=i.createQuery();return i.beginQuery(a.TIME_ELAPSED_EXT,d),d}var f=this.getQueryTimerExtensionWebGL1(),y=f.createQueryEXT();return f.beginQueryEXT(f.TIME_ELAPSED_EXT,y),y},u.prototype.endQuery=function(){if(2!==ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var i=this.getQueryTimerExtensionWebGL1();i.endQueryEXT(i.TIME_ELAPSED_EXT)}else{var a=this.gl,d=this.getQueryTimerExtensionWebGL2();a.endQuery(d.TIME_ELAPSED_EXT)}},u.prototype.waitForQueryAndGetTime=function(i){return R(this,void 0,void 0,function(){var a=this;return W(this,function(d){switch(d.label){case 0:return[4,Fe(function(){return a.disposed||a.isQueryAvailable(i,ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return d.sent(),[2,this.getQueryTime(i,ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},u.prototype.getQueryTime=function(i,a){if(0===a)return null;if(2===a){var d=this.gl;return d.getQueryParameter(i,d.QUERY_RESULT)/1e6}var f=this.getQueryTimerExtensionWebGL1();return f.getQueryObjectEXT(i,f.QUERY_RESULT_EXT)/1e6},u.prototype.isQueryAvailable=function(i,a){if(0===a)return!0;if(2===a){var d=this.gl,f=this.getQueryTimerExtensionWebGL2(),y=d.getQueryParameter(i,d.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(f.GPU_DISJOINT_EXT)),y&&!this.disjoint}return y=(f=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(i,f.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(f.GPU_DISJOINT_EXT)),y&&!this.disjoint},u.prototype.pollFence=function(i){var a=this;return new Promise(function(d){a.addItemToPoll(function(){return i.isFencePassed()},function(){return d()})})},u.prototype.pollItems=function(){for(var i=function bs(u){for(var i=0,a=u.length-1,d=-1;i<=a;){var f=i+a>>1;u[f]()?(d=f,i=f+1):a=f-1}return d}(this.itemsToPoll.map(function(d){return d.isDoneFn})),a=0;a<=i;++a)(0,this.itemsToPoll[a].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(i+1)},u.prototype.addItemToPoll=function(i,a){var d=this;this.itemsToPoll.push({isDoneFn:i,resolveFn:a}),this.itemsToPoll.length>1||Fe(function(){return d.pollItems(),0===d.itemsToPoll.length})},u.prototype.bindTextureToFrameBuffer=function(i){this.throwIfDisposed(),qt(this.gl,i,this.framebuffer),this.autoDebugValidate&&Zs(this.gl)},u.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(qt(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&Zs(this.gl)):ai(this.gl,this.framebuffer)},u.prototype.downloadMatrixDriver=function(i,a){this.bindTextureToFrameBuffer(i);var d=a();return this.unbindTextureToFrameBuffer(),d},u.prototype.setOutputMatrixTextureDriver=function(i,a,d){this.throwIfDisposed();var f=this.gl;qt(f,i,this.framebuffer),this.autoDebugValidate&&Zs(f),this.outputTexture=i,zt(f,function(){return f.viewport(0,0,a,d)}),zt(f,function(){return f.scissor(0,0,a,d)})},u.prototype.setOutputMatrixWriteRegionDriver=function(i,a,d,f){var y=this;this.throwIfDisposed(),zt(this.gl,function(){return y.gl.scissor(i,a,d,f)})},u.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},u.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},u}();function $t(u,i){if(u.length!==i.length)throw Error("Binary was compiled with "+u.length+" inputs, but was executed with "+i.length+" inputs");u.forEach(function(a,d){var f=a.logicalShape,y=i[d],w=y.shape;if(!Ue(f,w))throw Error("Binary was compiled with different shapes than the current args. Shapes "+f+" and "+w+" must match");if(!a.isUniform||!y.isUniform){var C=a.texShape,O=y.isUniform?null:y.texData.texShape;if(!Ue(C,O))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+C+" and "+O+" must match")}})}var hu=function(u,i,a){this.variableNames=["A"],this.outputShape=u;var f=a.inChannels,C=a.padInfo,O=a.outWidth,re=f*a.filterWidth;this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            int blockIndex = rc.y + col;\n            int pos = rc.x + row;\n\n            if(blockIndex >= "+u[1]+" || pos >= "+u[0]+") continue;\n\n            int offsetY = int(blockIndex / ("+O+")) * "+a.strideHeight+" - "+C.top+";\n            int d0 = offsetY + "+a.dilationHeight+" * (pos / "+re+");\n\n            if(d0 >= "+i[0]+" || d0 < 0) continue;\n\n            int offsetX = int(mod(float(blockIndex), "+O+".) * "+a.strideWidth+". - "+C.left+".);\n            int d1 = offsetX + "+a.dilationWidth+" * (int(mod(float(pos), "+re+".) / "+f+".));\n\n            if(d1 >= "+i[1]+" || d1 < 0) continue;\n\n            result[row * 2 + col] = getA(d0, d1, int(mod(float(pos), "+f+".)));\n          }\n        }\n\n        gl_FragColor = result;\n      }\n    "},Or=function(u,i,a,d,f){this.variableNames=["x"],this.outputShape=[];var w=i,C=u[3]-1;this.outputShape=u;var O="float("+a+") + float("+d+") * sum";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+w+"; j <= "+w+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+C+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+(.5===f?"inversesqrt("+O+")":1===f?"1.0/("+O+")":"exp(log("+O+") * float(-"+f+"));")+";\n        setOutput(val);\n      }\n    "},li=function(u,i,a,d,f){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=u,this.depth=u[3],this.depthRadius=i,this.bias=a,this.alpha=d,this.beta=f,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+i+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+i+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+d+") * norm + float("+a+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+d+")\n                * float("+f+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+f+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},cc=function(u){this.variableNames=["dy","maxPos"],this.outputShape=u.inShape;var f=u.effectiveFilterHeight,y=u.effectiveFilterWidth;this.userCode="\n      const ivec2 pads = ivec2("+(f-1-u.padInfo.top)+", "+(y-1-u.padInfo.left)+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+f+";\n          wR += "+u.dilationHeight+") {\n          float dyR = float(dyRCorner + wR) / "+u.strideHeight+".0;\n\n          if (dyR < 0.0 || dyR >= "+u.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+y+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+u.strideWidth+".0;\n\n            if (dyC < 0.0 || dyC >= "+u.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+(f*y-1)+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+y+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},uh=function(u,i,a,d){void 0===a&&(a=!1),void 0===d&&(d=!1),this.variableNames=["matrixA","matrixB"];var C=a?u[1]:u[2];this.outputShape=[u[0],a?u[2]:u[1],d?i[1]:i[2]];var O=function(K,re){return a?"batch, "+re+" + "+K+", aRow":"batch, aRow, "+re+" + "+K},U=function(K,re){return d?"batch, bCol, "+re+" + "+K:"batch, "+re+" + "+K+", bCol"},j=4*Math.floor(C/4),q=C%4;this.userCode=" float dotARowBCol(int batch, int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+j+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+O(0,"i")+"),\n          getMatrixA("+O(1,"i")+"),\n          getMatrixA("+O(2,"i")+"),\n          getMatrixA("+O(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+U(0,"i")+"),\n          getMatrixB("+U(1,"i")+"),\n          getMatrixB("+U(2,"i")+"),\n          getMatrixB("+U(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===q)+") {\n        result += getMatrixA("+O(0,j)+") *\n          getMatrixB("+U(0,j)+");\n      } else if ("+(2===q)+") {\n        vec2 a = vec2(\n          getMatrixA("+O(0,j)+"),\n          getMatrixA("+O(1,j)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+U(0,j)+"),\n          getMatrixB("+U(1,j)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===q)+") {\n        vec3 a = vec3(\n          getMatrixA("+O(0,j)+"),\n          getMatrixA("+O(1,j)+"),\n          getMatrixA("+O(2,j)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+U(0,j)+"),\n          getMatrixB("+U(1,j)+"),\n          getMatrixB("+U(2,j)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec3 resBRC = getOutputCoords();\n      setOutput(dotARowBCol(resBRC.x, resBRC.y, resBRC.z));\n    }\n    "},dc=function(u,i,a,d,f){void 0===d&&(d=!1),void 0===f&&(f=!1),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=a;var w=Math.ceil((d?u[0]:u[1])/2),U=d?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],j=f?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];this.userCode="\n      const float sharedDimension = "+w+".0;\n\n      vec4 dot2x2ARowBCol(ivec2 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+w+"; i++) {\n          vec4 a = getMatrixA("+(d?"i * 2, rc.x":"rc.x, i * 2")+");\n          vec4 b = getMatrixB("+(f?"rc.y, i * 2":"i * 2, rc.y")+");\n\n          result += ("+U[0]+" * "+j[0]+") + ("+U[1]+" * "+j[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n        setOutput(dot2x2ARowBCol(rc));\n      }\n    "},Vi=function(){function u(i,a,d){this.variableNames=["probs"],this.outputShape=[i,d],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(a-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(a-1)+"));\n      }\n    "}return u.prototype.getCustomSetupFunc=function(i){var a=this;return function(d,f){null==a.seedLoc&&(a.seedLoc=d.getUniformLocation(f,"seed")),d.gl.uniform1f(a.seedLoc,i)}},u}(),Uo=function(u,i,a,d){this.variableNames=["indices"],this.outputShape=[u,i],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+d+"), float("+a+"),\n                      float(index == coords.y)));\n      }\n    "};function es(u,i){return 1===i?[u]:function Pr(u,i){return["x","y","z","w","u","v"].slice(0,i).map(function(a){return u+"."+a})}(u,i)}var Ea=function(u){this.variableNames=["A"],this.outputShape=u;var i=u.length,a=es("rc",i),d=xi(i),f=function ad(u,i,a){if(1===u)return"rc > "+i[0];for(var d="",f=u-2;f<u;f++)d+=a[f]+" >= "+i[f],f<u-1&&(d+="||");return d}(i,u,a),y=function hc(u,i,a,d){if(1===u)return"";var f=d.slice(-2);return"\n    int r = "+f[0]+";\n    int c = "+f[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+i+";\n    bool rEdge = rp1 >= "+a+";\n  "}(i,u[u.length-1],u[u.length-2],a),w=function Js(u,i){var a=u.length,d=function Fl(u,i){for(var a=[],d=0;d<=1;d++)for(var f=0;f<=1;f++){for(var y=(0===d?"r":"rp1")+", "+(0===f?"c":"cp1"),w=2;w<u;w++)y=i[i.length-1-w]+","+y;a.push(y)}return a}(a,i);return 1===a?"getA(rc),\n            rc + 1 >= "+u[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+d[0]+"),\n          cEdge ? 0. : getA("+d[1]+"),\n          rEdge ? 0. : getA("+d[2]+"),\n          rEdge || cEdge ? 0. : getA("+d[3]+")"}(u,a);this.userCode="\n      void main() {\n        "+d+" rc = getOutputCoords();\n\n        if("+f+") {\n          gl_FragColor = vec4(0);\n        } else {\n          "+y+"\n\n          setOutput(vec4("+w+"));\n        }\n      }\n    "},Tn=function(u,i,a){this.variableNames=["x"],this.outputShape=i.map(function(O,U){return O[0]+u[U]+O[1]});var d=u.length,f=xi(d),y=i.map(function(O){return O[0]}).join(","),w=i.map(function(O,U){return O[0]+u[U]}).join(","),C=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,d);this.userCode=1!==d?"\n      "+f+" start = "+f+"("+y+");\n      "+f+" end = "+f+"("+w+");\n\n      void main() {\n        "+f+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+a+"));\n        } else {\n          "+f+" coords = outC - start;\n          setOutput(getX("+C+"));\n        }\n      }\n    ":"\n        int start = "+y+";\n        int end = "+w+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+a+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},zo=function(u,i,a){if(this.variableNames=["x"],"avg"===i&&a)throw new Error("Cannot compute positions for average pool.");var d=u.filterWidth,f=u.strideHeight,y=u.strideWidth,w=u.dilationHeight,C=u.dilationWidth,O=u.effectiveFilterHeight,U=u.effectiveFilterWidth,j=u.padInfo.top,q=u.padInfo.left;this.outputShape=u.outShape;var K="avg"===i,re="0.0";if(K||(re="-1.0 / 0.0"),a)this.userCode="\n        const ivec2 strides = ivec2("+f+", "+y+");\n        const ivec2 pads = ivec2("+j+", "+q+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+O+";\n              wR += "+w+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+u.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+U+";\n                wC += "+C+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+u.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+U+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var se=i+"("+i+"("+i+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===i&&(se="avgValue / count");var oe=4*Math.floor(d/4),de=d%4,xe="\n      if ("+K+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+f+", "+y+");\n      const ivec2 pads = ivec2("+j+", "+q+");\n      const float initializationValue = "+re+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+u.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+re+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+O+";\n            wR += "+w+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+u.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+oe+"; wC += 4) {\n            int xC = xCCorner + wC * "+C+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+C+", d),\n              getValue(batch, xR, xC + 2 * "+C+", d),\n              getValue(batch, xR, xC + 3 * "+C+", d)\n            );\n\n            "+xe+"\n          }\n\n          int xC = xCCorner + "+oe+";\n          if ("+(1===de)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+xe+"\n          } else if ("+(2===de)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+C+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+xe+"\n          } else if ("+(3===de)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+C+", d),\n              getValue(batch, xR, xC + 2 * "+C+", d),\n              initializationValue\n            );\n\n            "+xe+"\n          }\n        }\n        setOutput("+se+");\n      }\n    "}},ng=function(u,i){this.variableNames=["x"];var a=u.windowSize,d=u.batchSize,f=u.inSize,y=Math.ceil(f/a);this.outputShape=[d,y];var w="0.0",C="";"prod"===i?w="1.0":"min"===i?(w="1.0 / 0.0",C="min"):"max"===i&&(w="-1.0 / 0.0",C="max");var O=i+"("+i+"("+i+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===i?O="sumValue":"prod"===i?O="prodValue":"all"===i?O="allValue":"any"===i&&(O="anyValue");var U=4*Math.floor(a/4),j=a%4,q="\n      if ("+("sum"===i)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===i)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+C+"(values, minMaxValue);\n      }\n    ",K="vec4";"all"===i?(w="1.0",q="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",K="bvec4"):"any"===i&&(w="0.0",q="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",K="bvec4");var re="";f%a>0&&(re="\n        if (inIdx < 0 || inIdx >= "+f+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+w+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+re+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+a+";\n\n        vec4 minMaxValue = vec4("+w+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+U+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+K+" values = "+K+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+q+"\n        }\n\n        int inIdx = inOffset + "+U+";\n        if ("+(1===j)+") {\n          "+K+" values = "+K+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+q+"\n        } else if ("+(2===j)+") {\n          "+K+" values = "+K+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+q+"\n        } else if ("+(3===j)+") {\n          "+K+" values = "+K+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+q+"\n        }\n        setOutput("+O+");\n      }\n    "},pc=function(u,i){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=u;for(var a="",d=0;d<4;d++){var f="thisRC = rc;";d%2==1&&(f+="thisRC.z += 1;"),d>1&&(f+="thisRC.y += 1;"),a+="\n        "+f+"\n        "+(d>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+d+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(d>0?"}":"")+"\n      "}this.userCode="\n      "+function ch(u){return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+$a(["r","c","d"],u)+"\n      return ivec3(r, c, d);\n    }\n  "}(i)+"\n      "+function Ll(u){return"\n    int getFlatIndex(ivec3 coords) {\n      return round("+function Wa(u,i){if(u.length!==i.length)throw new Error("Vectors to be dotted must be of the same length -got "+u.length+" and "+i.length);for(var a=[],d=Math.floor(u.length/4),f=u.length%4,y=0;y<d;y++){var w=u.slice(4*y,4*y+4),C=i.slice(4*y,4*y+4);a.push(bl(w)+", "+bl(C))}return 0!==f&&(w=u.slice(4*d),C=i.slice(4*d),1===w.length&&(w=w.map(function(O){return"float("+O+")"}),C=C.map(function(O){return"float("+O+")"})),a.push(bl(w)+", "+bl(C))),a.map(function(O,U){return"dot("+O+")"}).join("+")}(["coords.x","coords.y","coords.z"],nn(u).map(function(i){return i.toString()}).concat(["1."]))+");\n    }\n  "}(u)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+u[1]+";\n        int cols = "+u[2]+";\n\n        "+a+"\n\n        setOutput(result);\n      }\n    "},ts=function(u,i,a){this.variableNames=["dy"],this.outputShape=[],this.outputShape=i.shape;var d=i.shape,f=d[1],y=d[2],w=u.shape,C=w[1],O=w[2],U=[a&&C>1?f-1:f,a&&O>1?y-1:y],j=[a&&C>1?C-1:C,a&&O>1?O-1:O],q=U[0]/j[0],K=U[1]/j[1],re=1/q,se=1/K,oe=2*Math.ceil(re)+2,de=2*Math.ceil(se)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+q+");\n        const float widthScale = float("+K+");\n\n        const float invHeightScale = float("+re+");\n        const float invWidthScale = float("+se+");\n\n        const int winHeight = int("+oe+");\n        const int winWidth = int("+de+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+C+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+O+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(f-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(y-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Rr=function(u,i,a,d){this.variableNames=["A"],this.outputShape=[];var y=u[1],w=u[2];this.outputShape=[u[0],i,a,u[3]];var O=[d&&i>1?y-1:y,d&&a>1?w-1:w],U=[d&&i>1?i-1:i,d&&a>1?a-1:a];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+O[0]/U[0]+",\n          "+O[1]/U[1]+");\n      const vec2 inputShapeRC = vec2("+y+".0, "+w+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},fc=function(u,i,a){this.variableNames=["dy"],this.outputShape=[],this.outputShape=i.shape;var d=i.shape,f=d[1],y=d[2],w=u.shape,C=w[1],O=w[2],U=[a&&C>1?f-1:f,a&&O>1?y-1:y],j=[a&&C>1?C-1:C,a&&O>1?O-1:O],q=U[0]/j[0],K=U[1]/j[1],re=1/q,se=1/K,oe=2*Math.ceil(re)+2,de=2*Math.ceil(se)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+q+");\n        const float widthScale = float("+K+");\n\n        const float invHeightScale = float("+re+");\n        const float invWidthScale = float("+se+");\n\n        const int winHeight = int("+oe+");\n        const int winWidth = int("+de+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+C+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+O+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+U[0]+") *\n                (float(dyR) / float("+j[0]+"));\n\n            float sourceFracCol =\n                float("+U[1]+") *\n                  (float(dyC) / float("+j[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+f+") - 1),\n                "+a+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+y+") - 1),\n                "+a+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},vo=function(u,i,a,d){this.variableNames=["A"],this.outputShape=[];var y=u[1],w=u[2];this.outputShape=[u[0],i,a,u[3]];var O=[d&&i>1?y-1:y,d&&a>1?w-1:w],U=[d&&i>1?i-1:i,d&&a>1?a-1:a];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+O[0]/U[0]+",\n          "+O[1]/U[1]+");\n      const vec2 inputShapeRC = vec2("+y+".0, "+w+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+(d?"0.5":"0.0")+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},dh=function(u,i){this.variableNames=["x"];var a=u.length;if(a>4)throw new Error("WebGL backend: Reverse of rank-"+a+" tensor is not yet supported");if(this.outputShape=u,1!==a){var d=u.map(function(y,w){return-1!==i.indexOf(C=w)&&1!==u[C]?u[C]+" - coords["+C+"] - 1":"coords["+C+"]";var C}).join(","),f=xi(a);this.userCode="\n      void main() {\n        "+f+" coords = getOutputCoords();\n        setOutput(getX("+d+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+u[0]+" - coord - 1));\n        }\n      "},ui=function(u,i,a,d,f,y,w){void 0===w&&(w=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=y;var C=xi(f.length),O=xi(y.length),U="";1===a?U="i":2===a&&(U="i, j");var q="";1===d?q="i":2===d&&(q="i, coords[1]"),this.userCode="\n        "+C+" strides = "+C+"("+f+");\n\n        void main() {\n          "+O+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+u+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+i+"; j++) {\n              int index = round(getIndices("+U+"));\n              flattenedIndex += index * "+(i>1?"strides[j]":"strides")+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates("+q+");\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Bl=function(u,i){this.variableNames=["x","segmentIds"];var a=u.windowSize,d=u.batchSize,f=u.inSize,y=u.numSegments,w=y*Math.ceil(f/a);this.outputShape=[d,w];var C=4*Math.floor(a/4),O=a%4,U="\n        sumValue += dot(values, filter);\n    ",j="";f%a>0&&(j="\n        if (inIdx < 0 || inIdx >= "+f+") {\n          return initializationValue;\n        }\n      ");var q="";f%a>0&&(q="\n        if (inIdx < 0 || inIdx >= "+f+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+j+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+q+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+y+")) * float("+a+"));\n        int currentSeg = int(mod(float(outIdx), float("+y+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+C+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+U+"\n        }\n\n        int inIdx = inOffset + "+C+";\n        if ("+(1===O)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+U+"\n        } else if ("+(2===O)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+U+"\n        } else if ("+(3===O)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+U+"\n        }\n        setOutput(sumValue);\n      }\n    "},ws=function(u,i,a){var d,f;if(this.variableNames=["c","a","b"],this.outputShape=i,a>4)throw Error("Where for rank "+a+" is not yet supported");if(1===a)f="resRC",d="resRC";else{for(var y=["resRC.x","resRC.y","resRC.z","resRC.w"],w=[],C=[],O=0;O<i.length;O++)C.push(""+y[O]),O<u&&w.push(""+y[O]);d=w.join(),f=C.join()}var U=xi(a);this.userCode="\n      void main() {\n        "+U+" resRC = getOutputCoords();\n        float cVal = getC("+d+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+f+"));\n        } else {\n          setOutput(getB("+f+"));\n        }\n      }\n    "},mc=function(){function u(i){this.variableNames=["source"],this.outputShape=i,this.rank=i.length;var a=xi(this.rank),d=function gc(u){if(1===u)return"sourceLoc";if(2===u)return"sourceLoc.x, sourceLoc.y";if(3===u)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===u)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+u+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+a+" start;\n\n      void main() {\n        "+a+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+d+"));\n      }\n    "}return u.prototype.getCustomSetupFunc=function(i){var a=this;if(i.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+i.length+")");return function(d,f){if(null!=a.startLoc||(a.startLoc=d.getUniformLocationNoThrow(f,"start"),null!=a.startLoc))if(1===a.rank)d.gl.uniform1i(a.startLoc,i[0]);else if(2===a.rank)d.gl.uniform2i(a.startLoc,i[0],i[1]);else if(3===a.rank)d.gl.uniform3i(a.startLoc,i[0],i[1],i[2]);else{if(4!==a.rank)throw Error("Slicing for rank "+a.rank+" is not yet supported");d.gl.uniform4i(a.startLoc,i[0],i[1],i[2],i[3])}}},u}(),fu=function(u,i,a,d){this.variableNames=["x"];var f=a.filter(function(j,q){return-1===d.indexOf(q)});this.outputShape=f;var y=a.length,w=xi(a.length),C=xi(f.length),O="";if(1===y)O="coords * strides + begin";else{var U=0;O=a.map(function(j,q){return-1===d.indexOf(q)?(U++,1===f.length?"coords * strides["+q+"] + begin["+q+"]":"coords["+(U-1)+"] * strides["+q+"] + begin["+q+"]"):"begin["+q+"]"}).join(",")}this.userCode="\n      "+w+" begin = "+w+"("+u+");\n      "+w+" strides = "+w+"("+i+");\n\n      void main() {\n        "+C+" coords = getOutputCoords();\n        setOutput(getX("+O+"));\n      }\n    "},vp=function(){function u(i){this.gpgpu=i,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return u.prototype.acquireTexture=function(i,a,d){var f,y=mu(a,d),w=Ca(i,y,d);if(w in this.freeTextures||(this.freeTextures[w]=[]),w in this.usedTextures||(this.usedTextures[w]=[]),this.freeTextures[w].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var C=this.freeTextures[w].shift();return this.usedTextures[w].push(C),C}return this.numUsedTextures++,this.log(),y===Wi.PACKED_2X2_FLOAT32?f=this.gpgpu.createPackedMatrixTexture(i[0],i[1]):y===Wi.PACKED_2X2_FLOAT16?f=this.gpgpu.createFloat16PackedMatrixTexture(i[0],i[1]):y===Wi.UNPACKED_FLOAT32?f=this.gpgpu.createFloat32MatrixTexture(i[0],i[1]):y===Wi.UNPACKED_FLOAT16?f=this.gpgpu.createFloat16MatrixTexture(i[0],i[1]):y===Wi.PACKED_4X1_UNSIGNED_BYTE&&(f=this.gpgpu.createUnsignedBytesMatrixTexture(i[0],i[1])),this.usedTextures[w].push(f),f},u.prototype.releaseTexture=function(i,a,d,f){if(null!=this.freeTextures){var y=Ca(a,mu(d,f),f);y in this.freeTextures||(this.freeTextures[y]=[]),this.freeTextures[y].push(i),this.numFreeTextures++,this.numUsedTextures--;var w=this.usedTextures[y],C=w.indexOf(i);if(C<0)throw new Error("Cannot release a texture that was never provided by this texture manager");w.splice(C,1),this.log()}},u.prototype.log=function(){this.logEnabled&&console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+(this.numFreeTextures+this.numUsedTextures)+")")},u.prototype.getNumUsedTextures=function(){return this.numUsedTextures},u.prototype.getNumFreeTextures=function(){return this.numFreeTextures},u.prototype.dispose=function(){var i=this;if(null!=this.freeTextures){for(var a in this.freeTextures)this.freeTextures[a].forEach(function(d){i.gpgpu.deleteMatrixTexture(d)});for(var a in this.usedTextures)this.usedTextures[a].forEach(function(f){i.gpgpu.deleteMatrixTexture(f)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},u}();function mu(u,i){if(i)return ve.get("WEBGL_RENDER_FLOAT32_ENABLED")?Wi.PACKED_2X2_FLOAT32:Wi.PACKED_2X2_FLOAT16;if(u===_o.DOWNLOAD||u===_o.PIXELS)return Wi.PACKED_4X1_UNSIGNED_BYTE;if(u===_o.UPLOAD)return Wi.UNPACKED_FLOAT32;if(u===_o.RENDER)return ve.get("WEBGL_RENDER_FLOAT32_ENABLED")?Wi.UNPACKED_FLOAT32:Wi.UNPACKED_FLOAT16;throw new Error("Unknown logical texture type "+u)}function Ca(u,i,a){return u[0]+"_"+u[1]+"_"+i+"_"+a}var L=function(u,i){this.variableNames=["A"];for(var a=new Array(u.length),d=0;d<a.length;d++)a[d]=u[d]*i[d];this.outputShape=a,this.rank=a.length;var f=xi(this.rank),y=function $(u){var i=u.length;if(i>5)throw Error("Tile for rank "+i+" is not yet supported");if(1===i)return"imod(resRC, "+u[0]+")";for(var a=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],d=[],f=0;f<u.length;f++)d.push("imod("+a[f]+", "+u[f]+")");return d.join()}(u);this.userCode="\n      void main() {\n        "+f+" resRC = getOutputCoords();\n        setOutput(getA("+y+"));\n      }\n    "},ee=function(u,i){this.variableNames=["A"];for(var a=new Array(u.length),d=0;d<a.length;d++)a[d]=u[i[d]];this.outputShape=a,this.rank=a.length;var f=xi(this.rank),y=function ue(u){var i=u.length;if(i>6)throw Error("Transpose for rank "+i+" is not yet supported");for(var a=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],d=new Array(i),f=0;f<u.length;f++)d[u[f]]=a[f];return d.join()}(i);this.userCode="\n    void main() {\n      "+f+" resRC = getOutputCoords();\n      setOutput(getA("+y+"));\n    }\n    "},yn=1.7580993408473768,hn=1.0507009873554805,gn=function(){function u(i,a){this.variableNames=["A"],this.outputShape=i,this.userCode="\n      uniform float NAN;\n      float unaryOperation(float x) {\n        "+a+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}return u.prototype.getCustomSetupFunc=function(){var i=this;return function(a,d){null==i.startLoc&&(i.startLoc=a.getUniformLocationNoThrow(d,"NAN"),null==i.startLoc)||a.gl.uniform1f(i.startLoc,NaN)}},u}(),kr="if (isNaN(x)) return x;",_c=kr+"\n  return (x < 0.0) ? 0.0 : x;\n",rs="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+yn+";\n  float scale = "+hn+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",sg=kr+"\n  return sin(x);\n",Ff=kr+"\n  return cos(x);\n",hh=kr+"\n  return atan(x);\n",xp=kr+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",hd=kr+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",Cp=function(u){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=u;var i=u.length,a=es("rc",i),d=xi(i),f=function pu(u,i){if(1===u)return"rc";for(var a="",d=0;d<u;d++)a+=i[d],d<u-1&&(a+=",");return a}(i,a),y=a.slice(-2),w=1===i?"rc":"vec2("+y.join(",")+")";this.userCode="\n      void main() {\n        "+d+" rc = getOutputCoords();\n        vec4 packedInput = getA("+f+");\n\n        setOutput(getChannel(packedInput, "+w+"));\n      }\n    "},is=Te({concat_:function Vl(u,i){void 0===i&&(i=0),le(u.length>=1,"Pass at least one tensor to concat");var a=ln(u,"tensors","concat");i=bi(i,a[0].shape)[0];var d=cl(a.map(function(w){return w.shape}),i);if(0===Ie(d))return vr([],d);if(1===(a=a.filter(function(w){return w.size>0})).length)return a[0];var f=a.map(function(w){return w.shape});return function Uc(u,i){var a=u[0].length;u.forEach(function(f,y){le(f.length===a,"Error in concat"+a+"D: rank of tensors["+y+"] must be the same as the rank of the rest ("+a+")")}),le(i>=0&&i<a,"Error in concat"+a+"D: axis must be between 0 and "+(a-1)+".");var d=u[0];u.forEach(function(f,y){for(var w=0;w<a;w++)le(w===i||f[w]===d[w],"Error in concat"+a+"D: Shape of tensors["+y+"] ("+f+") does not match the shape of the rest ("+d+") along the non-concatenated axis "+y+".")})}(f,i),ve.engine.runKernel(function(w){return w.concat(a,i)},a,function(w){var C=f.map(function(O){return O[i]});return wu(w,C,i).map(function(O){return function(){return O}})})}}),bu=Te({concat1d_:function ug(u){return is(u,0)}}),Ya=Te({concat2d_:function fy(u,i){return is(u,i)}}),Sp=Te({concat3d_:function vu(u,i){return is(u,i)}}),Dp=Te({concat4d_:function jo(u,i){return is(u,i)}}),wu=Te({split_:function Za(u,i,a){void 0===a&&(a=0);var d,f=ae(u,"x","split");return a=bi(a,f.shape)[0],"number"==typeof i?(le(f.shape[a]%i==0,"Number of splits must evenly divide the axis."),d=Array(i).fill(f.shape[a]/i)):(le(f.shape[a]===i.reduce(function(y,w){return y+w}),"The sum of sizes must match the size of the axis dimension."),d=i),ve.engine.runKernel(function(y){return y.split(f,d,a)},{$x:f},function(y){return{$x:function(){return is(y,a)}}})}});function no(u,i){return u(i={exports:{}},i.exports),i.exports}typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;var my=no(function(u){!function(i,a,d){function f(w,C){return C.c=w.c,C.s0=w.s0,C.s1=w.s1,C.s2=w.s2,C}function y(w,C){var O=new function(q){var K,re=this,se=(K=4022871197,function(oe){oe=oe.toString();for(var de=0;de<oe.length;de++){var xe=.02519603282416938*(K+=oe.charCodeAt(de));xe-=K=xe>>>0,K=(xe*=K)>>>0,K+=4294967296*(xe-=K)}return 2.3283064365386963e-10*(K>>>0)});re.next=function(){var oe=2091639*re.s0+2.3283064365386963e-10*re.c;return re.s0=re.s1,re.s1=re.s2,re.s2=oe-(re.c=0|oe)},re.c=1,re.s0=se(" "),re.s1=se(" "),re.s2=se(" "),re.s0-=se(q),re.s0<0&&(re.s0+=1),re.s1-=se(q),re.s1<0&&(re.s1+=1),re.s2-=se(q),re.s2<0&&(re.s2+=1),se=null}(w),U=C&&C.state,j=O.next;return j.int32=function(){return 4294967296*O.next()|0},j.double=function(){return j()+11102230246251565e-32*(2097152*j()|0)},j.quick=j,U&&("object"==typeof U&&f(U,O),j.state=function(){return f(O,{})}),j}a&&a.exports?a.exports=y:this.alea=y}(0,u)}),T=no(function(u){!function(i,a,d){function f(w,C){return C.x=w.x,C.y=w.y,C.z=w.z,C.w=w.w,C}function y(w,C){var O=new function(q){var K=this,re="";K.x=0,K.y=0,K.z=0,K.w=0,K.next=function(){var oe=K.x^K.x<<11;return K.x=K.y,K.y=K.z,K.z=K.w,K.w^=K.w>>>19^oe^oe>>>8},q===(0|q)?K.x=q:re+=q;for(var se=0;se<re.length+64;se++)K.x^=0|re.charCodeAt(se),K.next()}(w),U=C&&C.state,j=function(){return(O.next()>>>0)/4294967296};return j.double=function(){do{var q=((O.next()>>>11)+(O.next()>>>0)/4294967296)/2097152}while(0===q);return q},j.int32=O.next,j.quick=j,U&&("object"==typeof U&&f(U,O),j.state=function(){return f(O,{})}),j}a&&a.exports?a.exports=y:this.xor128=y}(0,u)}),v=no(function(u){!function(i,a,d){function f(w,C){return C.x=w.x,C.y=w.y,C.z=w.z,C.w=w.w,C.v=w.v,C.d=w.d,C}function y(w,C){var O=new function(q){var K=this,re="";K.next=function(){var oe=K.x^K.x>>>2;return K.x=K.y,K.y=K.z,K.z=K.w,K.w=K.v,(K.d=K.d+362437|0)+(K.v=K.v^K.v<<4^oe^oe<<1)|0},K.x=0,K.y=0,K.z=0,K.w=0,K.v=0,q===(0|q)?K.x=q:re+=q;for(var se=0;se<re.length+64;se++)K.x^=0|re.charCodeAt(se),se==re.length&&(K.d=K.x<<10^K.x>>>4),K.next()}(w),U=C&&C.state,j=function(){return(O.next()>>>0)/4294967296};return j.double=function(){do{var q=((O.next()>>>11)+(O.next()>>>0)/4294967296)/2097152}while(0===q);return q},j.int32=O.next,j.quick=j,U&&("object"==typeof U&&f(U,O),j.state=function(){return f(O,{})}),j}a&&a.exports?a.exports=y:this.xorwow=y}(0,u)}),E=no(function(u){!function(i,a,d){function f(w,C){return C.x=w.x.slice(),C.i=w.i,C}function y(w,C){null==w&&(w=+new Date);var O=new function(q){var K=this;K.next=function(){var re,se,oe=K.x,de=K.i;return re=oe[de],se=(re^=re>>>7)^re<<24,se^=(re=oe[de+1&7])^re>>>10,se^=(re=oe[de+3&7])^re>>>3,se^=(re=oe[de+4&7])^re<<7,re=oe[de+7&7],se^=(re^=re<<13)^re<<9,oe[de]=se,K.i=de+1&7,se},function(re,se){var oe,de=[];if(se===(0|se))de[0]=se;else for(se=""+se,oe=0;oe<se.length;++oe)de[7&oe]=de[7&oe]<<15^se.charCodeAt(oe)+de[oe+1&7]<<13;for(;de.length<8;)de.push(0);for(oe=0;oe<8&&0===de[oe];++oe);for(8==oe&&(de[7]=-1),re.x=de,re.i=0,oe=256;oe>0;--oe)re.next()}(K,q)}(w),U=C&&C.state,j=function(){return(O.next()>>>0)/4294967296};return j.double=function(){do{var q=((O.next()>>>11)+(O.next()>>>0)/4294967296)/2097152}while(0===q);return q},j.int32=O.next,j.quick=j,U&&(U.x&&f(U,O),j.state=function(){return f(O,{})}),j}a&&a.exports?a.exports=y:this.xorshift7=y}(0,u)}),k=no(function(u){!function(i,a,d){function f(w,C){return C.i=w.i,C.w=w.w,C.X=w.X.slice(),C}function y(w,C){null==w&&(w=+new Date);var O=new function(q){var K=this;K.next=function(){var re,se,oe=K.w,de=K.X,xe=K.i;return K.w=oe=oe+1640531527|0,se=de[xe+34&127],re=de[xe=xe+1&127],se^=se<<13,re^=re<<17,se=de[xe]=(se^=se>>>15)^(re^=re>>>12),K.i=xe,se+(oe^oe>>>16)|0},function(re,se){var oe,de,xe,Se,ke,Ke=[],Ge=128;for(se===(0|se)?(de=se,se=null):(se+="\0",de=0,Ge=Math.max(Ge,se.length)),xe=0,Se=-32;Se<Ge;++Se)se&&(de^=se.charCodeAt((Se+32)%se.length)),0===Se&&(ke=de),de^=de<<10,de^=de>>>15,de^=de<<4,de^=de>>>13,Se>=0&&(xe=0==(oe=Ke[127&Se]^=de+(ke=ke+1640531527|0))?xe+1:0);for(xe>=128&&(Ke[127&(se&&se.length||0)]=-1),xe=127,Se=512;Se>0;--Se)de=Ke[xe+34&127],oe=Ke[xe=xe+1&127],de^=de<<13,oe^=oe<<17,Ke[xe]=(de^=de>>>15)^(oe^=oe>>>12);re.w=ke,re.X=Ke,re.i=xe}(K,q)}(w),U=C&&C.state,j=function(){return(O.next()>>>0)/4294967296};return j.double=function(){do{var q=((O.next()>>>11)+(O.next()>>>0)/4294967296)/2097152}while(0===q);return q},j.int32=O.next,j.quick=j,U&&(U.X&&f(U,O),j.state=function(){return f(O,{})}),j}a&&a.exports?a.exports=y:this.xor4096=y}(0,u)}),X=no(function(u){!function(i,a,d){function f(w,C){return C.a=w.a,C.b=w.b,C.c=w.c,C.d=w.d,C}function y(w,C){var O=new function(q){var K=this,re="";K.next=function(){var oe=K.b,de=K.c,xe=K.d,Se=K.a;return oe=oe<<25^oe>>>7^de,de=de-xe|0,xe=xe<<24^xe>>>8^Se,Se=Se-oe|0,K.b=oe=oe<<20^oe>>>12^de,K.c=de=de-xe|0,K.d=xe<<16^de>>>16^Se,K.a=Se-oe|0},K.a=0,K.b=0,K.c=-1640531527,K.d=1367130551,q===Math.floor(q)?(K.a=q/4294967296|0,K.b=0|q):re+=q;for(var se=0;se<re.length+20;se++)K.b^=0|re.charCodeAt(se),K.next()}(w),U=C&&C.state,j=function(){return(O.next()>>>0)/4294967296};return j.double=function(){do{var q=((O.next()>>>11)+(O.next()>>>0)/4294967296)/2097152}while(0===q);return q},j.int32=O.next,j.quick=j,U&&("object"==typeof U&&f(U,O),j.state=function(){return f(O,{})}),j}a&&a.exports?a.exports=y:this.tychei=y}(0,u)}),ne=no(function(u){!function(i,a){var d,f=this,y=256,C="random",O=a.pow(y,6),U=a.pow(2,52),j=2*U,q=255;function K(de,xe,Se){var ke=[],Ke=se(function ht(At,yt){var Kt,_n=[],On=typeof At;if(yt&&"object"==On)for(Kt in At)try{_n.push(ht(At[Kt],yt-1))}catch{}return _n.length?_n:"string"==On?At:At+"\0"}((xe=1==xe?{entropy:!0}:xe||{}).entropy?[de,oe(i)]:de??function(){try{var ht;return d&&(ht=d.randomBytes)?ht=ht(y):(ht=new Uint8Array(y),(f.crypto||f.msCrypto).getRandomValues(ht)),oe(ht)}catch{var At=f.navigator,yt=At&&At.plugins;return[+new Date,f,yt,f.screen,oe(i)]}}(),3),ke),Ge=new function(ht){var At,yt=ht.length,Kt=this,_n=0,On=Kt.i=Kt.j=0,Un=Kt.S=[];for(yt||(ht=[yt++]);_n<y;)Un[_n]=_n++;for(_n=0;_n<y;_n++)Un[_n]=Un[On=q&On+ht[_n%yt]+(At=Un[_n])],Un[On]=At;(Kt.g=function(or){for(var wr,En=0,un=Kt.i,xn=Kt.j,ur=Kt.S;or--;)wr=ur[un=q&un+1],En=En*y+ur[q&(ur[un]=ur[xn=q&xn+wr])+(ur[xn]=wr)];return Kt.i=un,Kt.j=xn,En})(y)}(ke),rt=function(){for(var ht=Ge.g(6),At=O,yt=0;ht<U;)ht=(ht+yt)*y,At*=y,yt=Ge.g(1);for(;ht>=j;)ht/=2,At/=2,yt>>>=1;return(ht+yt)/At};return rt.int32=function(){return 0|Ge.g(4)},rt.quick=function(){return Ge.g(4)/4294967296},rt.double=rt,se(oe(Ge.S),i),(xe.pass||Se||function(ht,At,yt,Kt){return Kt&&(Kt.S&&re(Kt,Ge),ht.state=function(){return re(Ge,{})}),yt?(a[C]=ht,At):ht})(rt,Ke,"global"in xe?xe.global:this==a,xe.state)}function re(de,xe){return xe.i=de.i,xe.j=de.j,xe.S=de.S.slice(),xe}function se(de,xe){for(var Se,ke=de+"",Ke=0;Ke<ke.length;)xe[q&Ke]=q&(Se^=19*xe[q&Ke])+ke.charCodeAt(Ke++);return oe(xe)}function oe(de){return String.fromCharCode.apply(0,de)}if(a["seed"+C]=K,se(a.random(),i),u.exports){u.exports=K;try{d=S(4902)}catch{}}}([],Math)});ne.alea=my,ne.xor128=T,ne.xorwow=v,ne.xorshift7=E,ne.xor4096=k,ne.tychei=X;var Le=ne.alea,dt=function(){function u(i,a,d,f,y){this.mean=i,this.stdDev=a,this.dtype=d,this.nextVal=NaN,this.truncated=f,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var w=y||Math.random();this.random=Le(w.toString())}return u.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var i=this.nextVal;return this.nextVal=NaN,i}for(var a,d,f=!1;!f;){var y=void 0,w=void 0,C=void 0;do{C=(y=2*this.random()-1)*y+(w=2*this.random()-1)*w}while(C>=1||0===C);var O=Math.sqrt(-2*Math.log(C)/C);a=this.mean+this.stdDev*y*O,d=this.mean+this.stdDev*w*O,this.truncated&&!this.isValidTruncated(a)||(f=!0)}return this.truncated&&!this.isValidTruncated(d)||(this.nextVal=this.convertValue(d)),this.convertValue(a)},u.prototype.convertValue=function(i){return null==this.dtype||"float32"===this.dtype?i:Math.round(i)},u.prototype.isValidTruncated=function(i){return i<=this.upper&&i>=this.lower},u}();function mh(u,i){return R(this,void 0,void 0,function(){var a,d,f,y,w,C,O,U,j,q,K,re,se,oe,de,xe,Se,ke,Ke,Ge;return W(this,function(rt){switch(rt.label){case 0:if(2!==(a=ae(u,"img","toPixels","int32")).rank&&3!==a.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+a.rank+".");if(d=a.shape.slice(0,2),f=d[0],y=d[1],(w=2===a.rank?1:a.shape[2])>4||2===w)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+w);return C=a.min(),O=a.max(),[4,C.data()];case 1:return U=rt.sent()[0],[4,O.data()];case 2:if(j=rt.sent()[0],C.dispose(),O.dispose(),"float32"===a.dtype){if(U<0||j>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+U+" - "+j+"].")}else{if("int32"!==a.dtype)throw new Error("Unsupported type for toPixels: "+a.dtype+". Please use float32 or int32 tensors.");if(U<0||j>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+U+" - "+j+"].")}return[4,a.data()];case 3:for(q=rt.sent(),K="float32"===a.dtype?255:1,re=new Uint8ClampedArray(y*f*4),se=0;se<f*y;++se)oe=void 0,de=void 0,xe=void 0,Se=void 0,1===w?(oe=q[se]*K,de=q[se]*K,xe=q[se]*K,Se=255):3===w?(oe=q[3*se]*K,de=q[3*se+1]*K,xe=q[3*se+2]*K,Se=255):4===w&&(oe=q[4*se]*K,de=q[4*se+1]*K,xe=q[4*se+2]*K,Se=q[4*se+3]*K),re[0+(ke=4*se)]=Math.round(oe),re[ke+1]=Math.round(de),re[ke+2]=Math.round(xe),re[ke+3]=Math.round(Se);return null!=i&&(i.width=y,i.height=f,Ke=i.getContext("2d"),Ge=new ImageData(re,y,f),Ke.putImageData(Ge,0,0)),a!==u&&a.dispose(),[2,re]}})})}function lr(u,i,a){return void 0===i&&(i="float32"),new Vr(u,i,a)}function Uf(u,i){void 0===i&&(i=!1),console.log(u.toString(i))}var bh=Te({batchToSpaceND_:function vh(u,i,a){var d=ae(u,"x","batchToSpaceND"),f=i.reduce(function(y,w){return y*w});return le(d.rank>=1+i.length,"input rank is "+d.rank+" but should be > than blockShape.length "+i.length),le(a.length===i.length,"crops.length is "+a.length+" but should be equal to blockShape.length  "+i.length),le(d.shape[0]%f==0,"input tensor batch is "+d.shape[0]+" but is not divisible by the product of the elements of blockShape "+i.join(" * ")+" === "+f),ve.engine.runKernel(function(y){return y.batchToSpaceND(d,i,a)},{$x:d},function(y){return{$x:function(){return y.spaceToBatchND(i,a)}}})}}),wh=Te({cast_:function _h(u,i){var a=ae(u,"x","cast");return ve.engine.runKernel(function(d){return d.cast(a,i)},{$x:a},function(d){return{$x:function(){return d.clone()}}})}}),yy=Te({clone_:function it(u){var i=ae(u,"x","clone");return ve.engine.runKernel(function(a){return Tt.make(i.shape,{dataId:i.dataId},i.dtype)},{$x:i},function(a){return{$x:function(){return a.toFloat()}}})}}),o0=Te({cumsum_:function gy(u,i,a,d){void 0===i&&(i=0),void 0===a&&(a=!1),void 0===d&&(d=!1);var f=ae(u,"x","cumsum"),y=Hi([i|=0],f.rank),w=f;null!=y&&(w=f.transpose(y));var C=ps(1,f.rank)[0],O=ve.engine.runKernel(function(U){return U.cumsum(w,C,a,d)},{permutedX:w},function(U){return{permutedX:function(){return U.cumsum(i,a,!d)}}});return null!=y&&(O=O.transpose(y)),O}}),s0=Te({depthToSpace_:function Vf(u,i,a){void 0===a&&(a="NHWC");var d=ae(u,"x","depthToSpace"),f="NHWC"===a?d.shape[1]:d.shape[2],y="NHWC"===a?d.shape[2]:d.shape[3],w="NHWC"===a?d.shape[3]:d.shape[1];return le(f*i>=0,"Negative dimension size caused by overflow when multiplying\n      "+f+" and "+i+"  for depthToSpace with input shape\n      "+d.shape),le(y*i>=0,"Negative dimension size caused by overflow when multiplying\n      "+y+" and "+i+" for depthToSpace with input shape\n          "+d.shape),le(w%(i*i)==0,"Dimension size must be evenly divisible by "+i*i+" but is "+w+" for depthToSpace with input shape "+d.shape),ve.engine.runKernel(function(C){return C.depthToSpace(d,i,a)},{$x:d})}}),wc=Te({expandDims_:function _y(u,i){void 0===i&&(i=0);var a=ae(u,"x","expandDims");le(i<=a.rank,"Axis must be <= rank of the tensor");var d=a.shape.slice();return i<0&&(le(-(a.rank+1)<=i,"Axis must be in the interval ["+-(a.rank+1)+", "+a.rank+"]"),i=a.rank+i+1),d.splice(i,0,1),Ch(a,d)}}),vy=Te({eye_:function vt(u,i,a,d){void 0===d&&(d="float32"),null==i&&(i=u);for(var f=lr([u,i],d),y=u<=i?u:i,w=0;w<y;++w)f.set(1,w,w);var C=f.toTensor().as2D(u,i);if(null==a)return C;if(1===a.length)return Xa(wc(C,0),[a[0],1,1]);if(2===a.length)return Xa(wc(wc(C,0),0),[a[0],a[1],1,1]);if(3===a.length)return Xa(wc(wc(wc(C,0),0),0),[a[0],a[1],a[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+a.length+"D.")}}),by=Te({fromPixels_:function Ho(u,i){if(void 0===i&&(i=3),i>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return ve.engine.fromPixels(u,i)}}),wy=Te({multinomial_:function ro(u,i,a,d){void 0===d&&(d=!1);var f=ae(u,"logits","multinomial"),y=f.size,w=f.rank;if(y<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+y+".");if(w>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+w);a=a||Math.random();var C=1===w?f.as2D(1,-1):f,O=ve.engine.runKernel(function(U){return U.multinomial(C,d,i,a)},{logits2D:C});return 1===w?O.as1D():O}}),xh=Te({oneHot_:function Es(u,i,a,d){void 0===a&&(a=1),void 0===d&&(d=0);var f=ae(u,"indices","oneHot","int32");if(le("int32"===f.dtype,"Indices must be of dtype `int32`"),i<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+i);return ve.engine.runKernel(function(y){return y.oneHot(f,i,a,d)},{$indices:f},function(y){return{$indices:function(){return Nn(f)}}})}}),yd=Te({pad_:function cg(u,i,a){void 0===a&&(a=0);var d=ae(u,"x","pad");if(0===d.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var f=i.map(function(y){return y[0]});return ve.engine.runKernel(function(y){return y.pad(d,i,a)},{$x:d},function(y){return{$x:function(){return y.slice(f,d.shape)}}})}}),Eh=Te({pad1d_:function yh(u,i,a){return void 0===a&&(a=0),le(2===i.length,"Invalid number of paddings. Must be length of 2."),yd(u,[i],a)}}),Sa=Te({pad2d_:function Ip(u,i,a){return void 0===a&&(a=0),le(2===i.length&&2===i[0].length&&2===i[1].length,"Invalid number of paddings. Must be length of 2 each."),yd(u,i,a)}}),xy=Te({pad3d_:function md(u,i,a){return void 0===a&&(a=0),le(3===i.length&&2===i[0].length&&2===i[1].length&&2===i[2].length,"Invalid number of paddings. Must be length of 2 each."),yd(u,i,a)}}),xc=Te({pad4d_:function gd(u,i,a){return void 0===a&&(a=0),le(4===i.length&&2===i[0].length&&2===i[1].length&&2===i[2].length&&2===i[3].length,"Invalid number of paddings. Must be length of 2 each."),yd(u,i,a)}}),Ey=Te({rand_:function Cr(u,i,a){var d=Ie(u),f=null;if(null==a||"float32"===a)f=new Float32Array(d);else if("int32"===a)f=new Int32Array(d);else{if("bool"!==a)throw new Error("Unknown data type "+a);f=new Uint8Array(d)}for(var y=0;y<d;y++)f[y]=i();return Tt.make(u,{values:f},a)}}),Ec=Te({randomNormal_:function tn(u,i,a,d,f){if(void 0===i&&(i=0),void 0===a&&(a=1),null!=d&&"bool"===d)throw new Error("Unsupported data type "+d);for(var y=new dt(i,a,d,!1,f),w=lr(u,d),C=0;C<w.values.length;C++)w.values[C]=y.nextValue();return w.toTensor()}}),dg=Te({randomUniform_:function Br(u,i,a,d){void 0===i&&(i=0),void 0===a&&(a=1),void 0===d&&(d="float32");for(var f=lr(u,d),y=0;y<f.values.length;y++)f.values[y]=wt(i,a);return f.toTensor()}}),Ch=Te({reshape_:function gh(u,i){var a=ae(u,"x","reshape");return i=Mt(i,a.size),le(a.size===Ie(i),"new shape and old shape must have the same number of elements."),ve.engine.runKernel(function(d){return d.reshape(a,i)},{$x:a},function(d){return{$x:function(){return d.reshape(a.shape)}}})}}),Sh=Te({spaceToBatchND_:function r0(u,i,a){var d=ae(u,"x","spaceToBatchND");return le(d.rank>=1+i.length,"input rank "+d.rank+" should be > than [blockShape] "+i.length),le(a.length===i.length,"paddings.shape[0] "+a.length+" must be equal to [blockShape] "+i.length),le(d.shape.reduce(function(f,y,w){return w>0&&w<=i.length?f&&(y+a[w-1][0]+a[w-1][1])%i[w-1]==0:f},!0),"input spatial dimensions "+d.shape.slice(1)+" with paddings "+a.toString()+" must be divisible by blockShapes "+i.toString()),ve.engine.runKernel(function(f){return f.spaceToBatchND(d,i,a)},{$x:d},function(f){return{$x:function(){return f.batchToSpaceND(i,a)}}})}}),Cy=Te({squeeze_:function pd(u,i){var a=ae(u,"x","squeeze");return Ch(a,Pt(a.shape,i).newShape)}}),xu=Te({stack_:function Bf(u,i){void 0===i&&(i=0);var a=ln(u,"tensors","stack");if(le(a.length>=1,"Pass at least one tensor to tf.stack"),1===a.length)return a[0].expandDims(i);var f=a[0].shape,y=a[0].dtype;le(i<=a[0].rank,"Axis must be <= rank of the tensor"),a.forEach(function(C){$e(f,C.shape,"All tensors passed to stack must have matching shapes")}),a.forEach(function(C){le(y===C.dtype,"All tensors passed to stack must have matching dtypes")});var w=a.map(function(C){return C.expandDims(i)});return is(w,i)}}),Xa=Te({tile_:function fd(u,i){var a=ae(u,"x","tile");return le(a.rank===i.length,"Error in transpose: rank of input "+a.rank+" must match length of reps "+i+"."),ve.engine.runKernel(function(d){return d.tile(a,i)},{$x:a},function(d){return{$x:function(){var f=Nn(a);if(1===a.rank)for(var y=0;y<i[0];++y)f=f.add(d.slice([y*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(y=0;y<i[0];++y)for(var w=0;w<i[1];++w)f=f.add(d.slice([y*a.shape[0],w*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(y=0;y<i[0];++y)for(w=0;w<i[1];++w)for(var C=0;C<i[2];++C)f=f.add(d.slice([y*a.shape[0],w*a.shape[1],C*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(y=0;y<i[0];++y)for(w=0;w<i[1];++w)for(C=0;C<i[2];++C)for(var O=0;O<i[3];++O)f=f.add(d.slice([y*a.shape[0],w*a.shape[1],C*a.shape[2],O*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return f}}})}}),vd=Te({truncatedNormal_:function kn(u,i,a,d,f){if(void 0===i&&(i=0),void 0===a&&(a=1),null!=d&&"bool"===d)throw new Error("Unsupported data type "+d);for(var y=new dt(i,a,d,!0,f),w=lr(u,d),C=0;C<w.values.length;C++)w.values[C]=y.nextValue();return w.toTensor()}}),zf=Te({unstack_:function Tp(u,i){void 0===i&&(i=0);for(var a,d=ae(u,"x","unstack"),f=d.shape[i],y=Array(d.rank-1).fill(0),w=0,C=0;C<d.rank;C++)C!==i&&(y[w]=d.shape[C],w++);a=Array(f).fill(1);var O=Array(d.rank).fill(0),U=d.shape.slice();return a.map(function(j){U[i]=j;var q=d.slice(O,U);return O[i]+=j,q.reshape(y)})}}),hg=function _d(u,i){return R(this,void 0,void 0,function(){var a,d,f,y,w,C,O,U,j,q;return W(this,function(K){switch(K.label){case 0:return a=ae(u,"x","setdiff1d"),d=ae(i,"y","setdiff1d"),le(a.dtype===d.dtype,"x and y should have the same dtype, but got x ("+a.dtype+") and y ("+d.dtype+")."),le(1===a.rank,"x should be 1D tensor, but got x ("+a.shape+")."),le(1===d.rank,"y should be 1D tensor, but got y ("+d.shape+")."),[4,a.data()];case 1:return f=K.sent(),[4,d.data()];case 2:for(y=K.sent(),w=new Set(y),C=0,j=0;j<f.length;j++)w.has(f[j])||C++;for(O=new Vr([C],a.dtype),U=new Vr([C],"int32"),j=0,q=0;j<f.length;j++)w.has(f[j])||(O.values[q]=f[j],U.values[q]=j,q++);return[2,[O.toTensor(),U.toTensor()]]}})})};function Eu(u,i){for(var a=[],d=0;d<i.length;d++)i[d]&&a.push(d);var f=lr(u,"int32"),y=lr([a.length,u.length],"int32");for(d=0;d<a.length;d++){var w=f.indexToLoc(a[d]);y.values.set(w,d*u.length)}return y.toTensor()}var pg=function(){function u(i,a){if(void 0===a&&(a=!0),this.gpgpu=i,this.delayedStorage=a,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,ve.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");if(null==i){var d=pe(ve.get("WEBGL_VERSION"));this.gpgpu=new Ai(d),this.canvas=d.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpuCreatedLocally=!1,this.canvas=i.gl.canvas;ve.get("WEBGL_PAGING_ENABLED")&&(this.NUM_BYTES_BEFORE_PAGING=window.screen.height*window.screen.width*window.devicePixelRatio*300),this.textureManager=new vp(this.gpgpu)}return u.prototype.register=function(i,a,d){if(this.texData.has(i))throw new Error("Data buffer is already registered");this.texData.set(i,{shape:a,dtype:d,values:null,texture:null,complexTensors:null,texShape:null,usage:_o.RENDER,isPacked:!1})},u.prototype.setDataMover=function(i){this.texData=new ki(i)},u.prototype.fromPixels=function(i,a){if(null==i)throw new Error("pixels passed to tf.fromPixels() can not be null");var d=[i.height,i.width],f=[i.height,i.width,a];if(!(i instanceof HTMLVideoElement||i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof ImageData))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+i.constructor.name);if(i instanceof HTMLVideoElement){if(null==this.fromPixels2DContext){if(!ve.get("IS_BROWSER"))throw new Error("Can't read pixels from HTMLImageElement outside the browser.");if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixels2DContext=document.createElement("canvas").getContext("2d")}this.fromPixels2DContext.canvas.width=i.width,this.fromPixels2DContext.canvas.height=i.height,this.fromPixels2DContext.drawImage(i,0,0,i.width,i.height),i=this.fromPixels2DContext.canvas}var y=this.makeTensorHandle(d,"int32");this.texData.get(y.dataId).usage=_o.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(y.dataId),i);var w=new fr(f),C=this.compileAndRun(w,[y]);return this.disposeData(y.dataId),C},u.prototype.makeTensorHandle=function(i,a){var d={};return this.register(d,i,a),{dataId:d,shape:i,dtype:a}},u.prototype.write=function(i,a){if(null==a)throw new Error("MathBackendWebGL.write(): values can not be null");var d=this.texData.get(i),f=d.texture,y=d.texShape,w=d.usage,O=d.isPacked;if("complex64"===d.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");null!=f&&(this.releaseTexture(i,f,y,w,O),d.texture=null,d.texShape=null),d.usage=_o.UPLOAD,d.values=a,this.delayedStorage||this.uploadToGPU(i)},u.prototype.readSync=function(i){var a=this.texData.get(i),f=a.dtype,y=a.complexTensors;if(null!=a.values)return this.convertAndCacheOnCPU(i);var w,C,O=null!=this.activeTimers;return O&&(w=performance.now()),C="complex64"===f?jc(y.real.dataSync(),y.imag.dataSync()):this.getValuesFromTexture(i),O&&(this.downloadWaitMs+=performance.now()-w),this.convertAndCacheOnCPU(i,C)},u.prototype.read=function(i){return R(this,void 0,void 0,function(){var a,d,f,w,C,O,U,j;return W(this,function(q){switch(q.label){case 0:if(this.pendingRead.has(i))return a=this.pendingRead.get(i),[2,new Promise(function(K){return a.push(K)})];if(d=this.texData.get(i),f=d.texture,w=d.texShape,null!=d.values)return[2,this.convertAndCacheOnCPU(i)];if(this.pendingRead.set(i,[]),!ve.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===ve.get("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return C=this.gpgpu.maybeCreateBufferFromTexture(f,w[0],w[1]),[4,this.gpgpu.createAndWaitForFence()];case 1:return q.sent(),O=C instanceof WebGLTexture?this.getValuesFromTexture(i):this.gpgpu.downloadFloat32MatrixFromBuffer(C,w[0],w[1]),U=this.convertAndCacheOnCPU(i,O),j=this.pendingRead.get(i),this.pendingRead.delete(i),j.forEach(function(K){return K(U)}),this.pendingDisposal.has(i)&&(this.pendingDisposal.delete(i),this.disposeData(i)),[2,U]}})})},u.prototype.getValuesFromTexture=function(i){var a=this.texData.get(i),d=a.shape,f=a.dtype,y=a.texture,w=a.texShape;if(ve.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")){if(this.texData.get(i).isPacked){var C=Ie(d.slice(0,d.length-2));return this.gpgpu.downloadMatrixFromPackedTexture(y,C,d.length>1?d[d.length-2]:1,d[d.length-1],w[0],w[1])}return this.gpgpu.downloadFloat32MatrixFromOutputTexture(y,w[0],w[1])}var j=this.makeTensorHandle(d,"float32");j.size=Ie(d),this.texData.get(j.dataId).usage=_o.DOWNLOAD;var q=new to(d);this.compileAndRun(q,[{shape:d,dtype:f,dataId:i}],j,null,!1);var K=this.texData.get(j.dataId),re=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(K.texture,K.texShape[0],K.texShape[1]);return this.disposeData(j.dataId),re},u.prototype.time=function(i){return R(this,void 0,void 0,function(){var a,d,f,y,w,C,O;return W(this,function(U){switch(U.label){case 0:return a=this.activeTimers,d=[],f=!1,null==this.programTimersStack?(this.programTimersStack=d,f=!0):this.activeTimers.push(d),this.activeTimers=d,i(),y=It(this.activeTimers.map(function(j){return j.query})).filter(function(j){return null!=j}),w=It(this.activeTimers.map(function(j){return j.name})).filter(function(j){return null!=j}),this.activeTimers=a,f&&(this.programTimersStack=null),[4,Promise.all(y)];case 1:return C=U.sent(),O={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:tt(C),getExtraProfileInfo:function(){return C.map(function(j,q){return{name:w[q],ms:j}}).map(function(j){return j.name+": "+j.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,O]}})})},u.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},u.prototype.startTimer=function(){return ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},u.prototype.endTimer=function(i){return ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),i):(i.endMs=performance.now(),i)},u.prototype.getQueryTime=function(i){return R(this,void 0,void 0,function(){var a;return W(this,function(d){return ve.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(i)]:[2,(a=i).endMs-a.startMs]})})},u.prototype.disposeData=function(i){if(!this.pendingDisposal.has(i))if(this.pendingRead.has(i))this.pendingDisposal.add(i);else if(this.texData.has(i)){var a=this.texData.get(i),d=a.texture,w=a.complexTensors;null!=d&&this.releaseTexture(i,d,a.texShape,a.usage,a.isPacked),null!=w&&(w.real.dispose(),w.imag.dispose()),this.texData.delete(i)}},u.prototype.getTexture=function(i){return this.uploadToGPU(i),this.texData.get(i).texture},u.prototype.getCPUBackend=function(){return ve.get("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=ve.findBackend("cpu")),this.cpuBackend):null},u.prototype.shouldExecuteOnCPU=function(i,a){var d=this;return void 0===a&&(a=10),null!=this.getCPUBackend()&&i.every(function(f){return null==d.texData.get(f.dataId).texture&&f.size<a})},u.prototype.getGPGPUContext=function(){return this.gpgpu},u.prototype.getCanvas=function(){return this.canvas},u.prototype.complex=function(i,a){var d=this.makeOutputArray(i.shape,"complex64");return this.texData.get(d.dataId).complexTensors={real:ve.engine.keep(i.clone()),imag:ve.engine.keep(a.clone())},d},u.prototype.real=function(i){return this.texData.get(i.dataId).complexTensors.real.clone()},u.prototype.imag=function(i){return this.texData.get(i.dataId).complexTensors.imag.clone()},u.prototype.slice=function(i,a,d){if(this.shouldExecuteOnCPU([i]))return this.cpuBackend.slice(i,a,d);var f=new mc(d),y=f.getCustomSetupFunc(a);return this.compileAndRun(f,[i],null,y)},u.prototype.stridedSlice=function(i,a,d,f,y,w,C,O,U){if(this.shouldExecuteOnCPU([i]))return this.cpuBackend.stridedSlice(i,a,d,f,y,w,C,O,U);var j=pl(i.shape,a,d,f,y,w,C,O,U),q=j[0],K=j[1],re=j[2],se=K.filter(function(de,xe){return-1===re.indexOf(xe)});if(se.some(function(de){return 0===de}))return vr([],se);var oe=new fu(q,f,K,re);return this.compileAndRun(oe,[i])},u.prototype.reverse=function(i,a){var d=new dh(i.shape,a);return this.compileAndRun(d,[i])},u.prototype.concat2Tensors=function(i,a,d){var f=cl([i.shape,a.shape],d),y=i.as2D(-1,Ie(i.shape.slice(d))),w=a.as2D(-1,Ie(a.shape.slice(d))),C=new nh(y.shape,w.shape);return this.compileAndRun(C,[y,w]).reshape(f)},u.prototype.concat=function(i,a){if(this.shouldExecuteOnCPU(i))return this.cpuBackend.concat(i,a);if(1===i.length)return i[0];for(var d=i[0],f=1;f<i.length;++f)d=this.concat2Tensors(d,i[f],a);return d},u.prototype.neg=function(i){var a=new gn(i.shape,"return -x;");return this.compileAndRun(a,[i])},u.prototype.batchMatMul=function(i,a,d,f){var y=d?i.shape[2]:i.shape[1],w=f?a.shape[1]:a.shape[2],C=d?i.shape[1]:i.shape[2],O=i.shape[0];if((1===y||1===w)&&C>1e3){d&&(i=i.transpose([0,2,1])),f&&(a=a.transpose([0,2,1]));var U=1===w?i:i.as3D(O,C,1),j=1===w?2:1,q=1===w?a.as3D(O,1,C):a;return this.multiply(U,q).sum(j,!0)}if(1===O){var K=i.as2D(i.shape[1],i.shape[2]),re=a.as2D(a.shape[1],a.shape[2]),se=new dc(K.shape,re.shape,[y,w],d,f),oe=this.compileAndRun(se,[K,re],this.makePackedTensor(se.outputShape));return!1===ve.get("WEBGL_LAZILY_UNPACK")&&(oe=this.unpackTensor(oe)),oe.reshape([1,oe.shape[0],oe.shape[1]])}return this.compileAndRun(new uh(i.shape,a.shape,d,f),[i,a])},u.prototype.multiply=function(i,a){if("complex64"===i.dtype){var d=this.texData.get(i.dataId),f=this.texData.get(a.dataId),y=new Va("return areal * breal - aimag * bimag;",i.shape,a.shape),w=new Va("return areal * bimag + aimag * breal;",i.shape,a.shape),C=[this.makeComplexComponentTensorHandle(i,d.complexTensors.real),this.makeComplexComponentTensorHandle(i,d.complexTensors.imag),this.makeComplexComponentTensorHandle(a,f.complexTensors.real),this.makeComplexComponentTensorHandle(a,f.complexTensors.imag)],O=this.compileAndRun(y,C),U=this.compileAndRun(w,C),j=this.complex(O,U);return O.dispose(),U.dispose(),j}if(this.shouldExecuteOnCPU([i,a]))return this.cpuBackend.multiply(i,a);var q=new Hn("return a * b;",i.shape,a.shape),K=this.makeOutputArray(q.outputShape,i.dtype);return this.compileAndRun(q,[i,a],K)},u.prototype.batchNormalization=function(i,a,d,f,y,w){var C=[i,a,d],O=null;null!=w&&(O=w.shape,C.push(w));var U=null;null!=y&&(U=y.shape,C.push(y));var j=null,q=Jm;ve.get("WEBGL_PACK_BATCHNORMALIZATION")&&(j=this.makePackedTensor(i.shape),q=oi);var K=new q(i.shape,a.shape,d.shape,O,U,f);return this.compileAndRun(K,C,j)},u.prototype.localResponseNormalization4D=function(i,a,d,f,y){var w=new Or(i.shape,a,d,f,y);return this.compileAndRun(w,[i])},u.prototype.LRNGrad=function(i,a,d,f,y,w,C){var O=new li(a.shape,f,y,w,C);return this.compileAndRun(O,[a,d,i])},u.prototype.tile=function(i,a){var d=new L(i.shape,a);return this.compileAndRun(d,[i])},u.prototype.pad=function(i,a,d){var f=new Tn(i.shape,a,d);return this.compileAndRun(f,[i])},u.prototype.transpose=function(i,a){var d=new ee(i.shape,a);return this.compileAndRun(d,[i])},u.prototype.gather=function(i,a,d){var f=new Qo(i.shape,a.size,d);return this.compileAndRun(f,[i,a])},u.prototype.batchToSpaceND=function(i,a,d){le(i.rank<=4,"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");var f=a.reduce(function(j,q){return j*q}),y=ks(i.shape,a,f),w=Po(y.length,a.length),C=ul(i.shape,a,f),O=Xl(d,a.length),U=Fs(C,d,a.length);return i.reshape(y).transpose(w).reshape(C).slice(O,U)},u.prototype.spaceToBatchND=function(i,a,d){le(i.rank<=4,"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");var f=a.reduce(function(q,K){return q*K}),y=[[0,0]];y.push.apply(y,d);for(var w=1+a.length;w<i.shape.length;++w)y.push([0,0]);var C=i.pad(y),O=ks(C.shape,a,f,!1),U=Po(O.length,a.length,!1),j=ul(C.shape,a,f,!1);return C.reshape(O).transpose(U).reshape(j)},u.prototype.reduce=function(i,a,d){var f=i.shape[0],y=i.shape[1],w=hl(y),C=new ng({windowSize:w,inSize:y,batchSize:f},a),O=C.outputShape,q=this.makeOutputArray([O[0],O[1]],d);return this.compileAndRun(C,[i],q),1===q.shape[1]?q:this.reduce(q,a,d)},u.prototype.argReduce=function(i,a,d){void 0===d&&(d=null);var f=i.shape[0],y=i.shape[1];null!=d&&(f=d.shape[0],y=d.shape[1]);var w=hl(y),C=new Qm({windowSize:w,inSize:y,batchSize:f},a,null==d),O=C.outputShape,q=this.makeOutputArray([O[0],O[1]],"int32"),K=[i];return null!=d&&K.push(d),this.compileAndRun(C,K,q),1===q.shape[1]?q:this.argReduce(i,a,q)},u.prototype.sum=function(i,a){zr("sum",a,i.rank);var d=Gr(i.shape,a),f=d[0],y=Ie(d[1]),w=i.as2D(-1,y),C=Ri(i.dtype);return this.reduce(w,"sum",C).reshape(f)},u.prototype.prod=function(i,a){var d=Gr(i.shape,a),f=d[0],y=Ie(d[1]),w=i.as2D(-1,y),C=Ri(i.dtype);return this.reduce(w,"prod",C).reshape(f)},u.prototype.unsortedSegmentSum=function(i,a,d){var f=0,y=Hi([f],i.rank),w=i;null!=y&&(w=i.transpose(y),f=ps(1,i.rank)[0]);var C=function Qi(u,i,a){for(var d=[],f=u.length,y=0;y<f;y++)d.push(y!==i?u[y]:a);return d}(w.shape,f,d),O=Ie([w.shape[f]]),U=w.as2D(-1,O),j=Ri(i.dtype),q=this.segOpCompute(U,"unsortedSegmentSum",a,j,d).reshape(C);return null!=y&&(q=q.transpose(Ql(y))),q},u.prototype.segOpCompute=function(i,a,d,f,y){var w=i.shape[0],C=i.shape[1],O=function Ra(u,i){var a,d=!1;for(u<=30?(a=u,d=!0):a=Zt(u,Math.floor(Math.sqrt(u)));!d;){if(a>i||a===u){d=!0;break}a=Zt(u,a+1)}return a}(C,y),U=new Bl({windowSize:O,inSize:C,batchSize:w,numSegments:y},a),j=U.outputShape,re=this.makeOutputArray([j[0],j[1]],f);return this.compileAndRun(U,[i,d],re),re.shape[1]===y?re:(d=tu(0,y).tile([C/O]),this.segOpCompute(re,a,d,f,y))},u.prototype.argMin=function(i,a){var d=[a];zr("argMin",d,i.rank);var f=Gr(i.shape,d),y=f[0],w=Ie(f[1]),C=i.as2D(-1,w);return this.argReduce(C,"min").reshape(y)},u.prototype.argMax=function(i,a){var d=[a];zr("argMax",d,i.rank);var f=Gr(i.shape,d),y=f[0],w=Ie(f[1]),C=i.as2D(-1,w);return this.argReduce(C,"max").reshape(y)},u.prototype.cumsum=function(i,a,d,f){if(a!==i.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(i.rank-1)+" but got axis="+a);var y=new mp(i.shape,d,f);return this.compileAndRun(y,[i])},u.prototype.equal=function(i,a){var d=new Hn("return float(a == b);",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"bool");return this.compileAndRun(d,[i,a],f)},u.prototype.notEqual=function(i,a){var d=new Hn("return float(a != b);",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"bool");return this.compileAndRun(d,[i,a],f)},u.prototype.less=function(i,a){if(this.shouldExecuteOnCPU([i,a]))return this.cpuBackend.less(i,a);var d=new Hn("return float(a < b);",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"bool");return this.compileAndRun(d,[i,a],f)},u.prototype.lessEqual=function(i,a){var d=new Hn("return float(a <= b);",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"bool");return this.compileAndRun(d,[i,a],f)},u.prototype.greater=function(i,a){if(this.shouldExecuteOnCPU([i,a]))return this.cpuBackend.greater(i,a);var d=new Hn("return float(a > b);",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"bool");return this.compileAndRun(d,[i,a],f)},u.prototype.greaterEqual=function(i,a){var d=new Hn("return float(a >= b);",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"bool");return this.compileAndRun(d,[i,a],f)},u.prototype.logicalNot=function(i){var a=new gn(i.shape,"return float(!(x >= 1.0));");return this.compileAndRun(a,[i])},u.prototype.logicalAnd=function(i,a){var d=new Hn("return float(a >= 1.0 && b >= 1.0);",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"bool");return this.compileAndRun(d,[i,a],f)},u.prototype.logicalOr=function(i,a){var d=new Hn("return float(a >= 1.0 || b >= 1.0);",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"bool");return this.compileAndRun(d,[i,a],f)},u.prototype.select=function(i,a,d){var f=new ws(i.rank,a.shape,a.rank),y=this.makeOutputArray(f.outputShape,Ir(a.dtype,d.dtype));return this.compileAndRun(f,[i,a,d],y)},u.prototype.where=function(i){vi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var a=i.dataSync();return Eu(i.shape,a)},u.prototype.topk=function(i,a,d){return Ba(i.dataSync(),i.shape,i.dtype,a)},u.prototype.min=function(i,a){zr("min",a,i.rank);var d=Gr(i.shape,a),f=d[0],y=Ie(d[1]),w=i.as2D(-1,y);return this.reduce(w,"min",w.dtype).reshape(f)},u.prototype.minimum=function(i,a){if(this.shouldExecuteOnCPU([i,a]))return this.cpuBackend.minimum(i,a);var d=new Hn(eh,i.shape,a.shape);return this.compileAndRun(d,[i,a])},u.prototype.mod=function(i,a){var d=new Hn("if (b == 0.0) return NAN;\n  return mod(a, b);",i.shape,a.shape),f=d.getCustomSetupFunc();return this.compileAndRun(d,[i,a],null,f)},u.prototype.max=function(i,a){zr("max",a,i.rank);var d=Gr(i.shape,a),f=d[0],y=Ie(d[1]),w=i.as2D(-1,y);return this.reduce(w,"max",w.dtype).reshape(f)},u.prototype.maximum=function(i,a){if(this.shouldExecuteOnCPU([i,a]))return this.cpuBackend.maximum(i,a);var d=new Hn(Wc,i.shape,a.shape);return this.compileAndRun(d,[i,a])},u.prototype.all=function(i,a){zr("all",a,i.rank);var d=Gr(i.shape,a),f=d[0],y=Ie(d[1]),w=i.as2D(-1,y);return this.reduce(w,"all",w.dtype).reshape(f)},u.prototype.any=function(i,a){zr("any",a,i.rank);var d=Gr(i.shape,a),f=d[0],y=Ie(d[1]),w=i.as2D(-1,y);return this.reduce(w,"any",w.dtype).reshape(f)},u.prototype.squaredDifference=function(i,a){var d=new Hn("return (a - b) * (a - b);",i.shape,a.shape);return this.compileAndRun(d,[i,a])},u.prototype.realDivide=function(i,a){var d=new Hn("if (a == b) return 1.0;\n  return a / b;",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"float32");return this.compileAndRun(d,[i,a],f)},u.prototype.floorDiv=function(i,a){var d=new Hn("\n  float resultSign = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  int result = ia / ib;\n  int amodb = ia - ib * result;\n\n  if (resultSign < 0.0 && amodb != 0) {\n    result -= 1;\n  }\n  return float(result);\n",i.shape,a.shape),f=this.makeOutputArray(d.outputShape,"int32");return this.compileAndRun(d,[i,a],f)},u.prototype.add=function(i,a){if("complex64"===i.dtype&&"complex64"===a.dtype)return this.complexSeparableBinaryOp(i,a,Qd);var d=new Hn(Qd,i.shape,a.shape),f=this.makeOutputArray(d.outputShape,Ir(i.dtype,a.dtype));return this.compileAndRun(d,[i,a],f)},u.prototype.complexSeparableBinaryOp=function(i,a,d){var f=this,y=this.texData.get(i.dataId),w=this.texData.get(a.dataId),C=[[y.complexTensors.real,w.complexTensors.real],[y.complexTensors.imag,w.complexTensors.imag]].map(function(q){var K=q[0],re=q[1],se=new Hn(d,i.shape,a.shape),oe=f.makeOutputArray(se.outputShape,Ir(K.dtype,re.dtype)),de=f.makeComplexComponentTensorHandle(i,K),xe=f.makeComplexComponentTensorHandle(a,re);return f.compileAndRun(se,[de,xe],oe)}),O=C[0],U=C[1],j=this.complex(O,U);return O.dispose(),U.dispose(),j},u.prototype.makeComplexComponentTensorHandle=function(i,a){return{dataId:a.dataId,dtype:a.dtype,shape:i.shape}},u.prototype.addN=function(i){for(var a=i[0],d=1;d<i.length;d++)a=this.add(a,i[d]);return a},u.prototype.subtract=function(i,a){if("complex64"===i.dtype&&"complex64"===a.dtype)return this.complexSeparableBinaryOp(i,a,gl);if(this.shouldExecuteOnCPU([i,a]))return this.cpuBackend.subtract(i,a);var d=new Hn(gl,i.shape,a.shape),f=this.makeOutputArray(d.outputShape,Ir(i.dtype,a.dtype));return this.compileAndRun(d,[i,a],f)},u.prototype.pow=function(i,a){var d=new Hn("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",i.shape,a.shape),f=d.getCustomSetupFunc(),y=this.makeOutputArray(d.outputShape,Ir(i.dtype,a.dtype));return this.compileAndRun(d,[i,a],y,f)},u.prototype.ceil=function(i){var a=new gn(i.shape,"return ceil(x);");return this.compileAndRun(a,[i])},u.prototype.floor=function(i){var a=new gn(i.shape,"return floor(x);");return this.compileAndRun(a,[i])},u.prototype.sign=function(i){var a=new gn(i.shape,"\n  if (isNaN(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(a,[i])},u.prototype.round=function(i){var a=new gn(i.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(a,[i])},u.prototype.exp=function(i){var a=new gn(i.shape,"return exp(x);");return this.compileAndRun(a,[i])},u.prototype.expm1=function(i){var a=new gn(i.shape,"return exp(x) - 1.0;");return this.compileAndRun(a,[i])},u.prototype.log=function(i){var a=new gn(i.shape,"if (x < 0.0) return NAN;\n  return log(x);"),d=a.getCustomSetupFunc();return this.compileAndRun(a,[i],null,d)},u.prototype.log1p=function(i){var a=new gn(i.shape,"return log(1.0 + x);");return this.compileAndRun(a,[i])},u.prototype.sqrt=function(i){var a=new gn(i.shape,"return sqrt(x);");return this.compileAndRun(a,[i])},u.prototype.rsqrt=function(i){var a=new gn(i.shape,"return inversesqrt(x);");return this.compileAndRun(a,[i])},u.prototype.square=function(i){var a=new gn(i.shape,"return x * x;");return this.compileAndRun(a,[i])},u.prototype.reciprocal=function(i){var a=new gn(i.shape,"return 1.0 / x;");return this.compileAndRun(a,[i])},u.prototype.relu=function(i){var a=new gn(i.shape,_c);return this.compileAndRun(a,[i])},u.prototype.elu=function(i){var a=new gn(i.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(a,[i])},u.prototype.eluDer=function(i,a){var d=new Hn("return (b >= 1.0) ? a : a * (b + 1.0);",i.shape,a.shape);return this.compileAndRun(d,[i,a])},u.prototype.selu=function(i){var a=new gn(i.shape,rs);return this.compileAndRun(a,[i])},u.prototype.int=function(i){var a=new gn(i.shape,"return float(int(x));"),d=this.makeOutputArray(a.outputShape,"int32");return this.compileAndRun(a,[i],d)},u.prototype.clip=function(i,a,d){var f=new lp(i.shape,a,d);return this.compileAndRun(f,[i])},u.prototype.abs=function(i){var a=new gn(i.shape,"return abs(x);");return this.compileAndRun(a,[i])},u.prototype.complexAbs=function(i){var a=this.texData.get(i.dataId),d=new th(i.shape),f=[this.makeComplexComponentTensorHandle(i,a.complexTensors.real),this.makeComplexComponentTensorHandle(i,a.complexTensors.imag)];return this.compileAndRun(d,f)},u.prototype.sigmoid=function(i){var a=new gn(i.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(a,[i])},u.prototype.softplus=function(i){var a=new gn(i.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(a,[i])},u.prototype.sin=function(i){var a=new gn(i.shape,sg);return this.compileAndRun(a,[i])},u.prototype.cos=function(i){var a=new gn(i.shape,Ff);return this.compileAndRun(a,[i])},u.prototype.tan=function(i){var a=new gn(i.shape,"return tan(x);");return this.compileAndRun(a,[i])},u.prototype.asin=function(i){var a=new gn(i.shape,"return asin(x);");return this.compileAndRun(a,[i])},u.prototype.acos=function(i){var a=new gn(i.shape,"return acos(x);");return this.compileAndRun(a,[i])},u.prototype.atan=function(i){var a=new gn(i.shape,hh);return this.compileAndRun(a,[i])},u.prototype.atan2=function(i,a){var d=new Hn(ru,i.shape,a.shape);return this.compileAndRun(d,[i,a])},u.prototype.sinh=function(i){var a=new gn(i.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(a,[i])},u.prototype.cosh=function(i){var a=new gn(i.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(a,[i])},u.prototype.tanh=function(i){var a=new gn(i.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(a,[i])},u.prototype.asinh=function(i){var a=new gn(i.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(a,[i])},u.prototype.acosh=function(i){var a=new gn(i.shape,xp),d=a.getCustomSetupFunc();return this.compileAndRun(a,[i],null,d)},u.prototype.atanh=function(i){var a=new gn(i.shape,hd),d=a.getCustomSetupFunc();return this.compileAndRun(a,[i],null,d)},u.prototype.erf=function(i){var a=new gn(i.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(a,[i])},u.prototype.step=function(i,a){var d=new gn(i.shape,function ea(u){return void 0===u&&(u=0),kr+"\n    return x > 0.0 ? 1.0 : float("+u+");\n  "}(a));return this.compileAndRun(d,[i])},u.prototype.conv2dWithIm2Row=function(i,a,d){var C=d.outWidth,O=d.outHeight,U=d.filterWidth*d.filterHeight*d.inChannels,j=O*C,q=[U,j],K=i.squeeze([0]),re=a.reshape([U,-1]),se=new hu(q,K.shape,d),oe=this.compileAndRun(se,[K],this.makePackedTensor(q)),de=new dc(oe.shape,re.shape,[j,d.outChannels],!0,!1),xe=this.compileAndRun(de,[oe,re],this.makePackedTensor(de.outputShape));return!1===ve.get("WEBGL_LAZILY_UNPACK")&&(xe=this.unpackTensor(xe)),xe.reshape([1,O,C,d.outChannels])},u.prototype.conv2d=function(i,a,d){if(ve.get("WEBGL_CONV_IM2COL")&&1===i.shape[0])return this.conv2dWithIm2Row(i,a,d);var f=new qc(d);return this.compileAndRun(f,[i,a])},u.prototype.conv2dDerInput=function(i,a,d){var f=new Gc(d);return this.compileAndRun(f,[i,a])},u.prototype.conv2dDerFilter=function(i,a,d){var f=new Zu(d);return this.compileAndRun(f,[i,a])},u.prototype.depthwiseConv2D=function(i,a,d){var f=new ou(d);return this.compileAndRun(f,[i,a])},u.prototype.depthwiseConv2DDerInput=function(i,a,d){var f=new Ha(d);return this.compileAndRun(f,[i,a])},u.prototype.depthwiseConv2DDerFilter=function(i,a,d){var f=new rh(d);return this.compileAndRun(f,[i,a])},u.prototype.maxPool=function(i,a){var d=new zo(a,"max",!1),f=this.makeOutputArray(d.outputShape,i.dtype);return this.compileAndRun(d,[i],f)},u.prototype.avgPool=function(i,a){var d=new zo(a,"avg",!1),f=this.makeOutputArray(d.outputShape,"float32");return this.compileAndRun(d,[i],f)},u.prototype.maxPoolBackprop=function(i,a,d,f){var y=new zo(f,"max",!0),w=this.compileAndRun(y,[a]),C=new cc(f),O=this.makeOutputArray(C.outputShape,a.dtype),U=this.compileAndRun(C,[i,w],O);return w.dispose(),U},u.prototype.avgPoolBackprop=function(i,a,d){var f=new ap(d),y=this.makeOutputArray(f.outputShape,a.dtype);return this.compileAndRun(f,[i],y)},u.prototype.cast=function(i,a){return fo(i,a,this)},u.prototype.reshape=function(i,a){return this.texData.get(i.dataId).isPacked&&!Al(i.shape,a)?this.packedReshape(i,a):qd(i,a)},u.prototype.resizeBilinear=function(i,a,d,f){var y=new Rr(i.shape,a,d,f);return this.compileAndRun(y,[i])},u.prototype.resizeBilinearBackprop=function(i,a,d){var f=new ts(i,a,d);return this.compileAndRun(f,[i])},u.prototype.resizeNearestNeighbor=function(i,a,d,f){var y=new vo(i.shape,a,d,f);return this.compileAndRun(y,[i])},u.prototype.resizeNearestNeighborBackprop=function(i,a,d){var f=new fc(i,a,d);return this.compileAndRun(f,[i])},u.prototype.multinomial=function(i,a,d,f){var y=a?i:Kn(i),O=new Vi(y.shape[0],y.shape[1],d),U=this.makeOutputArray(O.outputShape,"int32"),j=O.getCustomSetupFunc(f);return this.compileAndRun(O,[y],U,j)},u.prototype.oneHot=function(i,a,d,f){var y=new Uo(i.size,a,d,f);return this.compileAndRun(y,[i])},u.prototype.nonMaxSuppression=function(i,a,d,f,y){return vi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Us(i.dataSync(),a.dataSync(),d,f,y)},u.prototype.cropAndResize=function(i,a,d,f,y,w){var C=new vl(i.shape,a.shape,f,y,w);return this.compileAndRun(C,[i,a,d])},u.prototype.depthToSpace=function(i,a,d){le(a>1,"blockSize should be > 1 for depthToSpace, but was: "+a);var f=i.shape[0],y=("NHWC"===d?i.shape[1]:i.shape[2])*a,w=("NHWC"===d?i.shape[2]:i.shape[3])*a,C=("NHWC"===d?i.shape[3]:i.shape[1])/(a*a),O=new gp("NHWC"===d?[f,y,w,C]:[f,C,y,w],a,d);return this.compileAndRun(O,[i])},u.prototype.split=function(i,a,d){return sp(i,a,d)},u.prototype.scatterND=function(i,a,d){var f=sr(0,i,d),y=f.sliceRank,w=f.numUpdates,C=f.sliceSize,O=f.strides,U=f.outputSize,j=[U/C,C],q=i.reshape([w,y]),K=a.reshape([w,C]);if(0===U)return qd(vr([]),d);var re=st(0),se=new ui(w,y,q.rank,K.rank,O,j);return this.compileAndRun(se,[K,q,re]).reshape(d)},u.prototype.sparseToDense=function(i,a,d,f){var y=sr(0,i,d),j=new ui(y.numUpdates,y.sliceRank,i.rank,a.rank,y.strides,[y.outputSize,1],!1);return this.compileAndRun(j,[a,i,f]).reshape(d)},u.prototype.fft=function(i){return this.fftImpl(i,!1)},u.prototype.ifft=function(i){return this.fftImpl(i,!0)},u.prototype.fftImpl=function(i,a){var d=this.texData.get(i.dataId),f=new ma("return real * expR - imag * expI;",i.shape,a),y=new ma("return real * expI + imag * expR;",i.shape,a),w=[this.makeComplexComponentTensorHandle(i,d.complexTensors.real),this.makeComplexComponentTensorHandle(i,d.complexTensors.imag)],C=this.compileAndRun(f,w),O=this.compileAndRun(y,w),U=this.complex(C,O).as2D(i.shape[0],i.shape[1]);return C.dispose(),O.dispose(),U},u.prototype.gatherND=function(i,a){var d=a.shape,f=d[d.length-1],y=dl(i,a),w=y[0],C=y[1],O=y[2],U=y[3],j=a.reshape([C,f]),q=i.reshape([i.size/O,O]),K=new tg(f,U,[C,O]);return this.compileAndRun(K,[q,j]).reshape(w)},u.prototype.makeOutputArray=function(i,a){return Tt.make(i,{},a)},u.prototype.makePackedTensor=function(i){var a=Tt.make(i,{});return this.texData.get(a.dataId).isPacked=!0,a},u.prototype.unpackTensor=function(i){var a=new Cp(i.shape);return this.compileAndRun(a,[i])},u.prototype.getBatchDim=function(i,a){return void 0===a&&(a=2),Ie(i.slice(0,i.length-a))},u.prototype.getRowsCols=function(i){if(0===i.length)throw Error("Cannot get rows and columns of an empty shape array.");return[i.length>1?i[i.length-2]:1,i[i.length-1]]},u.prototype.packedReshape=function(i,a){var d=i.reshape([this.getBatchDim(i.shape)].concat(this.getRowsCols(i.shape))),f=[this.getBatchDim(a)].concat(this.getRowsCols(a)),y=new pc(f,d.shape);return this.compileAndRun(y,[d],this.makePackedTensor(f)).reshape(a)},u.prototype.compileAndRun=function(i,a,d,f,y){var w=this;if(void 0===y&&(y=!0),null==d&&(d=this.makeOutputArray(i.outputShape,a[0].dtype)),0===d.size)return this.texData.get(d.dataId).values=St(d.dtype,0),d;var C=a.map(function(Se){if("complex64"===Se.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var ke=w.texData.get(Se.dataId);if(null==ke.texture&&(ke.isPacked||!i.usesPackedTextures)&&Ie(Se.shape)<=ve.get("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:Se.shape,texData:null,isUniform:!0,uniformValues:w.readSync(Se.dataId)};if(ke.isPacked!==!!i.usesPackedTextures){var Ke=void 0,Ge=void 0;ke.isPacked?(Ke=new Cp(Se.shape),Ge=w.compileAndRun(Ke,[Se])):(Ke=new Ea(Se.shape),Ge=w.compileAndRun(Ke,[Se],w.makePackedTensor(Se.shape))),ke=w.texData.get(Ge.dataId),Se=Ge}return w.uploadToGPU(Se.dataId),{shape:Se.shape,texData:ke,isUniform:!1}});this.uploadToGPU(d.dataId);var O,U={shape:d.shape,texData:this.texData.get(d.dataId),isUniform:!1},j=function Yr(u,i,a){var d="";i.concat(a).forEach(function(C){d+=C.shape+"_"+(C.isUniform?"uniform":C.texData.texShape)});var f=u.userCode,y=(!0===u.supportsBroadcasting).toString();return u.constructor.name+"_"+y+"_"+d+"_"+f}(i,C,U),q=this.getAndSaveBinary(j,function(){return function kl(u,i,a,d){for(var f=i.userCode,y=a.map(function(re,se){return{name:i.variableNames[se],shapeInfo:{logicalShape:re.shape,texShape:re.isUniform?null:re.texData.texShape,isUniform:re.isUniform,isPacked:!re.isUniform&&re.texData.isPacked}}}),w=y.map(function(re){return re.shapeInfo}),C={logicalShape:d.shape,texShape:d.texData.texShape,isUniform:!1,isPacked:d.texData.isPacked},O=Kc(y,C,f,!0===i.supportsBroadcasting,i.usesPackedTextures),U=u.createProgram(O),j={},q=0;q<i.variableNames.length;q++){var K=i.variableNames[q];j[K]=u.getUniformLocation(U,K,!1)}return{program:i,source:O,webGLProgram:U,uniformLocations:j,gpgpu:u,inShapeInfos:w,outShapeInfo:C}}(w.gpgpu,i,C,U)}),K=null!=this.activeTimers;if(K&&(O=this.startTimer()),function jr(u,i,a,d){$t(u.inShapeInfos,i),$t([u.outShapeInfo],[a]);var f=a.texData.texture,y=a.texData.texShape,w=u.gpgpu;a.texData.isPacked?w.setOutputPackedMatrixTexture(f,y[0],y[1]):w.setOutputMatrixTexture(f,y[0],y[1]),w.setProgram(u.webGLProgram),i.forEach(function(C,O){var j=u.uniformLocations[u.program.variableNames[O]];if(null!=j){if(C.isUniform){if(1===Ie(C.shape))w.gl.uniform1f(j,C.uniformValues[0]);else{var q=C.uniformValues;q instanceof Float32Array||(q=new Float32Array(q)),w.gl.uniform1fv(j,q)}return}w.setInputMatrixTexture(C.texData.texture,j,O)}}),d?.(w,u.webGLProgram),w.executeProgram()}(q,C,U,f),ve.get("WEBGL_PAGING_ENABLED")&&y&&this.numBytesInGPU>this.NUM_BYTES_BEFORE_PAGING)for(var re=this.numBytesInGPU-this.NUM_BYTES_BEFORE_PAGING;re>0&&this.lruDataGPU.length>0;){var se=this.lruDataGPU.shift(),oe=this.texData.get(se);re-=this.computeBytes(oe.shape,oe.dtype),this.read(se)}return K&&(O=this.endTimer(O),this.activeTimers.push({name:i.constructor.name,query:this.getQueryTime(O)})),d},u.prototype.getAndSaveBinary=function(i,a){return i in this.binaryCache||(this.binaryCache[i]=a()),this.binaryCache[i]},u.prototype.getTextureManager=function(){return this.textureManager},u.prototype.dispose=function(){if(!this.disposed){for(var i in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[i].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixels2DContext&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},u.prototype.floatPrecision=function(){var i=this;return Sn(function(){return i.abs(st(1e-8)).get()>0?32:16})},u.prototype.uploadToGPU=function(i){var a=this.texData.get(i),d=a.shape,f=a.values,C=a.usage,O=a.isPacked;if(null==a.texture){var U,j=null!=this.activeTimers;j&&(U=performance.now());var q=id(d,O);a.texShape=q;var K=this.acquireTexture(i,q,C,O);if(a.texture=K,null!=f){if(O){var re=Ie(d.slice(0,d.length-2));this.gpgpu.uploadMatrixToPackedTexture(K,re,d.length>1?d[d.length-2]:1,d[d.length-1],Mp(f))}else this.gpgpu.uploadMatrixToTexture(K,q[0],q[1],Mp(f));a.values=null,j&&(this.uploadWaitMs+=performance.now()-U)}}else ve.get("WEBGL_PAGING_ENABLED")&&this.lruDataGPU.indexOf(i)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(i),1),this.lruDataGPU.push(i))},u.prototype.convertAndCacheOnCPU=function(i,a){var d=this.delayedStorage,f=this.texData.get(i),y=f.texture,C=f.dtype;return d&&null!=y&&(this.releaseTexture(i,y,f.texShape,f.usage,f.isPacked),f.texture=null,f.texShape=null),f.usage=_o.UPLOAD,null!=a&&(f.values=function fg(u,i){if("float32"===i||"complex64"===i)return u;if("int32"===i||"bool"===i){for(var a="int32"===i?new Int32Array(u.length):new Uint8Array(u.length),d=0;d<a.length;++d)a[d]=Math.round(u[d]);return a}throw new Error("Unknown dtype "+i)}(a,C)),f.values},u.prototype.releaseTexture=function(i,a,d,f,y){var w=this.texData.get(i),C=w.shape,O=w.dtype;if(ve.get("WEBGL_PAGING_ENABLED")){var U=this.lruDataGPU.indexOf(i);U>=0&&this.lruDataGPU.splice(U,1)}this.numBytesInGPU-=this.computeBytes(C,O),this.textureManager.releaseTexture(a,d,f,y)},u.prototype.acquireTexture=function(i,a,d,f){var y=this.texData.get(i),w=y.shape,C=y.dtype;return ve.get("WEBGL_PAGING_ENABLED")&&this.lruDataGPU.push(i),this.numBytesInGPU+=this.computeBytes(w,C),this.textureManager.acquireTexture(a,d,f)},u.prototype.computeBytes=function(i,a){return Ie(i)*Nt(a)},u}();function Mp(u,i){return u instanceof Float32Array?u:new Float32Array(u)}ve.get("IS_BROWSER")&&ve.registerBackend("webgl",function(){return new pg},2,Gt);var zl=Te({abs_:function u0(u){var i=ae(u,"x","abs");return"complex64"===i.dtype?ve.engine.runKernel(function(a){return a.complexAbs(i)},{$x:i}):ve.engine.runKernel(function(a){return a.abs(i)},{$x:i},function(a){return{$x:function(){return a.mulStrict(i.toFloat().step(-1))}}})}}),Ry=Te({acos_:function Ny(u){var i=ae(u,"x","acos");return ve.engine.runKernel(function(a){return a.acos(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(st(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),ky=Te({acosh_:function p0(u){var i=ae(u,"x","acosh");return ve.engine.runKernel(function(a){return a.acosh(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(i.toFloat().square().sub(st(1)).sqrt())}}})}}),Fy=Te({asin_:function gg(u){var i=ae(u,"x","asin");return ve.engine.runKernel(function(a){return a.asin(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(st(1).sub(i.toFloat().square()).sqrt())}}})}}),Ly=Te({asinh_:function Py(u){var i=ae(u,"x","asinh");return ve.engine.runKernel(function(a){return a.asinh(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(st(1).add(i.toFloat().square()).sqrt())}}})}}),By=Te({atan_:function Oy(u){var i=ae(u,"x","atan");return ve.engine.runKernel(function(a){return a.atan(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(st(1).add(i.toFloat().square()))}}})}}),Vy=Te({atanh_:function f0(u){var i=ae(u,"x","atanh");return ve.engine.runKernel(function(a){return a.atanh(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(st(1).sub(i.toFloat().square()))}}})}}),Wf=Te({ceil_:function Dy(u){var i=ae(u,"x","ceil");return ve.engine.runKernel(function(a){return a.ceil(i)},{$x:i},function(a){return{$x:function(){return Nn(a)}}})}}),g0=Te({clipByValue_:function c0(u,i,a){var d=ae(u,"x","clipByValue");return le(i<=a,"Error in clip: min ("+i+") must be less than or equal to max ("+a+")."),ve.engine.runKernel(function(f){return f.clip(d,i,a)},{$x:d},function(f){return{$x:function(){return f.where(d.greaterEqual(st(i)).logicalAnd(d.lessEqual(st(a))),Nn(f))}}})}}),yg=Te({cos_:function Ul(u){var i=ae(u,"x","cos");return ve.engine.runKernel(function(a){return a.cos(i)},{$x:i},function(a){return{$x:function(){return i.toFloat().sin().neg().mulStrict(a)}}})}}),vg=Te({cosh_:function bd(u){var i=ae(u,"x","cosh");return ve.engine.runKernel(function(a){return a.cosh(i)},{$x:i},function(a){return{$x:function(){return i.toFloat().sinh().mulStrict(a)}}})}}),Uy=Te({erf_:function m0(u){var i=ae(u,"x","erf");return le("int32"===i.dtype||"float32"===i.dtype,"Input dtype must be `int32` or `float32`."),"int32"===i.dtype&&(i=i.toFloat()),ve.engine.runKernel(function(a){return a.erf(i)},{$x:i},function(a){return{$x:function(){return a.mulStrict(st(2/Math.sqrt(Math.PI)).mul(i.square().neg().exp()))}}})}}),kp=Te({exp_:function Ih(u){var i=ae(u,"x","exp");return ve.engine.runKernel(function(a,d){return d(a.exp(i))},{$x:i},function(a,d){var f=d[0];return{$x:function(){return a.mulStrict(f)}}})}}),jl=Te({expm1_:function a0(u){var i=ae(u,"x","expm1");return ve.engine.runKernel(function(a){return a.expm1(i)},{$x:i},function(a){return{$x:function(){return a.mulStrict(i.exp())}}})}}),Mh=Te({floor_:function Np(u){var i=ae(u,"x","floor");return ve.engine.runKernel(function(a){return a.floor(i)},{$x:i},function(a){return{$x:function(){return Nn(a)}}})}}),bg=Te({log_:function l0(u){var i=ae(u,"x","log");return ve.engine.runKernel(function(a){return a.log(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(i.toFloat())}}})}}),wg=Te({log1p_:function Ty(u){var i=ae(u,"x","log1p");return ve.engine.runKernel(function(a){return a.log1p(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(i.add(st(1)))}}})}}),Gf=Te({logSigmoid_:function h0(u){var i=ae(u,"x","logSigmoid");return ve.engine.runKernel(function(a){return a.softplus(i.neg()).neg()},{$x:i},function(a){return{$x:function(){return a.mulStrict(i.neg().sigmoid())}}})}}),qf=Te({neg_:function Sy(u){var i=ae(u,"x","neg");return ve.engine.runKernel(function(a){return a.neg(i)},{$x:i},function(a){return{$x:function(){return a.neg()}}})}}),Nh=Te({reciprocal_:function Th(u){var i=ae(u,"x","reciprocal");return ve.engine.runKernel(function(a){return a.reciprocal(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(i.square().neg())}}})}}),xg=Te({round_:function Pp(u){var i=ae(u,"x","round");return ve.engine.runKernel(function(a){return a.round(i)},{$x:i},function(a){return{$x:function(){return Nn(a)}}})}}),Fp=Te({rsqrt_:function Hf(u){var i=ae(u,"x","rsqrt");return ve.engine.runKernel(function(a){return a.rsqrt(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(i.pow(st(1.5)).mul(st(2))).neg()}}})}}),Lp=Te({sigmoid_:function d0(u){var i=ae(u,"x","sigmoid");return ve.engine.runKernel(function(a,d){return d(a.sigmoid(i))},{$x:i},function(a,d){var f=d[0];return{$x:function(){return a.mulStrict(f.mul(st(1).sub(f)))}}})}}),Kf=Te({sign_:function Iy(u){var i=ae(u,"x","sign");return ve.engine.runKernel(function(a){return a.sign(i)},{$x:i},function(a){return{$x:function(){return Nn(a)}}})}}),zy=Te({sin_:function My(u){var i=ae(u,"x","sin");return ve.engine.runKernel(function(a){return a.sin(i)},{$x:i},function(a){return{$x:function(){return i.toFloat().cos().mulStrict(a)}}})}}),Zf=Te({sinh_:function $f(u){var i=ae(u,"x","sinh");return ve.engine.runKernel(function(a){return a.sinh(i)},{$x:i},function(a){return{$x:function(){return i.toFloat().cosh().mulStrict(a)}}})}}),jy=Te({softplus_:function Ah(u){var i=ae(u,"x","softplus");return ve.engine.runKernel(function(a){return a.softplus(i)},{$x:i},function(a){return{$x:function(){return a.mulStrict(i.sigmoid())}}})}}),Hy=Te({sqrt_:function Ay(u){var i=ae(u,"x","sqrt");return ve.engine.runKernel(function(a){return a.sqrt(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(i.toFloat().sqrt().mul(st(2)))}}})}}),$y=Te({square_:function mg(u){var i=ae(u,"x","square");return ve.engine.runKernel(function(a){return a.square(i)},{$x:i},function(a){return{$x:function(){return a.mulStrict(i.toFloat().mul(st(2)))}}})}}),Wy=Te({step_:function Cu(u,i){void 0===i&&(i=0);var a=ae(u,"x","step");return ve.engine.runKernel(function(d){return d.step(a,i)},{$x:a},function(d){return{$x:function(){return Nn(d)}}})}}),Oh=Te({tan_:function Rp(u){var i=ae(u,"x","tan");return ve.engine.runKernel(function(a){return a.tan(i)},{$x:i},function(a){return{$x:function(){return a.divStrict(i.cos().square())}}})}}),Bp=Te({tanh_:function _g(u){var i=ae(u,"x","tanh");return ve.engine.runKernel(function(a,d){return d(a.tanh(i))},{$x:i},function(a,d){var f=d[0];return{$x:function(){return st(1).sub(f.square()).mulStrict(a)}}})}});function Yf(u){return null==u?null:0===u.rank?u.as1D():1===u.rank?u:2===u.rank?u.as4D(1,1,u.shape[0],u.shape[1]):3===u.rank?u.as4D(1,u.shape[0],u.shape[1],u.shape[2]):u}var Ky=Te({batchNormalization2d_:function Gy(u,i,a,d,f,y){void 0===d&&(d=.001);var w,C,O=ae(u,"x","batchNormalization"),U=ae(i,"mean","batchNormalization"),j=ae(a,"variance","batchNormalization");return null!=f&&(w=ae(f,"scale","batchNormalization")),null!=y&&(C=ae(y,"offset","batchNormalization")),le(2===O.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+O.rank+"."),le(2===U.rank||1===U.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+U.rank+"."),le(2===j.rank||1===j.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+j.rank+"."),null!=w&&le(2===w.rank||1===w.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+w.rank+"."),null!=C&&le(2===C.rank||1===C.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+C.rank+"."),Vp(O,U,j,d,w,C)}}),Eg=Te({batchNormalization3d_:function os(u,i,a,d,f,y){void 0===d&&(d=.001);var w,C,O=ae(u,"x","batchNormalization"),U=ae(i,"mean","batchNormalization"),j=ae(a,"variance","batchNormalization");return null!=f&&(w=ae(f,"scale","batchNormalization")),null!=y&&(C=ae(y,"offset","batchNormalization")),le(3===O.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+O.rank+"."),le(3===U.rank||1===U.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+U.rank+"."),le(3===j.rank||1===j.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+j.rank+"."),null!=w&&le(3===w.rank||1===w.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+w.rank+"."),null!=C&&le(3===C.rank||1===C.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+C.rank+"."),Vp(O,U,j,d,w,C)}}),$o=Te({batchNormalization4d_:function qy(u,i,a,d,f,y){void 0===d&&(d=.001);var w,C,O=ae(u,"x","batchNormalization"),U=ae(i,"mean","batchNormalization"),j=ae(a,"variance","batchNormalization");return null!=f&&(w=ae(f,"scale","batchNormalization")),null!=y&&(C=ae(y,"offset","batchNormalization")),le(4===O.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+O.rank+"."),le(4===U.rank||1===U.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+U.rank+"."),le(4===j.rank||1===j.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+j.rank+"."),null!=w&&le(4===w.rank||1===w.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+w.rank+"."),null!=C&&le(4===C.rank||1===C.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+C.rank+"."),Vp(O,U,j,d,w,C)}}),Vp=Te({batchNormalization_:function Mi(u,i,a,d,f,y){void 0===d&&(d=.001);var w,C,O,U=ae(u,"x","batchNormalization"),j=ae(i,"mean","batchNormalization"),q=ae(a,"variance","batchNormalization");return null!=f&&(w=ae(f,"scale","batchNormalization")),null!=y&&(C=ae(y,"offset","batchNormalization")),le(j.rank===q.rank,"Batch normalization gradient requires mean and variance to have equal ranks."),le(null==C||j.rank===C.rank,"Batch normalization gradient requires mean and offset to have equal ranks."),le(null==w||j.rank===w.rank,"Batch normalization gradient requires mean and scale to have equal ranks."),O=0===U.rank||1===U.rank?U.as4D(1,1,1,U.size):2===U.rank?U.as4D(1,1,U.shape[0],U.shape[1]):3===U.rank?U.as4D(1,U.shape[0],U.shape[1],U.shape[2]):U,ve.engine.runKernel(function(K){return K.batchNormalization(O,Yf(j),Yf(q),d,Yf(w),Yf(C))},{$x:U,$mean:j,$variance:q,$scale:w,$offset:C},function(K){var re=w??st(1),se=Lr(j.shape,O.shape),oe=[];if(1===j.rank){for(var de=0;de<O.shape.length-1;++de)oe.push(O.shape[de]);oe.push(1)}var xe=U.sub(j),Se=K.mul(re),ke=Fp(q.add(st(d))),Ke=ke.mul(ke).mul(ke).mul(st(-.5));return{$x:function(){return 1===j.rank?K.mul(Xa(ke.as4D(1,1,1,j.shape[0]),oe)).mul(re).reshape(U.shape):K.mul(ke).mul(re).reshape(U.shape)},$mean:function(){var Ge=ke.mul(st(-1)).mul(Se);return 1===j.rank&&(Ge=Ge.sum(se)),Ge.reshape(j.shape)},$variance:function(){var Ge=Ke.mul(xe).mul(Se);return 1===j.rank&&(Ge=Ge.sum(se)),Ge.reshape(j.shape)},$scale:function(){var Ge=xe.mul(ke),rt=K.mul(Ge);return 1===j.rank&&(rt=rt.sum(se)),rt.reshape(j.shape)},$offset:function(){var Ge=K;return 1===j.rank&&(Ge=Ge.sum(se)),Ge.reshape(j.shape)}}}).reshape(U.shape)}});function wd(u,i,a,d,f,y,w){void 0===w&&(w="channelsLast");var C,O=Zy(i),U=O[0],j=O[1];if("channelsLast"===w)C=[U,j,u[3],u[3]];else{if("channelsFirst"!==w)throw new Error("Unknown dataFormat "+w);C=[U,j,u[1],u[1]]}return Up(u,C,a,d,f,y,!1,w)}function Up(u,i,a,d,f,y,w,C){void 0===w&&(w=!1),void 0===C&&(C="channelsLast");var O=[-1,-1,-1,-1],U=O[0],j=O[1],q=O[2],K=O[3];if("channelsLast"===C)U=u[0],j=u[1],q=u[2],K=u[3];else{if("channelsFirst"!==C)throw new Error("Unknown dataFormat "+C);U=u[0],K=u[1],j=u[2],q=u[3]}var re,se=i[0],oe=i[1],de=i[3],xe=Zy(a),Se=xe[0],ke=xe[1],Ke=Zy(d),Ge=Ke[0],rt=Ke[1],ht=y0(se,Ge),At=y0(oe,rt),yt=function zp(u,i,a,d,f,y,w,C){var O,U,j;if("number"==typeof u){O={top:u,bottom:u,left:u,right:u,type:0===u?"VALID":"NUMBER"};var q=function _0(u,i,a,d,f,y){null==f&&(f=function Cg(u,i,a,d){void 0===d&&(d=1);var f=y0(i,d);return Math.floor((u[0]*(a-1)-a+f)/2)}(u,i,d));var C=u[1],O=dr((u[0]-i+2*f)/d+1,y);le(Ye(O),"The output # of rows ("+O+") must be an integer. Change the stride and/or zero pad parameters");var U=dr((C-i+2*f)/d+1,y);return le(Ye(U),"The output # of columns ("+U+") must be an integer. Change the stride and/or zero pad parameters"),[O,U,a]}([i,a,1],y,1,d,u,C);U=q[0],j=q[1]}else if("same"===u){var K=((U=Math.ceil(i/d))-1)*d+y-i,re=((j=Math.ceil(a/f))-1)*f+w-a,se=Math.floor(K/2),oe=K-se,de=Math.floor(re/2);O={top:se,bottom:oe,left:de,right:re-de,type:"SAME"}}else{if("valid"!==u)throw Error("Unknown padding parameter: "+u);O={top:0,bottom:0,left:0,right:0,type:"VALID"},U=Math.ceil((i-y+1)/d),j=Math.ceil((a-w+1)/f)}return{padInfo:O,outHeight:U,outWidth:j}}(f,j,q,Se,ke,ht,At,y),_n=yt.outHeight,On=yt.outWidth,Un=w?de*K:de;return"channelsFirst"===C?re=[U,Un,_n,On]:"channelsLast"===C&&(re=[U,_n,On,Un]),{batchSize:U,dataFormat:C,inHeight:j,inWidth:q,inChannels:K,outHeight:_n,outWidth:On,outChannels:Un,padInfo:yt.padInfo,strideHeight:Se,strideWidth:ke,filterHeight:se,filterWidth:oe,effectiveFilterHeight:ht,effectiveFilterWidth:At,dilationHeight:Ge,dilationWidth:rt,inShape:u,outShape:re,filterShape:i}}function Zy(u){return"number"==typeof u?[u,u]:u}function y0(u,i){return i<=1?u:u+(u-1)*(i-1)}function dr(u,i){if(!i)return u;switch(i){case"round":return Math.round(u);case"ceil":return Math.ceil(u);case"floor":return Math.floor(u);default:throw new Error("Unknown roundingMode "+i)}}function Su(u){var i=Zy(u);return 1===i[0]&&1===i[1]}function Cc(u,i){return Su(u)||Su(i)}var Yy=Te({matMul_:function Sg(u,i,a,d){void 0===a&&(a=!1),void 0===d&&(d=!1);var f=ae(u,"a","matMul"),y=ae(i,"b","matMul"),w=a?f.shape[f.rank-2]:f.shape[f.rank-1],C=d?y.shape[y.rank-1]:y.shape[y.rank-2],O=a?f.shape[f.rank-1]:f.shape[f.rank-2],U=d?y.shape[y.rank-2]:y.shape[y.rank-1],j=f.shape.slice(0,-2),q=y.shape.slice(0,-2),K=Ie(j),re=Ie(q);le(f.rank>=2&&y.rank>=2&&f.rank===y.rank,"Error in matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+y.rank+"."),le(Ue(j,q),"Error in matMul: outer dimensions ("+j+") and ("+q+") of Tensors with shapes "+f.shape+" and "+y.shape+" must match."),le(w===C,"Error in matMul: inner shapes ("+w+") and ("+C+") of Tensors with shapes "+f.shape+" and "+y.shape+" and transposeA="+a+" and transposeB="+d+" must match.");var se=f.shape.slice(0,-2).concat([O,U]),oe=a?f.as3D(K,w,O):f.as3D(K,O,w),de=d?y.as3D(re,U,C):y.as3D(re,C,U);return ve.engine.runKernel(function(xe){return xe.batchMatMul(oe,de,a,d)},{$a:oe,$b:de},function(xe){return a||d?!a&&d?{$a:function(){return xe.matMul(de.toFloat(),!1,!1)},$b:function(){return xe.matMul(oe.toFloat(),!0,!1)}}:a&&!d?{$a:function(){return de.toFloat().matMul(xe,!1,!0)},$b:function(){return oe.toFloat().matMul(xe,!1,!1)}}:{$a:function(){return de.toFloat().matMul(xe,!0,!0)},$b:function(){return xe.matMul(oe.toFloat(),!0,!0)}}:{$a:function(){return xe.matMul(de.toFloat(),!1,!0)},$b:function(){return oe.toFloat().matMul(xe,!0,!1)}}}).reshape(se)}}),Xy=Te({dot_:function Dg(u,i){var a=ae(u,"t1","dot"),d=ae(i,"t2","dot");le(!(1!==a.rank&&2!==a.rank||1!==d.rank&&2!==d.rank),"Error in dot: inputs must all be rank 1 or 2, but got ranks "+a.rank+" and "+d.rank+".");var f=1===a.rank?a.size:a.shape[1],y=1===d.rank?d.size:d.shape[0];return le(f===y,"Error in dot: inner dimensions of inputs must match, but got "+f+" and "+y+"."),1===a.rank&&1===d.rank?a.as2D(1,-1).matMul(d.as2D(-1,1)).asScalar():1===a.rank&&2===d.rank?a.as2D(1,-1).matMul(d.as2D(d.shape[0],d.shape[1])).as1D():2===a.rank&&1===d.rank?a.matMul(d.as2D(-1,1)).as1D():a.matMul(d.as2D(d.shape[0],d.shape[1]))}}),Qy=Te({outerProduct_:function Hl(u,i){var a=ae(u,"v1","outerProduct"),d=ae(i,"v2","outerProduct");return le(1===a.rank&&1===d.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+a.rank+" and "+d.rank+"."),a.as2D(-1,1).matMul(d.as2D(1,-1))}});function Ph(u,i,a,d,f,y){le(u.length===i.rank,"Length of inShape ("+u.length+") and rank of dy ("+i.rank+") must match");var w=u,C=i,O=!1;3===i.rank&&(O=!0,C=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]),w=[1,u[0],u[1],u[2]]);var U=w[3],j=C.shape[3];le(4===w.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+w.length+"."),le(4===C.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+C.rank),le(4===a.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+a.rank),le(U===a.shape[2],"Error in conv2dDerInput: depth of input ("+U+") must match input depth for filter "+a.shape[2]+"."),le(j===a.shape[3],"Error in conv2dDerInput: depth of output ("+j+") must match output depth for filter "+a.shape[3]+"."),null!=y&&le(Ye(f),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+f+".");var q=Up(w,a.shape,d,1,f,y),K=ve.engine.runKernel(function(re){return re.conv2dDerInput(C,a,q)},{dy4D:C,filter:a},function(re){return{dy4D:function(){return Ed(re,a,d,f,"NHWC",1,y)},filter:function(){return Mg(re,C,a.shape,d,f,y)}}});return O?K.as3D(K.shape[1],K.shape[2],K.shape[3]):K}function Jy(u,i,a,d,f,y){var w=u;3===u.rank&&(w=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]));var C=i;3===C.rank&&(C=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),le(4===w.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+w.shape+"."),le(4===C.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+C.shape+"."),le(4===a.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+a+"."),le(w.shape[3]===a[2],"Error in conv2dDerFilter: depth of input "+w.shape[3]+") must match input depth in filter ("+a[2]+"."),le(C.shape[3]===a[3],"Error in conv2dDerFilter: depth of dy ("+C.shape[3]+") must match output depth for filter ("+a[3]+")."),null!=y&&le(Ye(f),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+f+".");var O=Up(w.shape,a,d,1,f,y);return ve.engine.runKernel(function(U){return U.conv2dDerFilter(w,C,O)},{x4D:w,dy4D:C})}var Ag=Te({conv1d_:function Xf(u,i,a,d,f,y,w){void 0===f&&(f="NWC"),void 0===y&&(y=1);var C=ae(u,"x","conv1d"),O=ae(i,"filter","conv1d"),U=C,j=!1;2===C.rank&&(j=!0,U=C.as3D(1,C.shape[0],C.shape[1])),le(3===U.rank,"Error in conv1d: input must be rank 3, but got rank "+U.rank+"."),le(3===O.rank,"Error in conv1d: filter must be rank 3, but got rank "+O.rank+"."),null!=w&&le(Ye(d),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+w+" but got pad "+d+"."),le(U.shape[2]===O.shape[1],"Error in conv1d: depth of input ("+U.shape[2]+") must match input depth for filter "+O.shape[1]+"."),le(Cc(a,y),"Error in conv1D: Either stride or dilation must be 1. Got stride "+a+" and dilation '"+y+"'"),le("NWC"===f,"Error in conv1d: got dataFormat of "+f+" but only NWC is currently supported.");var q=O.as4D(1,O.shape[0],O.shape[1],O.shape[2]),K=U.as4D(U.shape[0],1,U.shape[1],U.shape[2]),re=Ed(K,q,[1,a],d,"NHWC",[1,y],w);return j?re.as2D(re.shape[2],re.shape[3]):re.as3D(re.shape[0],re.shape[2],re.shape[3])}}),Ed=Te({conv2d_:function v0(u,i,a,d,f,y,w){void 0===f&&(f="NHWC"),void 0===y&&(y=[1,1]);var C=ae(u,"x","conv2d"),O=ae(i,"filter","conv2d"),U=C,j=!1;3===C.rank&&(j=!0,U=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),le(4===U.rank,"Error in conv2d: input must be rank 4, but got rank "+U.rank+"."),le(4===O.rank,"Error in conv2d: filter must be rank 4, but got rank "+O.rank+"."),null!=w&&le(Ye(d),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+w+" but got pad "+d+"."),le(U.shape[3]===O.shape[2],"Error in conv2d: depth of input ("+U.shape[3]+") must match input depth for filter "+O.shape[2]+"."),le(Cc(a,y),"Error in conv2D: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+y+"'"),le("NHWC"===f,"Error in conv2d: got dataFormat of "+f+" but only NHWC is currently supported.");var q,K=Up(U.shape,O.shape,a,y,d,w);if(1!==K.filterHeight||1!==K.filterWidth||1!==K.dilationHeight||1!==K.dilationWidth||1!==K.strideHeight||1!==K.strideWidth||"SAME"!==K.padInfo.type&&"VALID"!==K.padInfo.type)q=ve.engine.runKernel(function(oe){return oe.conv2d(U,O,K)},{x:U,$filter:O},function(oe){return le(Su(y),"Error in gradient of conv2D: dilation rates greater than 1 are notyet supported in gradients. Got dilations '"+y+"'"),{x:function(){return Ph(U.shape,oe,O,a,d)},$filter:function(){return Jy(U,oe,O.shape,a,d)}}});else{var re=U.reshape([-1,K.inChannels]),se=O.reshape([K.inChannels,K.outChannels]);q=Yy(re,se).reshape(K.outShape)}return j?q.as3D(q.shape[1],q.shape[2],q.shape[3]):q}}),Mg=Te({conv2dDerFilter_:Jy}),Qf=Te({depthwiseConv2d_:function b0(u,i,a,d,f,y,w){void 0===f&&(f="NHWC"),void 0===y&&(y=[1,1]);var C=ae(u,"x","depthwiseConv2d"),O=ae(i,"filter","depthwiseConv2d"),U=C,j=!1;3===C.rank&&(j=!0,U=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),le(4===U.rank,"Error in depthwiseConv2d: input must be rank 4, but got rank "+U.rank+"."),le(4===O.rank,"Error in depthwiseConv2d: filter must be rank 4, but got rank "+O.rank+"."),le(U.shape[3]===O.shape[2],"Error in depthwiseConv2d: number of input channels ("+U.shape[3]+") must match the inChannels dimension in filter "+O.shape[2]+"."),null==y&&(y=[1,1]),le(Cc(a,y),"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+y+"'"),null!=w&&le(Ye(d),"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+w+" but got pad "+d+".");var q=Up(U.shape,O.shape,a,y,d,w,!0),K=ve.engine.runKernel(function(re){return re.depthwiseConv2D(U,O,q)},{x:U,$filter:O},function(re){return le(Su(y),"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+y+"'"),{x:function(){return function xd(u,i,a,d){var f=i,y=!1;3===i.rank&&(y=!0,f=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var w=ve.engine.runKernel(function(C){return C.depthwiseConv2DDerInput(f,a,d)},{dy4D:f});return y?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}(0,re,O,q)},$filter:function(){return function Xx(u,i,a,d){var f=u;3===u.rank&&(f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]));var y=i;return 3===y.rank&&(y=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),ve.engine.runKernel(function(w){return w.depthwiseConv2DDerFilter(f,y,d)},{x4D:f,dy4D:y})}(U,re,0,q)}}});return j?K.as3D(K.shape[1],K.shape[2],K.shape[3]):K}}),Rh=Te({separableConv2d_:function Tg(u,i,a,d,f,y,w){void 0===y&&(y=[1,1]),void 0===w&&(w="NHWC");var C=ae(u,"x","separableConv2d"),O=ae(i,"depthwiseFilter","separableConv2d"),U=ae(a,"pointwiseFilter","separableConv2d"),j=C,q=!1;if(3===C.rank&&(q=!0,j=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),"NCHW"===w)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");le(4===j.rank,"Error in separableConv2d: input must be rank 4, but got rank "+j.rank+"."),le(4===O.rank,"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+O.rank+"."),le(4===U.rank,"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+O.rank+"."),le(1===U.shape[0],"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+U.shape[0]+"."),le(1===U.shape[1],"Error in separableConv2d: the second dimension of pointwise filter  must be 1, but got "+U.shape[1]+".");var K=O.shape[2],re=O.shape[3];le(U.shape[2]===K*re,"Error in separableConv2d: the third dimension of pointwise filter must be "+K*re+", but got "+U.shape[2]+".");var se=Qf(j,O,d,f,w,y),oe=Ed(se,U,1,"valid",w);return q?oe.as3D(oe.shape[1],oe.shape[2],oe.shape[3]):oe}}),Sc=Te({conv2dTranspose_:function Ig(u,i,a,d,f,y){return Ph(a,ae(u,"x","conv2dTranspose"),ae(i,"filter","conv2dTranspose"),d,f,y)}}),Qa=Te({reverse_:function ev(u,i){var a=ae(u,"x","reverse");if(0===a.rank)return a.clone();var d=bi(i,a.shape);return ve.engine.runKernel(function(f){return f.reverse(a,d)},{$x:a},function(f){return{$x:function(){return f.reverse(d)}}}).reshapeAs(a)}}),tv=Te({reverse1d_:function Ng(u){var i=ae(u,"x","reverse");return le(1===i.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+i.rank+"."),Qa(i,0)}}),Pg=Te({reverse2d_:function Og(u,i){var a=ae(u,"x","reverse");return le(2===a.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+a.rank+"."),Qa(a,i)}}),nv=Te({reverse3d_:function w0(u,i){var a=ae(u,"x","reverse");return le(3===a.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+a.rank+"."),Qa(a,i)}}),Rg=Te({reverse4d_:function x0(u,i){var a=ae(u,"x","reverse");return le(4===a.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+a.rank+"."),Qa(a,i)}});function rv(u,i,a,d,f,y){var w=ae(u,"x","maxPool"),C=w,O=!1;3===w.rank&&(O=!0,C=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),null==d&&(d=[1,1]),le(4===C.rank,"Error in maxPool: input must be rank 4 but got rank "+C.rank+"."),le(Cc(a,d),"Error in maxPool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+d+"'"),null!=y&&le(Ye(f),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+f+".");var U=wd(C.shape,i,a,d,f,y),j=ve.engine.runKernel(function(q,K){return K(q.maxPool(C,U))},{x:C},function(q,K){var re=K[0];return{x:function(){return function E0(u,i,a,d,f,y,w,C){var O=ae(u,"dy","maxPoolBackprop"),U=ae(i,"input","maxPoolBackprop"),j=ae(a,"output","maxPoolBackprop");le(U.rank===O.rank,"Rank of input ("+U.rank+") does not match rank of dy ("+O.rank+")"),null==y&&(y=[1,1]),le(Cc(f,y),"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+f+" and dilations '"+y+"'"),le(4===O.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+O.rank+"."),le(4===U.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+U.rank+"."),null!=C&&le(Ye(w),"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+w+".");var q=wd(U.shape,d,f,y,w,C);return ve.engine.runKernel(function(K){return K.maxPoolBackprop(O,U,j,q)},{$dy:O,$input:U})}(q,C,re,i,a,d,f)}}});return O?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}function iv(u,i,a,d,f,y){var w=ae(u,"x","avgPool");le("float32"===w.dtype,"The input dtype to avgPool must be float32"),null==d&&(d=[1,1]),le(Cc(a,d),"Error in avgPool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+d+"'");var C=w,O=!1;3===w.rank&&(O=!0,C=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),le(4===C.rank,"Error in avgPool: x must be rank 4 but got rank "+C.rank+"."),null!=y&&le(Ye(f),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+f+".");var U=wd(C.shape,i,a,d,f),j=ve.engine.runKernel(function(q){return q.avgPool(C,U)},{x:C},function(q){return{x:function(){return function sv(u,i,a,d,f,y){var w=ae(u,"dy","avgPoolBackprop"),C=ae(i,"input","avgPoolBackprop");le(C.rank===w.rank,"Rank of input ("+C.rank+") does not match rank of dy ("+w.rank+")"),null==f&&(f=[1,1]),le(Cc(d,f),"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+d+" and dilations '"+f+"'");var O=C,U=w,j=!1;3===C.rank&&(j=!0,O=C.as4D(1,C.shape[0],C.shape[1],C.shape[2]),U=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),le(4===U.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+U.rank+"."),le(4===O.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+O.rank+".");var q=wd(O.shape,a,d,f,y),K=ve.engine.runKernel(function(re){return re.avgPoolBackprop(U,O,q)},{dy4D:U,input4D:O});return j?K.as3D(K.shape[1],K.shape[2],K.shape[3]):K}(q,C,i,a,d,f)}}});return j=j.cast(w.dtype),O?j.as3D(j.shape[1],j.shape[2],j.shape[3]):j}var av=Te({maxPool_:function Qx(u,i,a,d,f){return rv(u,i,a,1,d,f)}}),Cd=Te({avgPool_:function ov(u,i,a,d,f){return iv(u,i,a,1,d,f)}}),S0=Te({pool_:function ZS(u,i,a,d,f,y){null==f&&(f=[1,1]),null==y&&(y=1),0===d&&(d="valid");var w=ae(u,"x","maxPool"),C=w,O=!1;3===w.rank&&(O=!0,C=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),le(Cc(y,f),"Error in pool: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+f+"'");var U,j=wd(C.shape,i,y,f,d),q=[j.dilationHeight,j.dilationWidth];U="same"===d?function Dc(u,i){var a=u.map(function(y,w){return y+(y-1)*(i[w]-1)}).map(function(y){return y-1}),d=a.map(function(y){return Math.floor(y/2)}),f=a.map(function(y,w){return y-d[w]});return a.map(function(y,w){return[d[w],f[w]]})}([j.filterHeight,j.filterWidth],q):[[0,0],[0,0]];var K=1===q[0]&&1===q[1],re=function C0(u,i,a){var d=a.map(function(O){return O[0]}),f=a.map(function(O){return O[1]}),y=u.concat(d,f),w=i.map(function(O,U){return(O-y[U]%O)%O}),C=f.map(function(O,U){return O+w[U]});return[i.map(function(O,U){return[d[U],C[U]]}),i.map(function(O,U){return[0,w[U]]})]}([j.inHeight,j.inWidth],q,U),oe=re[1],de=K?d:"valid",xe=K?C:Sh(C,q,re[0]),Se=("avg"===a?function(){return iv(xe,i,y,1,de)}:function(){return rv(xe,i,y,1,de)})(),ke=K?Se:bh(Se,q,oe);return O?ke.as3D(ke.shape[1],ke.shape[2],ke.shape[3]):ke}}),Iu=Te({slice_:function jp(u,i,a){var d,f,y=ae(u,"x","slice");if(0===y.rank)throw new Error("Slicing scalar is not possible");d="number"==typeof i?[i].concat(new Array(y.rank-1).fill(0)):i.length<y.rank?i.concat(new Array(y.rank-i.length).fill(0)):i.slice(),f=(f=null==a?new Array(y.rank).fill(-1):"number"==typeof a?[a].concat(new Array(y.rank-1).fill(-1)):a.length<y.rank?a.concat(new Array(y.rank-a.length).fill(-1)):a).map(function(C,O){return C>=0?C:(le(-1===C,"Bad value in size"),y.shape[O]-d[O])}),function Gd(u,i,a){le(u.rank===i.length,"Error in slice"+u.rank+"D: Length of begin "+i+" must match the rank of the array ("+u.rank+")."),le(u.rank===a.length,"Error in slice"+u.rank+"D: Length of size "+a+" must match the rank of the array ("+u.rank+").");for(var d=0;d<u.rank;++d)le(i[d]+a[d]<=u.shape[d],"Error in slice"+u.rank+"D: begin["+d+"] + size["+d+"] ("+(i[d]+a[d])+") would overflow input.shape["+d+"] ("+u.shape[d]+")")}(y,d,f);var w=y.shape;return ve.engine.runKernel(function(C){return C.slice(y,d,f)},{$x:y},function(C){for(var O=[],U=0;U<C.rank;U++)O.push([d[U],w[U]-d[U]-f[U]]);return{$x:function(){return C.pad(O)}}})}}),em=Te({slice1d_:function Jf(u,i,a){var d=ae(u,"x","slice1d");return le(1===d.rank,"slice1d expects a rank-1 tensor, but got a rank-"+d.rank+" tensor"),Iu(d,[i],[a])}}),Hp=Te({slice2d_:function Du(u,i,a){var d=ae(u,"x","slice2d");return le(2===d.rank,"slice2d expects a rank-2 tensor, but got a rank-"+d.rank+" tensor"),Iu(d,i,a)}}),uv=Te({slice3d_:function Sd(u,i,a){var d=ae(u,"x","slice3d");return le(3===d.rank,"slice3d expects a rank-3 tensor, but got a rank-"+d.rank+" tensor"),Iu(d,i,a)}}),kg=Te({slice4d_:function lv(u,i,a){var d=ae(u,"x","slice4d");return le(4===d.rank,"slice4d expects a rank-4 tensor, but got a rank-"+d.rank+" tensor"),Iu(d,i,a)}});function tm(u,i,a,d,f){var y=i[0];return y.rank<a.rank&&(y=y.reshape(Ro(y.shape,d))),u.rank<a.rank&&(u=u.reshape(Ro(u.shape,d))),{$x:function(){var w=u.mul(a.equal(y).cast(u.dtype));return null==f?w:w.transpose(f)}}}var pv=Te({all_:function A0(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=ae(u,"x","all","bool");le("bool"===d.dtype,"Error Tensor must be of type bool. Got: "+d.dtype);var f=bi(i,d.shape),y=f,w=Hi(y,d.rank);null!=w&&(d=d.transpose(w),y=ps(y.length,d.rank));var C=ve.engine.runKernel(function(U){return U.all(d,y)},{$x:d});if(a){var O=Ro(C.shape,f);return C.reshape(O)}return C}}),nm=Te({any_:function M0(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=ae(u,"x","any","bool");le("bool"===d.dtype,"Error Tensor must be of type bool. Got: "+d.dtype);var f=bi(i,d.shape),y=f,w=Hi(y,d.rank);null!=w&&(d=d.transpose(w),y=ps(y.length,d.rank));var C=ve.engine.runKernel(function(U){return U.any(d,y)},{$x:d});if(a){var O=Ro(C.shape,f);return C.reshape(O)}return C}}),rm=Te({argMax_:function hv(u,i){void 0===i&&(i=0);var a=ae(u,"x","argMax");null==i&&(i=0);var d=bi(i,a.shape),f=Hi(d,a.rank);return null!=f&&(a=a.transpose(f),d=ps(d.length,a.rank)),ve.engine.runKernel(function(y){return y.argMax(a,d[0])},{$x:a},function(y){return{$x:function(){return Nn(a)}}})}}),N0=Te({argMin_:function dv(u,i){void 0===i&&(i=0);var a=ae(u,"x","argMin");null==i&&(i=0);var d=bi(i,a.shape),f=Hi(d,a.rank);return null!=f&&(a=a.transpose(f),d=ps(d.length,a.rank)),ve.engine.runKernel(function(y){return y.argMin(a,d[0])},{$x:a},function(y){return{$x:function(){return Nn(a)}}})}}),Fg=Te({logSumExp_:function Ic(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=ae(u,"x","logSumExp"),f=bi(i,d.shape),y=d.max(f,!0),w=d.sub(y).exp().sum(f).log(),C=y.reshape(w.shape).add(w);if(a){var O=Ro(C.shape,f);return C.reshape(O)}return C}}),im=Te({max_:function T0(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=ae(u,"x","max"),f=d,y=bi(i,d.shape),w=y,C=Hi(w,d.rank);null!=C&&(d=d.transpose(C),w=ps(w.length,d.rank));var O=ve.engine.runKernel(function(j,q){return q(j.max(d,w))},{$x:d},function(j,q){return tm(j,q,f,y,C)});if(a){var U=Ro(O.shape,y);O=O.reshape(U)}return O}}),Wp=Te({mean_:function cv(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=ae(u,"x","mean"),f=bi(i,d.shape),y=Ie(Gr(d.shape,f)[1]);return Rn(function(w){var C=st(y);return{value:(C.dtype===w.dtype?w:w.cast(C.dtype)).div(C).sum(i,a),gradFunc:function(O){var U=w.shape.slice();return f.forEach(function(j){U[j]=1}),O.reshape(U).mul(Mr(w.shape,"float32")).div(C)}}})(d)}}),fv=Te({min_:function I0(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=ae(u,"x","min"),f=d,y=bi(i,d.shape),w=y,C=Hi(w,d.rank);null!=C&&(d=d.transpose(C),w=ps(w.length,d.rank));var O=ve.engine.runKernel(function(j,q){return q(j.min(d,w))},{$x:d},function(j,q){return tm(j,q,f,y,C)});if(a){var U=Ro(O.shape,y);O=O.reshape(U)}return O}}),Lg=Te({moments_:function Jx(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=bi(i,(u=ae(u,"x","moments")).shape),f=u.mean(d,a),y=f.shape;return a||(y=Ro(f.shape,d)),{mean:f,variance:u.toFloat().sub(f.reshape(y)).square().mean(d,a)}}}),Bg=Te({sum_:function D0(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=ae(u,"x","sum");"bool"===d.dtype&&(d=d.toInt());var f=bi(i,d.shape);return Rn(function(y){var w=Hi(f,y.rank),C=f,O=y;null!=w&&(O=y.transpose(w),C=ps(C.length,y.rank));var U=ve.engine.runKernel(function(q){return q.sum(O,C)},{permutedX:O});if(a){var j=Ro(U.shape,f);U=U.reshape(j)}return{value:U,gradFunc:function(q){var K=y.shape.slice();return f.forEach(function(re){K[re]=1}),q.reshape(K).mul(Mr(y.shape,"float32"))}}})(d)}}),Vg=Te({prod_:function $p(u,i,a){void 0===i&&(i=null),void 0===a&&(a=!1);var d=ae(u,"x","prod");"bool"===d.dtype&&(d=d.toInt());var f=bi(i,d.shape),y=Hi(f,d.rank),w=f,C=d;null!=y&&(C=d.transpose(y),w=ps(w.length,d.rank));var O=ve.engine.runKernel(function(j){return j.prod(C,w)},{permutedX:C});if(a){var U=Ro(O.shape,f);O=O.reshape(U)}return O}}),om=Te({equal_:function kh(u,i){var a=ae(u,"a","equal"),d=ae(i,"b","equal");return Wr(a,d),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.equal(a,d)},{$a:a,$b:d})}}),sm=Te({equalStrict_:function qp(u,i){var a=ae(u,"a","equalStrict"),d=ae(i,"b","equalStrict");return $e(a.shape,d.shape,"Error in equalStrict: "),a.equal(d)}}),Fh=Te({greater_:function k0(u,i){var a=ae(u,"a","greater"),d=ae(i,"b","greater");return Wr(a,d),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.greater(a,d)},{$a:a,$b:d})}}),Ug=Te({greaterEqual_:function L0(u,i){var a=ae(u,"a","greaterEqual"),d=ae(i,"b","greaterEqual");return Wr(a,d),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.greaterEqual(a,d)},{$a:a,$b:d},function(f){return{$a:function(){return Nn(a)},$b:function(){return Nn(d)}}})}}),B0=Te({greaterEqualStrict_:function gv(u,i){var a=ae(u,"a","greaterEqualStrict"),d=ae(i,"b","greaterEqualStrict");return $e(a.shape,d.shape,"Error in greaterEqualStrict: "),a.greaterEqual(d)}}),am=Te({greaterStrict_:function F0(u,i){var a=ae(u,"a","greaterStrict"),d=ae(i,"b","greaterStrict");return $e(a.shape,d.shape,"Error in greaterStrict: "),a.greater(d)}}),Cs=Te({less_:function Gp(u,i){var a=ae(u,"a","less"),d=ae(i,"b","less");return Wr(a,d),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.less(a,d)},{$a:a,$b:d})}}),Lh=Te({lessEqual_:function R0(u,i){var a=ae(u,"a","lessEqual"),d=ae(i,"b","lessEqual");return Wr(a,d),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.lessEqual(a,d)},{$a:a,$b:d})}}),Kp=Te({lessEqualStrict_:function mv(u,i){var a=ae(u,"a","lessEqualStrict"),d=ae(i,"b","lessEqualStrict");return $e(a.shape,d.shape,"Error in lessEqualStrict: "),a.lessEqual(d)}}),Zp=Te({lessStrict_:function P0(u,i){var a=ae(u,"a","lessStrict"),d=ae(i,"b","lessStrict");return $e(a.shape,d.shape,"Error in lessStrict: "),a.less(d)}}),lm=Te({notEqual_:function eE(u,i){var a=ae(u,"a","notEqual"),d=ae(i,"b","notEqual");return Wr(a,d),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.notEqual(a,d)},{$a:a,$b:d})}}),Ss=Te({notEqualStrict_:function O0(u,i){var a=ae(u,"a","notEqualStrict"),d=ae(i,"b","notEqualStrict");return $e(a.shape,d.shape,"Error in notEqualStrict: "),a.notEqual(d)}}),Bh=Te({add_:function _v(u,i){var a=ae(u,"a","add"),d=ae(i,"b","add");Wr(a,d);var f=ar(a.shape,d.shape);return ve.engine.runKernel(function(y){return y.add(a,d)},{$a:a,$b:d},function(y){return{$a:function(){var w=y,C=Lr(a.shape,f);return C.length>0&&(w=w.sum(C)),w.reshape(a.shape)},$b:function(){var w=y,C=Lr(d.shape,f);return C.length>0&&(w=w.sum(C)),w.reshape(d.shape)}}})}}),Qp=Te({addN_:function V0(u){le(Array.isArray(u),function(){return"The argument passed to tf.addN() must be a list of tensors"}),le(u.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+u.length});var i=u.map(function(f,y){return ae(f,"tensors"+y,"addN")}),a=i[0];return i.forEach(function(f){if(f.dtype!==a.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),i.forEach(function(f){if(!Ue(f.shape,a.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),ve.engine.runKernel(function(f){return f.addN(i)},i,function(f){var y={};return i.forEach(function(w,C){y[C]=function(){return f.clone()}}),y})}}),Au=Te({addStrict_:function zg(u,i){return $e(u.shape,i.shape,"Error in addStrict: "),u.add(i)}}),hm=Te({atan2_:function An(u,i){var a=ae(u,"a","atan2"),d=ae(i,"b","atan2");Wr(a,d);var f=ar(a.shape,d.shape);return ve.engine.runKernel(function(y){return y.atan2(a,d)},{$a:a,$b:d},function(y){return{$a:function(){var w=Bh(a.square(),d.square()),C=y.mul(d.div(w)),O=Lr(a.shape,f);return O.length>0&&(C=C.sum(O)),C.reshape(a.shape)},$b:function(){var w=Bh(a.square(),d.square()),C=qf(y.mul(a.div(w))),O=Lr(d.shape,f);return O.length>0&&(C=C.sum(O)),C.reshape(d.shape)}}})}}),Vh=Te({div_:function yv(u,i){var a,d=ae(u,"a","div"),f=ae(i,"b","div");if(Wr(d,f),"int32"===d.dtype&&"int32"===f.dtype)return Id(d,f);a=function(w){return w.realDivide(d,f)};var y=ar(d.shape,f.shape);return ve.engine.runKernel(a,{$a:d,$b:f},function(w){return{$a:function(){var C=w.div(f.toFloat()),O=Lr(d.shape,y);return O.length>0?C.sum(O).reshape(d.shape):C},$b:function(){var C=w.mul(d.toFloat()),O=Lr(f.shape,y);O.length>0&&(C=C.sum(O).reshape(f.shape));var U=f.square();return C.div(U.toFloat()).neg()}}})}}),vv=Te({divStrict_:function YS(u,i){return $e(u.shape,i.shape,"Error in divideStrict: "),u.div(i)}}),Id=Te({floorDiv_:function j0(u,i){var a=ae(u,"a","floorDiv"),d=ae(i,"b","floorDiv");Wr(a,d);var f=ar(a.shape,d.shape);return ve.engine.runKernel(function(y){return y.floorDiv(a,d)},{$a:a,$b:d},function(y){return{$a:function(){var w=y.div(d.toFloat()),C=Lr(a.shape,f);return C.length>0?w.sum(C).reshape(a.shape):w},$b:function(){var w=y.mul(a.toFloat()),C=Lr(d.shape,f);C.length>0&&(w=w.sum(C).reshape(d.shape));var O=d.square();return w.div(O.toFloat()).neg()}}})}}),Td=Te({maximum_:function cm(u,i){var a=ae(u,"a","maximum"),d=ae(i,"b","maximum");return Wr(a,d),"bool"===a.dtype&&(a=a.toInt()),"bool"===d.dtype&&(d=d.toInt()),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.maximum(a,d)},{$a:a,$b:d},function(f){return{$a:function(){return f.mul(a.greaterEqual(d).toFloat())},$b:function(){return f.mul(a.less(d).toFloat())}}})}}),bv=Te({maximumStrict_:function dm(u,i){return $e(u.shape,i.shape,"Error in maximumStrict: "),u.maximum(i)}}),Uh=Te({minimum_:function nE(u,i){var a=ae(u,"a","minimum"),d=ae(i,"b","minimum");return Wr(a,d),"bool"===a.dtype&&(a=a.toInt()),"bool"===d.dtype&&(d=d.toInt()),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.minimum(a,d)},{$a:a,$b:d},function(f){return{$a:function(){return f.mul(a.lessEqual(d).toFloat())},$b:function(){return f.mul(a.greater(d).toFloat())}}})}}),Mu=Te({minimumStrict_:function Hg(u,i){return $e(u.shape,i.shape,"Error in minimumStrict: "),u.minimum(i)}}),Ja=Te({mod_:function jg(u,i){var a=ae(u,"a","mod"),d=ae(i,"b","mod");Wr(a,d);var f=ar(a.shape,d.shape);return ve.engine.runKernel(function(y){return y.mod(a,d)},{$a:a,$b:d},function(y){return{$a:function(){var w=Lr(a.shape,f);return w.length>0?y.sum(w).reshape(a.shape):y},$b:function(){var w=y.mul(a.div(d).floor().neg()),C=Lr(d.shape,f);return C.length>0?w.sum(C).reshape(d.shape):w}}})}}),Ad=Te({modStrict_:function um(u,i){return $e(u.shape,i.shape,"Error in modStrict: "),u.mod(i)}}),Md=Te({mul_:function z0(u,i){var a=ae(u,"a","mul"),d=ae(i,"b","mul");Wr(a,d);var f=ar(a.shape,d.shape);return ve.engine.runKernel(function(y){return y.multiply(a,d)},{$a:a,$b:d},function(y){return{$a:function(){var w=y.mul(d.toFloat()),C=Lr(a.shape,f);return C.length>0?w.sum(C).reshape(a.shape):w},$b:function(){var w=y.mul(a.toFloat()),C=Lr(d.shape,f);return C.length>0?w.sum(C).reshape(d.shape):w}}})}}),$g=Te({mulStrict_:function tE(u,i){return $e(u.shape,i.shape,"Error in multiplyStrict: "),u.mul(i)}}),Da=Te({pow_:function Dd(u,i){var a=ae(u,"base","pow"),d=ae(i,"exp","pow"),f=ar(a.shape,d.shape);return u=a.cast(Ir(a.dtype,d.dtype)),i=d.cast(Ir(a.dtype,d.dtype)),ve.engine.runKernel(function(y,w){return w(y.pow(a,d))},{$base:a,$exp:d},function(y,w){var C=w[0];return{$base:function(){var O=d.toFloat(),U=y.mul(O.mul(a.pow(O.sub(st(1))))),j=Lr(a.shape,f);return j.length>0&&(U=U.sum(j)),U.reshape(a.shape)},$exp:function(){var O=y.mul(C.mul(a.log()).toFloat()),U=Lr(d.shape,f);return U.length>0&&(O=O.sum(U)),O.reshape(d.shape)}}})}}),Ac=Te({powStrict_:function Tu(u,i){return $e(u.shape,i.shape,"Error in powStrict: "),u.pow(i)}}),Nd=Te({squaredDifference_:function Yp(u,i){var a=ae(u,"a","squaredDifference"),d=ae(i,"b","squaredDifference");return Wr(a,d),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.squaredDifference(a,d)},{$a:a,$b:d},function(f){var y=st(2);return{$a:function(){return f.mul(a.sub(d).mul(y))},$b:function(){return f.mul(d.sub(a).mul(y))}}})}}),Jp=Te({squaredDifferenceStrict_:function Xp(u,i){return $e(u.shape,i.shape,"Error in squaredDifferenceStrict: "),u.squaredDifference(i)}}),ef=Te({sub_:function U0(u,i){var a=ae(u,"a","sub"),d=ae(i,"b","sub");Wr(a,d);var f=ar(a.shape,d.shape);return ve.engine.runKernel(function(y){return y.subtract(a,d)},{$a:a,$b:d},function(y){return{$a:function(){var w=y,C=Lr(a.shape,f);return C.length>0&&(w=w.sum(C)),w.reshape(a.shape)},$b:function(){var w=y,C=Lr(d.shape,f);return C.length>0&&(w=w.sum(C)),w.neg().reshape(d.shape)}}})}}),Nu=Te({subStrict_:function Tc(u,i){return $e(u.shape,i.shape,"Error in subStrict: "),u.sub(i)}}),fm=Te({logicalAnd_:function tf(u,i){var a=ae(u,"a","logicalAnd","bool"),d=ae(i,"b","logicalAnd","bool");return le("bool"===a.dtype&&"bool"===d.dtype,"Error Array must be of type bool."),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.logicalAnd(a,d)},{$a:a,$b:d})}}),Wg=Te({logicalNot_:function wv(u){var i=ae(u,"x","logicalNot","bool");return le("bool"===i.dtype,"Error Array must be of type bool."),ve.engine.runKernel(function(a){return a.logicalNot(i)},{$x:i})}}),Cv=Te({logicalOr_:function xv(u,i){var a=ae(u,"a","logicalOr","bool"),d=ae(i,"b","logicalOr","bool");return le("bool"===a.dtype&&"bool"===d.dtype,"Error Array must be of type bool."),ar(a.shape,d.shape),ve.engine.runKernel(function(f){return f.logicalOr(a,d)},{$a:a,$b:d})}}),H0=Te({logicalXor_:function ss(u,i){var a=ae(u,"a","logicalXor","bool"),d=ae(i,"b","logicalXor","bool");return le("bool"===a.dtype&&"bool"===d.dtype,"Error Array must be of type bool."),ar(a.shape,d.shape),Cv(u,i).logicalAnd(fm(u,i).logicalNot())}}),Gg=Te({where_:function pm(u,i,a){var d=ae(i,"a","where"),f=ae(a,"b","where"),y=ae(u,"condition","where","bool");return le("bool"===y.dtype,"Error Condition must be of type bool."),$e(d.shape,f.shape,"Error in where: "),1===y.rank?le(y.shape[0]===d.shape[0],"The first dimension of `a` must match the size of `condition`."):$e(y.shape,f.shape,"Error in where: "),ve.engine.runKernel(function(w){return w.select(y,d,f)},{$condition:y,$a:d,$b:f},function(w){return{$condition:function(){return Nn(y)},$a:function(){return w.mul(y.cast(d.dtype))},$b:function(){return w.mul(y.logicalNot().cast(f.dtype))}}})}}),zh=function Ev(u){return R(this,void 0,void 0,function(){var i,a,d;return W(this,function(f){switch(f.label){case 0:return le("bool"===(i=ae(u,"condition","where","bool")).dtype,"Condition must be of type bool."),[4,i.data()];case 1:return a=f.sent(),d=Eu(i.shape,a),u!==i&&i.dispose(),[2,d]}})})},gm=Te({elu_:function W0(u){var i=ae(u,"x","elu");return ve.engine.runKernel(function(a,d){return d(a.elu(i))},{$x:i},function(a,d){var f=d[0];return{$x:function(){return ve.engine.runKernel(function(y){return y.eluDer(a,f)},{dy:a,y:f})}}})}}),qg=Te({leakyRelu_:function mm(u,i){void 0===i&&(i=.2);var a=ae(u,"x","leakyRelu");return Td(st(i).mul(a),a)}}),Sv=Te({prelu_:function nf(u,i){var a=ae(u,"x","prelu"),d=ae(i,"alpha","prelu"),f=st(0);return Td(f,a).add(d.mul(Uh(f,a)))}}),Wo=Te({relu_:function $0(u){var i=ae(u,"x","relu");return"bool"===i.dtype?i.toInt():ve.engine.runKernel(function(a){return a.relu(i)},{$x:i},function(a){var d=i.step();return{$x:function(){return a.mulStrict(d.toFloat())}}})}}),Kg=Te({selu_:function G0(u){var i=ae(u,"x","selu");return ve.engine.runKernel(function(a){return a.selu(i)},{$x:i},function(a){return{$x:function(){var d=i.greater(st(0)),f=st(yn),y=st(hn),w=a.mul(y),C=a.mul(f).mul(i.toFloat().exp());return Gg(d,w,C)}}})}}),K0=Te({transpose_:function q0(u,i){var a=ae(u,"x","transpose");return null==i&&(i=a.shape.map(function(d,f){return f}).reverse()),le(a.rank===i.length,"Error in transpose: rank of input "+a.rank+" must match length of perm "+i+"."),i.forEach(function(d){le(d>=0&&d<a.rank,"All entries in 'perm' must be between 0 and "+(a.rank-1)+" but got "+i)}),a.rank<=1?a.clone():ve.engine.runKernel(function(d){return d.transpose(a,i)},{$x:a},function(d){var f=Ql(i);return{$x:function(){return d.transpose(f)}}})}}),Yg=Te({localResponseNormalization_:function Zg(u,i,a,d,f){void 0===i&&(i=5),void 0===a&&(a=1),void 0===d&&(d=1),void 0===f&&(f=.5);var y=ae(u,"x","localResponseNormalization");le(4===y.rank||3===y.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+y.rank+"."),le(Ye(i),"Error in localResponseNormalization: depthRadius must be an integer\n                     but got depthRadius "+i+".");var w=y,C=!1;3===y.rank&&(C=!0,w=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]));var O=ve.engine.runKernel(function(U,j){return j(U.localResponseNormalization4D(w,i,a,d,f))},{x4D:w},function(U,j){var q=j[0];return{x4D:function(){return ve.engine.runKernel(function(K){return K.LRNGrad(U,w,q,i,a,d,f)},{})}}});return C?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}});function Dv(u,i,a){if(void 0===a&&(a=null),0===u.rank)return u.abs();if(1!==u.rank&&null===a)return Dv(u.reshape([-1]),i,a);if(1===u.rank||"number"==typeof a||a instanceof Array&&1===a.length){if(1===i)return u.abs().sum(a);if(i===1/0)return u.abs().max(a);if(i===-1/0)return u.abs().min(a);if("euclidean"===i||2===i)return u.abs().pow(st(2,"int32")).sum(a).sqrt();throw new Error("Error in norm: invalid ord value: "+i)}if(a instanceof Array&&2===a.length){if(1===i)return u.abs().sum(a[0]).max(a[1]-1);if(i===1/0)return u.abs().sum(a[1]).max(a[0]);if(i===-1/0)return u.abs().sum(a[1]).min(a[0]);if("fro"===i||"euclidean"===i)return u.square().sum(a).sqrt();throw new Error("Error in norm: invalid ord value: "+i)}throw new Error("Error in norm: invalid axis: "+a)}var Ou=Te({norm_:function Z0(u,i,a,d){void 0===i&&(i="euclidean"),void 0===a&&(a=null),void 0===d&&(d=!1);var f=Dv(u=ae(u,"x","norm"),i,a),y=f.shape;if(d){var w=bi(a,u.shape);y=Ro(f.shape,w)}return f.reshape(y)}});function rf(u,i){for(var a=[],d=u;d<i;++d)a.push(d);return a}function ym(u){for(var i=[],a=0;a<u.length;++a)for(var d=0;d<u[a].length;++d)i.push(u[a][d]);return i}var bo,Qg=Te({gather_:function Xg(u,i,a){void 0===a&&(a=0);var d=ae(u,"x","gather"),f=ae(i,"indices","gather","int32");return le("int32"===f.dtype,"Indices must be of dtype `int32`"),a=bi(a,d.shape)[0],ve.engine.runKernel(function(y){return y.gather(d,f,a)},{$x:d},function(y){return{$x:function(){if(0===a)return vm(y,f,d.shape[a]);var w=d.shape,C=f.size,O=w.slice(0,a),U=O.length,j=w.slice(a,w.length).slice(1),q=j.length,K=rf(0,U),re=rf(U+1,U+1+q),se=ym([O,[C],j]),oe=y.reshape(se),de=f.reshape([C]),xe=ym([[U],K,re]),Se=oe.transpose(xe),ke=vm(Se,de,d.shape[a]),Ke=Ql(xe);return ke.transpose(Ke)}}})}}),vm=Te({unsortedSegmentSum_:function _m(u,i,a){var d=ae(u,"x","unsortedSegmentSum"),f=ae(i,"segmentIds","unsortedSegmentSum","int32");return le("int32"===f.dtype,"segmentIds must be of dtype `int32`"),le(Ye(a),"numSegments must be of dtype int"),ve.engine.runKernel(function(y){return y.unsortedSegmentSum(d,f,a)},{$x:d},function(y){return{$x:function(){return function Y0(u,i){for(var a=Td(i,Nn(i)),d=Qg(u,a),f=Ug(i,st(0,"int32")),y=d.rank-f.rank,w=0;w<y;++w)f=wc(f,w+1);f=fm(f,Mr(d.shape,"bool"));var C=Nn(d);return Gg(f,d,C)}(y,f)}}})}}),el=Te({basicLSTMCell_:function Jg(u,i,a,d,f,y){var w=ae(u,"forgetBias","basicLSTMCell"),C=ae(i,"lstmKernel","basicLSTMCell"),O=ae(a,"lstmBias","basicLSTMCell"),U=ae(d,"data","basicLSTMCell"),j=ae(f,"c","basicLSTMCell"),q=ae(y,"h","basicLSTMCell"),K=U.concat(q,1).matMul(C).add(O),se=K.shape[1]/4,oe=[K.shape[0],se],de=K.slice([0,0],oe),xe=K.slice([0,se],oe),Se=K.slice([0,2*se],oe),ke=K.slice([0,3*se],oe),Ke=de.sigmoid().mulStrict(xe.tanh()).addStrict(j.mulStrict(w.add(Se).sigmoid()));return[Ke,Ke.tanh().mulStrict(ke.sigmoid())]}}),Od=Te({multiRNNCell_:function X0(u,i,a,d){for(var f=ae(i,"data","multiRNNCell"),y=ln(a,"c","multiRNNCell"),w=ln(d,"h","multiRNNCell"),C=f,O=[],U=0;U<u.length;U++){var j=u[U](C,y[U],w[U]);O.push(j[0]),O.push(j[1]),C=j[1]}var q=[],K=[];for(U=0;U<O.length;U+=2)q.push(O[U]),K.push(O[U+1]);return[q,K]}}),jh=Te({movingAverage_:function e_(u,i,a,d,f){void 0===f&&(f=!0);var y=ae(u,"v","movingAverage"),w=ae(i,"x","movingAverage"),C=ae(a,"decay","movingAverage");Wr(y,w),le(Ue(y.shape,w.shape),"Shape mismatch in v and x");var O=st(1),U=O.sub(C),j=w.sub(y).mul(U);if(f){le(null!=d,"When using zeroDebias: true, step is required.");var q=ae(d,"step","movingAverage");j=j.div(O.sub(Da(C,q)))}return y.add(j)}}),bm=Te({stridedSlice_:function Q0(u,i,a,d,f,y,w,C,O){if(void 0===f&&(f=0),void 0===y&&(y=0),void 0===w&&(w=0),void 0===C&&(C=0),void 0===O&&(O=0),0!==w)throw new Error("ellipsis mask is not yet supported");if(0!==C)throw new Error("new axis mask is not yet supported");var U=ae(u,"x","stridedSlice");return ve.engine.runKernel(function(j){return j.stridedSlice(U,i,a,d,f,y,w,C,O)},{$x:U})}}),wm=Te({topk_:function Iv(u,i,a){void 0===i&&(i=1),void 0===a&&(a=!0);var d=ae(u,"x","topk");if(0===d.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var f=d.shape[d.shape.length-1];if(i>f)throw new Error("'k' passed to topk() must be <= the last dimension ("+f+") but got "+i);var y=ve.engine.runKernel(function(w){return w.topk(d,i,a)},{$x:d});return{values:y[0],indices:y[1]}}}),rE=Te({scatterND_:function sf(u,i,a){var d=ae(u,"indices","scatterND","int32"),f=ae(i,"updates","scatterND");return function yr(u,i,a){if(i.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+i.rank+".");if(u.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+u.rank+".");if("int32"!==i.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+i.dtype);if(a.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+a);if(0===a.length){if(0===i.size)throw new Error("Indices specified for empty output. indices shape: "+i.shape);if(0===u.size)throw new Error("Updates specified for empty output. updates shape: "+u.shape)}!function ir(u,i,a){var d=i.rank>1?i.shape[i.rank-1]:1,f=i.rank>1?i.rank-1:1,y="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+a.shape+", indices.shape: "+i.shape+", shape: "+u+", sliceDim: "+d+", and batchDim: "+f+".";if(a.rank<f)throw new Error(y+" update.rank < "+f+". ");if(u.length<d+(a.rank-f))throw new Error(y+" Output shape length < "+(d+(a.rank-f)));if(a.rank!==f+u.length-d)throw new Error(y+" update.rank != "+(f+u.length-d));for(var w=0;w<f;++w)if(a.shape[w]!==i.shape[w])throw new Error(y+" updates.shape["+w+"] ("+a.shape[w]+") != indices.shape["+w+"] ("+i.shape[w]+").");for(w=0;w<a.rank-f;++w)if(a.shape[w+f]!==u[w+d])throw new Error(y+" updates.shape["+(w+f)+"] ("+a.shape[w+f]+") != shape["+(w+f)+"] ("+u[w+f]+")")}(a,i,u)}(f,d,a),ve.engine.runKernel(function(y){return y.scatterND(d,f,a)},{$indices:d,$updates:f})}}),Hh=Te({fft_:function Tv(u){le("complex64"===u.dtype,"The dtype for tf.spectral.fft() must be complex64 but got "+u.dtype+".");var i=u.shape[u.shape.length-1],d=u.as2D(u.size/i,i);return ve.engine.runKernel(function(f){return f.fft(d)},{input:u}).reshape(u.shape)}}),$h=Te({ifft_:function Av(u){le("complex64"===u.dtype,"The dtype for tf.spectral.ifft() must be complex64 but got "+u.dtype+".");var i=u.shape[u.shape.length-1],d=u.as2D(u.size/i,i);return ve.engine.runKernel(function(f){return f.ifft(d)},{input:u}).reshape(u.shape)}}),$l=Te({rfft_:function t_(u){le("float32"===u.dtype,"The dtype for rfft() must be real value but\n    got "+u.dtype);var i=u.shape[u.shape.length-1],a=u.size/i,d=u.zerosLike(),f=Jt(u,d).as2D(a,i),y=ve.engine.runKernel(function(K){return K.fft(f)},{complexInput:f}),w=Math.floor(i/2)+1,C=fs(y),O=ua(y),U=C.split([w,i-w],C.shape.length-1),j=O.split([w,i-w],O.shape.length-1),q=u.shape.slice();return q[u.shape.length-1]=w,Jt(U[0],j[0]).reshape(q)}}),Mv=Object.freeze({fft:Hh,ifft:$h,rfft:$l}),Nv=Te({sparseToDense_:function n_(u,i,a,d){var f=ae(u,"sparseIndices","sparseToDense","int32"),y=ae(i,"sparseValues","sparseToDense"),w=ae(d,"defaultValue","sparseToDense",y.dtype);return function J0(u,i,a,d){if("int32"!==u.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+u.dtype+".");if(u.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+u.shape+".");var f=u.rank>0?u.shape[0]:1,y=u.rank>1?u.shape[1]:1;if(a.length!==y)throw new Error("outputShape has incorrect number of elements:, "+a.length+", should be: "+y+".");if(0!==i.rank&&(1!==i.rank||i.size!==f))throw new Error("sparseValues has incorrect shape "+i.shape+", should be [] or ["+f+"]");if(i.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(f,y,a,w),ve.engine.runKernel(function(C){return C.sparseToDense(f,y,a,w)},{$sparseIndices:f,$sparseValues:y,$defaultValue:w})}}),Ov=Te({gatherND_:function ew(u,i){var a=ae(i,"indices","gatherND","int32"),d=ae(u,"x","gatherND");return ve.engine.runKernel(function(f){return f.gatherND(d,a)},{$x:d,$indices:a})}});!function(u){u[u.NONE=0]="NONE",u[u.MEAN=1]="MEAN",u[u.SUM=2]="SUM",u[u.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(bo||(bo={}));var ta=Te({absoluteDifference_:function tw(u,i,a,d){void 0===d&&(d=bo.SUM_BY_NONZERO_WEIGHTS);var f=ae(u,"labels","absoluteDifference"),y=ae(i,"predictions","absoluteDifference"),w=null;null!=a&&(w=ae(a,"weights","absoluteDifference")),$e(f.shape,y.shape,"Error in absoluteDifference: ");var C=f.sub(y).abs();return Ia(C,w,d)}}),Ia=Te({computeWeightedLoss_:function Pv(u,i,a){void 0===a&&(a=bo.SUM_BY_NONZERO_WEIGHTS);var d=ae(u,"losses","computeWeightedLoss"),f=null;null!=i&&(f=ae(i,"weights","computeWeightedLoss"));var y=null==f?d:d.mul(f);if(a===bo.NONE)return y;if(a===bo.SUM)return y.sum();if(a===bo.MEAN){if(null==f)return y.mean();var w=Ie(d.shape)/Ie(f.shape),C=y.sum().div(f.sum());return w>1?C.div(st(w)):C}if(a===bo.SUM_BY_NONZERO_WEIGHTS){if(null==f)return y.sum().div(st(d.size));var O=f.mul(Mr(d.shape)).notEqual(st(0)).sum().toFloat();return y.sum().div(O)}throw Error("Unknown reduction: "+a)}}),Pu=Te({cosineDistance_:function lf(u,i,a,d,f){void 0===f&&(f=bo.SUM_BY_NONZERO_WEIGHTS);var y=ae(u,"labels","cosineDistance"),w=ae(i,"predictions","cosineDistance"),C=null;null!=d&&(C=ae(d,"weights","cosineDistance")),$e(y.shape,w.shape,"Error in cosineDistance: ");var O=st(1).sub(y.mul(w).sum(a,!0));return Ia(O,C,f)}}),r_=Te({hingeLoss_:function Wh(u,i,a,d){void 0===d&&(d=bo.SUM_BY_NONZERO_WEIGHTS);var f=ae(u,"labels","hingeLoss"),y=ae(i,"predictions","hingeLoss"),w=null;null!=a&&(w=ae(a,"weights","hingeLoss")),$e(f.shape,y.shape,"Error in hingeLoss: ");var C=st(1);f=st(2).mul(f).sub(C);var O=C.sub(f.mul(y)).relu();return Ia(O,w,d)}}),Lv=Te({huberLoss_:function kv(u,i,a,d,f){void 0===d&&(d=1),void 0===f&&(f=bo.SUM_BY_NONZERO_WEIGHTS);var y=ae(u,"labels","huberLoss"),w=ae(i,"predictions","huberLoss"),C=null;null!=a&&(C=ae(a,"weights","huberLoss")),$e(y.shape,w.shape,"Error in huberLoss: ");var O=st(d),U=w.sub(y).abs(),j=Uh(U,O),q=U.sub(j),K=st(.5).mul(j.square()).add(O.mul(q));return Ia(K,C,f)}}),Bv=Te({logLoss_:function iE(u,i,a,d,f){void 0===d&&(d=1e-7),void 0===f&&(f=bo.SUM_BY_NONZERO_WEIGHTS);var y=ae(u,"labels","logLoss"),w=ae(i,"predictions","logLoss"),C=null;null!=a&&(C=ae(a,"weights","logLoss")),$e(y.shape,w.shape,"Error in logLoss: ");var O=st(1),U=st(d),j=y.mul(w.add(U).log()).neg().sub(O.sub(y).mul(O.sub(w).add(U).log()));return Ia(j,C,f)}}),i_=Te({meanSquaredError_:function af(u,i,a,d){void 0===d&&(d=bo.SUM_BY_NONZERO_WEIGHTS);var f=ae(u,"labels","meanSquaredError"),y=ae(i,"predictions","meanSquaredError"),w=null;null!=a&&(w=ae(a,"weights","meanSquaredError")),$e(f.shape,y.shape,"Error in meanSquaredError: ");var C=f.squaredDifference(y);return Ia(C,w,d)}}),iw=Te({sigmoidCrossEntropy_:function Rv(u,i,a,d,f){void 0===d&&(d=0),void 0===f&&(f=bo.SUM_BY_NONZERO_WEIGHTS);var y=ae(u,"multiClassLabels","sigmoidCrossEntropy"),w=ae(i,"logits","sigmoidCrossEntropy"),C=null;if(null!=a&&(C=ae(a,"weights","sigmoidCrossEntropy")),$e(y.shape,w.shape,"Error in sigmoidCrossEntropy: "),d>0){var O=st(d),U=st(1),j=st(.5);y=y.mul(U.sub(O)).add(j.mul(O))}var q=function nw(u,i){var a=ae(u,"labels","sigmoidCrossEntropyWithLogits"),d=ae(i,"logits","sigmoidCrossEntropyWithLogits");$e(a.shape,d.shape,"Error in sigmoidCrossEntropyWithLogits: ");var f=d.relu(),y=d.mul(a),w=d.abs().neg().exp().log1p();return f.sub(y).add(w)}(y,w);return Ia(q,C,f)}}),uf=Te({softmaxCrossEntropy_:function rw(u,i,a,d,f){void 0===d&&(d=0),void 0===f&&(f=bo.SUM_BY_NONZERO_WEIGHTS);var y=ae(u,"onehotLabels","softmaxCrossEntropy"),w=ae(i,"logits","softmaxCrossEntropy"),C=null;if(null!=a&&(C=ae(a,"weights","softmaxCrossEntropy")),$e(y.shape,w.shape,"Error in softmaxCrossEntropy: "),d>0){var O=st(d),U=st(1),j=st(y.shape[1]);y=y.mul(U.sub(O)).add(O.div(j))}var q=function Fv(u,i,a){if(void 0===a&&(a=-1),-1===a&&(a=i.rank-1),a!==i.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+i.rank+" and dim was "+a);return Rn(function(d,f){var y=f.logSumExp([a],!0),w=f.toFloat().sub(y);return{value:w.mul(d).neg().sum([a]),gradFunc:function(C){var O=Ro(C.shape,[a]);return[C.reshape(O).mul(d.toFloat().sub(w.exp())),C.reshape(O).mul(w.exp().sub(d.toFloat()))]}}})(u,i)}(y,w);return Ia(q,C,f)}}),cf=Object.freeze({get Reduction(){return bo},absoluteDifference:ta,computeWeightedLoss:Ia,cosineDistance:Pu,hingeLoss:r_,huberLoss:Lv,logLoss:Bv,meanSquaredError:i_,sigmoidCrossEntropy:iw,softmaxCrossEntropy:uf});function o_(u,i){return void 0===i&&(i=!1),ve.engine.tidy(function(){if(2!==u.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+u.shape.length+"D Tensor.");for(var a=u.shape[0],d=u.shape[1],f=vy(a),y=u.clone(),w=ms([[1]],[1,1]),C=w.clone(),O=a>=d?d:a,U=function(q){var K,re=y,se=C,oe=f;K=ve.engine.tidy(function(){var de=y.slice([q,q],[a-q,1]),xe=de.norm(),Se=y.slice([q,q],[1,1]),ke=Se.sign().neg(),Ke=Se.sub(ke.mul(xe)),Ge=de.div(Ke);C=1===Ge.shape[0]?w.clone():w.concat(Ge.slice([1,0],[Ge.shape[0]-1,Ge.shape[1]]),0);var rt=ke.matMul(Ke).div(xe).neg(),ht=y.slice([q,0],[a-q,d]),At=rt.mul(C);y=0===q?ht.sub(At.matMul(C.transpose().matMul(ht))):y.slice([0,0],[q,d]).concat(ht.sub(At.matMul(C.transpose().matMul(ht))),0);var yt=f.slice([0,q],[a,f.shape[1]-q]);return f=0===q?yt.sub(yt.matMul(C).matMul(At.transpose())):f.slice([0,0],[a,q]).concat(yt.sub(yt.matMul(C).matMul(At.transpose())),1),[C,y,f]}),C=K[0],y=K[1],f=K[2],Pa([re,se,oe])},j=0;j<O;++j)U(j);return!i&&a>d&&(f=f.slice([0,0],[a,d]),y=y.slice([0,0],[d,d])),[f,y]})}var Uv=Te({gramSchmidt_:function oE(u){var i;if(Array.isArray(u)){i=!1,le(null!=u&&u.length>0,"Gram-Schmidt process: input must not be null, undefined, or empty");for(var a=u[0].shape[0],d=1;d<u.length;++d)le(u[d].shape[0]===a,"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+u[d].shape[0]+" vs. "+a+")")}else i=!0,u=wu(u,u.shape[0],0).map(function(C){return Cy(C,[0])});le(u.length<=u[0].shape[0],"Gram-Schmidt: Number of vectors ("+u.length+") exceeds number of dimensions ("+u[0].shape[0]+").");var f=[],y=u,w=function(C){f.push(ve.engine.tidy(function(){var O=y[C];if(C>0)for(var U=0;U<C;++U){var j=Bg(f[U].mulStrict(O)).mul(f[U]);O=O.sub(j)}return O.div(Ou(O,"euclidean"))}))};for(d=0;d<u.length;++d)w(d);return i?xu(f,0):f}}),Ta=Te({qr_:function Vv(u,i){if(void 0===i&&(i=!1),u.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+u.rank);if(2===u.rank)return o_(u,i);var a=u.shape.slice(0,u.shape.length-2).reduce(function(y,w){return y*w}),d=[],f=[];return zf(u.reshape([a,u.shape[u.shape.length-2],u.shape[u.shape.length-1]]),0).forEach(function(y){var w=o_(y,i),O=w[1];d.push(w[0]),f.push(O)}),[xu(d,0).reshape(u.shape),xu(f,0).reshape(u.shape)]}}),Pd=Object.freeze({gramSchmidt:Uv,qr:Ta});function l_(u,i,a,d,f){null==d&&(d=.5),null==f&&(f=Number.NEGATIVE_INFINITY);var y=u.shape[0];return a=Math.min(a,y),le(0<=d&&d<=1,"iouThreshold must be in [0, 1], but was '"+d+"'"),le(2===u.rank,"boxes must be a 2D tensor, but was of rank '"+u.rank+"'"),le(4===u.shape[1],"boxes must have 4 columns, but 2nd dimension was "+u.shape[1]),le(1===i.rank,"scores must be a 1D tensor"),le(i.shape[0]===y,"scores has incompatible shape with boxes. Expected "+y+", but was "+i.shape[0]),{maxOutputSize:a,iouThreshold:d,scoreThreshold:f}}var aw=Te({resizeBilinear_:function ow(u,i,a){void 0===a&&(a=!1);var d=ae(u,"images","resizeBilinear");le(3===d.rank||4===d.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+d.rank+"."),le(2===i.length,"Error in resizeBilinear: new shape must 2D, but got shape "+i+".");var f=d,y=!1;3===d.rank&&(y=!0,f=d.as4D(1,d.shape[0],d.shape[1],d.shape[2]));var w=i[0],C=i[1],O=ve.engine.runKernel(function(U,j){return U.resizeBilinear(f,w,C,a)},{batchImages:f},function(U,j){return{batchImages:function(){return ve.engine.runKernel(function(q){return q.resizeBilinearBackprop(U,f,a)},{})}}});return y?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}}),lw=Te({resizeNearestNeighbor_:function sw(u,i,a){void 0===a&&(a=!1);var d=ae(u,"images","resizeNearestNeighbor");le(3===d.rank||4===d.rank,"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+d.rank+"."),le(2===i.length,"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+i+"."),le("float32"===d.dtype||"int32"===d.dtype,"`images` must have `int32` or `float32` as dtype");var f=d,y=!1;3===d.rank&&(y=!0,f=d.as4D(1,d.shape[0],d.shape[1],d.shape[2]));var w=i[0],C=i[1],O=ve.engine.runKernel(function(U,j){return U.resizeNearestNeighbor(f,w,C,a)},{batchImages:f},function(U,j){return{batchImages:function(){return ve.engine.runKernel(function(q){return q.resizeNearestNeighborBackprop(U,f,a)},{})}}});return y?O.as3D(O.shape[1],O.shape[2],O.shape[3]):O}}),u_=Te({nonMaxSuppression_:function s_(u,i,a,d,f){void 0===d&&(d=.5),void 0===f&&(f=Number.NEGATIVE_INFINITY);var y=ae(u,"boxes","nonMaxSuppression"),w=ae(i,"scores","nonMaxSuppression"),C=l_(y,w,a,d,f);return a=C.maxOutputSize,d=C.iouThreshold,f=C.scoreThreshold,ve.engine.runKernel(function(O){return O.nonMaxSuppression(y,w,a,d,f)},{$boxes:y})}}),jv=Object.freeze({resizeBilinear:aw,resizeNearestNeighbor:lw,nonMaxSuppression:u_,nonMaxSuppressionAsync:function a_(u,i,a,d,f){return void 0===d&&(d=.5),void 0===f&&(f=Number.NEGATIVE_INFINITY),R(this,void 0,void 0,function(){var y,w,C,O,U,j;return W(this,function(q){switch(q.label){case 0:return y=ae(u,"boxes","nonMaxSuppressionAsync"),w=ae(i,"scores","nonMaxSuppressionAsync"),C=l_(y,w,a,d,f),a=C.maxOutputSize,d=C.iouThreshold,f=C.scoreThreshold,[4,y.data()];case 1:return O=q.sent(),[4,w.data()];case 2:return U=q.sent(),j=Us(O,U,a,d,f),y!==u&&y.dispose(),w!==i&&w.dispose(),[2,j]}})})},cropAndResize:function Rd(u,i,a,d,f,y){var w=ae(u,"image","cropAndResize","float32"),C=ae(i,"boxes","cropAndResize","float32"),O=ae(a,"boxInd","cropAndResize","int32");f=f||"bilinear",y=y||0;var U=C.shape[0];return le(4===w.rank,"Error in cropAndResize: image must be rank 4,but got rank "+w.rank+"."),le(2===C.rank&&4===C.shape[1],"Error in cropAndResize: boxes must be have size ["+U+",4] but had shape "+C.shape+"."),le(1===O.rank&&O.shape[0]===U,"Error in cropAndResize: boxInd must be have size ["+U+"] but had shape "+C.shape+"."),le("int32"===O.dtype,"Error in cropAndResize: boxInd must be of dtype int32, but got dtype "+O.dtype+"."),le(2===d.length,"Error in cropAndResize: cropSize must be of length 2, but got length "+d.length+"."),le(d[0]>=1&&d[1]>=1,"cropSize must be atleast [1,1], but was "+d),le("bilinear"===f||"nearest"===f,"method must be bilinear or nearest, but was "+f),ve.engine.runKernel(function(j,q){return j.cropAndResize(w,C,O,d,f,y)},{$image:w,$boxes:C})}}),cw=Object.freeze({image:jv,linalg:Pd,losses:cf,spectral:Mv,op:Te,batchNormalization2d:Ky,batchNormalization3d:Eg,batchNormalization4d:$o,batchNormalization:Vp,complex:Jt,real:fs,imag:ua,concat:is,concat1d:bu,concat2d:Ya,concat3d:Sp,concat4d:Dp,split:wu,conv1d:Ag,conv2d:Ed,conv2dDerFilter:Mg,depthwiseConv2d:Qf,separableConv2d:Rh,conv2dTranspose:Sc,matMul:Yy,dot:Xy,outerProduct:Qy,reverse:Qa,reverse1d:tv,reverse2d:Pg,reverse3d:nv,reverse4d:Rg,maxPool:av,avgPool:Cd,pool:S0,slice:Iu,slice1d:em,slice2d:Hp,slice3d:uv,slice4d:kg,abs:zl,acos:Ry,acosh:ky,asin:Fy,asinh:Ly,atan:By,atanh:Vy,ceil:Wf,clipByValue:g0,cos:yg,cosh:vg,erf:Uy,exp:kp,expm1:jl,floor:Mh,log:bg,log1p:wg,logSigmoid:Gf,neg:qf,reciprocal:Nh,round:xg,rsqrt:Fp,sigmoid:Lp,sign:Kf,sin:zy,sinh:Zf,softplus:jy,sqrt:Hy,square:$y,step:Wy,tan:Oh,tanh:Bp,all:pv,any:nm,argMax:rm,argMin:N0,logSumExp:Fg,max:im,mean:Wp,min:fv,moments:Lg,sum:Bg,prod:Vg,equal:om,equalStrict:sm,greater:Fh,greaterEqual:Ug,greaterEqualStrict:B0,greaterStrict:am,less:Cs,lessEqual:Lh,lessEqualStrict:Kp,lessStrict:Zp,notEqual:lm,notEqualStrict:Ss,add:Bh,addN:Qp,addStrict:Au,atan2:hm,div:Vh,divStrict:vv,floorDiv:Id,maximum:Td,maximumStrict:bv,minimum:Uh,minimumStrict:Mu,mod:Ja,modStrict:Ad,mul:Md,mulStrict:$g,pow:Da,powStrict:Ac,squaredDifference:Nd,squaredDifferenceStrict:Jp,sub:ef,subStrict:Nu,elu:gm,leakyRelu:qg,prelu:Sv,relu:Wo,selu:Kg,logicalAnd:fm,logicalNot:Wg,logicalOr:Cv,logicalXor:H0,where:Gg,whereAsync:zh,buffer:lr,toPixels:mh,print:Uf,batchToSpaceND:bh,cast:wh,clone:yy,cumsum:o0,depthToSpace:s0,expandDims:wc,eye:vy,fromPixels:by,multinomial:wy,oneHot:xh,pad:yd,pad1d:Eh,pad2d:Sa,pad3d:xy,pad4d:xc,rand:Ey,randomNormal:Ec,randomUniform:dg,reshape:Ch,spaceToBatchND:Sh,squeeze:Cy,stack:xu,tile:Xa,truncatedNormal:vd,unstack:zf,setdiff1dAsync:hg,fill:Bs,linspace:eu,ones:Mr,range:tu,scalar:st,tensor:vr,tensor1d:ko,tensor2d:ms,tensor3d:po,tensor4d:Ti,tensor5d:Gu,tensor6d:Ji,zeros:Fr,onesLike:Pi,zerosLike:Nn,transpose:K0,softmax:Kn,logSoftmax:Fa,localResponseNormalization:Yg,norm:Ou,gather:Qg,unsortedSegmentSum:vm,basicLSTMCell:el,multiRNNCell:Od,movingAverage:jh,stridedSlice:bm,topk:wm,scatterND:rE,fft:Hh,ifft:$h,rfft:$l,sparseToDense:Nv,gatherND:Ov}),Hv=function(){function u(){this.blockSize=48,this.firstUse=!0,ve.get("IS_BROWSER")&&(this.fromPixels2DContext=document.createElement("canvas").getContext("2d"))}return u.prototype.setDataMover=function(i){this.data=new ki(i)},u.prototype.register=function(i,a,d){if(this.firstUse&&(this.firstUse=!1,ve.get("IS_NODE")&&vi("\n============================\nHi there \u{1f44b}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(i))throw new Error("Data buffer is already registered");this.data.set(i,{dtype:d})},u.prototype.write=function(i,a){if(null==a)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(i).values=a},u.prototype.fromPixels=function(i,a){if(null==i)throw new Error("pixels passed to tf.fromPixels() can not be null");var d,f;if(ve.get("IS_NODE")&&null==i.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=i.getContext)d=i.getContext("2d").getImageData(0,0,i.width,i.height).data;else if(i instanceof ImageData)d=i.data;else{if(!(i instanceof HTMLImageElement||i instanceof HTMLVideoElement))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+i.constructor.name);if(null==this.fromPixels2DContext)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=i.width,this.fromPixels2DContext.canvas.height=i.height,this.fromPixels2DContext.drawImage(i,0,0,i.width,i.height),d=this.fromPixels2DContext.getImageData(0,0,i.width,i.height).data}if(4===a)f=new Int32Array(d);else{var y=i.width*i.height;f=new Int32Array(y*a);for(var w=0;w<y;w++)for(var C=0;C<a;++C)f[w*a+C]=d[4*w+C]}return po(f,[i.height,i.width,a],"int32")},u.prototype.read=function(i){return R(this,void 0,void 0,function(){return W(this,function(a){return[2,this.readSync(i)]})})},u.prototype.readSync=function(i){var a=this.data.get(i),f=a.complexTensors;return"complex64"===a.dtype?jc(f.real.dataSync(),f.imag.dataSync()):this.data.get(i).values},u.prototype.disposeData=function(i){if(this.data.has(i)){var a=this.data.get(i).complexTensors;null!=a&&(a.real.dispose(),a.imag.dispose()),this.data.delete(i)}},u.prototype.time=function(i){return R(this,void 0,void 0,function(){var a;return W(this,function(d){return a=ei(),i(),[2,{kernelMs:ei()-a}]})})},u.prototype.memory=function(){return{unreliable:!0}},u.prototype.complex=function(i,a){var d=Tt.make(i.shape,{},"complex64");return this.data.get(d.dataId).complexTensors={real:ve.engine.keep(i.clone()),imag:ve.engine.keep(a.clone())},d},u.prototype.real=function(i){return this.data.get(i.dataId).complexTensors.real.clone()},u.prototype.imag=function(i){return this.data.get(i.dataId).complexTensors.imag.clone()},u.prototype.assertNotComplex=function(i,a){Array.isArray(i)||(i=[i]),i.forEach(function(d){null!=d&&le("complex64"!==d.dtype,a+" does not support complex64 tensors.")})},u.prototype.slice=function(i,a,d){this.assertNotComplex(i,"slice");for(var f=lr(d,i.dtype),y=0;y<f.size;++y){var w=f.indexToLoc(y),C=w.map(function(O,U){return O+a[U]});f.set.apply(f,[i.get.apply(i,C)].concat(w))}return f.toTensor()},u.prototype.stridedSlice=function(i,a,d,f,y,w,C,O,U){this.assertNotComplex(i,"stridedSlice");var j=pl(i.shape,a,d,f,y,w,C,O,U),q=j[0],K=j[1],re=j[2],se=K.filter(function(Ke,Ge){return-1===re.indexOf(Ge)});if(se.some(function(Ke){return 0===Ke}))return vr([],se);for(var oe=lr(K,i.dtype),de=0;de<oe.size;de++){for(var xe=oe.indexToLoc(de),Se=new Array(xe.length),ke=0;ke<Se.length;ke++)Se[ke]=xe[ke]*f[ke]+q[ke];oe.set.apply(oe,[i.get.apply(i,Se)].concat(xe))}return oe.toTensor().reshape(se)},u.prototype.reverse=function(i,a){this.assertNotComplex(i,"reverse");for(var d=lr(i.shape,i.dtype),f=i.buffer(),y=function(C){var O=d.indexToLoc(C),U=O.slice();a.forEach(function(j){return U[j]=i.shape[j]-1-U[j]}),d.set.apply(d,[f.get.apply(f,U)].concat(O))},w=0;w<d.size;w++)y(w);return d.toTensor()},u.prototype.concat=function(i,a){this.assertNotComplex(i,"concat");var d=i.map(function(U){var j=Ie(U.shape.slice(a));return U.as2D(-1,j)}),f=cl(d.map(function(U){return U.shape}),1),y=lr(f,i[0].dtype).values;if(1===d[0].shape[0]){var w=0;d.forEach(function(U){y.set(U.dataSync(),w),w+=U.size})}else{var C=0;d.forEach(function(U){for(var j=U.dataSync(),q=0,K=0;K<U.shape[0];++K)for(var re=K*f[1]+C,se=0;se<U.shape[1];++se)y[re+se]=j[q++];C+=U.shape[1]})}var O=cl(i.map(function(U){return U.shape}),a);return vr(y,O,i[0].dtype)},u.prototype.neg=function(i){return this.assertNotComplex(i,"neg"),this.multiply(st(-1),i)},u.prototype.add=function(i,a){return"complex64"===i.dtype||"complex64"===a.dtype?this.broadcastedBinaryComplexOp(i.cast("complex64"),a.cast("complex64"),function(d,f,y,w){return{real:d+y,imag:f+w}}):this.broadcastedBinaryOp(i,a,Ir(i.dtype,a.dtype),function(d,f){return d+f})},u.prototype.addN=function(i){this.assertNotComplex(i,"addN");for(var a=i.map(function(O){return O.dataSync()}),d=lr(i[0].shape,i[0].dtype),f=d.values,y=0;y<i.length;y++)for(var w=a[y],C=0;C<f.length;C++)f[C]+=w[C];return d.toTensor()},u.prototype.subtract=function(i,a){return"complex64"===i.dtype||"complex64"===a.dtype?this.broadcastedBinaryComplexOp(i.cast("complex64"),a.cast("complex64"),function(d,f,y,w){return{real:d-y,imag:f-w}}):this.broadcastedBinaryOp(i,a,Ir(i.dtype,a.dtype),function(d,f){return d-f})},u.prototype.pow=function(i,a){return this.assertNotComplex([i,a],"pow"),this.broadcastedBinaryOp(i,a,i.dtype,function(d,f){return Math.pow(d,f)})},u.prototype.batchMatMul=function(i,a,d,f){this.assertNotComplex([i,a],"matMul");for(var y=d?i.shape[1]:i.shape[2],w=d?i.shape[2]:i.shape[1],C=f?a.shape[1]:a.shape[2],O=i.shape[0],U=i.dataSync(),j=a.dataSync(),q=d?[i.strides[0],1,i.strides[1]]:[i.strides[0],i.strides[1],1],K=q[0],re=q[1],se=q[2],oe=f?[1,a.strides[1],a.strides[0]]:[a.strides[1],1,a.strides[0]],de=oe[0],xe=oe[1],Se=oe[2],ke=w*C,Ke=new Float32Array(O*ke),Ge=this.blockSize,rt=0;rt<O;rt++)for(var ht=0;ht<w;ht+=Ge)for(var At=0;At<C;At+=Ge)for(var yt=0;yt<y;yt+=Ge)for(var Kt=Math.min(ht+Ge,w),_n=Math.min(At+Ge,C),On=Math.min(yt+Ge,y),Un=ht;Un<Kt;Un++)for(var or=At;or<_n;or++){for(var wr=0,En=yt;En<On;En++)wr+=U[rt*K+Un*re+En*se]*j[En*de+or*xe+rt*Se];Ke[rt*ke+(Un*C+or)]+=wr}return po(Ke,[O,w,C])},u.prototype.multiply=function(i,a){return"complex64"===i.dtype||"complex64"===a.dtype?this.broadcastedBinaryComplexOp(i.cast("complex64"),a.cast("complex64"),function(d,f,y,w){return{real:d*y-f*w,imag:d*w+f*y}}):this.broadcastedBinaryOp(i,a,Ir(i.dtype,a.dtype),function(d,f){return d*f})},u.prototype.realDivide=function(i,a){return this.assertNotComplex([i,a],"realDivide"),this.broadcastedBinaryOp(i,a,"float32",function(d,f){return d/f})},u.prototype.floorDiv=function(i,a){return this.assertNotComplex([i,a],"floorDiv"),this.broadcastedBinaryOp(i,a,"int32",function(d,f){return Math.floor(d/f)})},u.prototype.sum=function(i,a){this.assertNotComplex(i,"sum"),zr("sum",a,i.rank);for(var d=Gr(i.shape,a),y=d[1],w=Fr(d[0],Ir(i.dtype,"int32")),C=Ie(y),O=w.dataSync(),U=i.dataSync(),j=0;j<O.length;++j){for(var q=j*C,K=0,re=0;re<C;++re)K+=U[q+re];O[j]=K}return w},u.prototype.prod=function(i,a){this.assertNotComplex(i,"sum");for(var d=Gr(i.shape,a),y=d[1],w=Fr(d[0],Ir(i.dtype,"int32")),C=Ie(y),O=w.dataSync(),U=i.dataSync(),j=0;j<O.length;++j){for(var q=j*C,K=1,re=0;re<C;++re)K*=U[q+re];O[j]=K}return w},u.prototype.unsortedSegmentSum=function(i,a,d){this.assertNotComplex(i,"unsortedSegmentSum");for(var f=[],y=i.rank-a.rank,w=0;w<y;++w)a=a.expandDims(w+1);for(w=0;w<d;++w){var C=st(w,"int32"),O=om(C,a).asType("float32").mul(i).sum(0);f.push(O)}return xu(f)},u.prototype.argMin=function(i,a){this.assertNotComplex(i,"argMin");var d=[a];zr("argMin",d,i.rank);for(var f=Gr(i.shape,d),w=f[1],C=Fr(f[0],"int32"),O=Ie(w),U=C.dataSync(),j=i.dataSync(),q=0;q<U.length;++q){for(var K=q*O,re=j[K],se=0,oe=0;oe<O;++oe){var de=j[K+oe];de<re&&(re=de,se=oe)}U[q]=se}return C},u.prototype.argMax=function(i,a){this.assertNotComplex(i,"argMax");var d=[a];zr("argMax",d,i.rank);for(var f=Gr(i.shape,d),w=f[1],C=Fr(f[0],"int32"),O=Ie(w),U=C.dataSync(),j=i.dataSync(),q=0;q<U.length;++q){for(var K=q*O,re=j[K],se=0,oe=0;oe<O;++oe){var de=j[K+oe];de>re&&(re=de,se=oe)}U[q]=se}return C},u.prototype.cumsum=function(i,a,d,f){if(this.assertNotComplex(i,"cumsum"),a!==i.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(i.rank-1)+" but got axis="+a);for(var y=Ir(i.dtype,"int32"),w=Fr(i.shape,y),C=w.dataSync(),O=i.dataSync(),U=i.shape[i.rank-1],j=f?function(oe,de){return oe+U-de-1}:function(oe,de){return oe+de},q=0;q<O.length;q+=U)for(var K=0;K<U;K++){var re=j(q,K);if(0===K)C[re]=d?0:O[re];else{var se=j(q,K-1);C[re]=d?O[se]+C[se]:O[re]+C[se]}}return w},u.prototype.equal=function(i,a){return this.assertNotComplex([i,a],"equal"),this.broadcastedBinaryOp(i,a,"bool",function(d,f){return d===f?1:0})},u.prototype.notEqual=function(i,a){return this.assertNotComplex([i,a],"notEqual"),this.broadcastedBinaryOp(i,a,"bool",function(d,f){return d!==f?1:0})},u.prototype.less=function(i,a){return this.assertNotComplex([i,a],"less"),this.broadcastedBinaryOp(i,a,"bool",function(d,f){return d<f?1:0})},u.prototype.lessEqual=function(i,a){return this.assertNotComplex([i,a],"lessEqual"),this.broadcastedBinaryOp(i,a,"bool",function(d,f){return d<=f?1:0})},u.prototype.greater=function(i,a){return this.assertNotComplex([i,a],"greater"),this.broadcastedBinaryOp(i,a,"bool",function(d,f){return d>f?1:0})},u.prototype.greaterEqual=function(i,a){return this.assertNotComplex([i,a],"greaterEqual"),this.broadcastedBinaryOp(i,a,"bool",function(d,f){return d>=f?1:0})},u.prototype.logicalNot=function(i){this.assertNotComplex(i,"logicalNot");for(var a=i.dataSync(),d=new Int32Array(a.length),f=0;f<a.length;++f)d[f]=a[f]?0:1;return Tt.make(i.shape,{values:d},"bool")},u.prototype.logicalAnd=function(i,a){return this.assertNotComplex([i,a],"logicalAnd"),this.broadcastedBinaryOp(i,a,"bool",function(d,f){return d&&f})},u.prototype.logicalOr=function(i,a){return this.assertNotComplex([i,a],"logicalOr"),this.broadcastedBinaryOp(i,a,"bool",function(d,f){return d||f})},u.prototype.select=function(i,a,d){this.assertNotComplex([i,a,d],"select");for(var f=i.dataSync(),y=a.dataSync(),w=d.dataSync(),C=Fr(a.shape,Ir(a.dtype,d.dtype)),O=C.dataSync(),U=0,j=0===i.rank||i.rank>1||1===a.rank?1:a.shape[1],q=0;q<f.length;q++)for(var K=0;K<j;K++)O[U++]=1===f[q]?y[q]:w[q];return C},u.prototype.where=function(i){this.assertNotComplex([i],"where");var a=i.dataSync();return Eu(i.shape,a)},u.prototype.topk=function(i,a,d){return this.assertNotComplex(i,"topk"),Ba(i.dataSync(),i.shape,i.dtype,a)},u.prototype.min=function(i,a){this.assertNotComplex(i,"min"),zr("min",a,i.rank);for(var d=Gr(i.shape,a),y=d[1],w=Fr(d[0],i.dtype),C=Ie(y),O=w.dataSync(),U=i.dataSync(),j=0;j<O.length;++j){for(var q=j*C,K=U[q],re=0;re<C;++re){var se=U[q+re];se<K&&(K=se)}O[j]=K}return w},u.prototype.minimum=function(i,a){return this.assertNotComplex([i,a],"minimum"),this.broadcastedBinaryOp(i,a,i.dtype,function(d,f){return Math.min(d,f)})},u.prototype.mod=function(i,a){return this.assertNotComplex([i,a],"mod"),this.broadcastedBinaryOp(i,a,i.dtype,function(d,f){var y=d%f;return d<0&&f<0||d>=0&&f>=0?y:(y+f)%f})},u.prototype.max=function(i,a){this.assertNotComplex(i,"max"),zr("max",a,i.rank);for(var d=Gr(i.shape,a),y=d[1],w=Fr(d[0],i.dtype),C=Ie(y),O=w.dataSync(),U=i.dataSync(),j=0;j<O.length;++j){for(var q=j*C,K=U[q],re=0;re<C;++re){var se=U[q+re];se>K&&(K=se)}O[j]=K}return w},u.prototype.maximum=function(i,a){return this.assertNotComplex([i,a],"maximum"),this.broadcastedBinaryOp(i,a,i.dtype,function(d,f){return Math.max(d,f)})},u.prototype.all=function(i,a){this.assertNotComplex(i,"all"),zr("all",a,i.rank);for(var d=Gr(i.shape,a),y=d[1],w=Fr(d[0],i.dtype),C=Ie(y),O=w.dataSync(),U=i.dataSync(),j=0;j<O.length;++j){for(var q=j*C,K=U[q],re=0;re<C;++re)K=K&&U[q+re];O[j]=K}return w},u.prototype.any=function(i,a){this.assertNotComplex(i,"any"),zr("any",a,i.rank);for(var d=Gr(i.shape,a),y=d[1],w=Fr(d[0],i.dtype),C=Ie(y),O=w.dataSync(),U=i.dataSync(),j=0;j<O.length;++j){for(var q=j*C,K=U[q],re=0;re<C;++re)K=K||U[q+re];O[j]=K}return w},u.prototype.squaredDifference=function(i,a){return this.assertNotComplex([i,a],"squaredDifference"),this.broadcastedBinaryOp(i,a,i.dtype,function(d,f){var y=d-f;return y*y})},u.prototype.ceil=function(i){this.assertNotComplex(i,"ceil");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=Math.ceil(a[f]);return Tt.make(i.shape,{values:d})},u.prototype.floor=function(i){this.assertNotComplex(i,"floor");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=Math.floor(a[f]);return Tt.make(i.shape,{values:d})},u.prototype.sign=function(i){this.assertNotComplex(i,"x");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=a[f]<0?-1:a[f]>0?1:0;return Tt.make(i.shape,{values:d})},u.prototype.round=function(i){this.assertNotComplex(i,"round");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f){var y=Math.floor(a[f]);d[f]=a[f]-y<.5?Math.floor(a[f]):a[f]-y>.5?Math.ceil(a[f]):y%2==0?y:y+1}return Tt.make(i.shape,{values:d})},u.prototype.exp=function(i){this.assertNotComplex(i,"exp");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=Math.exp(a[f]);return Tt.make(i.shape,{values:d})},u.prototype.expm1=function(i){this.assertNotComplex(i,"expm1");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=Math.expm1(a[f]);return Tt.make(i.shape,{values:d})},u.prototype.log=function(i){this.assertNotComplex(i,"log");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=Math.log(a[f]);return Tt.make(i.shape,{values:d})},u.prototype.log1p=function(i){this.assertNotComplex(i,"log1p");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=Math.log1p(a[f]);return Tt.make(i.shape,{values:d})},u.prototype.sqrt=function(i){this.assertNotComplex(i,"sqrt");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=Math.sqrt(a[f]);return Tt.make(i.shape,{values:d})},u.prototype.rsqrt=function(i){this.assertNotComplex(i,"rsqrt");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=1/Math.sqrt(a[f]);return Tt.make(i.shape,{values:d})},u.prototype.square=function(i){this.assertNotComplex(i,"square");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f){var y=a[f];d[f]=y*y}return Tt.make(i.shape,{values:d})},u.prototype.reciprocal=function(i){this.assertNotComplex(i,"reciprocal");for(var a=i.dataSync(),d=new Float32Array(a.length),f=0;f<a.length;++f)d[f]=1/a[f];return Tt.make(i.shape,{values:d})},u.prototype.relu=function(i){this.assertNotComplex(i,"relu");for(var a=Fr(i.shape,i.dtype),d=a.dataSync(),f=i.dataSync(),y=0;y<f.length;++y)d[y]=Math.max(0,f[y]);return a},u.prototype.elu=function(i){this.assertNotComplex(i,"elu");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f){var y=d[f];a[f]=y>=0?y:Math.exp(y)-1}return Tt.make(i.shape,{values:a})},u.prototype.eluDer=function(i,a){this.assertNotComplex([i,a],"eluDer");for(var d=new Float32Array(a.size),f=a.dataSync(),y=i.dataSync(),w=0;w<f.length;++w){var C=f[w];d[w]=C>=1?y[w]:y[w]*(C+1)}return Tt.make(a.shape,{values:d})},u.prototype.selu=function(i){this.assertNotComplex(i,"selu");for(var f=new Float32Array(i.size),y=i.dataSync(),w=0;w<y.length;++w){var C=y[w];f[w]=C>=0?1.0507009873554805*C:1.7580993408473768*(Math.exp(C)-1)}return Tt.make(i.shape,{values:f})},u.prototype.clip=function(i,a,d){this.assertNotComplex(i,"clip");for(var f=new Float32Array(i.size),y=i.dataSync(),w=0;w<y.length;++w){var C=y[w];f[w]=C>d?d:C<a?a:C}return Tt.make(i.shape,{values:f})},u.prototype.abs=function(i){for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.abs(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.complexAbs=function(i){for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<i.size;++f){var y=d[2*f],w=d[2*f+1];a[f]=Math.sqrt(y*y+w*w)}return Tt.make(i.shape,{values:a})},u.prototype.int=function(i){this.assertNotComplex(i,"int");for(var a=new Int32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=d[f];return Tt.make(i.shape,{values:a},"int32")},u.prototype.sigmoid=function(i){this.assertNotComplex(i,"sigmoid");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=1/(1+Math.exp(-d[f]));return Tt.make(i.shape,{values:a})},u.prototype.softplus=function(i){this.assertNotComplex(i,"softplus");for(var a=Math.log(1.1920928955078125e-7)+2,d=new Float32Array(i.size),f=i.dataSync(),y=0;y<f.length;++y){var U,w=f[y]>-a,C=f[y]<a,O=Math.exp(f[y]);U=C?O:w?f[y]:Math.log(1+O),d[y]=U}return Tt.make(i.shape,{values:d})},u.prototype.sin=function(i){this.assertNotComplex(i,"sin");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.sin(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.cos=function(i){this.assertNotComplex(i,"cos");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.cos(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.tan=function(i){this.assertNotComplex(i,"tan");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.tan(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.asin=function(i){this.assertNotComplex(i,"asin");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.asin(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.acos=function(i){this.assertNotComplex(i,"acos");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.acos(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.atan=function(i){this.assertNotComplex(i,"atan");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.atan(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.atan2=function(i,a){return this.assertNotComplex([i,a],"atan2"),this.broadcastedBinaryOp(i,a,i.dtype,function(d,f){return Math.atan2(d,f)})},u.prototype.sinh=function(i){this.assertNotComplex(i,"sinh");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.sinh(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.cosh=function(i){this.assertNotComplex(i,"cosh");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.cosh(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.tanh=function(i){this.assertNotComplex(i,"tanh");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=pt(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.asinh=function(i){this.assertNotComplex(i,"asinh");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.asinh(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.acosh=function(i){this.assertNotComplex(i,"acosh");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.acosh(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.atanh=function(i){this.assertNotComplex(i,"atanh");for(var a=new Float32Array(i.size),d=i.dataSync(),f=0;f<d.length;++f)a[f]=Math.atanh(d[f]);return Tt.make(i.shape,{values:a})},u.prototype.erf=function(i){this.assertNotComplex(i,"erf");for(var a=new Float32Array(i.size),d=i.dataSync(),j=0;j<d.length;++j){var q=d[j],K=1/(1+.3275911*q);a[j]=1-((((1.061405429*K-1.453152027)*K+1.421413741)*K-.284496736)*K+.254829592)*K*Math.exp(-q*q)}return Tt.make(i.shape,{values:a})},u.prototype.step=function(i,a){void 0===a&&(a=0),this.assertNotComplex(i,"step");for(var d=new Float32Array(i.size),f=i.dataSync(),y=0;y<f.length;++y){var w=f[y];d[y]=isNaN(w)?NaN:w>0?1:a}return Tt.make(i.shape,{values:d})},u.prototype.conv2d=function(i,a,d){this.assertNotComplex([i,a],"conv2d");for(var f=d.filterHeight,y=d.filterWidth,w=d.dilationHeight,C=d.dilationWidth,O=d.padInfo.left,U=d.padInfo.top,j=lr(d.outShape,i.dtype),q=i.dataSync(),K=a.dataSync(),re=j.values,se=0;se<d.batchSize;++se)for(var oe=se*i.strides[0],de=se*j.strides[0],xe=0;xe<d.outHeight;++xe)for(var Se=de+xe*j.strides[1],ke=xe*d.strideHeight-O,Ke=0;Ke<f;Ke++){var Ge=ke+Ke*w;if(!(Ge<0||Ge>=d.inHeight))for(var rt=Ke*a.strides[0],ht=oe+Ge*i.strides[1],At=0;At<d.outWidth;++At)for(var yt=Se+At*d.outChannels,Kt=At*d.strideWidth-U,_n=0;_n<y;_n++){var On=Kt+_n*C;if(!(On<0||On>=d.inWidth))for(var or=ht+On*d.inChannels,wr=rt+_n*a.strides[1],En=0;En<d.inChannels;++En){for(var un=q[or+En],xn=0;xn<d.outChannels;++xn)re[yt+xn]+=un*K[wr+xn];wr+=d.outChannels}}}return j.toTensor()},u.prototype.conv2dDerInput=function(i,a,d){this.assertNotComplex([i,a],"conv2dDerInput");for(var f=lr(d.inShape,"float32"),y=f.values,w=f.strides,C=w[0],O=w[1],U=w[2],j=i.dataSync(),q=i.strides,K=q[0],re=q[1],se=q[2],oe=a.dataSync(),de=a.strides,xe=de[0],Se=de[1],ke=de[2],Ke=d.batchSize,Ge=d.filterHeight,rt=d.filterWidth,ht=d.inChannels,At=d.inHeight,yt=d.inWidth,Kt=d.outChannels,_n=d.outHeight,On=d.outWidth,Un=d.strideHeight,or=d.strideWidth,wr=Ge-1-d.padInfo.top,En=rt-1-d.padInfo.left,un=0;un<Ke;++un)for(var xn=0;xn<ht;++xn)for(var ur=0;ur<At;++ur)for(var Xr=ur-wr,io=Math.max(0,Math.ceil(Xr/Un)),qi=Math.min(_n,(Ge+Xr)/Un),Ts=0;Ts<yt;++Ts){for(var Go=Ts-En,As=Math.max(0,Math.ceil(Go/or)),as=Math.min(On,(rt+Go)/or),oa=0,Ms=io;Ms<qi;++Ms)for(var qo=Ms*Un-Xr,ci=As;ci<as;++ci)for(var xo=K*un+re*Ms+se*ci,Zh=xe*(Ge-1-qo)+Se*(rt-1-(ci*or-Go))+ke*xn,Pc=0;Pc<Kt;++Pc)oa+=j[xo+Pc]*oe[Zh+Pc];y[C*un+O*ur+U*Ts+xn]=oa}return f.toTensor()},u.prototype.conv2dDerFilter=function(i,a,d){this.assertNotComplex([i,a],"conv2dDerFilter");for(var f=d.strideHeight,y=d.strideWidth,w=d.filterHeight,C=d.filterWidth,O=lr(d.filterShape,"float32"),U=d.padInfo.left,j=d.padInfo.top,q=0;q<w;++q)for(var K=Math.max(0,Math.ceil((j-q)/f)),re=Math.min(d.outHeight,(d.inHeight+j-q)/f),se=0;se<C;++se)for(var oe=Math.max(0,Math.ceil((U-se)/y)),de=Math.min(d.outWidth,(d.inWidth+U-se)/y),xe=0;xe<d.inChannels;++xe)for(var Se=0;Se<d.outChannels;++Se){for(var ke=0,Ke=0;Ke<d.batchSize;++Ke)for(var Ge=K;Ge<re;++Ge)for(var rt=q+Ge*f-j,ht=oe;ht<de;++ht)ke+=i.get(Ke,rt,se+ht*y-U,xe)*a.get(Ke,Ge,ht,Se);O.set(ke,q,se,xe,Se)}return O.toTensor()},u.prototype.depthwiseConv2D=function(i,a,d){this.assertNotComplex([i,a],"depthwiseConv2D");for(var f=d.filterHeight,y=d.filterWidth,w=d.dilationHeight,C=d.dilationWidth,O=d.padInfo.left,U=d.padInfo.top,j=d.outChannels/d.inChannels,q=lr(d.outShape,i.dtype),K=i.dataSync(),re=a.dataSync(),se=q.values,oe=0;oe<d.batchSize;++oe)for(var de=oe*i.strides[0],xe=oe*q.strides[0],Se=0;Se<d.outHeight;++Se)for(var ke=xe+Se*q.strides[1],Ke=Se*d.strideHeight-O,Ge=0;Ge<f;++Ge){var rt=Ke+Ge*w;if(!(rt<0||rt>=d.inHeight))for(var ht=Ge*a.strides[0],At=de+rt*i.strides[1],yt=0;yt<d.outWidth;++yt)for(var Kt=ke+yt*q.strides[2],_n=yt*d.strideWidth-U,On=0;On<y;++On){var Un=_n+On*C;if(!(Un<0||Un>=d.inWidth))for(var wr=At+Un*d.inChannels,En=Kt,un=ht+On*a.strides[1],xn=0;xn<d.inChannels;++xn){for(var ur=K[wr+xn],Xr=0;Xr<j;++Xr)se[En+Xr]+=ur*re[un+Xr];En+=j,un+=j}}}return q.toTensor()},u.prototype.depthwiseConv2DDerInput=function(i,a,d){this.assertNotComplex([i,a],"depthwiseConv2DDerInput");for(var f=lr(d.inShape,"float32"),y=f.values,w=f.strides,C=w[0],O=w[1],U=w[2],j=i.dataSync(),q=i.strides,K=q[0],re=q[1],se=q[2],oe=a.dataSync(),de=a.strides,xe=de[0],Se=de[1],ke=de[2],Ke=d.batchSize,Ge=d.filterHeight,rt=d.filterWidth,ht=d.inChannels,At=d.inHeight,yt=d.inWidth,_n=d.outHeight,On=d.outWidth,Un=d.strideHeight,or=d.strideWidth,wr=Ge-1-d.padInfo.top,En=rt-1-d.padInfo.left,un=d.outChannels/ht,xn=0;xn<Ke;++xn)for(var ur=0;ur<ht;++ur)for(var Xr=0;Xr<At;++Xr)for(var io=Xr-wr,qi=Math.max(0,Math.ceil(io/Un)),Ts=Math.min(_n,(Ge+io)/Un),Go=0;Go<yt;++Go){for(var As=Go-En,as=Math.max(0,Math.ceil(As/or)),oa=Math.min(On,(rt+As)/or),Ms=0,qo=qi;qo<Ts;++qo)for(var ci=qo*Un-io,xo=as;xo<oa;++xo)for(var Zh=K*xn+re*qo+se*xo,Pc=xe*(Ge-1-ci)+Se*(rt-1-(xo*or-As))+ke*ur,Ld=0;Ld<un;++Ld)Ms+=j[Zh+(ur*un+Ld)]*oe[Pc+Ld];y[C*xn+O*Xr+U*Go+ur]=Ms}return f.toTensor()},u.prototype.depthwiseConv2DDerFilter=function(i,a,d){this.assertNotComplex([i,a],"depthwiseConv2DDerFilter");for(var f=d.strideHeight,y=d.strideWidth,w=d.filterHeight,C=d.filterWidth,O=lr(d.filterShape,"float32"),U=d.padInfo.left,j=d.padInfo.top,q=d.outChannels/d.inChannels,K=0;K<w;++K)for(var re=Math.max(0,Math.ceil((j-K)/f)),se=Math.min(d.outHeight,(d.inHeight+j-K)/f),oe=0;oe<C;++oe)for(var de=Math.max(0,Math.ceil((U-oe)/y)),xe=Math.min(d.outWidth,(d.inWidth+U-oe)/y),Se=0;Se<d.outChannels;++Se){for(var ke=Math.trunc(Se/q),Ke=Se%q,Ge=0,rt=0;rt<d.batchSize;++rt)for(var ht=re;ht<se;++ht)for(var At=K+ht*f-j,yt=de;yt<xe;++yt)Ge+=i.get(rt,At,oe+yt*y-U,ke)*a.get(rt,ht,yt,Se);O.set(Ge,K,oe,ke,Ke)}return O.toTensor()},u.prototype.tile=function(i,a){this.assertNotComplex(i,"tile");for(var d=new Array(i.rank),f=0;f<d.length;f++)d[f]=i.shape[f]*a[f];var y=lr(d,i.dtype),w=i.buffer();for(f=0;f<y.values.length;++f){for(var C=y.indexToLoc(f),O=new Array(i.rank),U=0;U<O.length;U++)O[U]=C[U]%i.shape[U];var j=w.locToIndex(O);y.values[f]=w.values[j]}return y.toTensor()},u.prototype.pad=function(i,a,d){this.assertNotComplex(i,"pad");var f=a.map(function(q,K){return q[0]+i.shape[K]+q[1]}),y=a.map(function(q){return q[0]}),w=i.buffer(),C=lr(f,i.dtype);0!==d&&C.values.fill(d);for(var O=0;O<i.size;O++){var U=w.indexToLoc(O),j=U.map(function(q,K){return q+y[K]});C.set.apply(C,[i.get.apply(i,U)].concat(j))}return C.toTensor()},u.prototype.transpose=function(i,a){this.assertNotComplex(i,"transpose");for(var d=new Array(i.rank),f=0;f<d.length;f++)d[f]=i.shape[a[f]];var y=i.dataSync(),w=lr(d,i.dtype),C=i.buffer();for(f=0;f<i.size;++f){for(var O=C.indexToLoc(f),U=new Array(O.length),j=0;j<U.length;j++)U[j]=O[a[j]];var q=w.locToIndex(U);w.values[q]=y[f]}return w.toTensor()},u.prototype.gather=function(i,a,d){this.assertNotComplex([i,a],"gather");var f=i.shape.slice(),y=a.dataSync();f[d]=y.length;for(var w=lr(f,i.dtype),C=i.buffer(),O=0;O<w.size;++O){var U=w.indexToLoc(O),j=U.slice();j[d]=y[U[d]];var q=C.locToIndex(j);w.values[O]=C.values[q]}return w.toTensor()},u.prototype.batchToSpaceND=function(i,a,d){this.assertNotComplex([i],"batchToSpaceND");var f=a.reduce(function(j,q){return j*q}),y=ks(i.shape,a,f),w=Po(y.length,a.length),C=ul(i.shape,a,f),O=Xl(d,a.length),U=Fs(C,d,a.length);return i.reshape(y).transpose(w).reshape(C).slice(O,U)},u.prototype.spaceToBatchND=function(i,a,d){this.assertNotComplex([i],"spaceToBatchND");var f=a.reduce(function(q,K){return q*K}),y=[[0,0]];y.push.apply(y,d);for(var w=1+a.length;w<i.shape.length;++w)y.push([0,0]);var C=i.pad(y),O=ks(C.shape,a,f,!1),U=Po(O.length,a.length,!1),j=ul(C.shape,a,f,!1);return C.reshape(O).transpose(U).reshape(j)},u.prototype.pool=function(i,a,d){this.assertNotComplex(i,"pool");for(var f=a.strideHeight,y=a.strideWidth,w=a.dilationHeight,C=a.dilationWidth,O=a.effectiveFilterHeight,U=a.effectiveFilterWidth,j=a.padInfo.top,q=a.padInfo.left,K="max"===d?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,re=i.dataSync(),se=lr(a.outShape,i.dtype),oe=se.values,de=a.outShape[1]*a.outShape[2]*a.outShape[3],xe=a.outShape[2]*a.outShape[3],Se=a.outShape[3],ke=0;ke<a.batchSize;++ke)for(var Ke=ke*de,Ge=ke*i.strides[0],rt=0;rt<a.inChannels;++rt)for(var ht=0;ht<a.outHeight;++ht)for(var At=ht*f-j,yt=Math.max(0,At),Kt=Math.min(a.inHeight,O+At),_n=Ke+ht*xe,On=0;On<a.outWidth;++On){for(var Un=On*y-q,or=Math.max(0,Un),wr=Math.min(a.inWidth,U+Un),En=K,un=0,xn=0,ur=yt;ur<Kt;ur+=w){for(var Xr=Ge+ur*i.strides[1],io=or;io<wr;io+=C){var qi=re[Xr+io*i.strides[2]+rt];"max"===d&&qi>En?En=qi:"avg"===d&&(un+=qi,xn++)}if(isNaN(En))break}oe[_n+On*Se+rt]="avg"===d?un/xn:En}return se.toTensor()},u.prototype.maxPool=function(i,a){return this.pool(i,a,"max")},u.prototype.maxPoolPositions=function(i,a){for(var d=lr(a.outShape,"int32"),f=a.strideHeight,y=a.strideWidth,w=a.dilationHeight,C=a.dilationWidth,O=a.effectiveFilterHeight,U=a.effectiveFilterWidth,j=a.padInfo.top,q=a.padInfo.left,K=0;K<a.batchSize;++K)for(var re=0;re<a.inChannels;++re)for(var se=0;se<a.outHeight;++se){for(var oe=se*f-j,de=oe;de<0;)de+=w;for(var xe=Math.min(a.inHeight,O+oe),Se=0;Se<a.outWidth;++Se){for(var ke=Se*y-q,Ke=ke;Ke<0;)Ke+=C;for(var Ge=Math.min(a.inWidth,U+ke),rt=Number.NEGATIVE_INFINITY,ht=-1,At=de;At<xe;At+=w)for(var yt=At-oe,Kt=Ke;Kt<Ge;Kt+=C){var _n=Kt-ke,On=i.get(K,At,Kt,re);On>rt&&(rt=On,ht=yt*U+_n)}d.set(ht,K,se,Se,re)}}return d.toTensor()},u.prototype.maxPoolBackprop=function(i,a,d,f){this.assertNotComplex([a,d],"maxPoolBackprop");for(var y=this.maxPoolPositions(a,f),w=f.strideHeight,C=f.strideWidth,O=f.dilationHeight,U=f.dilationWidth,j=f.effectiveFilterHeight,q=f.effectiveFilterWidth,K=q-1-f.padInfo.left,re=j-1-f.padInfo.top,se=lr(a.shape,"float32"),oe=0;oe<f.batchSize;++oe)for(var de=0;de<f.inChannels;++de)for(var xe=0;xe<f.inHeight;++xe)for(var Se=0;Se<f.inWidth;++Se){for(var ke=xe-re,Ke=Se-K,Ge=0,rt=0;rt<j;rt+=O){var ht=(ke+rt)/w;if(!(ht<0||ht>=f.outHeight||Math.floor(ht)!==ht))for(var At=0;At<q;At+=U){var yt=(Ke+At)/C;if(!(yt<0||yt>=f.outWidth||Math.floor(yt)!==yt)){var Kt=j*q-1-y.get(oe,ht,yt,de)===rt*q+At?1:0;0!==Kt&&(Ge+=i.get(oe,ht,yt,de)*Kt)}}}se.set(Ge,oe,xe,Se,de)}return se.toTensor()},u.prototype.avgPoolBackprop=function(i,a,d){this.assertNotComplex([i,a],"avgPoolBackprop");for(var f=d.strideHeight,y=d.strideWidth,w=d.filterHeight,C=d.filterWidth,O=d.dilationHeight,U=d.dilationWidth,j=d.effectiveFilterHeight,q=d.effectiveFilterWidth,K=q-1-d.padInfo.left,re=j-1-d.padInfo.top,se=lr(a.shape,"float32"),oe=1/(w*C),de=0;de<d.batchSize;++de)for(var xe=0;xe<d.inChannels;++xe)for(var Se=0;Se<d.inHeight;++Se)for(var ke=0;ke<d.inWidth;++ke){for(var Ke=Se-re,Ge=ke-K,rt=0,ht=0;ht<j;ht+=O){var At=(Ke+ht)/f;if(!(At<0||At>=d.outHeight||Math.floor(At)!==At))for(var yt=0;yt<q;yt+=U){var Kt=(Ge+yt)/y;Kt<0||Kt>=d.outWidth||Math.floor(Kt)!==Kt||(rt+=i.get(de,At,Kt,xe))}}se.set(rt*oe,de,Se,ke,xe)}return se.toTensor()},u.prototype.cast=function(i,a){return fo(i,a,this)},u.prototype.reshape=function(i,a){return qd(i,a)},u.prototype.avgPool=function(i,a){return this.assertNotComplex(i,"avgPool"),this.pool(i,a,"avg").toFloat()},u.prototype.resizeBilinear=function(i,a,d,f){this.assertNotComplex(i,"resizeBilinear");for(var y=i.shape,w=y[0],C=y[1],O=y[2],U=y[3],j=i.dataSync(),q=new Float32Array(Ie([w,a,d,U])),K=[f&&a>1?C-1:C,f&&d>1?O-1:O],re=[f&&a>1?a-1:a,f&&d>1?d-1:d],se=0,oe=K[0]/re[0],de=K[1]/re[1],xe=0;xe<w;xe++)for(var Se=0;Se<a;Se++)for(var ke=oe*Se,Ke=Math.floor(ke),Ge=ke-Ke,rt=Math.min(C-1,Math.ceil(ke)),ht=xe*i.strides[0]+Ke*i.strides[1],At=xe*i.strides[0]+rt*i.strides[1],yt=0;yt<d;yt++)for(var Kt=de*yt,_n=Math.floor(Kt),On=Kt-_n,Un=Math.min(O-1,Math.ceil(Kt)),or=ht+_n*i.strides[2],wr=At+_n*i.strides[2],En=ht+ +Un*i.strides[2],un=At+Un*i.strides[2],xn=0;xn<U;xn++){var ur=j[or+xn],Xr=j[wr+xn],io=ur+(j[En+xn]-ur)*On;q[se++]=io+(Xr+(j[un+xn]-Xr)*On-io)*Ge}return vr(q,[w,a,d,U])},u.prototype.resizeBilinearBackprop=function(i,a,d){this.assertNotComplex([i,a],"resizeBilinearBackprop");for(var f=a.shape,y=f[0],w=f[1],C=f[2],O=f[3],U=i.shape,j=U[1],q=U[2],K=new Float32Array(y*w*C*O),re=[d&&j>1?w-1:w,d&&q>1?C-1:C],se=[d&&j>1?j-1:j,d&&q>1?q-1:q],oe=re[0]/se[0],de=re[1]/se[1],xe=i.dataSync(),Se=0,ke=0;ke<y;ke++)for(var Ke=ke*a.strides[0],Ge=0;Ge<j;Ge++)for(var rt=Ge*oe,ht=Math.floor(rt),At=Math.min(Math.ceil(rt),w-1),yt=Ke+ht*a.strides[1],Kt=Ke+At*a.strides[1],_n=rt-ht,On=1-_n,Un=0;Un<q;Un++)for(var or=Un*de,wr=Math.floor(or),En=Math.min(Math.ceil(or),C-1),un=or-wr,xn=1-un,ur=yt+wr*a.strides[2],Xr=yt+En*a.strides[2],io=Kt+wr*a.strides[2],qi=Kt+En*a.strides[2],Ts=On*xn,Go=On*un,As=_n*xn,as=_n*un,oa=0;oa<O;oa++){var Ms=xe[Se++];K[ur+oa]+=Ms*Ts,K[Xr+oa]+=Ms*Go,K[io+oa]+=Ms*As,K[qi+oa]+=Ms*as}return Ti(K,[y,C,w,O],a.dtype)},u.prototype.resizeNearestNeighbor=function(i,a,d,f){this.assertNotComplex(i,"resizeNearestNeighbor");for(var y=i.shape,w=y[0],C=y[1],O=y[2],U=y[3],j=i.dataSync(),q=new Float32Array(w*a*d*U),K=[f&&a>1?C-1:C,f&&d>1?O-1:O],re=[f&&a>1?a-1:a,f&&d>1?d-1:d],se=K[0]/re[0],oe=K[1]/re[1],de=0,xe=0;xe<w;xe++)for(var Se=xe*i.strides[0],ke=0;ke<a;ke++)for(var Ke=se*ke,Ge=Se+Math.min(C-1,f?Math.round(Ke):Math.floor(Ke))*i.strides[1],rt=0;rt<d;rt++)for(var ht=oe*rt,At=Ge+Math.min(O-1,f?Math.round(ht):Math.floor(ht))*i.strides[2],yt=0;yt<U;yt++)q[de++]=j[At+yt];return vr(q,[w,a,d,U],i.dtype)},u.prototype.resizeNearestNeighborBackprop=function(i,a,d){this.assertNotComplex([i,a],"resizeNearestNeighborBackprop");for(var f=a.shape,y=f[0],w=f[1],C=f[2],O=f[3],U=i.shape,j=U[1],q=U[2],K=new Float32Array(y*w*C*O),re=i.dataSync(),se=[d&&j>1?w-1:w,d&&q>1?C-1:C],oe=[d&&j>1?j-1:j,d&&q>1?q-1:q],de=se[0]/oe[0],xe=se[1]/oe[1],Se=1/de,ke=1/xe,Ke=2*Math.ceil(Se)+2,Ge=2*Math.ceil(ke)+2,rt=0;rt<y;rt++)for(var ht=rt*a.strides[0],At=0;At<w;At++)for(var yt=ht+At*a.strides[1],Kt=Math.floor(At*Se),_n=Math.floor(Kt-Ke/2),On=0;On<C;On++)for(var Un=yt+On*a.strides[2],or=Math.floor(On*ke),wr=Math.floor(or-Ge/2),En=0;En<O;En++){for(var un=0,xn=0;xn<Ke;xn++){var ur=xn+_n;if(!(ur<0||ur>=j)){var Xr=ht+ur*i.strides[1],io=ur*de;if(At===Math.min(w-1,d?Math.round(io):Math.floor(io)))for(var qi=0;qi<Ge;qi++){var Ts=qi+wr;if(!(Ts<0||Ts>=q)){var Go=Xr+Ts*i.strides[2],As=Ts*xe;On===Math.min(C-1,d?Math.round(As):Math.floor(As))&&(un+=re[Go+En])}}}}K[Un+En]=un}return Ti(K,a.shape,a.dtype)},u.prototype.batchNormalization=function(i,a,d,f,y,w){this.assertNotComplex([i,a,d,y,w],"batchNormalization");for(var C=i.dataSync(),O=a.dataSync(),U=d.dataSync(),j=y?y.dataSync():new Float32Array([1]),q=w?w.dataSync():new Float32Array([0]),K=new Float32Array(C.length),re=q.length,se=j.length,oe=U.length,de=O.length,xe=0,Se=0,ke=0,Ke=0,Ge=0;Ge<C.length;++Ge)K[Ge]=q[xe++]+(C[Ge]-O[Se++])*j[ke++]/Math.sqrt(U[Ke++]+f),xe>=re&&(xe=0),Se>=de&&(Se=0),ke>=se&&(ke=0),Ke>=oe&&(Ke=0);return Ti(K,i.shape)},u.prototype.localResponseNormalization4D=function(i,a,d,f,y){this.assertNotComplex(i,"localResponseNormalization4D");var w=i.shape[3],C=w-1,O=i.dataSync(),U=Ie(i.shape),j=new Float32Array(U);function q(oe){for(var de=oe%w,xe=oe-de+Math.max(0,de-a),Se=oe-de+Math.min(de+a,C),ke=0;xe<=Se;xe++){var Ke=O[xe];ke+=Ke*Ke}return ke}for(var K=0;K<U;K++){var re=q(K),se=O[K]*Math.pow(d+f*re,-y);j[K]=se}return Ti(j,i.shape)},u.prototype.LRNGrad=function(i,a,d,f,y,w,C){this.assertNotComplex(i,"LRNGrad");for(var O=i.shape[3],U=i.dataSync(),j=a.dataSync(),q=d.dataSync(),K=new Float32Array(Ie(i.shape)),re=Ie(i.shape),se=0;se<re;se++){for(var oe=se%O,de=se-oe+Math.max(0,oe-f),xe=se-oe+Math.min(O,oe+f+1),Se=0,ke=de;ke<xe;ke++)Se+=Math.pow(j[ke],2);for(Se=w*Se+y,ke=de;ke<xe;ke++){var Ke=-2*w*C*j[ke]*q[se]/Se;se===ke&&(Ke+=Math.pow(Se,-C)),K[ke]+=Ke*=U[se]}}return Ti(K,i.shape)},u.prototype.multinomial=function(i,a,d,f){this.assertNotComplex(i,"multinomial");for(var y=a?i:Kn(i),w=y.shape[0],C=y.shape[1],O=Fr([w,d],"int32"),U=O.dataSync(),j=y.dataSync(),q=0;q<w;++q){var K=q*C,re=new Float32Array(C-1);re[0]=j[K];for(var se=1;se<re.length;++se)re[se]=re[se-1]+j[K+se];for(var oe=Le(f.toString()),de=q*d,xe=0;xe<d;++xe){var Se=oe();U[de+xe]=re.length;for(var ke=0;ke<re.length;ke++)if(Se<re[ke]){U[de+xe]=ke;break}}}return O},u.prototype.oneHot=function(i,a,d,f){this.assertNotComplex(i,"oneHot");var y=new Float32Array(i.size*a);y.fill(f);for(var w=0;w<i.size;++w)i.get(w)>=0&&i.get(w)<a&&(y[w*a+i.get(w)]=d);return ms(y,[i.size,a],"int32")},u.prototype.nonMaxSuppression=function(i,a,d,f,y){return this.assertNotComplex(i,"nonMaxSuppression"),Us(i.dataSync(),a.dataSync(),d,f,y)},u.prototype.fft=function(i){if(1!==i.shape[0])throw new Error("tf.fft() on CPU only supports vectors.");return this.fftImpl(i,!1)},u.prototype.ifft=function(i){if(1!==i.shape[0])throw new Error("tf.ifft() on CPU only supports vectors.");return this.fftImpl(i,!0)},u.prototype.fftImpl=function(i,a){var d=i.as1D(),f=d.size;if(this.isExponentOf2(f)){var y=this.fftRadix2(d,f,a).as2D(i.shape[0],i.shape[1]);return a&&(y=Jt(fs(y).div(st(f)),ua(y).div(st(f)))),y}var w=i.dataSync(),C=function Hc(u){for(var i=new Float32Array(u.length/2),a=new Float32Array(u.length/2),d=0;d<u.length;d+=2)i[d/2]=u[d],a[d/2]=u[d+1];return{real:i,imag:a}}(this.fourierTransformByMatmul(w,f,a));return Jt(C.real,C.imag).as2D(i.shape[0],i.shape[1])},u.prototype.isExponentOf2=function(i){return 0==(i&i-1)},u.prototype.fftRadix2=function(i,a,d){if(1===a)return i;var f=i.dataSync(),y=a/2,w=function Kd(u){for(var i=Math.ceil(u.length/4),a=new Float32Array(i),d=new Float32Array(i),f=0;f<u.length;f+=4)a[Math.floor(f/4)]=u[f],d[Math.floor(f/4)]=u[f+1];return{real:a,imag:d}}(f),C=Jt(w.real,w.imag).as1D(),O=function Xm(u){for(var i=Math.floor(u.length/4),a=new Float32Array(i),d=new Float32Array(i),f=2;f<u.length;f+=4)a[Math.floor(f/4)]=u[f],d[Math.floor(f/4)]=u[f+1];return{real:a,imag:d}}(f),U=Jt(O.real,O.imag).as1D();C=this.fftRadix2(C,y,d),U=this.fftRadix2(U,y,d);var j=function Yd(u,i){for(var a=new Float32Array(u/2),d=new Float32Array(u/2),f=0;f<Math.ceil(u/2);f++){var y=(i?2:-2)*Math.PI*(f/u);a[f]=Math.cos(y),d[f]=Math.sin(y)}return{real:a,imag:d}}(a,d),q=Jt(j.real,j.imag).mul(U),K=C.add(q),re=C.sub(q),se=fs(K).concat(fs(re)),oe=ua(K).concat(ua(re));return Jt(se,oe).as1D()},u.prototype.fourierTransformByMatmul=function(i,a,d){for(var f=new Float32Array(2*a),y=0;y<a;y++){for(var w=0,C=0,O=0;O<a;O++){var U=Xd(y*O,a,d),j=Zd(i,O);w+=j.real*U.real-j.imag*U.imag,C+=j.real*U.imag+j.imag*U.real}d&&(w/=a,C/=a),da(f,w,C,y)}return f},u.prototype.depthToSpace=function(i,a,d){le("NHWC"===d,"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+d),le(a>1,"blockSize should be > 1 for depthToSpace, but was: "+a);for(var f=i.shape[0],y=i.shape[1],w=i.shape[2],C=i.shape[3],O=y*a,U=w*a,j=C/(a*a),q=i.dataSync(),K=new Float32Array(f*O*U*j),re=0,se=0;se<f;++se)for(var oe=0;oe<O;++oe)for(var de=Math.floor(oe/a),xe=oe%a,Se=0;Se<U;++Se)for(var ke=Math.floor(Se/a),Ke=(xe*a+Se%a)*j,Ge=0;Ge<j;++Ge)K[re++]=q[Ge+Ke+C*(ke+w*(de+y*se))];return Ti(K,[f,O,U,j])},u.prototype.broadcastedBinaryOp=function(i,a,d,f){var y=ar(i.shape,a.shape),w=lr(y,d),C=i.dataSync(),O=a.dataSync(),U=mo(i.shape,y),j=mo(a.shape,y),q=w.values;if(U.length+j.length===0)for(var K=0;K<q.length;++K)q[K]=f(C[K%C.length],O[K%O.length]);else{var re=i.buffer(),se=a.buffer(),oe=function(de){var xe=w.indexToLoc(de),Se=xe.slice(-i.rank);U.forEach(function(rt){return Se[rt]=0});var ke=re.locToIndex(Se),Ke=xe.slice(-a.rank);j.forEach(function(rt){return Ke[rt]=0});var Ge=se.locToIndex(Ke);q[de]=f(C[ke],O[Ge])};for(K=0;K<q.length;++K)oe(K)}return w.toTensor()},u.prototype.broadcastedBinaryComplexOp=function(i,a,d){var f=ar(i.shape,a.shape),y=lr(f,"float32"),w=lr(f,"float32"),C=i.dataSync(),O=a.dataSync(),U=mo(i.shape,f),j=mo(a.shape,f),q=y.values,K=w.values;if(U.length+j.length===0)for(var re=0;re<q.length;re++){var se=re%C.length,oe=re%O.length,de=d(C[2*se],C[2*se+1],O[2*oe],O[2*oe+1]);q[re]=de.real,K[re]=de.imag}else{var xe=this.data.get(i.dataId).complexTensors.real.buffer(),Se=this.data.get(a.dataId).complexTensors.real.buffer(),ke=function(Ke){var Ge=y.indexToLoc(Ke),rt=Ge.slice(-i.rank);U.forEach(function(_n){return rt[_n]=0});var ht=xe.locToIndex(rt),At=Ge.slice(-a.rank);j.forEach(function(_n){return At[_n]=0});var yt=Se.locToIndex(At),Kt=d(C[2*ht],C[2*ht+1],O[2*yt],O[2*yt+1]);q[Ke]=Kt.real,K[Ke]=Kt.imag};for(re=0;re<q.length;re++)ke(re)}return this.complex(y.toTensor(),w.toTensor())},u.prototype.split=function(i,a,d){return sp(i,a,d)},u.prototype.dispose=function(){},u.prototype.floatPrecision=function(){return 32},u.prototype.cropAndResize=function(i,a,d,f,y,w){for(var C=i.shape,O=C[0],U=C[1],j=C[2],q=C[3],K=a.shape[0],re=f[0],se=f[1],oe=lr([K,re,se,q]),de=a.dataSync(),xe=d.dataSync(),Se=i.dataSync(),ke=i.strides,Ke=oe.strides,Ge=0;Ge<K;Ge++){var rt=4*Ge,ht=de[rt],At=de[rt+1],yt=de[rt+2],Kt=de[rt+3],_n=xe[Ge];if(!(_n>=O))for(var On=re>1?(yt-ht)*(U-1)/(re-1):0,Un=se>1?(Kt-At)*(j-1)/(se-1):0,or=0;or<re;or++){var wr=re>1?ht*(U-1)+or*On:.5*(ht+yt)*(U-1);if(wr<0||wr>U-1)for(var En=0;En<se;En++)for(var un=0;un<q;un++){var xn=un+En*Ke[2]+or*Ke[1]+Ge*Ke[0];oe.values[xn]=w}else if("bilinear"===y){var ur=Math.floor(wr),Xr=Math.ceil(wr),io=wr-ur;for(En=0;En<se;En++)if((ci=se>1?At*(j-1)+En*Un:.5*(At+Kt)*(j-1))<0||ci>j-1)for(un=0;un<q;un++)oe.values[xn=un+En*Ke[2]+or*Ke[1]+Ge*Ke[0]]=w;else{var qi=Math.floor(ci),Ts=Math.ceil(ci),Go=ci-qi;for(un=0;un<q;un++){var As=Se[xn=un+qi*ke[2]+ur*ke[1]+_n*ke[0]],as=Se[xn=un+Ts*ke[2]+ur*ke[1]+_n*ke[0]],oa=Se[xn=un+qi*ke[2]+Xr*ke[1]+_n*ke[0]],Ms=As+(as-As)*Go,qo=oa+(Se[xn=un+Ts*ke[2]+Xr*ke[1]+_n*ke[0]]-oa)*Go;oe.values[xn=un+En*Ke[2]+or*Ke[1]+Ge*Ke[0]]=Ms+(qo-Ms)*io}}}else for(En=0;En<se;++En){var ci;if((ci=se>1?At*(j-1)+En*Un:.5*(At+Kt)*(j-1))<0||ci>j-1)for(un=0;un<q;un++)oe.values[xn=un+En*Ke[2]+or*Ke[1]+Ge*Ke[0]]=w;else{var xo=Math.round(ci),Zh=Math.round(wr);for(un=0;un<q;un++)oe.values[un+En*Ke[2]+or*Ke[1]+Ge*Ke[0]]=Se[un+xo*ke[2]+Zh*ke[1]+_n*ke[0]]}}}}return oe.toTensor()},u.prototype.sparseToDense=function(i,a,d,f){var y=sr(0,i,d);return this.scatter(i,a,d,y.outputSize,y.sliceSize,y.numUpdates,y.sliceRank,y.strides,f,!1)},u.prototype.gatherND=function(i,a){var d=a.shape,f=d[d.length-1],y=dl(i,a),w=y[0],C=y[1],O=y[2],U=y[3];if(0===C)return vr([],w,i.dtype);for(var j=new Vr([C,O],i.dtype),q=a.dataSync(),K=i.dataSync(),re=0;re<C;re++){for(var se=[],oe=0,de=0;de<f;de++){var xe=q[re*f+de];oe+=xe*U[de],se.push(xe)}if(oe<0||oe>=i.size/O)throw new Error("Invalid indices: "+se+" does not index into "+i.shape);for(var Se=0;Se<O;Se++)j.values[re*O+Se]=K[oe*O+Se]}return j.toTensor().reshape(w)},u.prototype.scatterND=function(i,a,d){var f=sr(0,i,d),y=f.sliceRank,w=f.numUpdates,C=f.sliceSize,O=f.strides,U=f.outputSize,j=st(0);return this.scatter(i,a,d,U,C,w,y,O,j,!0)},u.prototype.scatter=function(i,a,d,f,y,w,C,O,U,j){var q=[f/y,y],K=i.dataSync(),re=a.dataSync();if(0===f)return vr([],d,a.dtype);var se=new Vr(q,a.dtype);se.values.fill(U.dataSync()[0]);for(var oe=0;oe<w;oe++){for(var de=[],xe=0,Se=0;Se<C;Se++){var ke=K[oe*C+Se];de.push(ke),xe+=ke*O[Se]}if(xe<0||xe>=f/y)throw new Error("Invalid indices: "+de+" does not index into "+d);for(var Ke=0;Ke<y;Ke++)j?se.values[xe*y+Ke]+=re[oe*y+Ke]:se.values[xe*y+Ke]=0===a.rank?re[0]:re[oe*y+Ke]}return se.toTensor().reshape(d)},u}();ve.registerBackend("cpu",function(){return new Hv},1,Gt);var $v=typeof requestAnimationFrame<"u"?requestAnimationFrame:setImmediate;function Wv(){return new Promise(function(u){return $v(function(){return u()})})}var df={float32:4,int32:4,uint16:2,uint8:1,bool:1};function d_(u,i){for(var a={},d=0,f=function(C){var O=C.name,U=C.dtype,j=C.shape,q=Ie(j),K=void 0;if("quantization"in C){var re=C.quantization;if("uint8"!==re.dtype&&"uint16"!==re.dtype)throw new Error("Weight "+C.name+" has unknown quantization dtype "+re.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var se=df[re.dtype],oe=u.slice(d,d+q*se),de="uint8"===re.dtype?new Uint8Array(oe):new Uint16Array(oe);if("float32"===U)K=Float32Array.from(de,function(ke){return ke*re.scale+re.min});else{if("int32"!==U)throw new Error("Unsupported dtype in weight '"+O+"': "+U);K=Int32Array.from(de,function(ke){return Math.round(ke*re.scale+re.min)})}d+=q*se}else{var xe=df[U];if(oe=u.slice(d,d+q*xe),"float32"===U)K=new Float32Array(oe);else if("int32"===U)K=new Int32Array(oe);else{if("bool"!==U)throw new Error("Unsupported dtype in weight '"+O+"': "+U);K=new Uint8Array(oe)}d+=q*xe}var Se=void 0;if("float32"===U)Se=vr(K,j,"float32");else if("int32"===U)Se=vr(K,j,"int32");else{if("bool"!==U)throw new Error("Unsupported dtype in weight '"+O+"': "+U);Se=vr(K,j,"bool")}a[O]=Se},y=0,w=i;y<w.length;y++)f(w[y]);return a}function dw(u){if(null===u)throw new Error("Invalid input value: "+JSON.stringify(u));var i=0,a=[];u.forEach(function(y){if(i+=y.byteLength,a.push(y.byteLength===y.buffer.byteLength?y:new y.constructor(y)),!(y instanceof Float32Array||y instanceof Int32Array||y instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+y.constructor.name)});var d=new Uint8Array(i),f=0;return a.forEach(function(y){d.set(new Uint8Array(y.buffer),f),f+=y.byteLength}),d.buffer}var Gh=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Gv(u){return Gh?Buffer.byteLength(u):new Blob([u]).size}function p_(u){var i=0;u.forEach(function(f){i+=f.byteLength});var a=new Uint8Array(i),d=0;return u.forEach(function(f){a.set(new Uint8Array(f),d),d+=f.byteLength}),a.buffer}function tl(u){for(u=u.trim();u.endsWith("/");)u=u.slice(0,u.length-1);var i=u.split("/");return i[i.length-1]}function Wl(u){if(u.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==u.modelTopology?0:Gv(JSON.stringify(u.modelTopology)),weightSpecsBytes:null==u.weightSpecs?0:Gv(JSON.stringify(u.weightSpecs)),weightDataBytes:null==u.weightData?0:u.weightData.byteLength}}var Ar=function(){function u(){this.saveRouters=[],this.loadRouters=[]}return u.getInstance=function(){return null==u.instance&&(u.instance=new u),u.instance},u.registerSaveRouter=function(i){u.getInstance().saveRouters.push(i)},u.registerLoadRouter=function(i){u.getInstance().loadRouters.push(i)},u.getSaveHandlers=function(i){return u.getHandlers(i,"save")},u.getLoadHandlers=function(i){return u.getHandlers(i,"load")},u.getHandlers=function(i,a){var d=[];return("load"===a?this.getInstance().loadRouters:this.getInstance().saveRouters).forEach(function(f){var y=f(i);null!==y&&d.push(y)}),d},u}(),na="://",nl=function(){function u(){this.managers={}}return u.getInstance=function(){return null==u.instance&&(u.instance=new u),u.instance},u.registerManager=function(i,a){le(null!=i,"scheme must not be undefined or null."),i.endsWith(na)&&(i=i.slice(0,i.indexOf(na))),le(i.length>0,"scheme must not be an empty string.");var d=u.getInstance();le(null==d.managers[i],"A model store manager is already registered for scheme '"+i+"'."),d.managers[i]=a},u.getManager=function(i){var a=this.getInstance().managers[i];if(null==a)throw new Error("Cannot find model manager for scheme '"+i+"'");return a},u.getSchemes=function(){return Object.keys(this.getInstance().managers)},u}();function Ds(u){if(-1===u.indexOf(na))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+nl.getSchemes().join(","));return{scheme:u.split(na)[0],path:u.split(na)[1]}}function f_(u,i,a){return void 0===a&&(a=!1),R(this,void 0,void 0,function(){var d,f,y,w,C,O,U,j,q;return W(this,function(K){switch(K.label){case 0:return le(u!==i,"Old path and new path are the same: '"+u+"'"),le((d=Ar.getLoadHandlers(u)).length>0,"Copying failed because no load handler is found for source URL "+u+"."),le(d.length<2,"Copying failed because more than one ("+d.length+") load handlers for source URL "+u+"."),f=d[0],le((y=Ar.getSaveHandlers(i)).length>0,"Copying failed because no save handler is found for destination URL "+i+"."),le(y.length<2,"Copying failed because more than one ("+d.length+") save handlers for destination URL "+i+"."),w=y[0],C=Ds(u).scheme,O=Ds(u).path,U=C===Ds(u).scheme,[4,f.load()];case 1:return j=K.sent(),a&&U?[4,nl.getManager(C).removeModel(O)]:[3,3];case 2:K.sent(),K.label=3;case 3:return[4,w.save(j)];case 4:return q=K.sent(),!a||U?[3,6]:[4,nl.getManager(C).removeModel(O)];case 5:K.sent(),K.label=6;case 6:return[2,q.modelArtifactsInfo]}})})}var ra="tensorflowjs",ia="models_store",wo="model_info_store";function kd(){if(!ve.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var u=window,i=u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB||u.shimIndexedDB;if(null==i)throw new Error("The current browser does not appear to support IndexedDB.");return i}function rl(u){var i=u.result;i.createObjectStore(ia,{keyPath:"modelPath"}),i.createObjectStore(wo,{keyPath:"modelPath"})}var Gl=function(){function u(i){if(this.indexedDB=kd(),null==i||!i)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=i}return u.prototype.save=function(i){return R(this,void 0,void 0,function(){return W(this,function(a){if(i.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,i)]})})},u.prototype.load=function(){return R(this,void 0,void 0,function(){return W(this,function(i){return[2,this.databaseAction(this.modelPath)]})})},u.prototype.databaseAction=function(i,a){var d=this;return new Promise(function(f,y){var w=d.indexedDB.open(ra,1);w.onupgradeneeded=function(){return rl(w)},w.onsuccess=function(){var C=w.result;if(null==a){var O=C.transaction(ia,"readonly"),U=O.objectStore(ia).get(d.modelPath);U.onsuccess=function(){if(null==U.result)return C.close(),y(new Error("Cannot find model with path '"+d.modelPath+"' in IndexedDB."));f(U.result.modelArtifacts)},U.onerror=function(oe){return C.close(),y(U.error)},O.oncomplete=function(){return C.close()}}else{var j,q=Wl(a),K=C.transaction(wo,"readwrite"),re=K.objectStore(wo),se=re.put({modelPath:d.modelPath,modelArtifactsInfo:q});se.onsuccess=function(){var oe=(j=C.transaction(ia,"readwrite")).objectStore(ia).put({modelPath:d.modelPath,modelArtifacts:a,modelArtifactsInfo:q});oe.onsuccess=function(){return f({modelArtifactsInfo:q})},oe.onerror=function(de){var xe=(re=K.objectStore(wo)).delete(d.modelPath);xe.onsuccess=function(){return C.close(),y(oe.error)},xe.onerror=function(Se){return C.close(),y(oe.error)}}},se.onerror=function(oe){return C.close(),y(se.error)},K.oncomplete=function(){null==j?C.close():j.oncomplete=function(){return C.close()}}}},w.onerror=function(C){return y(w.error)}})},u.URL_SCHEME="indexeddb://",u}(),ku=function(u){return ve.get("IS_BROWSER")&&!Array.isArray(u)&&u.startsWith(Gl.URL_SCHEME)?function qv(u){return new Gl(u)}(u.slice(Gl.URL_SCHEME.length)):null};Ar.registerSaveRouter(ku),Ar.registerLoadRouter(ku);var xm=function(){function u(){this.indexedDB=kd()}return u.prototype.listModels=function(){return R(this,void 0,void 0,function(){var i=this;return W(this,function(a){return[2,new Promise(function(d,f){var y=i.indexedDB.open(ra,1);y.onupgradeneeded=function(){return rl(y)},y.onsuccess=function(){var w=y.result,C=w.transaction(wo,"readonly"),O=C.objectStore(wo).getAll();O.onsuccess=function(){for(var U={},j=0,q=O.result;j<q.length;j++){var K=q[j];U[K.modelPath]=K.modelArtifactsInfo}d(U)},O.onerror=function(U){return w.close(),f(O.error)},C.oncomplete=function(){return w.close()}},y.onerror=function(w){return f(y.error)}})]})})},u.prototype.removeModel=function(i){return R(this,void 0,void 0,function(){var a=this;return W(this,function(d){return i=function pw(u){return u.startsWith(Gl.URL_SCHEME)?u.slice(Gl.URL_SCHEME.length):u}(i),[2,new Promise(function(f,y){var w=a.indexedDB.open(ra,1);w.onupgradeneeded=function(){return rl(w)},w.onsuccess=function(){var C,O=w.result,U=O.transaction(wo,"readwrite"),j=U.objectStore(wo),q=j.get(i);q.onsuccess=function(){if(null==q.result)return O.close(),y(new Error("Cannot find model with path '"+i+"' in IndexedDB."));var K=j.delete(i),re=function(){var se=(C=O.transaction(ia,"readwrite")).objectStore(ia).delete(i);se.onsuccess=function(){return f(q.result.modelArtifactsInfo)},se.onerror=function(oe){return y(q.error)}};K.onsuccess=re,K.onerror=function(se){return re(),O.close(),y(q.error)}},q.onerror=function(K){return O.close(),y(q.error)},U.oncomplete=function(){null==C?O.close():C.oncomplete=function(){return O.close()}}},w.onerror=function(C){return y(w.error)}})]})})},u}();if(ve.get("IS_BROWSER"))try{nl.registerManager(Gl.URL_SCHEME,new xm)}catch{}var Fu="/",Nc="tensorflowjs_models",Kv="info",Is="model_topology",m_="weight_specs",XS="weight_data";function sE(u){return{info:[Nc,u,Kv].join(Fu),topology:[Nc,u,Is].join(Fu),weightSpecs:[Nc,u,m_].join(Fu),weightData:[Nc,u,XS].join(Fu)}}function aE(u){var i=u.split(Fu);if(i.length<3)throw new Error("Invalid key format: "+u);return i.slice(1,i.length-1).join(Fu)}var Em=function(){function u(i){if(!ve.get("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==i||!i)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=i,this.keys=sE(this.modelPath)}return u.prototype.save=function(i){return R(this,void 0,void 0,function(){var a,d,f,y;return W(this,function(w){if(i.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");a=JSON.stringify(i.modelTopology),d=JSON.stringify(i.weightSpecs),f=Wl(i);try{return this.LS.setItem(this.keys.info,JSON.stringify(f)),this.LS.setItem(this.keys.topology,a),this.LS.setItem(this.keys.weightSpecs,d),this.LS.setItem(this.keys.weightData,function hw(u){return Gh?Buffer.from(u).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(u)))}(i.weightData)),[2,{modelArtifactsInfo:f}]}catch{for(y in this.keys)this.LS.removeItem(this.keys[y]);throw new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+f.modelTopologyBytes+", weightSpecsBytes="+f.weightSpecsBytes+", weightDataBytes="+f.weightDataBytes+".")}return[2]})})},u.prototype.load=function(){return R(this,void 0,void 0,function(){var i,a,d,f,y;return W(this,function(w){if(null==(i=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==i.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(a={},null==(d=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(a.modelTopology=d,null==(f=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(a.weightSpecs=f,null==(y=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return a.weightData=function h_(u){if(Gh){var i=Buffer.from(u,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}for(var a=atob(u),d=new Uint8Array(a.length),f=0;f<a.length;++f)d.set([a.charCodeAt(f)],f);return d.buffer}(y),[2,a]})})},u.URL_SCHEME="localstorage://",u}(),Zv=function(u){return ve.get("IS_BROWSER")&&!Array.isArray(u)&&u.startsWith(Em.URL_SCHEME)?function uE(u){return new Em(u)}(u.slice(Em.URL_SCHEME.length)):null};Ar.registerSaveRouter(Zv),Ar.registerLoadRouter(Zv);var fw=function(){function u(){le(ve.get("IS_BROWSER"),"Current environment is not a web browser"),le(void 0!==window.localStorage,"Current browser does not appear to support localStorage"),this.LS=window.localStorage}return u.prototype.listModels=function(){return R(this,void 0,void 0,function(){var i,a,d,f,y,w;return W(this,function(C){for(i={},a=Nc+Fu,d=Fu+Kv,f=0;f<this.LS.length;++f)(y=this.LS.key(f)).startsWith(a)&&y.endsWith(d)&&(w=aE(y),i[w]=JSON.parse(this.LS.getItem(y)));return[2,i]})})},u.prototype.removeModel=function(i){return R(this,void 0,void 0,function(){var a,d;return W(this,function(f){if(i=function lE(u){return u.startsWith(Em.URL_SCHEME)?u.slice(Em.URL_SCHEME.length):u}(i),a=sE(i),null==this.LS.getItem(a.info))throw new Error("Cannot find model at path '"+i+"'");return d=JSON.parse(this.LS.getItem(a.info)),this.LS.removeItem(a.info),this.LS.removeItem(a.topology),this.LS.removeItem(a.weightSpecs),this.LS.removeItem(a.weightData),[2,d]})})},u}();if(ve.get("IS_BROWSER"))try{nl.registerManager(Em.URL_SCHEME,new fw)}catch{}var qh=function(){function u(i){if(!ve.get("IS_BROWSER"))throw new Error("triggerDownloads() cannot proceed because the current environment is not a browser.");i.startsWith(u.URL_SCHEME)&&(i=i.slice(u.URL_SCHEME.length)),null!=i&&0!==i.length||(i="model"),this.modelTopologyFileName=i+".json",this.weightDataFileName=i+".weights.bin"}return u.prototype.save=function(i){return R(this,void 0,void 0,function(){var a,y,w,C;return W(this,function(O){if(a=window.URL.createObjectURL(new Blob([i.weightData],{type:"application/octet-stream"})),i.modelTopology instanceof ArrayBuffer)throw new Error("DownloadTrigger.save() does not support saving model topology in binary formats yet.");return y=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:i.modelTopology,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:i.weightSpecs}]})],{type:"application/json"})),(w=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,w.href=y,w.click(),null!=i.weightData&&((C=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,C.href=a,C.click()),[2,{modelArtifactsInfo:Wl(i)}]})})},u.URL_SCHEME="downloads://",u}(),Xv=function(){function u(i){if(null==i||i.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+i);this.files=i}return u.prototype.load=function(){return R(this,void 0,void 0,function(){var i,a,d=this;return W(this,function(f){return i=this.files[0],a=this.files.slice(1),[2,new Promise(function(y,w){var C=new FileReader;C.onload=function(O){var U=JSON.parse(O.target.result),j=U.modelTopology;if(null!=j){0===a.length&&y({modelTopology:j});var q=U.weightsManifest;if(null!=q){var K;try{K=d.checkManifestAndWeightFiles(q,a)}catch(de){return void w(de)}var re=[],se=[],oe=[];q.forEach(function(de){de.paths.forEach(function(xe){se.push(xe),oe.push(null)}),re.push.apply(re,de.weights)}),q.forEach(function(de){de.paths.forEach(function(xe){var Se=new FileReader;Se.onload=function(ke){var Ke=ke.target.result,Ge=se.indexOf(xe);oe[Ge]=Ke,-1===oe.indexOf(null)&&y({modelTopology:j,weightSpecs:re,weightData:p_(oe)})},Se.onerror=function(ke){w("Failed to weights data from file of path '"+xe+"'.")},Se.readAsArrayBuffer(K[xe])})})}else w(new Error("weightManifest field is missing from file "+i.name))}else w(new Error("modelTopology field is missing from file "+i.name))},C.onerror=function(O){w("Failed to read model topology and weights manifest JSON from file '"+i.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},C.readAsText(i)})]})})},u.prototype.checkManifestAndWeightFiles=function(i,a){for(var d=[],f=a.map(function(O){return tl(O.name)}),y={},w=0,C=i;w<C.length;w++)C[w].paths.forEach(function(O){var U=tl(O);if(-1!==d.indexOf(U))throw new Error("Duplicate file basename found in weights manifest: '"+U+"'");if(d.push(U),-1===f.indexOf(U))throw new Error("Weight file with basename '"+U+"' is not provided.");y[O]=a[f.indexOf(U)]});if(d.length!==a.length)throw new Error("Mismatch in the number of files in weights manifest ("+d.length+") and the number of weight files provided ("+a.length+").");return y},u}();function Qv(u,i){return R(this,void 0,void 0,function(){var a,d;return W(this,function(f){switch(f.label){case 0:return a=u.map(function(y){return fetch(y,i)}),[4,Promise.all(a)];case 1:return d=f.sent(),[4,Promise.all(d.map(function(y){return y.arrayBuffer()}))];case 2:return[2,f.sent()]}})})}Ar.registerSaveRouter(function(u){return ve.get("IS_BROWSER")&&!Array.isArray(u)&&u.startsWith(qh.URL_SCHEME)?function mw(u){return void 0===u&&(u="model"),new qh(u)}(u.slice(qh.URL_SCHEME.length)):null});var ff=function(){function u(i,a,d){if(this.weightPathPrefix=d,this.DEFAULT_METHOD="POST",typeof fetch>"u")throw new Error("browserHTTPRequest is not supported outside the web browser without a fetch polyfill.");if(le(null!=i&&i.length>0,"URL path for browserHTTPRequest must not be null, undefined or empty."),Array.isArray(i)&&le(2===i.length,"URL paths for browserHTTPRequest must have a length of 2, (actual length is "+i.length+")."),this.path=i,null!=a&&null!=a.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=a||{}}return u.prototype.save=function(i){return R(this,void 0,void 0,function(){var a,y;return W(this,function(w){switch(w.label){case 0:if(i.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(a=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,a.body.append("model.json",new Blob([JSON.stringify({modelTopology:i.modelTopology,weightsManifest:[{paths:["./model.weights.bin"],weights:i.weightSpecs}]})],{type:"application/json"}),"model.json"),null!=i.weightData&&a.body.append("model.weights.bin",new Blob([i.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,fetch(this.path,a)];case 1:if((y=w.sent()).ok)return[2,{modelArtifactsInfo:Wl(i),responses:[y]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+y.status+".")}})})},u.prototype.load=function(){return R(this,void 0,void 0,function(){return W(this,function(i){return[2,Array.isArray(this.path)?this.loadBinaryModel():this.loadJSONModel()]})})},u.prototype.loadBinaryTopology=function(){return R(this,void 0,void 0,function(){var i,a;return W(this,function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),[4,fetch(this.path[0],this.requestInit)];case 1:if(!(i=d.sent()).ok)throw new Error("BrowserHTTPRequest.load() failed due to HTTP response: "+i.statusText);return[4,i.arrayBuffer()];case 2:return[2,d.sent()];case 3:throw a=d.sent(),new Error(this.path[0]+" not found. "+a);case 4:return[2]}})})},u.prototype.loadBinaryModel=function(){return R(this,void 0,void 0,function(){var i,a,d,f,y,w,C,O;return W(this,function(U){switch(U.label){case 0:return i=this.loadBinaryTopology(),[4,fetch(this.path[1],this.requestInit)];case 1:if(!(a=U.sent()).ok)throw new Error("BrowserHTTPRequest.load() failed due to HTTP response: "+a.statusText);return[4,Promise.all([i,a])];case 2:return d=U.sent(),f=d[0],[4,d[1].json()];case 3:return null==(y=U.sent())?[3,5]:[4,this.loadWeights(y)];case 4:O=U.sent(),w=O[0],C=O[1],U.label=5;case 5:return[2,{modelTopology:f,weightSpecs:w,weightData:C}]}})})},u.prototype.loadJSONModel=function(){return R(this,void 0,void 0,function(){var i,a,d,f,y,w,O;return W(this,function(U){switch(U.label){case 0:return[4,fetch(this.path,this.requestInit)];case 1:if(!(i=U.sent()).ok)throw new Error("BrowserHTTPRequest.load() failed due to HTTP response: "+i.statusText);return[4,i.json()];case 2:if(a=U.sent(),f=a.weightsManifest,null==(d=a.modelTopology)&&null==f)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==f?[3,4]:[4,this.loadWeights(a.weightsManifest)];case 3:O=U.sent(),y=O[0],w=O[1],U.label=4;case 4:return[2,{modelTopology:d,weightSpecs:y,weightData:w}]}})})},u.prototype.loadWeights=function(i){return R(this,void 0,void 0,function(){var a,d,f,y,w,C,O,U,q,K,re;return W(this,function(se){switch(se.label){case 0:for(a=Array.isArray(this.path)?this.path[1]:this.path,d=function pE(u){var i=u.lastIndexOf("/"),a=u.lastIndexOf("?");return[u.substring(0,i)+"/",a>i?u.substring(a):""]}(a),f=d[0],y=d[1],w=this.weightPathPrefix||f,C=[],O=0,U=i;O<U.length;O++)C.push.apply(C,U[O].weights);return q=[],i.forEach(function(oe){oe.paths.forEach(function(de){q.push(w+de+y)})}),K=[C],re=p_,[4,Qv(q,this.requestInit)];case 1:return[2,K.concat([re.apply(void 0,[se.sent()])])]}})})},u.URL_SCHEME_REGEX=/^https?:\/\//,u}();function gw(u){return null!=u.match(ff.URL_SCHEME_REGEX)}var _w=function(u){return typeof fetch>"u"?null:(Array.isArray(u)?u.every(function(i){return gw(i)}):gw(u))?yw(u):null};function yw(u,i,a){return new ff(u,i,a)}Ar.registerSaveRouter(_w),Ar.registerLoadRouter(_w);var Jv=function(){function u(i,a,d){this.modelTopology=i,this.weightSpecs=a,this.weightData=d}return u.prototype.load=function(){return R(this,void 0,void 0,function(){var i;return W(this,function(a){return i={},null!=this.modelTopology&&(i=B({modelTopology:this.modelTopology},i)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(i=B({weightSpecs:this.weightSpecs},i)),null!=this.weightData&&this.weightData.byteLength>0&&(i=B({weightData:this.weightData},i)),[2,i]})})},u}(),__=function(){function u(i){this.saveHandler=i}return u.prototype.save=function(i){return R(this,void 0,void 0,function(){return W(this,function(a){return[2,this.saveHandler(i)]})})},u}(),vw=Object.freeze({browserFiles:function Cm(u){return new Xv(u)},browserHTTPRequest:yw,concatenateArrayBuffers:p_,decodeWeights:d_,encodeWeights:function c_(u){return R(this,void 0,void 0,function(){var i,a,d,f;return W(this,function(y){switch(y.label){case 0:for(d in i=[],a=[],u){if("float32"!==(f=u[d]).dtype&&"int32"!==f.dtype&&"bool"!==f.dtype)throw new Error("Unsupported dtype in weight '"+d+"': "+f.dtype);i.push({name:d,shape:f.shape,dtype:f.dtype}),a.push(f.data())}return[4,Promise.all(a)];case 1:return[2,{data:dw(y.sent()),specs:i}]}})})},fromMemory:function y_(u,i,a){return new Jv(u,i,a)},getLoadHandlers:Ar.getLoadHandlers,getModelArtifactsInfoForJSON:Wl,getSaveHandlers:Ar.getSaveHandlers,loadWeights:function hE(u,i,a,d){return void 0===i&&(i=""),R(this,void 0,void 0,function(){var f,y,w,C,O,U,j,q,K,re;return W(this,function(se){switch(se.label){case 0:if(f=u.map(function(){return!1}),y={},w=null!=a?a.map(function(){return!1}):[],C=[],u.forEach(function(oe,de){var xe=0;oe.weights.forEach(function(Se){var Ke=df["quantization"in Se?Se.quantization.dtype:Se.dtype]*Ie(Se.shape),Ge=function(){f[de]=!0,null==y[de]&&(y[de]=[]),y[de].push({manifestEntry:Se,groupOffset:xe,sizeBytes:Ke})};null!=a?a.forEach(function(rt,ht){rt===Se.name&&(Ge(),w[ht]=!0)}):Ge(),C.push(Se.name),xe+=Ke})}),!w.every(function(oe){return oe}))throw O=a.filter(function(oe,de){return!w[de]}),new Error("Could not find weights in manifest with names: "+O.join(", ")+". \nManifest JSON has weights with names: "+C.join(", ")+".");return U=f.reduce(function(oe,de,xe){return de&&oe.push(xe),oe},[]),j=[],U.forEach(function(oe){u[oe].paths.forEach(function(de){var xe=i+(i.endsWith("/")?"":"/")+de;j.push(xe)})}),[4,Qv(j,d)];case 1:return q=se.sent(),K={},re=0,U.forEach(function(oe){for(var de=u[oe].paths.length,xe=0,Se=0;Se<de;Se++)xe+=q[re+Se].byteLength;for(var ke=new ArrayBuffer(xe),Ke=new Uint8Array(ke),Ge=0,rt=0;rt<de;rt++){var ht=new Uint8Array(q[re+rt]);Ke.set(ht,Ge),Ge+=ht.byteLength}y[oe].forEach(function(At){var yt=d_(ke.slice(At.groupOffset,At.groupOffset+At.sizeBytes),[At.manifestEntry]);for(var Kt in yt)K[Kt]=yt[Kt]}),re+=de}),[2,K]}})})},registerLoadRouter:Ar.registerLoadRouter,registerSaveRouter:Ar.registerSaveRouter,withSaveHandler:function QS(u){return new __(u)},copyModel:function Ci(u,i){return R(this,void 0,void 0,function(){return W(this,function(a){switch(a.label){case 0:return[4,f_(u,i,!1)];case 1:return[2,a.sent()]}})})},listModels:function hf(){return R(this,void 0,void 0,function(){var u,i,a,d,f,y,w;return W(this,function(C){switch(C.label){case 0:u=nl.getSchemes(),i={},a=0,d=u,C.label=1;case 1:return a<d.length?[4,nl.getManager(f=d[a]).listModels()]:[3,4];case 2:for(w in y=C.sent())i[f+na+w]=y[w];C.label=3;case 3:return a++,[3,1];case 4:return[2,i]}})})},moveModel:function pf(u,i){return R(this,void 0,void 0,function(){return W(this,function(a){switch(a.label){case 0:return[4,f_(u,i,!0)];case 1:return[2,a.sent()]}})})},removeModel:function Mc(u){return R(this,void 0,void 0,function(){var i;return W(this,function(a){switch(a.label){case 0:return i=Ds(u),[4,nl.getManager(i.scheme).removeModel(i.path)];case 1:return[2,a.sent()]}})})}}),yE=Te({confusionMatrix_:function _E(u,i,a){var d=ae(u,"label","confusionMatrix","int32"),f=ae(i,"label","confusionMatrix","int32");le(null==a||a>0&&Number.isInteger(a),"If provided, numClasses must be a positive integer, but got "+a),le(1===d.rank,"Expected the rank of labels to be 1, but got "+d.rank),le(1===f.rank,"Expected the rank of predictions to be 1, but got "+f.rank),le(d.shape[0]===f.shape[0],"Mismatch in the number of examples: "+d.shape[0]+" vs. "+f.shape[0]+". Labels and predictions should have the same number of elements."),le(a>0&&Number.isInteger(a),"numClasses is required to be a positive integer, but got "+a);var y=xh(d.asType("int32"),a),w=xh(f.asType("int32"),a);return y.transpose().matMul(w).asType("int32")}}),bw=Object.freeze({confusionMatrix:yE}),tb=function(){function u(){}return u.prototype.getClassName=function(){return this.constructor.className},u.fromConfig=function(i,a){return new i(a)},u}(),nb=function(){function u(){this.classNameMap={}}return u.getMap=function(){return null==u.instance&&(u.instance=new u),u.instance},u.register=function(i){u.getMap().classNameMap[i.className]=[i,i.fromConfig]},u}();function Fd(u){le(null!=u.className,"Class being registered does not have the static className property defined."),le("string"==typeof u.className,"className is required to be a string, but got type "+typeof u.className),le(u.className.length>0,"Class being registered has an empty-string as its className, which is disallowed."),nb.register(u)}var vE=Object.freeze({Serializable:tb,SerializationMap:nb,registerClass:Fd});function w_(u,i,a){if(null==a&&(a=ve.get("TEST_EPSILON")),u instanceof Tt||i instanceof Tt){if(u instanceof Tt&&i instanceof Tt){if(u.dtype!==i.dtype)throw new Error("Arrays are of different type actual: "+u.dtype+" vs expected: "+i.dtype+".");if(!Ue(u.shape,i.shape))throw new Error("Arrays are of different shape actual: "+u.shape+" vs expected: "+i.shape+".")}}else{var d=u.constructor.name,f=i.constructor.name;if(d!==f)throw new Error("Arrays are of different type actual: "+d+" vs expected: "+f)}var y,w;if(y=u instanceof Tt?u.dataSync():u,w=i instanceof Tt?i.dataSync():i,y.length!==w.length)throw new Error("Arrays have different lengths actual: "+y.length+" vs expected: "+w.length+".\nActual:   "+y+".\nExpected: "+w+".");for(var C=0;C<w.length;++C){var O=y[C],U=w[C];if(!Ew(O,Number(U),a))throw new Error("Arrays differ: actual["+C+"] = "+O+", expected["+C+"] = "+U+".\nActual:   "+y+".\nExpected: "+w+".")}}function Ew(u,i,a){return!(!isNaN(u)||!isNaN(i))||!(isNaN(u)||isNaN(i)||Math.abs(u-i)>a)}var Cw=Object.freeze({WEBGL_ENVS:{HAS_WEBGL:!0},NODE_ENVS:{IS_NODE:!0},CHROME_ENVS:{IS_CHROME:!0},BROWSER_ENVS:{IS_BROWSER:!0},CPU_ENVS:{HAS_WEBGL:!1},BROWSER_CPU_ENVS:{BACKEND:"test-cpu"},ALL_ENVS:{},expectArraysClose:w_,expectPromiseToFail:function xw(u,i){u().then(function(){return i.fail()},function(){return i()})},expectArraysEqual:function xE(u,i){return w_(u,i,0)},expectNumbersClose:function EE(u,i,a){if(null==a&&(a=ve.get("TEST_EPSILON")),!Ew(u,i,a))throw new Error("Numbers differ: actual === "+u+", expected === "+i)},expectValuesInRange:function x_(u,i,a){var d;d=u instanceof Tt?u.dataSync():u;for(var f=0;f<d.length;f++)if(d[f]<i||d[f]>a)throw new Error("Value out of range:"+d[f]+" low: "+i+", high: "+a)},expectArrayBuffersEqual:function E_(u,i){expect(new Float32Array(u)).toEqual(new Float32Array(i))}}),Sw="0.13.11",CE=Object.freeze({gpgpu_util:yo,webgl_util:en,MathBackendWebGL:pg,GPGPUContext:Ai}),Kh=function(u){function i(){return null!==u&&u.apply(this,arguments)||this}return c(i,u),i.prototype.minimize=function(a,d,f){void 0===d&&(d=!1);var y=this.computeGradients(a,f),w=y.value,C=y.grads;return this.applyGradients(C),Object.keys(C).forEach(function(O){return C[O].dispose()}),d?w:(w.dispose(),null)},i.prototype.computeGradients=function(a,d){return Ln(a,d)},i}(tb),C_=function(u){function i(a,d,f){void 0===f&&(f=null);var y=u.call(this)||this;return y.learningRate=a,y.rho=d,y.epsilon=f,y.accumulatedGrads={},y.accumulatedUpdates={},y.c=Bn(st(-a)),y.rhoScalar=Bn(st(d)),y.oneMinusRho=Bn(st(1-d)),null===f&&(f=ve.get("EPSILON")),y.epsilonScalar=Bn(st(f)),y}return c(i,u),i.prototype.applyGradients=function(a){var d=this,f=function(C){var O=ve.engine.registeredVariables[C];null==y.accumulatedGrads[C]&&Sn(function(){d.accumulatedGrads[C]=Nn(O).variable(!1)}),null==y.accumulatedUpdates[C]&&Sn(function(){d.accumulatedUpdates[C]=Nn(O).variable(!1)});var U=a[C],j=y.accumulatedGrads[C],q=y.accumulatedUpdates[C];Sn(function(){var K=d.rhoScalar.mul(j).add(d.oneMinusRho.mul(U.square())),re=q.add(d.epsilonScalar).sqrt().div(j.add(d.epsilonScalar).sqrt()).mul(U),se=d.rhoScalar.mul(q).add(d.oneMinusRho.mul(re.square()));d.accumulatedGrads[C].assign(K),d.accumulatedUpdates[C].assign(se);var oe=d.c.mul(re).add(O);O.assign(oe)})},y=this;for(var w in a)f(w)},i.prototype.dispose=function(){var a=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach(function(d){return a.accumulatedUpdates[d].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(d){return a.accumulatedGrads[d].dispose()}))},i.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},i.fromConfig=function(a,d){return new a(d.learningRate,d.rho,d.epsilon)},i.className="AdadeltaOptimizer",i}(Kh);Fd(C_);var Sm=function(u){function i(a,d){void 0===d&&(d=.1);var f=u.call(this)||this;return f.learningRate=a,f.initialAccumulatorValue=d,f.accumulatedGrads={},f.c=Bn(st(-a)),f.epsilon=Bn(st(ve.get("EPSILON"))),f}return c(i,u),i.prototype.applyGradients=function(a){var d=this,f=function(C){var O=ve.engine.registeredVariables[C];null==y.accumulatedGrads[C]&&Sn(function(){d.accumulatedGrads[C]=Bs(O.shape,d.initialAccumulatorValue).variable(!1)});var U=a[C],j=y.accumulatedGrads[C];Sn(function(){var q=j.add(U.square());d.accumulatedGrads[C].assign(q);var K=d.c.mul(U.div(q.add(d.epsilon).sqrt())).add(O);O.assign(K)})},y=this;for(var w in a)f(w)},i.prototype.dispose=function(){var a=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach(function(d){return a.accumulatedGrads[d].dispose()})},i.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},i.fromConfig=function(a,d){return new a(d.learningRate,d.initialAccumulatorValue)},i.className="AdagradOptimizer",i}(Kh);Fd(Sm);var S_=function(u){function i(a,d,f,y){void 0===y&&(y=null);var w=u.call(this)||this;return w.learningRate=a,w.beta1=d,w.beta2=f,w.epsilon=y,w.accumulatedFirstMoment={},w.accumulatedSecondMoment={},w.c=Bn(st(-a)),w.beta1Scalar=Bn(st(d)),w.beta2Scalar=Bn(st(f)),Sn(function(){w.accBeta1=st(d).variable(),w.accBeta2=st(f).variable()}),w.oneMinusBeta1=Bn(st(1-d)),w.oneMinusBeta2=Bn(st(1-f)),w.one=Bn(st(1)),null===y&&(y=ve.get("EPSILON")),w.epsScalar=Bn(st(y)),w}return c(i,u),i.prototype.applyGradients=function(a){var d=this;Sn(function(){var f=d.one.sub(d.accBeta1),y=d.one.sub(d.accBeta2);for(var w in a){var C=ve.engine.registeredVariables[w];if(null==d.accumulatedFirstMoment[w]){var O=!1;d.accumulatedFirstMoment[w]=Nn(C).variable(O)}null==d.accumulatedSecondMoment[w]&&(O=!1,d.accumulatedSecondMoment[w]=Nn(C).variable(O));var U=a[w],q=d.accumulatedSecondMoment[w],K=d.beta1Scalar.mul(d.accumulatedFirstMoment[w]).add(d.oneMinusBeta1.mul(U)),re=d.beta2Scalar.mul(q).add(d.oneMinusBeta2.mul(U.square())),se=K.div(f),oe=re.div(y);d.accumulatedFirstMoment[w].assign(K),d.accumulatedSecondMoment[w].assign(re);var de=d.c.mul(se.div(d.epsScalar.add(oe.sqrt()))).add(C);C.assign(de)}d.accBeta1.assign(d.accBeta1.mul(d.beta1Scalar)),d.accBeta2.assign(d.accBeta2.mul(d.beta2Scalar))})},i.prototype.dispose=function(){var a=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(d){return a.accumulatedFirstMoment[d].dispose()}),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach(function(d){return a.accumulatedSecondMoment[d].dispose()})},i.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},i.fromConfig=function(a,d){return new a(d.learningRate,d.beta1,d.beta2,d.epsilon)},i.className="AdamOptimizer",i}(Kh);Fd(S_);var Dm=function(u){function i(a,d,f,y,w){void 0===y&&(y=null),void 0===w&&(w=0);var C=u.call(this)||this;return C.learningRate=a,C.beta1=d,C.beta2=f,C.epsilon=y,C.decay=w,C.accumulatedFirstMoment={},C.accumulatedWeightedInfNorm={},C.c=Bn(st(-a)),C.beta1Scalar=Bn(st(d)),C.beta2Scalar=Bn(st(f)),C.decayScalar=Bn(st(w)),Sn(function(){C.iteration=st(0).variable(),C.accBeta1=st(d).variable()}),C.oneMinusBeta1=Bn(st(1-d)),C.one=Bn(st(1)),null===y&&(y=ve.get("EPSILON")),C.epsScalar=Bn(st(y)),C}return c(i,u),i.prototype.applyGradients=function(a){var d=this;Sn(function(){var f=d.one.sub(d.accBeta1),y=d.c.div(d.one.add(d.decayScalar.mul(d.iteration)));for(var w in a){var C=ve.engine.registeredVariables[w];if(null==d.accumulatedFirstMoment[w]){var O=!1;d.accumulatedFirstMoment[w]=Nn(C).variable(O)}null==d.accumulatedWeightedInfNorm[w]&&(O=!1,d.accumulatedWeightedInfNorm[w]=Nn(C).variable(O));var U=a[w],q=d.accumulatedWeightedInfNorm[w],K=d.beta1Scalar.mul(d.accumulatedFirstMoment[w]).add(d.oneMinusBeta1.mul(U)),re=d.beta2Scalar.mul(q),se=U.abs(),oe=re.maximum(se);d.accumulatedFirstMoment[w].assign(K),d.accumulatedWeightedInfNorm[w].assign(oe);var de=y.div(f).mul(K.div(d.epsScalar.add(oe))).add(C);C.assign(de)}d.iteration.assign(d.iteration.add(d.one)),d.accBeta1.assign(d.accBeta1.mul(d.beta1Scalar))})},i.prototype.dispose=function(){var a=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(d){return a.accumulatedFirstMoment[d].dispose()}),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(d){return a.accumulatedWeightedInfNorm[d].dispose()})},i.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},i.fromConfig=function(a,d){return new a(d.learningRate,d.beta1,d.beta2,d.epsilon,d.decay)},i.className="AdamaxOptimizer",i}(Kh);Fd(Dm);var mf=function(u){function i(a){var d=u.call(this)||this;return d.learningRate=a,d.setLearningRate(a),d}return c(i,u),i.prototype.applyGradients=function(a){var d=this;Object.keys(a).forEach(function(f){var y=a[f],w=ve.engine.registeredVariables[f];Sn(function(){var C=d.c.mul(y).add(w);w.assign(C)})})},i.prototype.setLearningRate=function(a){this.learningRate=a,null!=this.c&&this.c.dispose(),this.c=Bn(st(-a))},i.prototype.dispose=function(){this.c.dispose()},i.prototype.getConfig=function(){return{learningRate:this.learningRate}},i.fromConfig=function(a,d){return new a(d.learningRate)},i.className="SGDOptimizer",i}(Kh);Fd(mf);var ob=function(u){function i(a,d,f){void 0===f&&(f=!1);var y=u.call(this,a)||this;return y.learningRate=a,y.momentum=d,y.useNesterov=f,y.m=st(y.momentum),y.accumulations={},y}return c(i,u),i.prototype.applyGradients=function(a){var d=this,f=function(C){var O=ve.engine.registeredVariables[C];null==y.accumulations[C]&&Sn(function(){d.accumulations[C]=Nn(O).variable(!1)});var U=y.accumulations[C],j=a[C];Sn(function(){var q,K=d.m.mul(U).add(j);q=d.useNesterov?d.c.mul(j.add(K.mul(d.m))).add(O):d.c.mul(K).add(O),d.accumulations[C].assign(K),O.assign(q)})},y=this;for(var w in a)f(w)},i.prototype.dispose=function(){if(u.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var a in this.accumulations)this.accumulations[a].dispose()},i.prototype.setMomentum=function(a){this.momentum=a},i.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},i.fromConfig=function(a,d){return new a(d.learningRate,d.momentum,d.useNesterov)},i.className="MomentumOptimizer",i}(mf);Fd(ob);var D_=function(u){function i(a,d,f,y,w){void 0===d&&(d=.9),void 0===f&&(f=0),void 0===y&&(y=null),void 0===w&&(w=!1);var C=u.call(this)||this;return C.learningRate=a,C.decay=d,C.momentum=f,C.epsilon=y,C.accumulatedMeanSquares={},C.accumulatedMeanGrads={},C.accumulatedMoments={},C.c=Bn(st(a)),C.decayScalar=Bn(st(d)),C.momentumScalar=Bn(st(f)),C.oneMinusDecay=Bn(st(1-d)),C.centered=w,null===y&&(y=ve.get("EPSILON")),C.epsilonScalar=Bn(st(y)),C}return c(i,u),i.prototype.applyGradients=function(a){var d=this,f=function(C){var O=ve.engine.registeredVariables[C];null==y.accumulatedMeanSquares[C]&&Sn(function(){d.accumulatedMeanSquares[C]=Nn(O).variable(!1)}),null==y.accumulatedMeanGrads[C]&&y.centered&&Sn(function(){d.accumulatedMeanGrads[C]=Nn(O).variable(!1)}),null==y.accumulatedMoments[C]&&Sn(function(){d.accumulatedMoments[C]=Nn(O).variable(!1)});var U=y.accumulatedMeanSquares[C],j=y.accumulatedMeanGrads[C],q=y.accumulatedMoments[C],K=a[C];Sn(function(){var re=d.decayScalar.mul(U).add(d.oneMinusDecay.mul(K.square()));if(d.centered){var se=d.decayScalar.mul(j).add(d.oneMinusDecay.mul(K)),oe=d.momentumScalar.mul(q).add(d.c.mul(K).div(re.sub(se.square().add(d.epsilonScalar)).sqrt()));d.accumulatedMeanSquares[C].assign(re),d.accumulatedMeanGrads[C].assign(se),d.accumulatedMoments[C].assign(oe);var de=O.sub(oe);O.assign(de)}else{var xe=d.decayScalar.mul(U).add(d.oneMinusDecay.mul(K.square()));oe=d.momentumScalar.mul(q).add(d.c.mul(K).div(xe.add(d.epsilonScalar).sqrt())),d.accumulatedMeanSquares[C].assign(xe),d.accumulatedMoments[C].assign(oe),de=O.sub(oe),O.assign(de)}})},y=this;for(var w in a)f(w)},i.prototype.dispose=function(){var a=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach(function(d){return a.accumulatedMeanSquares[d].dispose()}),null!=this.accumulatedMeanGrads&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(d){return a.accumulatedMeanGrads[d].dispose()}),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach(function(d){return a.accumulatedMoments[d].dispose()})},i.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},i.fromConfig=function(a,d){return new a(d.learningRate,d.decay,d.momentum,d.epsilon,d.centered)},i.className="RMSPropOptimizer",i}(Kh);Fd(D_);var Oc=function(){function u(){}return u.sgd=function(i){return new mf(i)},u.momentum=function(i,a,d){return void 0===d&&(d=!1),new ob(i,a,d)},u.rmsprop=function(i,a,d,f,y){return void 0===a&&(a=.9),void 0===d&&(d=0),void 0===f&&(f=null),void 0===y&&(y=!1),new D_(i,a,d,f,y)},u.adam=function(i,a,d,f){return void 0===i&&(i=.001),void 0===a&&(a=.9),void 0===d&&(d=.999),void 0===f&&(f=null),new S_(i,a,d,f)},u.adadelta=function(i,a,d){return void 0===i&&(i=.001),void 0===a&&(a=.95),void 0===d&&(d=null),new C_(i,a,d)},u.adamax=function(i,a,d,f,y){return void 0===i&&(i=.002),void 0===a&&(a=.9),void 0===d&&(d=.999),void 0===f&&(f=null),void 0===y&&(y=0),new Dm(i,a,d,f,y)},u.adagrad=function(i,a){return void 0===a&&(a=.1),new Sm(i,a)},u}(),Dw={sgd:Oc.sgd,momentum:Oc.momentum,adadelta:Oc.adadelta,adagrad:Oc.adagrad,rmsprop:Oc.rmsprop,adamax:Oc.adamax,adam:Oc.adam},Iw=pr.setBackend,SE=pr.getBackend,Tw=pr.disposeVariables,Aw=pr.memory;!function Ut(u){ze=u}(cw)},5619:(N,M,S)=>{"use strict";S.d(M,{X:()=>c});var P=S(8645);class c extends P.x{constructor(R){super(),this._value=R}get value(){return this.getValue()}_subscribe(R){const W=super._subscribe(R);return!W.closed&&R.next(this._value),W}getValue(){const{hasError:R,thrownError:W,_value:Y}=this;if(R)throw W;return this._throwIfClosed(),Y}next(R){super.next(this._value=R)}}},5592:(N,M,S)=>{"use strict";S.d(M,{y:()=>pe});var P=S(305),c=S(7394),B=S(4850),R=S(8407),W=S(2653),Y=S(4674),Q=S(1441);let pe=(()=>{class Ne{constructor(tt){tt&&(this._subscribe=tt)}lift(tt){const wt=new Ne;return wt.source=this,wt.operator=tt,wt}subscribe(tt,wt,lt){const le=function me(Ne){return Ne&&Ne instanceof P.Lv||function ce(Ne){return Ne&&(0,Y.m)(Ne.next)&&(0,Y.m)(Ne.error)&&(0,Y.m)(Ne.complete)}(Ne)&&(0,c.Nn)(Ne)}(tt)?tt:new P.Hp(tt,wt,lt);return(0,Q.x)(()=>{const{operator:$e,source:xt}=this;le.add($e?$e.call(le,xt):xt?this._subscribe(le):this._trySubscribe(le))}),le}_trySubscribe(tt){try{return this._subscribe(tt)}catch(wt){tt.error(wt)}}forEach(tt,wt){return new(wt=Ce(wt))((lt,le)=>{let $e;$e=this.subscribe(xt=>{try{tt(xt)}catch(It){le(It),$e?.unsubscribe()}},le,lt)})}_subscribe(tt){var wt;return null===(wt=this.source)||void 0===wt?void 0:wt.subscribe(tt)}[B.L](){return this}pipe(...tt){return(0,R.U)(tt)(this)}toPromise(tt){return new(tt=Ce(tt))((wt,lt)=>{let le;this.subscribe($e=>le=$e,$e=>lt($e),()=>wt(le))})}}return Ne.create=at=>new Ne(at),Ne})();function Ce(Ne){var at;return null!==(at=Ne??W.config.Promise)&&void 0!==at?at:Promise}},8645:(N,M,S)=>{"use strict";S.d(M,{x:()=>Q});var P=S(5592),c=S(7394);const R=(0,S(2306).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var W=S(9039),Y=S(1441);let Q=(()=>{class Ce extends P.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const Ne=new pe(this,this);return Ne.operator=me,Ne}_throwIfClosed(){if(this.closed)throw new R}next(me){(0,Y.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Ne=this.observers.slice();for(const at of Ne)at.next(me)}})}error(me){(0,Y.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:Ne}=this;for(;Ne.length;)Ne.shift().error(me)}})}complete(){(0,Y.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:Ne,isStopped:at,observers:tt}=this;return Ne||at?c.Lc:(tt.push(me),new c.w0(()=>(0,W.P)(tt,me)))}_checkFinalizedStatuses(me){const{hasError:Ne,thrownError:at,isStopped:tt}=this;Ne?me.error(at):tt&&me.complete()}asObservable(){const me=new P.y;return me.source=this,me}}return Ce.create=(ce,me)=>new pe(ce,me),Ce})();class pe extends Q{constructor(ce,me){super(),this.destination=ce,this.source=me}next(ce){var me,Ne;null===(Ne=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===Ne||Ne.call(me,ce)}error(ce){var me,Ne;null===(Ne=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===Ne||Ne.call(me,ce)}complete(){var ce,me;null===(me=null===(ce=this.destination)||void 0===ce?void 0:ce.complete)||void 0===me||me.call(ce)}_subscribe(ce){var me,Ne;return null!==(Ne=null===(me=this.source)||void 0===me?void 0:me.subscribe(ce))&&void 0!==Ne?Ne:c.Lc}}},305:(N,M,S)=>{"use strict";S.d(M,{Hp:()=>at,Lv:()=>Ne});var P=S(4674),c=S(7394),B=S(2653),R=S(3894),W=S(2420);const Y=Ce("C",void 0,void 0);function Ce($e,xt,It){return{kind:$e,value:xt,error:It}}var ce=S(7599),me=S(1441);class Ne extends c.w0{constructor(xt){super(),this.isStopped=!1,xt?(this.destination=xt,(0,c.Nn)(xt)&&xt.add(this)):this.destination=le}static create(xt,It,Ie){return new at(xt,It,Ie)}next(xt){this.isStopped?lt(function pe($e){return Ce("N",$e,void 0)}(xt),this):this._next(xt)}error(xt){this.isStopped?lt(function Q($e){return Ce("E",void 0,$e)}(xt),this):(this.isStopped=!0,this._error(xt))}complete(){this.isStopped?lt(Y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xt){this.destination.next(xt)}_error(xt){try{this.destination.error(xt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class at extends Ne{constructor(xt,It,Ie){let Vt;if(super(),(0,P.m)(xt))Vt=xt;else if(xt){let Ue;({next:Vt,error:It,complete:Ie}=xt),this&&B.config.useDeprecatedNextContext?(Ue=Object.create(xt),Ue.unsubscribe=()=>this.unsubscribe()):Ue=xt,Vt=Vt?.bind(Ue),It=It?.bind(Ue),Ie=Ie?.bind(Ue)}this.destination={next:Vt?tt(Vt):W.Z,error:tt(It??wt),complete:Ie?tt(Ie):W.Z}}}function tt($e,xt){return(...It)=>{try{$e(...It)}catch(Ie){B.config.useDeprecatedSynchronousErrorHandling?(0,me.O)(Ie):(0,R.h)(Ie)}}}function wt($e){throw $e}function lt($e,xt){const{onStoppedNotification:It}=B.config;It&&ce.z.setTimeout(()=>It($e,xt))}const le={closed:!0,next:W.Z,error:wt,complete:W.Z}},7394:(N,M,S)=>{"use strict";S.d(M,{Lc:()=>Y,w0:()=>W,Nn:()=>Q});var P=S(4674);const B=(0,S(2306).d)(Ce=>function(me){Ce(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((Ne,at)=>`${at+1}) ${Ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var R=S(9039);class W{constructor(ce){this.initialTeardown=ce,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let ce;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const tt of me)tt.remove(this);else me.remove(this);const{initialTeardown:Ne}=this;if((0,P.m)(Ne))try{Ne()}catch(tt){ce=tt instanceof B?tt.errors:[tt]}const{_teardowns:at}=this;if(at){this._teardowns=null;for(const tt of at)try{pe(tt)}catch(wt){ce=ce??[],wt instanceof B?ce=[...ce,...wt.errors]:ce.push(wt)}}if(ce)throw new B(ce)}}add(ce){var me;if(ce&&ce!==this)if(this.closed)pe(ce);else{if(ce instanceof W){if(ce.closed||ce._hasParent(this))return;ce._addParent(this)}(this._teardowns=null!==(me=this._teardowns)&&void 0!==me?me:[]).push(ce)}}_hasParent(ce){const{_parentage:me}=this;return me===ce||Array.isArray(me)&&me.includes(ce)}_addParent(ce){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(ce),me):me?[me,ce]:ce}_removeParent(ce){const{_parentage:me}=this;me===ce?this._parentage=null:Array.isArray(me)&&(0,R.P)(me,ce)}remove(ce){const{_teardowns:me}=this;me&&(0,R.P)(me,ce),ce instanceof W&&ce._removeParent(this)}}W.EMPTY=(()=>{const Ce=new W;return Ce.closed=!0,Ce})();const Y=W.EMPTY;function Q(Ce){return Ce instanceof W||Ce&&"closed"in Ce&&(0,P.m)(Ce.remove)&&(0,P.m)(Ce.add)&&(0,P.m)(Ce.unsubscribe)}function pe(Ce){(0,P.m)(Ce)?Ce():Ce.unsubscribe()}},2653:(N,M,S)=>{"use strict";S.d(M,{config:()=>P});const P={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(N,M,S)=>{"use strict";S.d(M,{E:()=>c});const c=new(S(5592).y)(W=>W.complete())},2459:(N,M,S)=>{"use strict";S.d(M,{D:()=>Vt});var P=S(4829),c=S(3093),B=S(5137),Y=S(5592),pe=S(4971),Ce=S(4674),ce=S(7103);function Ne(Ue,Ye){if(!Ue)throw new Error("Iterable cannot be null");return new Y.y(pt=>{(0,ce.f)(pt,Ye,()=>{const kt=Ue[Symbol.asyncIterator]();(0,ce.f)(pt,Ye,()=>{kt.next().then(Oe=>{Oe.done?pt.complete():pt.next(Oe.value)})},0,!0)})})}var at=S(8382),tt=S(4026),wt=S(4266),lt=S(3664),le=S(5726),$e=S(9853),xt=S(541);function Vt(Ue,Ye){return Ye?function Ie(Ue,Ye){if(null!=Ue){if((0,at.c)(Ue))return function R(Ue,Ye){return(0,P.Xf)(Ue).pipe((0,B.R)(Ye),(0,c.Q)(Ye))}(Ue,Ye);if((0,wt.z)(Ue))return function Q(Ue,Ye){return new Y.y(pt=>{let kt=0;return Ye.schedule(function(){kt===Ue.length?pt.complete():(pt.next(Ue[kt++]),pt.closed||this.schedule())})})}(Ue,Ye);if((0,tt.t)(Ue))return function W(Ue,Ye){return(0,P.Xf)(Ue).pipe((0,B.R)(Ye),(0,c.Q)(Ye))}(Ue,Ye);if((0,le.D)(Ue))return Ne(Ue,Ye);if((0,lt.T)(Ue))return function me(Ue,Ye){return new Y.y(pt=>{let kt;return(0,ce.f)(pt,Ye,()=>{kt=Ue[pe.h](),(0,ce.f)(pt,Ye,()=>{let Oe,We;try{({value:Oe,done:We}=kt.next())}catch(Fe){return void pt.error(Fe)}We?pt.complete():pt.next(Oe)},0,!0)}),()=>(0,Ce.m)(kt?.return)&&kt.return()})}(Ue,Ye);if((0,xt.L)(Ue))return function It(Ue,Ye){return Ne((0,xt.Q)(Ue),Ye)}(Ue,Ye)}throw(0,$e.z)(Ue)}(Ue,Ye):(0,P.Xf)(Ue)}},4829:(N,M,S)=>{"use strict";S.d(M,{Xf:()=>at});var P=S(5987),c=S(4266),B=S(4026),R=S(5592),W=S(8382),Y=S(5726),Q=S(9853),pe=S(3664),Ce=S(541),ce=S(4674),me=S(3894),Ne=S(4850);function at(Ie){if(Ie instanceof R.y)return Ie;if(null!=Ie){if((0,W.c)(Ie))return function tt(Ie){return new R.y(Vt=>{const Ue=Ie[Ne.L]();if((0,ce.m)(Ue.subscribe))return Ue.subscribe(Vt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,c.z)(Ie))return function wt(Ie){return new R.y(Vt=>{for(let Ue=0;Ue<Ie.length&&!Vt.closed;Ue++)Vt.next(Ie[Ue]);Vt.complete()})}(Ie);if((0,B.t)(Ie))return function lt(Ie){return new R.y(Vt=>{Ie.then(Ue=>{Vt.closed||(Vt.next(Ue),Vt.complete())},Ue=>Vt.error(Ue)).then(null,me.h)})}(Ie);if((0,Y.D)(Ie))return $e(Ie);if((0,pe.T)(Ie))return function le(Ie){return new R.y(Vt=>{for(const Ue of Ie)if(Vt.next(Ue),Vt.closed)return;Vt.complete()})}(Ie);if((0,Ce.L)(Ie))return function xt(Ie){return $e((0,Ce.Q)(Ie))}(Ie)}throw(0,Q.z)(Ie)}function $e(Ie){return new R.y(Vt=>{(function It(Ie,Vt){var Ue,Ye,pt,kt;return(0,P.mG)(this,void 0,void 0,function*(){try{for(Ue=(0,P.KL)(Ie);!(Ye=yield Ue.next()).done;)if(Vt.next(Ye.value),Vt.closed)return}catch(Oe){pt={error:Oe}}finally{try{Ye&&!Ye.done&&(kt=Ue.return)&&(yield kt.call(Ue))}finally{if(pt)throw pt.error}}Vt.complete()})})(Ie,Vt).catch(Ue=>Vt.error(Ue))})}},3019:(N,M,S)=>{"use strict";S.d(M,{T:()=>Y});var P=S(7537),c=S(4829),B=S(6232),R=S(9940),W=S(2459);function Y(...Q){const pe=(0,R.yG)(Q),Ce=(0,R._6)(Q,1/0),ce=Q;return ce.length?1===ce.length?(0,c.Xf)(ce[0]):(0,P.J)(Ce)((0,W.D)(ce,pe)):B.E}},2096:(N,M,S)=>{"use strict";S.d(M,{of:()=>B});var P=S(9940),c=S(2459);function B(...R){const W=(0,P.yG)(R);return(0,c.D)(R,W)}},8251:(N,M,S)=>{"use strict";S.d(M,{Q:()=>c});var P=S(305);class c extends P.Lv{constructor(R,W,Y,Q,pe){super(R),this.onFinalize=pe,this._next=W?function(Ce){try{W(Ce)}catch(ce){R.error(ce)}}:super._next,this._error=Q?function(Ce){try{Q(Ce)}catch(ce){R.error(ce)}finally{this.unsubscribe()}}:super._error,this._complete=Y?function(){try{Y()}catch(Ce){R.error(Ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var R;const{closed:W}=this;super.unsubscribe(),!W&&(null===(R=this.onFinalize)||void 0===R||R.call(this))}}},3997:(N,M,S)=>{"use strict";S.d(M,{x:()=>R});var P=S(2737),c=S(9360),B=S(8251);function R(Y,Q=P.y){return Y=Y??W,(0,c.e)((pe,Ce)=>{let ce,me=!0;pe.subscribe(new B.Q(Ce,Ne=>{const at=Q(Ne);(me||!Y(ce,at))&&(me=!1,ce=at,Ce.next(Ne))}))})}function W(Y,Q){return Y===Q}},7398:(N,M,S)=>{"use strict";S.d(M,{U:()=>B});var P=S(9360),c=S(8251);function B(R,W){return(0,P.e)((Y,Q)=>{let pe=0;Y.subscribe(new c.Q(Q,Ce=>{Q.next(R.call(W,Ce,pe++))}))})}},7537:(N,M,S)=>{"use strict";S.d(M,{J:()=>B});var P=S(1631),c=S(2737);function B(R=1/0){return(0,P.z)(c.y,R)}},1631:(N,M,S)=>{"use strict";S.d(M,{z:()=>pe});var P=S(7398),c=S(4829),B=S(9360),R=S(7103),W=S(8251),Q=S(4674);function pe(Ce,ce,me=1/0){return(0,Q.m)(ce)?pe((Ne,at)=>(0,P.U)((tt,wt)=>ce(Ne,tt,at,wt))((0,c.Xf)(Ce(Ne,at))),me):("number"==typeof ce&&(me=ce),(0,B.e)((Ne,at)=>function Y(Ce,ce,me,Ne,at,tt,wt,lt){const le=[];let $e=0,xt=0,It=!1;const Ie=()=>{It&&!le.length&&!$e&&ce.complete()},Vt=Ye=>$e<Ne?Ue(Ye):le.push(Ye),Ue=Ye=>{tt&&ce.next(Ye),$e++;let pt=!1;(0,c.Xf)(me(Ye,xt++)).subscribe(new W.Q(ce,kt=>{at?.(kt),tt?Vt(kt):ce.next(kt)},()=>{pt=!0},void 0,()=>{if(pt)try{for($e--;le.length&&$e<Ne;){const kt=le.shift();wt?(0,R.f)(ce,wt,()=>Ue(kt)):Ue(kt)}Ie()}catch(kt){ce.error(kt)}}))};return Ce.subscribe(new W.Q(ce,Vt,()=>{It=!0,Ie()})),()=>{lt?.()}}(Ne,at,Ce,me)))}},3093:(N,M,S)=>{"use strict";S.d(M,{Q:()=>R});var P=S(7103),c=S(9360),B=S(8251);function R(W,Y=0){return(0,c.e)((Q,pe)=>{Q.subscribe(new B.Q(pe,Ce=>(0,P.f)(pe,W,()=>pe.next(Ce),Y),()=>(0,P.f)(pe,W,()=>pe.complete(),Y),Ce=>(0,P.f)(pe,W,()=>pe.error(Ce),Y)))})}},3020:(N,M,S)=>{"use strict";S.d(M,{B:()=>Y});var P=S(2459),c=S(8180),B=S(8645),R=S(305),W=S(9360);function Y(pe={}){const{connector:Ce=(()=>new B.x),resetOnError:ce=!0,resetOnComplete:me=!0,resetOnRefCountZero:Ne=!0}=pe;return at=>{let tt=null,wt=null,lt=null,le=0,$e=!1,xt=!1;const It=()=>{wt?.unsubscribe(),wt=null},Ie=()=>{It(),tt=lt=null,$e=xt=!1},Vt=()=>{const Ue=tt;Ie(),Ue?.unsubscribe()};return(0,W.e)((Ue,Ye)=>{le++,!xt&&!$e&&It();const pt=lt=lt??Ce();Ye.add(()=>{le--,0===le&&!xt&&!$e&&(wt=Q(Vt,Ne))}),pt.subscribe(Ye),tt||(tt=new R.Hp({next:kt=>pt.next(kt),error:kt=>{xt=!0,It(),wt=Q(Ie,ce,kt),pt.error(kt)},complete:()=>{$e=!0,It(),wt=Q(Ie,me),pt.complete()}}),(0,P.D)(Ue).subscribe(tt))})(at)}}function Q(pe,Ce,...ce){return!0===Ce?(pe(),null):!1===Ce?null:Ce(...ce).pipe((0,c.q)(1)).subscribe(()=>pe())}},5137:(N,M,S)=>{"use strict";S.d(M,{R:()=>c});var P=S(9360);function c(B,R=0){return(0,P.e)((W,Y)=>{Y.add(B.schedule(()=>W.subscribe(Y),R))})}},4664:(N,M,S)=>{"use strict";S.d(M,{w:()=>R});var P=S(4829),c=S(9360),B=S(8251);function R(W,Y){return(0,c.e)((Q,pe)=>{let Ce=null,ce=0,me=!1;const Ne=()=>me&&!Ce&&pe.complete();Q.subscribe(new B.Q(pe,at=>{Ce?.unsubscribe();let tt=0;const wt=ce++;(0,P.Xf)(W(at,wt)).subscribe(Ce=new B.Q(pe,lt=>pe.next(Y?Y(at,lt,wt,tt++):lt),()=>{Ce=null,Ne()}))},()=>{me=!0,Ne()}))})}},8180:(N,M,S)=>{"use strict";S.d(M,{q:()=>R});var P=S(6232),c=S(9360),B=S(8251);function R(W){return W<=0?()=>P.E:(0,c.e)((Y,Q)=>{let pe=0;Y.subscribe(new B.Q(Q,Ce=>{++pe<=W&&(Q.next(Ce),W<=pe&&Q.complete())}))})}},9397:(N,M,S)=>{"use strict";S.d(M,{b:()=>W});var P=S(4674),c=S(9360),B=S(8251),R=S(2737);function W(Y,Q,pe){const Ce=(0,P.m)(Y)||Q||pe?{next:Y,error:Q,complete:pe}:Y;return Ce?(0,c.e)((ce,me)=>{var Ne;null===(Ne=Ce.subscribe)||void 0===Ne||Ne.call(Ce);let at=!0;ce.subscribe(new B.Q(me,tt=>{var wt;null===(wt=Ce.next)||void 0===wt||wt.call(Ce,tt),me.next(tt)},()=>{var tt;at=!1,null===(tt=Ce.complete)||void 0===tt||tt.call(Ce),me.complete()},tt=>{var wt;at=!1,null===(wt=Ce.error)||void 0===wt||wt.call(Ce,tt),me.error(tt)},()=>{var tt,wt;at&&(null===(tt=Ce.unsubscribe)||void 0===tt||tt.call(Ce)),null===(wt=Ce.finalize)||void 0===wt||wt.call(Ce)}))}):R.y}},1954:(N,M,S)=>{"use strict";S.d(M,{o:()=>W});var P=S(7394);class c extends P.w0{constructor(Q,pe){super()}schedule(Q,pe=0){return this}}const B={setInterval(...Y){const{delegate:Q}=B;return(Q?.setInterval||setInterval)(...Y)},clearInterval(Y){const{delegate:Q}=B;return(Q?.clearInterval||clearInterval)(Y)},delegate:void 0};var R=S(9039);class W extends c{constructor(Q,pe){super(Q,pe),this.scheduler=Q,this.work=pe,this.pending=!1}schedule(Q,pe=0){if(this.closed)return this;this.state=Q;const Ce=this.id,ce=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(ce,Ce,pe)),this.pending=!0,this.delay=pe,this.id=this.id||this.requestAsyncId(ce,this.id,pe),this}requestAsyncId(Q,pe,Ce=0){return B.setInterval(Q.flush.bind(Q,this),Ce)}recycleAsyncId(Q,pe,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return pe;B.clearInterval(pe)}execute(Q,pe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(Q,pe);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Q,pe){let ce,Ce=!1;try{this.work(Q)}catch(me){Ce=!0,ce=me||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),ce}unsubscribe(){if(!this.closed){const{id:Q,scheduler:pe}=this,{actions:Ce}=pe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,R.P)(Ce,this),null!=Q&&(this.id=this.recycleAsyncId(pe,Q,null)),this.delay=null,super.unsubscribe()}}}},2631:(N,M,S)=>{"use strict";S.d(M,{v:()=>B});var P=S(4552);class c{constructor(W,Y=c.now){this.schedulerActionCtor=W,this.now=Y}schedule(W,Y=0,Q){return new this.schedulerActionCtor(this,W).schedule(Q,Y)}}c.now=P.l.now;class B extends c{constructor(W,Y=c.now){super(W,Y),this.actions=[],this._active=!1,this._scheduled=void 0}flush(W){const{actions:Y}=this;if(this._active)return void Y.push(W);let Q;this._active=!0;do{if(Q=W.execute(W.state,W.delay))break}while(W=Y.shift());if(this._active=!1,Q){for(;W=Y.shift();)W.unsubscribe();throw Q}}}},6321:(N,M,S)=>{"use strict";S.d(M,{P:()=>R,z:()=>B});var P=S(1954);const B=new(S(2631).v)(P.o),R=B},4552:(N,M,S)=>{"use strict";S.d(M,{l:()=>P});const P={now:()=>(P.delegate||Date).now(),delegate:void 0}},7599:(N,M,S)=>{"use strict";S.d(M,{z:()=>P});const P={setTimeout(...c){const{delegate:B}=P;return(B?.setTimeout||setTimeout)(...c)},clearTimeout(c){const{delegate:B}=P;return(B?.clearTimeout||clearTimeout)(c)},delegate:void 0}},4971:(N,M,S)=>{"use strict";S.d(M,{h:()=>c});const c=function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(N,M,S)=>{"use strict";S.d(M,{L:()=>P});const P="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(N,M,S)=>{"use strict";S.d(M,{_6:()=>Y,jO:()=>R,yG:()=>W});var P=S(4674),c=S(671);function B(Q){return Q[Q.length-1]}function R(Q){return(0,P.m)(B(Q))?Q.pop():void 0}function W(Q){return(0,c.K)(B(Q))?Q.pop():void 0}function Y(Q,pe){return"number"==typeof B(Q)?Q.pop():pe}},9039:(N,M,S)=>{"use strict";function P(c,B){if(c){const R=c.indexOf(B);0<=R&&c.splice(R,1)}}S.d(M,{P:()=>P})},2306:(N,M,S)=>{"use strict";function P(c){const R=c(W=>{Error.call(W),W.stack=(new Error).stack});return R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R}S.d(M,{d:()=>P})},1441:(N,M,S)=>{"use strict";S.d(M,{O:()=>R,x:()=>B});var P=S(2653);let c=null;function B(W){if(P.config.useDeprecatedSynchronousErrorHandling){const Y=!c;if(Y&&(c={errorThrown:!1,error:null}),W(),Y){const{errorThrown:Q,error:pe}=c;if(c=null,Q)throw pe}}else W()}function R(W){P.config.useDeprecatedSynchronousErrorHandling&&c&&(c.errorThrown=!0,c.error=W)}},7103:(N,M,S)=>{"use strict";function P(c,B,R,W=0,Y=!1){const Q=B.schedule(function(){R(),Y?c.add(this.schedule(null,W)):this.unsubscribe()},W);if(c.add(Q),!Y)return Q}S.d(M,{f:()=>P})},2737:(N,M,S)=>{"use strict";function P(c){return c}S.d(M,{y:()=>P})},4266:(N,M,S)=>{"use strict";S.d(M,{z:()=>P});const P=c=>c&&"number"==typeof c.length&&"function"!=typeof c},5726:(N,M,S)=>{"use strict";S.d(M,{D:()=>c});var P=S(4674);function c(B){return Symbol.asyncIterator&&(0,P.m)(B?.[Symbol.asyncIterator])}},4674:(N,M,S)=>{"use strict";function P(c){return"function"==typeof c}S.d(M,{m:()=>P})},8382:(N,M,S)=>{"use strict";S.d(M,{c:()=>B});var P=S(4850),c=S(4674);function B(R){return(0,c.m)(R[P.L])}},3664:(N,M,S)=>{"use strict";S.d(M,{T:()=>B});var P=S(4971),c=S(4674);function B(R){return(0,c.m)(R?.[P.h])}},4026:(N,M,S)=>{"use strict";S.d(M,{t:()=>c});var P=S(4674);function c(B){return(0,P.m)(B?.then)}},541:(N,M,S)=>{"use strict";S.d(M,{L:()=>R,Q:()=>B});var P=S(5987),c=S(4674);function B(W){return(0,P.FC)(this,arguments,function*(){const Q=W.getReader();try{for(;;){const{value:pe,done:Ce}=yield(0,P.qq)(Q.read());if(Ce)return yield(0,P.qq)(void 0);yield yield(0,P.qq)(pe)}}finally{Q.releaseLock()}})}function R(W){return(0,c.m)(W?.getReader)}},671:(N,M,S)=>{"use strict";S.d(M,{K:()=>c});var P=S(4674);function c(B){return B&&(0,P.m)(B.schedule)}},9360:(N,M,S)=>{"use strict";S.d(M,{A:()=>c,e:()=>B});var P=S(4674);function c(R){return(0,P.m)(R?.lift)}function B(R){return W=>{if(c(W))return W.lift(function(Y){try{return R(Y,this)}catch(Q){this.error(Q)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(N,M,S)=>{"use strict";function P(){}S.d(M,{Z:()=>P})},8407:(N,M,S)=>{"use strict";S.d(M,{U:()=>B,z:()=>c});var P=S(2737);function c(...R){return B(R)}function B(R){return 0===R.length?P.y:1===R.length?R[0]:function(Y){return R.reduce((Q,pe)=>pe(Q),Y)}}},3894:(N,M,S)=>{"use strict";S.d(M,{h:()=>B});var P=S(2653),c=S(7599);function B(R){c.z.setTimeout(()=>{const{onUnhandledError:W}=P.config;if(!W)throw R;W(R)})}},9853:(N,M,S)=>{"use strict";function P(c){return new TypeError(`You provided ${null!==c&&"object"==typeof c?"an invalid object":`'${c}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}S.d(M,{z:()=>P})},5987:(N,M,S)=>{"use strict";function pe(Oe,We,Fe,Mt){return new(Fe||(Fe=Promise))(function(St,Yt){function Yn(ft){try{vn(Mt.next(ft))}catch(Nt){Yt(Nt)}}function hi(ft){try{vn(Mt.throw(ft))}catch(Nt){Yt(Nt)}}function vn(ft){ft.done?St(ft.value):function Pt(St){return St instanceof Fe?St:new Fe(function(Yt){Yt(St)})}(ft.value).then(Yn,hi)}vn((Mt=Mt.apply(Oe,We||[])).next())})}function le(Oe){return this instanceof le?(this.v=Oe,this):new le(Oe)}function $e(Oe,We,Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pt,Mt=Fe.apply(Oe,We||[]),St=[];return Pt={},Yt("next"),Yt("throw"),Yt("return"),Pt[Symbol.asyncIterator]=function(){return this},Pt;function Yt(Ct){Mt[Ct]&&(Pt[Ct]=function(Zt){return new Promise(function(nn,fn){St.push([Ct,Zt,nn,fn])>1||Yn(Ct,Zt)})})}function Yn(Ct,Zt){try{!function hi(Ct){Ct.value instanceof le?Promise.resolve(Ct.value.v).then(vn,ft):Nt(St[0][2],Ct)}(Mt[Ct](Zt))}catch(nn){Nt(St[0][3],nn)}}function vn(Ct){Yn("next",Ct)}function ft(Ct){Yn("throw",Ct)}function Nt(Ct,Zt){Ct(Zt),St.shift(),St.length&&Yn(St[0][0],St[0][1])}}function It(Oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,We=Oe[Symbol.asyncIterator];return We?We.call(Oe):(Oe=function Ne(Oe){var We="function"==typeof Symbol&&Symbol.iterator,Fe=We&&Oe[We],Mt=0;if(Fe)return Fe.call(Oe);if(Oe&&"number"==typeof Oe.length)return{next:function(){return Oe&&Mt>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[Mt++],done:!Oe}}};throw new TypeError(We?"Object is not iterable.":"Symbol.iterator is not defined.")}(Oe),Fe={},Mt("next"),Mt("throw"),Mt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe);function Mt(St){Fe[St]=Oe[St]&&function(Yt){return new Promise(function(Yn,hi){!function Pt(St,Yt,Yn,hi){Promise.resolve(hi).then(function(vn){St({value:vn,done:Yn})},Yt)}(Yn,hi,(Yt=Oe[St](Yt)).done,Yt.value)})}}}S.d(M,{FC:()=>$e,KL:()=>It,mG:()=>pe,qq:()=>le})},4902:()=>{},5879:(N,M,S)=>{"use strict";S.d(M,{$8M:()=>dc,$WT:()=>Ra,$Z:()=>Nd,AFp:()=>rv,AaK:()=>Ne,AsE:()=>Nw,BQk:()=>E_,CHM:()=>ed,CRH:()=>hC,EJc:()=>CM,EiD:()=>Gy,EpF:()=>C_,F$t:()=>Tw,F4k:()=>S_,FYo:()=>mv,FiY:()=>xs,G48:()=>Ib,Gf:()=>EI,GfV:()=>gv,Gpc:()=>wt,HDt:()=>jI,Hsn:()=>Aw,Ikx:()=>AE,JOm:()=>no,JVY:()=>ky,JZr:()=>It,KtG:()=>ec,L6k:()=>Fy,LAX:()=>By,LFG:()=>Ur,Lbi:()=>ov,Lck:()=>K1,MAs:()=>ww,MMx:()=>Lu,MR2:()=>Dg,NdJ:()=>Dm,Ojb:()=>sv,OlP:()=>dr,Oqu:()=>T_,P3R:()=>Cg,PXZ:()=>BM,Q6J:()=>rb,QGY:()=>Sm,QbO:()=>E0,Qsj:()=>k0,R0b:()=>Aa,RDi:()=>My,Rgc:()=>z_,SBq:()=>qp,Sil:()=>DM,Suo:()=>CI,TTD:()=>Ha,TgZ:()=>v_,Udp:()=>Go,VuI:()=>CT,W1O:()=>fC,WFA:()=>mf,X6Q:()=>Db,XFs:()=>Ft,Xpm:()=>zr,Xq5:()=>d_,Xts:()=>Su,Y36:()=>Ac,YKP:()=>QD,YNc:()=>bw,Yjl:()=>hl,Yz7:()=>_r,Z0I:()=>uo,ZZ4:()=>xx,_Bn:()=>XD,_UZ:()=>w_,_Vd:()=>Gp,_c5:()=>_T,_uU:()=>Xh,aQg:()=>Bb,c2e:()=>zI,cJS:()=>Do,cg1:()=>Qh,d8E:()=>ME,dDg:()=>RM,dqk:()=>jn,eBb:()=>Ly,eFA:()=>xb,eJc:()=>gC,ekj:()=>As,eoX:()=>QI,f3M:()=>nr,g9A:()=>iv,h0i:()=>F_,hGG:()=>yT,hij:()=>A_,iGM:()=>xI,ifc:()=>rr,ip1:()=>UI,jDz:()=>ZE,kL8:()=>NE,lG2:()=>$u,lqb:()=>Sc,lri:()=>YI,mCW:()=>kp,n5z:()=>Or,oAB:()=>Uc,oxw:()=>Iw,pB0:()=>Vy,q3G:()=>Mi,q4F:()=>om,qFp:()=>IT,qLn:()=>Cs,qOj:()=>a_,qZA:()=>b_,qzn:()=>zl,rWj:()=>XI,rg0:()=>nh,s9C:()=>u,sBO:()=>BC,s_b:()=>rx,soG:()=>px,tb:()=>AC,tp0:()=>ns,uIk:()=>f_,vHH:()=>Ie,vpe:()=>Bu,wAp:()=>Cn,xp6:()=>Bh,ynx:()=>x_,z2F:()=>wf,z3N:()=>Cu,zSh:()=>Ag,zs3:()=>Da});var P=S(8645),c=S(7394),B=S(5619),R=S(5592),W=S(3019),Y=S(2096),Q=S(3020),pe=S(4664),Ce=S(3997);function ce(s){for(let l in s)if(s[l]===ce)return l;throw Error("Could not find renamed property on target object.")}function me(s,l){for(const h in l)l.hasOwnProperty(h)&&!s.hasOwnProperty(h)&&(s[h]=l[h])}function Ne(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ne).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const l=s.toString();if(null==l)return""+l;const h=l.indexOf("\n");return-1===h?l:l.substring(0,h)}function at(s,l){return null==s||""===s?null===l?"":l:null==l||""===l?s:s+" "+l}const tt=ce({__forward_ref__:ce});function wt(s){return s.__forward_ref__=wt,s.toString=function(){return Ne(this())},s}function lt(s){return le(s)?s():s}function le(s){return"function"==typeof s&&s.hasOwnProperty(tt)&&s.__forward_ref__===wt}function $e(s){return s&&!!s.\u0275providers}const It="https://g.co/ng/security#xss";class Ie extends Error{constructor(l,h){super(function Vt(s,l){return`NG0${Math.abs(s)}${l?": "+l:""}`}(l,h)),this.code=l}}function Ue(s){return"string"==typeof s?s:null==s?"":String(s)}function We(s,l){throw new Ie(-201,!1)}function fn(s,l){null==s&&function pn(s,l,h,m){throw new Error(`ASSERTION ERROR: ${s}`+(null==m?"":` [Expected=> ${h} ${m} ${l} <=Actual]`))}(l,s,null,"!=")}function _r(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Do(s){return{providers:s.providers||[],imports:s.imports||[]}}function ds(s){return er(s,ni)||er(s,Et)}function uo(s){return null!==ds(s)}function er(s,l){return s.hasOwnProperty(l)?s[l]:null}function al(s){return s&&(s.hasOwnProperty(Yi)||s.hasOwnProperty(Vr))?s[Yi]:null}const ni=ce({\u0275prov:ce}),Yi=ce({\u0275inj:ce}),Et=ce({ngInjectableDef:ce}),Vr=ce({ngInjectorDef:ce});var Ft=(()=>((Ft=Ft||{})[Ft.Default=0]="Default",Ft[Ft.Host=1]="Host",Ft[Ft.Self=2]="Self",Ft[Ft.SkipSelf=4]="SkipSelf",Ft[Ft.Optional=8]="Optional",Ft))();let ze;function Ut(s){const l=ze;return ze=s,l}function Tt(s,l,h){const m=ds(s);return m&&"root"==m.providedIn?void 0===m.value?m.value=m.factory():m.value:h&Ft.Optional?null:void 0!==l?l:void We(Ne(s))}const jn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qn={},Wn="__NG_DI_FLAG__",rn="ngTempTokenPath",tr=/\n/gm,pi="__source";let Oi;function ri(s){const l=Oi;return Oi=s,l}function Xi(s,l=Ft.Default){if(void 0===Oi)throw new Ie(-203,!1);return null===Oi?Tt(s,void 0,l):Oi.get(s,l&Ft.Optional?null:void 0,l)}function Ur(s,l=Ft.Default){return(function Gt(){return ze}()||Xi)(lt(s),l)}function nr(s,l=Ft.Default){return Ur(s,Ee(l))}function Ee(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function be(s){const l=[];for(let h=0;h<s.length;h++){const m=lt(s[h]);if(Array.isArray(m)){if(0===m.length)throw new Ie(900,!1);let _,x=Ft.Default;for(let D=0;D<m.length;D++){const V=m[D],H=nt(V);"number"==typeof H?-1===H?_=V.token:x|=H:_=V}l.push(Ur(_,x))}else l.push(Ur(m))}return l}function Me(s,l){return s[Wn]=l,s.prototype[Wn]=l,s}function nt(s){return s[Wn]}function on(s){return{toString:s}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),rr=(()=>{return(s=rr||(rr={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",rr;var s})();const xr={},mn=[],Fn=ce({\u0275cmp:ce}),pr=ce({\u0275dir:ce}),hs=ce({\u0275pipe:ce}),Oo=ce({\u0275mod:ce}),ve=ce({\u0275fac:ce}),Ze=ce({__NG_ELEMENT_ID__:ce}),He=ce({__NG_ENV_ID__:ce});function mt(s,l,h){let m=s.length;for(;;){const _=s.indexOf(l,h);if(-1===_)return _;if(0===_||s.charCodeAt(_-1)<=32){const x=l.length;if(_+x===m||s.charCodeAt(_+x)<=32)return _}h=_+1}}function Qt(s,l,h){let m=0;for(;m<h.length;){const _=h[m];if("number"==typeof _){if(0!==_)break;m++;const x=h[m++],D=h[m++],V=h[m++];s.setAttribute(l,D,V,x)}else{const x=_,D=h[++m];Ln(x)?s.setProperty(l,x,D):s.setAttribute(l,x,D),m++}}return m}function wn(s){return 3===s||4===s||6===s}function Ln(s){return 64===s.charCodeAt(0)}function Rn(s,l){if(null!==l&&0!==l.length)if(null===s||0===s.length)s=l.slice();else{let h=-1;for(let m=0;m<l.length;m++){const _=l[m];"number"==typeof _?h=_:0===h||Dr(s,h,_,null,-1===h||2===h?l[++m]:null)}}return s}function Dr(s,l,h,m,_){let x=0,D=s.length;if(-1===l)D=-1;else for(;x<s.length;){const V=s[x++];if("number"==typeof V){if(V===l){D=-1;break}if(V>l){D=x-1;break}}}for(;x<s.length;){const V=s[x];if("number"==typeof V)break;if(V===h){if(null===m)return void(null!==_&&(s[x+1]=_));if(m===s[x+1])return void(s[x+2]=_)}x++,null!==m&&x++,null!==_&&x++}-1!==D&&(s.splice(D,0,l),x=D+1),s.splice(x++,0,h),null!==m&&s.splice(x++,0,m),null!==_&&s.splice(x++,0,_)}const Sn="ng-template";function Bn(s,l,h){let m=0,_=!0;for(;m<s.length;){let x=s[m++];if("string"==typeof x&&_){const D=s[m++];if(h&&"class"===x&&-1!==mt(D.toLowerCase(),l,0))return!0}else{if(1===x){for(;m<s.length&&"string"==typeof(x=s[m++]);)if(x.toLowerCase()===l)return!0;return!1}"number"==typeof x&&(_=!1)}}return!1}function Pa(s){return 4===s.type&&s.value!==Sn}function co(s,l,h){return l===(4!==s.type||h?s.value:Sn)}function Wd(s,l,h){let m=4;const _=s.attrs||[],x=function Xl(s){for(let l=0;l<s.length;l++)if(wn(s[l]))return l;return s.length}(_);let D=!1;for(let V=0;V<l.length;V++){const H=l[V];if("number"!=typeof H){if(!D)if(4&m){if(m=2|1&m,""!==H&&!co(s,H,h)||""===H&&1===l.length){if(vi(m))return!1;D=!0}}else{const J=8&m?H:l[++V];if(8&m&&null!==s.attrs){if(!Bn(s.attrs,J,h)){if(vi(m))return!1;D=!0}continue}const fe=ks(8&m?"class":H,_,Pa(s),h);if(-1===fe){if(vi(m))return!1;D=!0;continue}if(""!==J){let Ae;Ae=fe>x?"":_[fe+1].toLowerCase();const Be=8&m?Ae:null;if(Be&&-1!==mt(Be,J,0)||2&m&&J!==Ae){if(vi(m))return!1;D=!0}}}}else{if(!D&&!vi(m)&&!vi(H))return!1;if(D&&vi(H))continue;D=!1,m=H|1&m}}return vi(m)||D}function vi(s){return 0==(1&s)}function ks(s,l,h,m){if(null===l)return-1;let _=0;if(m||!h){let x=!1;for(;_<l.length;){const D=l[_];if(D===s)return _;if(3===D||6===D)x=!0;else{if(1===D||2===D){let V=l[++_];for(;"string"==typeof V;)V=l[++_];continue}if(4===D)break;if(0===D){_+=4;continue}}_+=x?1:2}return-1}return function Fs(s,l){let h=s.indexOf(4);if(h>-1)for(h++;h<s.length;){const m=s[h];if("number"==typeof m)return-1;if(m===l)return h;h++}return-1}(l,s)}function Po(s,l,h=!1){for(let m=0;m<l.length;m++)if(Wd(s,l[m],h))return!0;return!1}function Vc(s,l){e:for(let h=0;h<l.length;h++){const m=l[h];if(s.length===m.length){for(let _=0;_<s.length;_++)if(s[_]!==m[_])continue e;return!0}}return!1}function Hu(s,l){return s?":not("+l.trim()+")":l}function Gr(s){let l=s[0],h=1,m=2,_="",x=!1;for(;h<s.length;){let D=s[h];if("string"==typeof D)if(2&m){const V=s[++h];_+="["+D+(V.length>0?'="'+V+'"':"")+"]"}else 8&m?_+="."+D:4&m&&(_+=" "+D);else""!==_&&!vi(D)&&(l+=Hu(x,_),_=""),m=D,x=x||!vi(m);h++}return""!==_&&(l+=Hu(x,_)),l}function zr(s){return on(()=>{const l=Gd(s),h={...l,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||rr.Emulated,styles:s.styles||mn,_:null,schemas:s.schemas||null,tView:null,id:""};pl(h);const m=s.dependencies;return h.directiveDefs=Jl(m,!1),h.pipeDefs=Jl(m,!0),h.id=function ka(s){let l=0;const h=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const _ of h)l=Math.imul(31,l)+_.charCodeAt(0)<<0;return l+=2147483648,"c"+l}(h),h})}function Ql(s){return ir(s)||yr(s)}function ps(s){return null!==s}function Uc(s){return on(()=>({type:s.type,bootstrap:s.bootstrap||mn,declarations:s.declarations||mn,imports:s.imports||mn,exports:s.exports||mn,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function dl(s,l){if(null==s)return xr;const h={};for(const m in s)if(s.hasOwnProperty(m)){let _=s[m],x=_;Array.isArray(_)&&(x=_[1],_=_[0]),h[_]=m,l&&(l[_]=x)}return h}function $u(s){return on(()=>{const l=Gd(s);return pl(l),l})}function hl(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function ir(s){return s[Fn]||null}function yr(s){return s[pr]||null}function sr(s){return s[hs]||null}function Ra(s){const l=ir(s)||yr(s)||sr(s);return null!==l&&l.standalone}function Qi(s,l){const h=s[Oo]||null;if(!h&&!0===l)throw new Error(`Type ${Ne(s)} does not have '\u0275mod' property.`);return h}function Gd(s){const l={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputTransforms:null,inputConfig:s.inputs||xr,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||mn,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dl(s.inputs,l),outputs:dl(s.outputs)}}function pl(s){s.features?.forEach(l=>l(s))}function Jl(s,l){if(!s)return null;const h=l?sr:Ql;return()=>("function"==typeof s?s():s).map(m=>h(m)).filter(ps)}const ii=0,ae=1,ln=2,Te=3,ho=4,Wu=5,Kn=6,Fa=7,fi=8,Ls=9,La=10,Jt=11,fs=12,ua=13,vr=14,st=15,ko=16,ms=17,po=18,Ti=19,Gu=20,Ji=21,Mr=22,Fr=23,Bs=24,Vn=25,eu=1,tu=2,Fo=7,Zo=9,mi=11;function Pi(s){return Array.isArray(s)&&"object"==typeof s[eu]}function Nn(s){return Array.isArray(s)&&!0===s[eu]}function Ku(s){return 0!=(4&s.flags)}function Ir(s){return s.componentOffset>-1}function Ri(s){return 1==(1&s.flags)}function ki(s){return!!s.template}function ca(s){return 0!=(512&s[ln])}function zs(s,l){return s.hasOwnProperty(ve)?s[ve]:null}let $c=jn.WeakRef??class gl{constructor(l){this.ref=l}deref(){return this.ref}},Jd=0,go=null,Ua=!1;function gi(s){const l=go;return go=s,l}class Yo{constructor(){this.id=Jd++,this.ref=function Lo(s){return new $c(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[l,h]of this.producers){const m=h.producerNode.deref();if(void 0!==m&&h.atTrackingVersion===this.trackingVersion){if(m.producerPollStatus(h.seenValueVersion))return!0}else this.producers.delete(l),m?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const l=Ua;Ua=!0;try{for(const[h,m]of this.consumers){const _=m.consumerNode.deref();void 0!==_&&_.trackingVersion===m.atTrackingVersion?_.onConsumerDependencyMayHaveChanged():(this.consumers.delete(h),_?.producers.delete(this.id))}}finally{Ua=l}}producerAccessed(){if(Ua)throw new Error("");if(null===go)return;let l=go.producers.get(this.id);void 0===l?(l={consumerNode:go.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:go.trackingVersion},go.producers.set(this.id,l),this.consumers.set(go.id,l)):(l.seenValueVersion=this.valueVersion,l.atTrackingVersion=go.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==go?.consumerAllowSignalWrites}producerPollStatus(l){return this.valueVersion!==l||(this.onProducerUpdateValueVersion(),this.valueVersion!==l)}}let eh=null;function nh(s){const l=gi(null);try{return s()}finally{gi(l)}}const Zu=()=>{};class Gc extends Yo{constructor(l,h,m){super(),this.watch=l,this.schedule=h,this.dirty=!1,this.cleanupFn=Zu,this.registerOnCleanup=_=>{this.cleanupFn=_},this.consumerAllowSignalWrites=m}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const l=gi(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Zu,this.watch(this.registerOnCleanup)}finally{gi(l)}}cleanup(){this.cleanupFn()}}class rh{constructor(l,h,m){this.previousValue=l,this.currentValue=h,this.firstChange=m}isFirstChange(){return this.firstChange}}function Ha(){return qc}function qc(s){return s.type.prototype.ngOnChanges&&(s.setInput=vl),ou}function ou(){const s=bl(this),l=s?.current;if(l){const h=s.previous;if(h===xr)s.previous=l;else for(let m in l)h[m]=l[m];s.current=null,this.ngOnChanges(l)}}function vl(s,l,h,m){const _=this.declaredInputs[h],x=bl(s)||function Wa(s,l){return s[$a]=l}(s,{previous:xr,current:null}),D=x.current||(x.current={}),V=x.previous,H=V[_];D[_]=new rh(H&&H.currentValue,l,V===xr),s[m]=l}Ha.ngInherit=!0;const $a="__ngSimpleChanges__";function bl(s){return s[$a]||null}const _s=function(s,l,h){};function br(s){for(;Array.isArray(s);)s=s[ii];return s}function Xo(s,l){return br(l[s])}function eo(s,l){return br(l[s.index])}function xl(s,l){return s.data[l]}function Fi(s,l){const h=l[s];return Pi(h)?h:h[ii]}function Bo(s,l){return null==l?null:s[l]}function El(s){s[ms]=0}function Zc(s){1024&s[ln]||(s[ln]|=1024,Yc(s,1))}function pa(s){1024&s[ln]&&(s[ln]&=-1025,Yc(s,-1))}function Yc(s,l){let h=s[Te];if(null===h)return;h[Wu]+=l;let m=h;for(h=h[Te];null!==h&&(1===l&&1===m[Wu]||-1===l&&0===m[Wu]);)h[Wu]+=l,m=h,h=h[Te]}const dn={lFrame:rc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Qu(){return dn.bindingsEnabled}function $s(){return null!==dn.skipHydrationRootTNode}function ut(){return dn.lFrame.lView}function Gn(){return dn.lFrame.tView}function ed(s){return dn.lFrame.contextLView=s,s[fi]}function ec(s){return dn.lFrame.contextLView=null,s}function wi(){let s=fp();for(;null!==s&&64===s.type;)s=s.parent;return s}function fp(){return dn.lFrame.currentTNode}function Li(s,l){const h=dn.lFrame;h.currentTNode=s,h.isParent=l}function Cl(){return dn.lFrame.isParent}function mp(){dn.lFrame.isParent=!1}function fr(){return dn.lFrame.bindingIndex++}function Qo(s){const l=dn.lFrame,h=l.bindingIndex;return l.bindingIndex=l.bindingIndex+s,h}function Wi(s,l){const h=dn.lFrame;h.bindingIndex=h.bindingRootIndex=s,ga(l)}function ga(s){dn.lFrame.currentDirectiveIndex=s}function qa(s){const l=dn.lFrame.currentDirectiveIndex;return-1===l?null:s[l]}function nc(){return dn.lFrame.currentQueryIndex}function _a(s){dn.lFrame.currentQueryIndex=s}function td(s){const l=s[ae];return 2===l.type?l.declTNode:1===l.type?s[Kn]:null}function _i(s,l,h){if(h&Ft.SkipSelf){let _=l,x=s;for(;!(_=_.parent,null!==_||h&Ft.Host||(_=td(x),null===_||(x=x[vr],10&_.type))););if(null===_)return!1;l=_,s=x}const m=dn.lFrame=oh();return m.currentTNode=l,m.lView=s,!0}function Sl(s){const l=oh(),h=s[ae];dn.lFrame=l,l.currentTNode=h.firstChild,l.lView=s,l.tView=h,l.contextLView=s,l.bindingIndex=h.bindingStartIndex,l.inI18n=!1}function oh(){const s=dn.lFrame,l=null===s?null:s.child;return null===l?rc(s):l}function rc(s){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=l),l}function zt(){const s=dn.lFrame;return dn.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const _p=zt;function ic(){const s=zt();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ei(){return dn.lFrame.selectedIndex}function Gs(s){dn.lFrame.selectedIndex=s}function Er(){const s=dn.lFrame;return xl(s.tView,s.selectedIndex)}let Il=!0;function ya(){return Il}function va(s){Il=s}function cu(s,l){for(let h=l.directiveStart,m=l.directiveEnd;h<m;h++){const x=s.data[h].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:V,ngAfterViewInit:H,ngAfterViewChecked:J,ngOnDestroy:ie}=x;D&&(s.contentHooks??=[]).push(-h,D),V&&((s.contentHooks??=[]).push(h,V),(s.contentCheckHooks??=[]).push(h,V)),H&&(s.viewHooks??=[]).push(-h,H),J&&((s.viewHooks??=[]).push(h,J),(s.viewCheckHooks??=[]).push(h,J)),null!=ie&&(s.destroyHooks??=[]).push(h,ie)}}function qs(s,l,h){ac(s,l,3,h)}function Tl(s,l,h,m){(3&s[ln])===h&&ac(s,l,h,m)}function Ks(s,l){let h=s[ln];(3&h)===l&&(h&=8191,h+=1,s[ln]=h)}function ac(s,l,h,m){const x=m??-1,D=l.length-1;let V=0;for(let H=void 0!==m?65535&s[ms]:0;H<D;H++)if("number"==typeof l[H+1]){if(V=l[H],null!=m&&V>=m)break}else l[H]<0&&(s[ms]+=65536),(V<x||-1==x)&&(Gi(s,h,l,H),s[ms]=(4294901760&s[ms])+H+2),H++}function Zr(s,l){_s(4,s,l);const h=gi(null);try{l.call(s)}finally{gi(h),_s(5,s,l)}}function Gi(s,l,h,m){const _=h[m]<0,x=h[m+1],V=s[_?-h[m]:h[m]];_?s[ln]>>13<s[ms]>>16&&(3&s[ln])===l&&(s[ln]+=8192,Zr(V,x)):Zr(V,x)}const ys=-1;class Tr{constructor(l,h,m){this.factory=l,this.resolving=!1,this.canSeeViewProviders=h,this.injectImpl=m}}function Al(s){return s!==ys}function en(s){return 32767&s}function Ml(s,l){let h=function od(s){return s>>16}(s),m=l;for(;h>0;)m=m[vr],h--;return m}let Vo=!0;function vs(s){const l=Vo;return Vo=s,l}const Nr=255,Ka=5;let lc=0;const Jo={};function uc(s,l){const h=wa(s,l);if(-1!==h)return h;const m=l[ae];m.firstCreatePass&&(s.injectorIndex=l.length,ba(m.data,s),ba(l,null),ba(m.blueprint,null));const _=Ol(s,l),x=s.injectorIndex;if(Al(_)){const D=en(_),V=Ml(_,l),H=V[ae].data;for(let J=0;J<8;J++)l[x+J]=V[D+J]|H[D+J]}return l[x+8]=_,x}function ba(s,l){s.push(0,0,0,0,0,0,0,0,l)}function wa(s,l){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===l[s.injectorIndex+8]?-1:s.injectorIndex}function Ol(s,l){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let h=0,m=null,_=l;for(;null!==_;){if(m=uh(_),null===m)return ys;if(h++,_=_[vr],-1!==m.injectorIndex)return m.injectorIndex|h<<16}return ys}function Pl(s,l,h){!function sd(s,l,h){let m;"string"==typeof h?m=h.charCodeAt(0)||0:h.hasOwnProperty(Ze)&&(m=h[Ze]),null==m&&(m=h[Ze]=lc++);const _=m&Nr;l.data[s+(_>>Ka)]|=1<<_}(s,l,h)}function xa(s,l,h){if(h&Ft.Optional||void 0!==s)return s;We()}function lh(s,l,h,m){if(h&Ft.Optional&&void 0===m&&(m=null),!(h&(Ft.Self|Ft.Host))){const _=s[Ls],x=Ut(void 0);try{return _?_.get(l,m,h&Ft.Optional):Tt(l,m,h&Ft.Optional)}finally{Ut(x)}}return xa(m,0,h)}function Xs(s,l,h,m=Ft.Default,_){if(null!==s){if(2048&l[ln]&&!(m&Ft.Self)){const D=function cc(s,l,h,m,_){let x=s,D=l;for(;null!==x&&null!==D&&2048&D[ln]&&!(512&D[ln]);){const V=Qs(x,D,h,m|Ft.Self,Jo);if(V!==Jo)return V;let H=x.parent;if(!H){const J=D[Gu];if(J){const ie=J.get(h,Jo,m);if(ie!==Jo)return ie}H=uh(D),D=D[vr]}x=H}return _}(s,l,h,m,Jo);if(D!==Jo)return D}const x=Qs(s,l,h,m,Jo);if(x!==Jo)return x}return lh(l,h,m,_)}function Qs(s,l,h,m,_){const x=function kl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const l=s.hasOwnProperty(Ze)?s[Ze]:void 0;return"number"==typeof l?l>=0?l&Nr:hu:l}(h);if("function"==typeof x){if(!_i(l,s,m))return m&Ft.Host?xa(_,0,m):lh(l,h,m,_);try{const D=x(m);if(null!=D||m&Ft.Optional)return D;We()}finally{_p()}}else if("number"==typeof x){let D=null,V=wa(s,l),H=ys,J=m&Ft.Host?l[st][Kn]:null;for((-1===V||m&Ft.SkipSelf)&&(H=-1===V?Ol(s,l):l[V+8],H!==ys&&jr(m,!1)?(D=l[ae],V=en(H),l=Ml(H,l)):V=-1);-1!==V;){const ie=l[ae];if($t(x,V,ie.data)){const fe=yo(V,l,h,D,m,J);if(fe!==Jo)return fe}H=l[V+8],H!==ys&&jr(m,l[ae].data[V+8]===J)&&$t(x,V,l)?(D=ie,V=en(H),l=Ml(H,l)):V=-1}}return _}function yo(s,l,h,m,_,x){const D=l[ae],V=D.data[s+8],ie=Ai(V,D,h,null==m?Ir(V)&&Vo:m!=D&&0!=(3&V.type),_&Ft.Host&&x===V);return null!==ie?bs(l,D,ie,V):Jo}function Ai(s,l,h,m,_){const x=s.providerIndexes,D=l.data,V=1048575&x,H=s.directiveStart,ie=x>>20,Ae=_?V+ie:s.directiveEnd;for(let Be=m?V:V+ie;Be<Ae;Be++){const ot=D[Be];if(Be<H&&h===ot||Be>=H&&ot.type===h)return Be}if(_){const Be=D[H];if(Be&&ki(Be)&&Be.type===h)return H}return null}function bs(s,l,h,m){let _=s[h];const x=l.data;if(function qt(s){return s instanceof Tr}(_)){const D=_;D.resolving&&function pt(s,l){const h=l?`. Dependency path: ${l.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${h}`)}(function Ye(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ue(s)}(x[h]));const V=vs(D.canSeeViewProviders);D.resolving=!0;const H=D.injectImpl?Ut(D.injectImpl):null;_i(s,m,Ft.Default);try{_=s[h]=D.factory(void 0,x,s,m),l.firstCreatePass&&h>=m.directiveStart&&function sc(s,l,h){const{ngOnChanges:m,ngOnInit:_,ngDoCheck:x}=l.type.prototype;if(m){const D=qc(l);(h.preOrderHooks??=[]).push(s,D),(h.preOrderCheckHooks??=[]).push(s,D)}_&&(h.preOrderHooks??=[]).push(0-s,_),x&&((h.preOrderHooks??=[]).push(s,x),(h.preOrderCheckHooks??=[]).push(s,x))}(h,x[h],l)}finally{null!==H&&Ut(H),vs(V),D.resolving=!1,_p()}}return _}function $t(s,l,h){return!!(h[l+(s>>Ka)]&1<<s)}function jr(s,l){return!(s&Ft.Self||s&Ft.Host&&l)}class Yr{constructor(l,h){this._tNode=l,this._lView=h}get(l,h,m){return Xs(this._tNode,this._lView,l,Ee(m),h)}}function hu(){return new Yr(wi(),ut())}function Or(s){return on(()=>{const l=s.prototype.constructor,h=l[ve]||li(l),m=Object.prototype;let _=Object.getPrototypeOf(s.prototype).constructor;for(;_&&_!==m;){const x=_[ve]||li(_);if(x&&x!==h)return x;_=Object.getPrototypeOf(_)}return x=>new x})}function li(s){return le(s)?()=>{const l=li(lt(s));return l&&l()}:zs(s)}function uh(s){const l=s[ae],h=l.type;return 2===h?l.declTNode:1===h?s[Kn]:null}function dc(s){return function Rl(s,l){if("class"===l)return s.classes;if("style"===l)return s.styles;const h=s.attrs;if(h){const m=h.length;let _=0;for(;_<m;){const x=h[_];if(wn(x))break;if(0===x)_+=2;else if("number"==typeof x)for(_++;_<m&&"string"==typeof h[_];)_++;else{if(x===l)return h[_+1];_+=2}}}return null}(wi(),s)}const Uo="__parameters__";function Ea(s,l,h){return on(()=>{const m=function pu(s){return function(...h){if(s){const m=s(...h);for(const _ in m)this[_]=m[_]}}}(l);function _(...x){if(this instanceof _)return m.apply(this,x),this;const D=new _(...x);return V.annotation=D,V;function V(H,J,ie){const fe=H.hasOwnProperty(Uo)?H[Uo]:Object.defineProperty(H,Uo,{value:[]})[Uo];for(;fe.length<=ie;)fe.push(null);return(fe[ie]=fe[ie]||[]).push(D),H}}return h&&(_.prototype=Object.create(h.prototype)),_.prototype.ngMetadataName=s,_.annotationCls=_,_})}function Bl(s,l){s.forEach(h=>Array.isArray(h)?Bl(h,l):l(h))}function ws(s,l,h){l>=s.length?s.push(h):s.splice(l,0,h)}function mc(s,l){return l>=s.length-1?s.pop():s.splice(l,1)[0]}function gc(s,l){const h=[];for(let m=0;m<s;m++)h.push(l);return h}function L(s,l,h){let m=ee(s,l);return m>=0?s[1|m]=h:(m=~m,function mu(s,l,h,m){let _=s.length;if(_==l)s.push(h,m);else if(1===_)s.push(m,s[0]),s[0]=h;else{for(_--,s.push(s[_-1],s[_]);_>l;)s[_]=s[_-2],_--;s[l]=h,s[l+1]=m}}(s,m,l,h)),m}function $(s,l){const h=ee(s,l);if(h>=0)return s[1|h]}function ee(s,l){return function De(s,l,h){let m=0,_=s.length>>h;for(;_!==m;){const x=m+(_-m>>1),D=s[x<<h];if(l===D)return x<<h;D>l?_=x:m=x+1}return~(_<<h)}(s,l,1)}const xs=Me(Ea("Optional"),8),ns=Me(Ea("SkipSelf"),4);function wu(s){return 128==(128&s.flags)}var no=(()=>((no=no||{})[no.Important=1]="Important",no[no.DashCase=2]="DashCase",no))();const my=/^>|^->|<!--|-->|--!>|<!-$/g,T=/(<|>)/,v="\u200b$1\u200b";const k=new Map;let X=0;const Br="__ngContext__";function Cr(s,l){Pi(l)?(s[Br]=l[Ti],function we(s){k.set(s[Ti],s)}(l)):s[Br]=l}let gd;function cg(s,l){return gd(s,l)}function vh(s){const l=s[Te];return Nn(l)?l[Te]:l}function gy(s){return Vf(s[fs])}function _y(s){return Vf(s[ho])}function Vf(s){for(;null!==s&&!Nn(s);)s=s[ho];return s}function _d(s,l,h,m,_){if(null!=m){let x,D=!1;Nn(m)?x=m:Pi(m)&&(D=!0,m=m[ii]);const V=br(m);0===s&&null!==h?null==_?dg(l,h,V):Ec(l,h,V,_||null,!0):1===s&&null!==h?Ec(l,h,V,_||null,!0):2===s?function Mp(s,l,h){const m=xu(s,l);m&&function Sh(s,l,h,m){s.removeChild(l,h,m)}(s,m,l,h)}(l,V,D):3===s&&l.destroyNode(V),null!=x&&function Ih(s,l,h,m,_){const x=h[Fo];x!==br(h)&&_d(l,s,m,x,_);for(let V=mi;V<h.length;V++){const H=h[V];Np(H[ae],H,s,l,m,x)}}(l,s,x,h,_)}}function bh(s,l){return s.createComment(function E(s){return s.replace(my,l=>l.replace(T,v))}(l))}function wh(s,l,h){return s.createElement(l,h)}function wy(s,l){const h=s[Zo],m=h.indexOf(l);pa(l),h.splice(m,1)}function xh(s,l){if(s.length<=mi)return;const h=mi+l,m=s[h];if(m){const _=m[ko];null!==_&&_!==s&&wy(_,m),l>0&&(s[h-1][ho]=m[ho]);const x=mc(s,mi+l);!function yy(s,l){Np(s,l,l[Jt],2,null,null),l[ii]=null,l[Kn]=null}(m[ae],m);const D=x[po];null!==D&&D.detachView(x[ae]),m[Te]=null,m[ho]=null,m[ln]&=-129}return m}function yd(s,l){if(!(256&l[ln])){const h=l[Jt];l[Fr]?.destroy(),l[Bs]?.destroy(),h.destroyNode&&Np(s,l,h,3,null,null),function wc(s){let l=s[fs];if(!l)return Eh(s[ae],s);for(;l;){let h=null;if(Pi(l))h=l[fs];else{const m=l[mi];m&&(h=m)}if(!h){for(;l&&!l[ho]&&l!==s;)Pi(l)&&Eh(l[ae],l),l=l[Te];null===l&&(l=s),Pi(l)&&Eh(l[ae],l),h=l&&l[ho]}l=h}}(l)}}function Eh(s,l){if(!(256&l[ln])){l[ln]&=-129,l[ln]|=256,function xy(s,l){let h;if(null!=s&&null!=(h=s.destroyHooks))for(let m=0;m<h.length;m+=2){const _=l[h[m]];if(!(_ instanceof Tr)){const x=h[m+1];if(Array.isArray(x))for(let D=0;D<x.length;D+=2){const V=_[x[D]],H=x[D+1];_s(4,V,H);try{H.call(V)}finally{_s(5,V,H)}}else{_s(4,_,x);try{x.call(_)}finally{_s(5,_,x)}}}}}(s,l),function Sa(s,l){const h=s.cleanup,m=l[Fa];if(null!==h)for(let x=0;x<h.length-1;x+=2)if("string"==typeof h[x]){const D=h[x+3];D>=0?m[D]():m[-D].unsubscribe(),x+=2}else h[x].call(m[h[x+1]]);null!==m&&(l[Fa]=null);const _=l[Ji];if(null!==_){l[Ji]=null;for(let x=0;x<_.length;x++)(0,_[x])()}}(s,l),1===l[ae].type&&l[Jt].destroy();const h=l[ko];if(null!==h&&Nn(l[Te])){h!==l[Te]&&wy(h,l);const m=l[po];null!==m&&m.detachView(s)}!function dt(s){k.delete(s[Ti])}(l)}}function xc(s,l,h){return function Ey(s,l,h){let m=l;for(;null!==m&&40&m.type;)m=(l=m).parent;if(null===m)return h[ii];{const{componentOffset:_}=m;if(_>-1){const{encapsulation:x}=s.data[m.directiveStart+_];if(x===rr.None||x===rr.Emulated)return null}return eo(m,h)}}(s,l.parent,h)}function Ec(s,l,h,m,_){s.insertBefore(l,h,m,_)}function dg(s,l,h){s.appendChild(l,h)}function Ch(s,l,h,m,_){null!==m?Ec(s,l,h,m,_):dg(s,l,h)}function xu(s,l){return s.parentNode(l)}function vd(s,l,h){return hg(s,l,h)}let Eu,Hf,Ah,Rp,hg=function zf(s,l,h){return 40&s.type?eo(s,h):null};function jf(s,l,h,m){const _=xc(s,m,l),x=l[Jt],V=vd(m.parent||l[Kn],m,l);if(null!=_)if(Array.isArray(h))for(let H=0;H<h.length;H++)Ch(x,_,h[H],V,!1);else Ch(x,_,h,V,!1);void 0!==Eu&&Eu(x,m,l,h,_)}function Ap(s,l){if(null!==l){const h=l.type;if(3&h)return eo(l,s);if(4&h)return fg(-1,s[l.index]);if(8&h){const m=l.child;if(null!==m)return Ap(s,m);{const _=s[l.index];return Nn(_)?fg(-1,_):br(_)}}if(32&h)return cg(l,s)()||br(s[l.index]);{const m=pg(s,l);return null!==m?Array.isArray(m)?m[0]:Ap(vh(s[st]),m):Ap(s,l.next)}}return null}function pg(s,l){return null!==l?s[st][Kn].projection[l.projection]:null}function fg(s,l){const h=mi+s+1;if(h<l.length){const m=l[h],_=m[ae].firstChild;if(null!==_)return Ap(m,_)}return l[Fo]}function Dy(s,l,h,m,_,x,D){for(;null!=h;){const V=m[h.index],H=h.type;if(D&&0===l&&(V&&Cr(br(V),m),h.flags|=2),32!=(32&h.flags))if(8&H)Dy(s,l,h.child,m,_,x,!1),_d(l,s,_,V,x);else if(32&H){const J=cg(h,m);let ie;for(;ie=J();)_d(l,s,_,ie,x);_d(l,s,_,V,x)}else 16&H?Pp(s,l,m,h,_,x):_d(l,s,_,V,x);h=D?h.projectionNext:h.next}}function Np(s,l,h,m,_,x){Dy(h,m,s.firstChild,l,_,x,!1)}function Pp(s,l,h,m,_,x){const D=h[st],H=D[Kn].projection[m.projection];if(Array.isArray(H))for(let J=0;J<H.length;J++)_d(l,s,_,H[J],x);else{let J=H;const ie=D[Te];wu(m)&&(J.flags|=128),Dy(s,l,J,ie,_,x,!0)}}function Ty(s,l,h){""===h?s.removeAttribute(l,"class"):s.setAttribute(l,"class",h)}function Ay(s,l,h){const{mergedAttrs:m,classes:_,styles:x}=h;null!==m&&Qt(s,l,m),null!==_&&Ty(s,l,_),null!==x&&function l0(s,l,h){s.setAttribute(l,"style",h)}(s,l,x)}function Th(s){return function mg(){if(void 0===Hf&&(Hf=null,jn.trustedTypes))try{Hf=jn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Hf}()?.createHTML(s)||s}function My(s){Ah=s}function $f(s){return function gg(){if(void 0===Rp&&(Rp=null,jn.trustedTypes))try{Rp=jn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Rp}()?.createScriptURL(s)||s}class bd{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${It})`}}class _g extends bd{getTypeName(){return"HTML"}}class Py extends bd{getTypeName(){return"Style"}}class p0 extends bd{getTypeName(){return"Script"}}class f0 extends bd{getTypeName(){return"URL"}}class m0 extends bd{getTypeName(){return"ResourceURL"}}function Cu(s){return s instanceof bd?s.changingThisBreaksApplicationSecurity:s}function zl(s,l){const h=function Ry(s){return s instanceof bd&&s.getTypeName()||null}(s);if(null!=h&&h!==l){if("ResourceURL"===h&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${h} (see ${It})`)}return h===l}function ky(s){return new _g(s)}function Fy(s){return new Py(s)}function Ly(s){return new p0(s)}function By(s){return new f0(s)}function Vy(s){return new m0(s)}class g0{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const h=(new window.DOMParser).parseFromString(Th(l),"text/html").body;return null===h?this.inertDocumentHelper.getInertBodyElement(l):(h.removeChild(h.firstChild),h)}catch{return null}}}class yg{constructor(l){this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(l){const h=this.inertDocument.createElement("template");return h.innerHTML=Th(l),h}}const Uy=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kp(s){return(s=String(s)).match(Uy)?s:"unsafe:"+s}function jl(s){const l={};for(const h of s.split(","))l[h]=!0;return l}function Mh(...s){const l={};for(const h of s)for(const m in h)h.hasOwnProperty(m)&&(l[m]=!0);return l}const bg=jl("area,br,col,hr,img,wbr"),wg=jl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gf=jl("rp,rt"),Fp=Mh(bg,Mh(wg,jl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mh(Gf,jl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Mh(Gf,wg)),Lp=jl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zf=Mh(Lp,jl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),jl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jy=jl("script,style,template");class Hy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let h=l.firstChild,m=!0;for(;h;)if(h.nodeType===Node.ELEMENT_NODE?m=this.startElement(h):h.nodeType===Node.TEXT_NODE?this.chars(h.nodeValue):this.sanitizedSomething=!0,m&&h.firstChild)h=h.firstChild;else for(;h;){h.nodeType===Node.ELEMENT_NODE&&this.endElement(h);let _=this.checkClobberedElement(h,h.nextSibling);if(_){h=_;break}h=this.checkClobberedElement(h,h.parentNode)}return this.buf.join("")}startElement(l){const h=l.nodeName.toLowerCase();if(!Fp.hasOwnProperty(h))return this.sanitizedSomething=!0,!jy.hasOwnProperty(h);this.buf.push("<"),this.buf.push(h);const m=l.attributes;for(let _=0;_<m.length;_++){const x=m.item(_),D=x.name,V=D.toLowerCase();if(!Zf.hasOwnProperty(V)){this.sanitizedSomething=!0;continue}let H=x.value;Lp[V]&&(H=kp(H)),this.buf.push(" ",D,'="',Oh(H),'"')}return this.buf.push(">"),!0}endElement(l){const h=l.nodeName.toLowerCase();Fp.hasOwnProperty(h)&&!bg.hasOwnProperty(h)&&(this.buf.push("</"),this.buf.push(h),this.buf.push(">"))}chars(l){this.buf.push(Oh(l))}checkClobberedElement(l,h){if(h&&(l.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return h}}const $y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wy=/([^\#-~ |!])/g;function Oh(s){return s.replace(/&/g,"&amp;").replace($y,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Wy,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Bp;function Gy(s,l){let h=null;try{Bp=Bp||function Wf(s){const l=new yg(s);return function vg(){try{return!!(new window.DOMParser).parseFromString(Th(""),"text/html")}catch{return!1}}()?new g0(l):l}(s);let m=l?String(l):"";h=Bp.getInertBodyElement(m);let _=5,x=m;do{if(0===_)throw new Error("Failed to sanitize html because the input is unstable");_--,m=x,x=h.innerHTML,h=Bp.getInertBodyElement(m)}while(m!==x);return Th((new Hy).sanitizeChildren(os(h)||h))}finally{if(h){const m=os(h)||h;for(;m.firstChild;)m.removeChild(m.firstChild)}}}function os(s){return"content"in s&&function qy(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Mi=(()=>((Mi=Mi||{})[Mi.NONE=0]="NONE",Mi[Mi.HTML=1]="HTML",Mi[Mi.STYLE=2]="STYLE",Mi[Mi.SCRIPT=3]="SCRIPT",Mi[Mi.URL=4]="URL",Mi[Mi.RESOURCE_URL=5]="RESOURCE_URL",Mi))();function Eg(s){const l=zp();return l?l.sanitize(Mi.URL,s)||"":zl(s,"URL")?Cu(s):kp(Ue(s))}function $o(s){const l=zp();if(l)return $f(l.sanitize(Mi.RESOURCE_URL,s)||"");if(zl(s,"ResourceURL"))return $f(Cu(s));throw new Ie(904,!1)}function Cg(s,l,h){return function _0(s,l){return"src"===l&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===l&&("base"===s||"link"===s)?$o:Eg}(l,h)(s)}function zp(){const s=ut();return s&&s[La].sanitizer}class dr{constructor(l,h){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof h?this.__NG_ELEMENT_ID__=h:void 0!==h&&(this.\u0275prov=_r({token:this,providedIn:h.providedIn||"root",factory:h.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Su=new dr("ENVIRONMENT_INITIALIZER"),Cc=new dr("INJECTOR",-1),Sg=new dr("INJECTOR_DEF_TYPES");class Hl{get(l,h=Qn){if(h===Qn){const m=new Error(`NullInjectorError: No provider for ${Ne(l)}!`);throw m.name="NullInjectorError",m}return h}}function Dg(s){return{\u0275providers:s}}function Yy(...s){return{\u0275providers:Xy(0,s),\u0275fromNgModule:!0}}function Xy(s,...l){const h=[],m=new Set;let _;return Bl(l,x=>{const D=x;Xf(D,h,[],m)&&(_||=[],_.push(D))}),void 0!==_&&Qy(_,h),h}function Qy(s,l){for(let h=0;h<s.length;h++){const{providers:_}=s[h];Ph(_,x=>{l.push(x)})}}function Xf(s,l,h,m){if(!(s=lt(s)))return!1;let _=null,x=al(s);const D=!x&&ir(s);if(x||D){if(D&&!D.standalone)return!1;_=s}else{const H=s.ngModule;if(x=al(H),!x)return!1;_=H}const V=m.has(_);if(D){if(V)return!1;if(m.add(_),D.dependencies){const H="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const J of H)Xf(J,l,h,m)}}else{if(!x)return!1;{if(null!=x.imports&&!V){let J;m.add(_);try{Bl(x.imports,ie=>{Xf(ie,l,h,m)&&(J||=[],J.push(ie))})}finally{}void 0!==J&&Qy(J,l)}if(!V){const J=zs(_)||(()=>new _);l.push({provide:_,useFactory:J,deps:mn},{provide:Sg,useValue:_,multi:!0},{provide:Su,useValue:()=>Ur(_),multi:!0})}const H=x.providers;null==H||V||Ph(H,ie=>{l.push(ie)})}}return _!==s&&void 0!==s.providers}function Ph(s,l){for(let h of s)$e(h)&&(h=h.\u0275providers),Array.isArray(h)?Ph(h,l):l(h)}const Jy=ce({provide:String,useValue:ce});function Ig(s){return null!==s&&"object"==typeof s&&Jy in s}function xd(s){return"function"==typeof s}const Ag=new dr("Set Injector scope."),Ed={},Mg={};let Qf;function Rh(){return void 0===Qf&&(Qf=new Hl),Qf}class Sc{}class Ng extends Sc{get destroyed(){return this._destroyed}constructor(l,h,m,_){super(),this.parent=h,this.source=m,this.scopes=_,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rg(l,D=>this.processProvider(D)),this.records.set(Cc,Qa(void 0,this)),_.has("environment")&&this.records.set(Sc,Qa(void 0,this));const x=this.records.get(Ag);null!=x&&"string"==typeof x.value&&this.scopes.add(x.value),this.injectorDefTypes=new Set(this.get(Sg.multi,mn,Ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const h of this._ngOnDestroyHooks)h.ngOnDestroy();const l=this._onDestroyHooks;this._onDestroyHooks=[];for(const h of l)h()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(l){return this.assertNotDestroyed(),this._onDestroyHooks.push(l),()=>this.removeOnDestroy(l)}runInContext(l){this.assertNotDestroyed();const h=ri(this),m=Ut(void 0);try{return l()}finally{ri(h),Ut(m)}}get(l,h=Qn,m=Ft.Default){if(this.assertNotDestroyed(),l.hasOwnProperty(He))return l[He](this);m=Ee(m);const _=ri(this),x=Ut(void 0);try{if(!(m&Ft.SkipSelf)){let V=this.records.get(l);if(void 0===V){const H=function nv(s){return"function"==typeof s||"object"==typeof s&&s instanceof dr}(l)&&ds(l);V=H&&this.injectableDefInScope(H)?Qa(Og(l),Ed):null,this.records.set(l,V)}if(null!=V)return this.hydrate(l,V)}return(m&Ft.Self?Rh():this.parent).get(l,h=m&Ft.Optional&&h===Qn?null:h)}catch(D){if("NullInjectorError"===D.name){if((D[rn]=D[rn]||[]).unshift(Ne(l)),_)throw D;return function je(s,l,h,m){const _=s[rn];throw l[pi]&&_.unshift(l[pi]),s.message=function Ht(s,l,h,m=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let _=Ne(l);if(Array.isArray(l))_=l.map(Ne).join(" -> ");else if("object"==typeof l){let x=[];for(let D in l)if(l.hasOwnProperty(D)){let V=l[D];x.push(D+":"+("string"==typeof V?JSON.stringify(V):Ne(V)))}_=`{${x.join(", ")}}`}return`${h}${m?"("+m+")":""}[${_}]: ${s.replace(tr,"\n  ")}`}("\n"+s.message,_,h,m),s.ngTokenPath=_,s[rn]=null,s}(D,l,"R3InjectorError",this.source)}throw D}finally{Ut(x),ri(_)}}resolveInjectorInitializers(){const l=ri(this),h=Ut(void 0);try{const m=this.get(Su.multi,mn,Ft.Self);for(const _ of m)_()}finally{ri(l),Ut(h)}}toString(){const l=[],h=this.records;for(const m of h.keys())l.push(Ne(m));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(l){let h=xd(l=lt(l))?l:lt(l&&l.provide);const m=function x0(s){return Ig(s)?Qa(void 0,s.useValue):Qa(ev(s),Ed)}(l);if(xd(l)||!0!==l.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=Qa(void 0,Ed,!0),_.factory=()=>be(_.multi),this.records.set(h,_)),h=l,_.multi.push(l)}this.records.set(h,m)}hydrate(l,h){return h.value===Ed&&(h.value=Mg,h.value=h.factory()),"object"==typeof h.value&&h.value&&function Pg(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(h.value)&&this._ngOnDestroyHooks.add(h.value),h.value}injectableDefInScope(l){if(!l.providedIn)return!1;const h=lt(l.providedIn);return"string"==typeof h?"any"===h||this.scopes.has(h):this.injectorDefTypes.has(h)}removeOnDestroy(l){const h=this._onDestroyHooks.indexOf(l);-1!==h&&this._onDestroyHooks.splice(h,1)}}function Og(s){const l=ds(s),h=null!==l?l.factory:zs(s);if(null!==h)return h;if(s instanceof dr)throw new Ie(204,!1);if(s instanceof Function)return function w0(s){const l=s.length;if(l>0)throw gc(l,"?"),new Ie(204,!1);const h=function ti(s){return s&&(s[ni]||s[Et])||null}(s);return null!==h?()=>h.factory(s):()=>new s}(s);throw new Ie(204,!1)}function ev(s,l,h){let m;if(xd(s)){const _=lt(s);return zs(_)||Og(_)}if(Ig(s))m=()=>lt(s.useValue);else if(function Tg(s){return!(!s||!s.useFactory)}(s))m=()=>s.useFactory(...be(s.deps||[]));else if(function b0(s){return!(!s||!s.useExisting)}(s))m=()=>Ur(lt(s.useExisting));else{const _=lt(s&&(s.useClass||s.provide));if(!function tv(s){return!!s.deps}(s))return zs(_)||Og(_);m=()=>new _(...be(s.deps))}return m}function Qa(s,l,h=!1){return{factory:s,value:l,multi:h?[]:void 0}}function Rg(s,l){for(const h of s)Array.isArray(h)?Rg(h,l):h&&$e(h)?Rg(h.\u0275providers,l):l(h)}const rv=new dr("AppId",{providedIn:"root",factory:()=>Qx}),Qx="ng",iv=new dr("Platform Initializer"),ov=new dr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),E0=new dr("AnimationModuleType"),sv=new dr("CSP nonce",{providedIn:"root",factory:()=>function Ul(){if(void 0!==Ah)return Ah;if(typeof document<"u")return document;throw new Ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let tm=(s,l)=>null;function dv(s,l){return tm(s,l)}class fv{}class Lg{}class O0{resolveComponentFactory(l){throw function Bg(s){const l=Error(`No component factory found for ${Ne(s)}.`);return l.ngComponent=s,l}(l)}}let Gp=(()=>{class s{}return s.NULL=new O0,s})();function P0(){return kh(wi(),ut())}function kh(s,l){return new qp(eo(s,l))}let qp=(()=>{class s{constructor(h){this.nativeElement=h}}return s.__NG_ELEMENT_ID__=P0,s})();function R0(s){return s instanceof qp?s.nativeElement:s}class mv{}let k0=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function F0(){const s=ut(),h=Fi(wi().index,s);return(Pi(h)?h:s)[Jt]}(),s})(),L0=(()=>{class s{}return s.\u0275prov=_r({token:s,providedIn:"root",factory:()=>null}),s})();class gv{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const om=new gv("16.1.2"),sm={};function Fh(s){for(;s;){s[ln]|=64;const l=vh(s);if(ca(s)&&!l)return s;s=l}return null}function am(s){return s.ngOriginalError}class Cs{constructor(){this._console=console}handleError(l){const h=this._findOriginalError(l);this._console.error("ERROR",l),h&&this._console.error("ORIGINAL ERROR",h)}_findOriginalError(l){let h=l&&am(l);for(;h&&am(h);)h=am(h);return h||null}}const Zp=new dr("",{providedIn:"root",factory:()=>!1});function Tu(s){return s instanceof Function?s():s}class Hg extends Yo{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(l){this._lView=l}onConsumerDependencyMayHaveChanged(){Fh(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(l,h,m){const _=gi(this);this.trackingVersion++;try{l(h,m)}finally{gi(_)}}destroy(){this.trackingVersion++}}let cm=null;function dm(){return cm??=new Hg,cm}function Yp(s,l){return s[l]??dm()}function Xp(s,l){const h=dm();h.hasReadASignal&&(s[l]=cm,h.lView=s,cm=new Hg)}const An={};function Bh(s){Qp(Gn(),ut(),Ei()+s,!1)}function Qp(s,l,h,m){if(!m)if(3==(3&l[ln])){const x=s.preOrderCheckHooks;null!==x&&qs(l,x,h)}else{const x=s.preOrderHooks;null!==x&&Tl(l,x,0,h)}Gs(h)}function Md(s,l=null,h=null,m){const _=$g(s,l,h,m);return _.resolveInjectorInitializers(),_}function $g(s,l=null,h=null,m,_=new Set){const x=[h||mn,Yy(s)];return m=m||("object"==typeof s?void 0:Ne(s)),new Ng(x,l||Rh(),m||null,_)}let Da=(()=>{class s{static create(h,m){if(Array.isArray(h))return Md({name:""},m,h,"");{const _=h.name??"";return Md({name:_},h.parent,h.providers,_)}}}return s.THROW_IF_NOT_FOUND=Qn,s.NULL=new Hl,s.\u0275prov=_r({token:s,providedIn:"any",factory:()=>Ur(Cc)}),s.__NG_ELEMENT_ID__=-1,s})();function Ac(s,l=Ft.Default){const h=ut();return null===h?Ur(s,l):Xs(wi(),h,lt(s),l)}function Nd(){throw new Error("invalid")}function ef(s,l,h,m,_,x,D,V,H,J,ie){const fe=l.blueprint.slice();return fe[ii]=_,fe[ln]=140|m,(null!==J||s&&2048&s[ln])&&(fe[ln]|=2048),El(fe),fe[Te]=fe[vr]=s,fe[fi]=h,fe[La]=D||s&&s[La],fe[Jt]=V||s&&s[Jt],fe[Ls]=H||s&&s[Ls]||null,fe[Kn]=x,fe[Ti]=function ne(){return X++}(),fe[Mr]=ie,fe[Gu]=J,fe[st]=2==l.type?s[st]:fe,fe}function Nu(s,l,h,m,_){let x=s.data[l];if(null===x)x=function wv(s,l,h,m,_){const x=fp(),D=Cl(),H=s.data[l]=function mm(s,l,h,m,_,x){let D=l?l.injectorIndex:-1,V=0;return $s()&&(V|=128),{type:h,index:m,insertBeforeIndex:null,injectorIndex:D,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:V,providerIndexes:0,value:_,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?x:x&&x.parent,h,l,m,_);return null===s.firstChild&&(s.firstChild=H),null!==x&&(D?null==x.child&&null!==H.parent&&(x.child=H):null===x.next&&(x.next=H,H.prev=x)),H}(s,l,h,m,_),function Bi(){return dn.lFrame.inI18n}()&&(x.flags|=32);else if(64&x.type){x.type=h,x.value=m,x.attrs=_;const D=function xi(){const s=dn.lFrame,l=s.currentTNode;return s.isParent?l:l.parent}();x.injectorIndex=null===D?-1:D.injectorIndex}return Li(x,!0),x}function tf(s,l,h,m){if(0===h)return-1;const _=l.length;for(let x=0;x<h;x++)l.push(m),s.blueprint.push(m),s.data.push(null);return _}function xv(s,l,h,m,_){const x=Yp(l,Fr),D=Ei(),V=2&m;try{if(Gs(-1),V&&l.length>Vn&&Qp(s,l,Vn,!1),_s(V?2:0,_),V)x.runInContext(h,m,_);else{const J=gi(null);try{h(m,_)}finally{gi(J)}}}finally{V&&null===l[Fr]&&Xp(l,Fr),Gs(D),_s(V?3:1,_)}}function ss(s,l,h){if(Ku(l)){const m=gi(null);try{const x=l.directiveEnd;for(let D=l.directiveStart;D<x;D++){const V=s.data[D];V.contentQueries&&V.contentQueries(1,h[D],D)}}finally{gi(m)}}}function pm(s,l,h){Qu()&&(function Ou(s,l,h,m){const _=h.directiveStart,x=h.directiveEnd;Ir(h)&&function Jg(s,l,h){const m=eo(l,s),_=fm(h);let D=16;h.signals?D=4096:h.onPush&&(D=64);const V=wm(s,ef(s,_,null,D,m,l,null,s[La].rendererFactory.createRenderer(m,h),null,null,null));s[l.index]=V}(l,h,s.data[_+h.componentOffset]),s.firstCreatePass||uc(h,l),Cr(m,l);const D=h.initialInputs;for(let V=_;V<x;V++){const H=s.data[V],J=bs(l,s,V,h);Cr(J,l),null!==D&&e_(0,V-_,J,H,0,D),ki(H)&&(Fi(h.index,l)[fi]=bs(l,s,V,h))}}(s,l,h,eo(h,l)),64==(64&h.flags)&&_m(s,l,h))}function Ev(s,l,h=eo){const m=l.localNames;if(null!==m){let _=l.index+1;for(let x=0;x<m.length;x+=2){const D=m[x+1],V=-1===D?h(l,s):s[D];s[_++]=V}}}function fm(s){const l=s.tView;return null===l||l.incompleteFirstPass?s.tView=Wg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):l}function Wg(s,l,h,m,_,x,D,V,H,J,ie){const fe=Vn+m,Ae=fe+_,Be=function Cv(s,l){const h=[];for(let m=0;m<l;m++)h.push(m<s?null:An);return h}(fe,Ae),ot="function"==typeof J?J():J;return Be[ae]={type:s,blueprint:Be,template:h,queries:null,viewQuery:V,declTNode:l,data:Be.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:H,consts:ot,incompleteFirstPass:!1,ssrId:ie}}let zh=s=>null;function nf(s,l,h,m){for(let _ in s)if(s.hasOwnProperty(_)){h=null===h?{}:h;const x=s[_];null===m?gm(h,l,_,x):m.hasOwnProperty(_)&&gm(h,l,m[_],x)}return h}function gm(s,l,h,m){s.hasOwnProperty(h)?s[h].push(l,m):s[h]=[l,m]}function Wo(s,l,h,m,_,x,D,V){const H=eo(l,h);let ie,J=l.inputs;!V&&null!=J&&(ie=J[m])?($h(s,h,ie,m,_),Ir(l)&&function Kg(s,l){const h=Fi(l,s);16&h[ln]||(h[ln]|=64)}(h,l.index)):3&l.type&&(m=function Sv(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(m),_=null!=D?D(_,l.value||"",m):_,x.setProperty(H,m,_))}function Zg(s,l,h,m){if(Qu()){const _=null===m?null:{"":-1},x=function rf(s,l){const h=s.directiveRegistry;let m=null,_=null;if(h)for(let x=0;x<h.length;x++){const D=h[x];if(Po(l,D.selectors,!1))if(m||(m=[]),ki(D))if(null!==D.findHostDirectiveDefs){const V=[];_=_||new Map,D.findHostDirectiveDefs(D,V,_),m.unshift(...V,D),ym(s,l,V.length)}else m.unshift(D),ym(s,l,0);else _=_||new Map,D.findHostDirectiveDefs?.(D,m,_),m.push(D)}return null===m?null:[m,_]}(s,h);let D,V;null===x?D=V=null:[D,V]=x,null!==D&&Yg(s,l,h,D,_,V),_&&function Y0(s,l,h){if(l){const m=s.localNames=[];for(let _=0;_<l.length;_+=2){const x=h[l[_+1]];if(null==x)throw new Ie(-301,!1);m.push(l[_],x)}}}(h,m,_)}h.mergedAttrs=Rn(h.mergedAttrs,h.attrs)}function Yg(s,l,h,m,_,x){for(let J=0;J<m.length;J++)Pl(uc(h,l),s,m[J].type);!function vm(s,l,h){s.flags|=1,s.directiveStart=l,s.directiveEnd=l+h,s.providerIndexes=l}(h,s.data.length,m.length);for(let J=0;J<m.length;J++){const ie=m[J];ie.providersResolver&&ie.providersResolver(ie)}let D=!1,V=!1,H=tf(s,l,m.length,null);for(let J=0;J<m.length;J++){const ie=m[J];h.mergedAttrs=Rn(h.mergedAttrs,ie.hostAttrs),X0(s,h,l,H,ie),Qg(H,ie,_),null!==ie.contentQueries&&(h.flags|=4),(null!==ie.hostBindings||null!==ie.hostAttrs||0!==ie.hostVars)&&(h.flags|=64);const fe=ie.type.prototype;!D&&(fe.ngOnChanges||fe.ngOnInit||fe.ngDoCheck)&&((s.preOrderHooks??=[]).push(h.index),D=!0),!V&&(fe.ngOnChanges||fe.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(h.index),V=!0),H++}!function qg(s,l,h){const _=l.directiveEnd,x=s.data,D=l.attrs,V=[];let H=null,J=null;for(let ie=l.directiveStart;ie<_;ie++){const fe=x[ie],Ae=h?h.get(fe):null,ot=Ae?Ae.outputs:null;H=nf(fe.inputs,ie,H,Ae?Ae.inputs:null),J=nf(fe.outputs,ie,J,ot);const bt=null===H||null===D||Pa(l)?null:Q0(H,ie,D);V.push(bt)}null!==H&&(H.hasOwnProperty("class")&&(l.flags|=8),H.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=V,l.inputs=H,l.outputs=J}(s,h,x)}function _m(s,l,h){const m=h.directiveStart,_=h.directiveEnd,x=h.index,D=function tg(){return dn.lFrame.currentDirectiveIndex}();try{Gs(x);for(let V=m;V<_;V++){const H=s.data[V],J=l[V];ga(V),(null!==H.hostBindings||0!==H.hostVars||null!==H.hostAttrs)&&Xg(H,J)}}finally{Gs(-1),ga(D)}}function Xg(s,l){null!==s.hostBindings&&s.hostBindings(1,l)}function ym(s,l,h){l.componentOffset=h,(s.components??=[]).push(l.index)}function Qg(s,l,h){if(h){if(l.exportAs)for(let m=0;m<l.exportAs.length;m++)h[l.exportAs[m]]=s;ki(l)&&(h[""]=s)}}function X0(s,l,h,m,_){s.data[m]=_;const x=_.factory||(_.factory=zs(_.type)),D=new Tr(x,ki(_),Ac);s.blueprint[m]=D,h[m]=D,function Z0(s,l,h,m,_){const x=_.hostBindings;if(x){let D=s.hostBindingOpCodes;null===D&&(D=s.hostBindingOpCodes=[]);const V=~l.index;(function Dv(s){let l=s.length;for(;l>0;){const h=s[--l];if("number"==typeof h&&h<0)return h}return 0})(D)!=V&&D.push(V),D.push(h,m,x)}}(s,l,m,tf(s,h,_.hostVars,An),_)}function el(s,l,h,m,_,x){const D=eo(s,l);!function Od(s,l,h,m,_,x,D){if(null==x)s.removeAttribute(l,_,h);else{const V=null==D?Ue(x):D(x,m||"",_);s.setAttribute(l,_,V,h)}}(l[Jt],D,x,s.value,h,m,_)}function e_(s,l,h,m,_,x){const D=x[l];if(null!==D)for(let V=0;V<D.length;)jh(m,h,D[V++],D[V++],D[V++])}function jh(s,l,h,m,_){const x=gi(null);try{const D=s.inputTransforms;null!==D&&D.hasOwnProperty(m)&&(_=D[m].call(l,_)),null!==s.setInput?s.setInput(l,_,h,m):l[m]=_}finally{gi(x)}}function Q0(s,l,h){let m=null,_=0;for(;_<h.length;){const x=h[_];if(0!==x)if(5!==x){if("number"==typeof x)break;if(s.hasOwnProperty(x)){null===m&&(m=[]);const D=s[x];for(let V=0;V<D.length;V+=2)if(D[V]===l){m.push(x,D[V+1],h[_+1]);break}}_+=2}else _+=2;else _+=4}return m}function bm(s,l,h,m){return[s,!0,!1,l,null,0,m,h,null,null,null]}function Iv(s,l){const h=s.contentQueries;if(null!==h)for(let m=0;m<h.length;m+=2){const x=h[m+1];if(-1!==x){const D=s.data[x];_a(h[m]),D.contentQueries(2,l[x],x)}}}function wm(s,l){return s[fs]?s[ua][ho]=l:s[fs]=l,s[ua]=l,l}function sf(s,l,h){_a(0);const m=gi(null);try{l(s,h)}finally{gi(m)}}function Tv(s){return s[Fa]||(s[Fa]=[])}function Av(s){return s.cleanup||(s.cleanup=[])}function t_(s,l,h){return(null===s||ki(s))&&(h=function up(s){for(;Array.isArray(s);){if("object"==typeof s[eu])return s;s=s[ii]}return null}(h[l.index])),h[Jt]}function Hh(s,l){const h=s[Ls],m=h?h.get(Cs,null):null;m&&m.handleError(l)}function $h(s,l,h,m,_){for(let x=0;x<h.length;){const D=h[x++],V=h[x++];jh(s.data[D],l[D],m,V,_)}}function $l(s,l,h){const m=Xo(l,s);!function Uf(s,l,h){s.setValue(l,h)}(s[Jt],m,h)}function Mv(s,l){const h=Fi(l,s),m=h[ae];!function J0(s,l){for(let h=l.length;h<s.blueprint.length;h++)l.push(s.blueprint[h])}(m,h);const _=h[ii];null!==_&&null===h[Mr]&&(h[Mr]=dv(_,h[Ls])),n_(m,h,h[fi])}function n_(s,l,h){Sl(l);try{const m=s.viewQuery;null!==m&&sf(1,m,h);const _=s.template;null!==_&&xv(s,l,_,1,h),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Iv(s,l),s.staticViewQueries&&sf(2,s.viewQuery,h);const x=s.components;null!==x&&function Nv(s,l){for(let h=0;h<l.length;h++)Mv(s,l[h])}(l,x)}catch(m){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),m}finally{l[ln]&=-5,ic()}}let Pv=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(h,m,_){const x=typeof Zone>"u"?null:Zone.current,D=new Gc(h,J=>{this.all.has(J)&&this.queue.set(J,x)},_);let V;this.all.add(D),D.notify();const H=()=>{D.cleanup(),V?.(),this.all.delete(D),this.queue.delete(D)};return V=m?.onDestroy(H),{destroy:H}}flush(){if(0!==this.queue.size)for(const[h,m]of this.queue)this.queue.delete(h),m?m.run(()=>h.run()):h.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=_r({token:s,providedIn:"root",factory:()=>new s}),s})();function af(s,l,h){let m=h?s.styles:null,_=h?s.classes:null,x=0;if(null!==l)for(let D=0;D<l.length;D++){const V=l[D];"number"==typeof V?x=V:1==x?_=at(_,V):2==x&&(m=at(m,V+": "+l[++D]+";"))}h?s.styles=m:s.stylesWithoutHost=m,h?s.classes=_:s.classesWithoutHost=_}function lf(s,l,h,m,_=!1){for(;null!==h;){const x=l[h.index];if(null!==x&&m.push(br(x)),Nn(x)){for(let V=mi;V<x.length;V++){const H=x[V],J=H[ae].firstChild;null!==J&&lf(H[ae],H,J,m)}x[Fo]!==x[ii]&&m.push(x[Fo])}const D=h.type;if(8&D)lf(s,l,h.child,m);else if(32&D){const V=cg(h,l);let H;for(;H=V();)m.push(H)}else if(16&D){const V=pg(l,h);if(Array.isArray(V))m.push(...V);else{const H=vh(l[st]);lf(H[ae],H,V,m,!0)}}h=_?h.projectionNext:h.next}return m}function Wh(s,l,h,m=!0){const _=l[La].rendererFactory;_.begin&&_.begin();try{Rv(s,l,s.template,h)}catch(D){throw m&&Hh(l,D),D}finally{_.end&&_.end(),l[La].effectManager?.flush()}}function Rv(s,l,h,m){const _=l[ln];if(256!=(256&_)){l[La].effectManager?.flush(),Sl(l);try{El(l),function ma(s){return dn.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==h&&xv(s,l,h,2,m);const D=3==(3&_);if(D){const J=s.preOrderCheckHooks;null!==J&&qs(l,J,null)}else{const J=s.preOrderHooks;null!==J&&Tl(l,J,0,null),Ks(l,0)}if(function Fv(s){for(let l=gy(s);null!==l;l=_y(l)){if(!l[tu])continue;const h=l[Zo];for(let m=0;m<h.length;m++){Zc(h[m])}}}(l),kv(l,2),null!==s.contentQueries&&Iv(s,l),D){const J=s.contentCheckHooks;null!==J&&qs(l,J)}else{const J=s.contentHooks;null!==J&&Tl(l,J,1),Ks(l,1)}!function Jp(s,l){const h=s.hostBindingOpCodes;if(null===h)return;const m=Yp(l,Bs);try{for(let _=0;_<h.length;_++){const x=h[_];if(x<0)Gs(~x);else{const D=x,V=h[++_],H=h[++_];Wi(V,D),m.runInContext(H,2,l[D])}}}finally{null===l[Bs]&&Xp(l,Bs),Gs(-1)}}(s,l);const V=s.components;null!==V&&Ia(l,V,0);const H=s.viewQuery;if(null!==H&&sf(2,H,m),D){const J=s.viewCheckHooks;null!==J&&qs(l,J)}else{const J=s.viewHooks;null!==J&&Tl(l,J,2),Ks(l,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),l[ln]&=-73,pa(l)}finally{ic()}}}function kv(s,l){for(let h=gy(s);null!==h;h=_y(h))for(let m=mi;m<h.length;m++)ta(h[m],l)}function rw(s,l,h){ta(Fi(l,s),h)}function ta(s,l){if(!function Yu(s){return 128==(128&s[ln])}(s))return;const h=s[ae];if(80&s[ln]&&0===l||1024&s[ln]||2===l)Rv(h,s,h.template,s[fi]);else if(s[Wu]>0){kv(s,1);const _=s[ae].components;null!==_&&Ia(s,_,1)}}function Ia(s,l,h){for(let m=0;m<l.length;m++)rw(s,l[m],h)}class Pu{get rootNodes(){const l=this._lView,h=l[ae];return lf(h,l,h.firstChild,[])}constructor(l,h){this._lView=l,this._cdRefInjectingView=h,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fi]}set context(l){this._lView[fi]=l}get destroyed(){return 256==(256&this._lView[ln])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[Te];if(Nn(l)){const h=l[8],m=h?h.indexOf(this):-1;m>-1&&(xh(l,m),mc(h,m))}this._attachedToViewContainer=!1}yd(this._lView[ae],this._lView)}onDestroy(l){!function fa(s,l){if(256==(256&s[ln]))throw new Ie(911,!1);null===s[Ji]&&(s[Ji]=[]),s[Ji].push(l)}(this._lView,l)}markForCheck(){Fh(this._cdRefInjectingView||this._lView)}detach(){this._lView[ln]&=-129}reattach(){this._lView[ln]|=128}detectChanges(){Wh(this._lView[ae],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function s0(s,l){Np(s,l,l[Jt],2,null,null)}(this._lView[ae],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=l}}class r_ extends Pu{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;Wh(l[ae],l,l[fi],!1)}checkNoChanges(){}get context(){return null}}class Lv extends Gp{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const h=ir(l);return new uf(h,this.ngModule)}}function Bv(s){const l=[];for(let h in s)s.hasOwnProperty(h)&&l.push({propName:s[h],templateName:h});return l}class iw{constructor(l,h){this.injector=l,this.parentInjector=h}get(l,h,m){m=Ee(m);const _=this.injector.get(l,sm,m);return _!==sm||h===sm?_:this.parentInjector.get(l,h,m)}}class uf extends Lg{get inputs(){return Bv(this.componentDef.inputs)}get outputs(){return Bv(this.componentDef.outputs)}constructor(l,h){super(),this.componentDef=l,this.ngModule=h,this.componentType=l.type,this.selector=function Ro(s){return s.map(Gr).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!h}create(l,h,m,_){let x=(_=_||this.ngModule)instanceof Sc?_:_?.injector;x&&null!==this.componentDef.getStandaloneInjector&&(x=this.componentDef.getStandaloneInjector(x)||x);const D=x?new iw(l,x):l,V=D.get(mv,null);if(null===V)throw new Ie(407,!1);const ie={rendererFactory:V,sanitizer:D.get(L0,null),effectManager:D.get(Pv,null)},fe=V.createRenderer(null,this.componentDef),Ae=this.componentDef.selectors[0][0]||"div",Be=m?function H0(s,l,h,m){const x=m.get(Zp,!1)||h===rr.ShadowDom,D=s.selectRootElement(l,x);return function Gg(s){zh(s)}(D),D}(fe,m,this.componentDef.encapsulation,D):wh(fe,Ae,function i_(s){const l=s.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(Ae)),Bt=this.componentDef.signals?4608:this.componentDef.onPush?576:528,sn=Wg(0,null,null,1,0,null,null,null,null,null,null),ct=ef(null,sn,null,Bt,null,null,ie,fe,D,null,null);let $n,hr;Sl(ct);try{const mr=this.componentDef;let aa,Tx=null;mr.findHostDirectiveDefs?(aa=[],Tx=new Map,mr.findHostDirectiveDefs(mr,aa,Tx),aa.push(mr)):aa=[mr];const Vm=function Vv(s,l){const h=s[ae],m=Vn;return s[m]=l,Nu(h,m,2,"#host",null)}(ct,Be),TT=function o_(s,l,h,m,_,x,D){const V=_[ae];!function Uv(s,l,h,m){for(const _ of s)l.mergedAttrs=Rn(l.mergedAttrs,_.hostAttrs);null!==l.mergedAttrs&&(af(l,l.mergedAttrs,!0),null!==h&&Ay(m,h,l))}(m,s,l,D);let H=null;null!==l&&(H=dv(l,_[Ls]));const J=x.rendererFactory.createRenderer(l,h);let ie=16;h.signals?ie=4096:h.onPush&&(ie=64);const fe=ef(_,fm(h),null,ie,_[s.index],s,x,J,null,null,H);return V.firstCreatePass&&ym(V,s,m.length-1),wm(_,fe),_[s.index]=fe}(Vm,Be,mr,aa,ct,ie,fe);hr=xl(sn,Vn),Be&&function Pd(s,l,h,m){if(m)Qt(s,h,["ng-version",om.full]);else{const{attrs:_,classes:x}=function bi(s){const l=[],h=[];let m=1,_=2;for(;m<s.length;){let x=s[m];if("string"==typeof x)2===_?""!==x&&l.push(x,s[++m]):8===_&&h.push(x);else{if(!vi(_))break;_=x}m++}return{attrs:l,classes:h}}(l.selectors[0]);_&&Qt(s,h,_),x&&x.length>0&&Ty(s,h,x.join(" "))}}(fe,mr,Be,m),void 0!==h&&function ow(s,l,h){const m=s.projection=[];for(let _=0;_<l.length;_++){const x=h[_];m.push(null!=x?Array.from(x):null)}}(hr,this.ngContentSelectors,h),$n=function Ta(s,l,h,m,_,x){const D=wi(),V=_[ae],H=eo(D,_);Yg(V,_,D,h,null,m);for(let ie=0;ie<h.length;ie++)Cr(bs(_,V,D.directiveStart+ie,D),_);_m(V,_,D),H&&Cr(H,_);const J=bs(_,V,D.directiveStart+D.componentOffset,D);if(s[fi]=_[fi]=J,null!==x)for(const ie of x)ie(J,l);return ss(V,D,s),J}(TT,mr,aa,Tx,ct,[sw]),n_(sn,ct,null)}finally{ic()}return new cf(this.componentType,$n,kh(hr,ct),ct,hr)}}class cf extends fv{constructor(l,h,m,_,x){super(),this.location=m,this._rootLView=_,this._tNode=x,this.previousInputValues=null,this.instance=h,this.hostView=this.changeDetectorRef=new r_(_),this.componentType=l}setInput(l,h){const m=this._tNode.inputs;let _;if(null!==m&&(_=m[l])){if(this.previousInputValues??=new Map,this.previousInputValues.has(l)&&Object.is(this.previousInputValues.get(l),h))return;const x=this._rootLView;$h(x[ae],x,_,l,h),this.previousInputValues.set(l,h),Fh(Fi(this._tNode.index,x))}}get injector(){return new Yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function sw(){const s=wi();cu(ut()[ae],s)}function a_(s){let l=function s_(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),h=!0;const m=[s];for(;l;){let _;if(ki(s))_=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Ie(903,!1);_=l.\u0275dir}if(_){if(h){m.push(_);const D=s;D.inputs=Rd(s.inputs),D.inputTransforms=Rd(s.inputTransforms),D.declaredInputs=Rd(s.declaredInputs),D.outputs=Rd(s.outputs);const V=_.hostBindings;V&&u_(s,V);const H=_.viewQuery,J=_.contentQueries;if(H&&aw(s,H),J&&lw(s,J),me(s.inputs,_.inputs),me(s.declaredInputs,_.declaredInputs),me(s.outputs,_.outputs),null!==_.inputTransforms&&(null===D.inputTransforms&&(D.inputTransforms={}),me(D.inputTransforms,_.inputTransforms)),ki(_)&&_.data.animation){const ie=s.data;ie.animation=(ie.animation||[]).concat(_.data.animation)}}const x=_.features;if(x)for(let D=0;D<x.length;D++){const V=x[D];V&&V.ngInherit&&V(s),V===a_&&(h=!1)}}l=Object.getPrototypeOf(l)}!function l_(s){let l=0,h=null;for(let m=s.length-1;m>=0;m--){const _=s[m];_.hostVars=l+=_.hostVars,_.hostAttrs=Rn(_.hostAttrs,h=Rn(h,_.hostAttrs))}}(m)}function Rd(s){return s===xr?{}:s===mn?[]:s}function aw(s,l){const h=s.viewQuery;s.viewQuery=h?(m,_)=>{l(m,_),h(m,_)}:l}function lw(s,l){const h=s.contentQueries;s.contentQueries=h?(m,_,x)=>{l(m,_,x),h(m,_,x)}:l}function u_(s,l){const h=s.hostBindings;s.hostBindings=h?(m,_)=>{l(m,_),h(m,_)}:l}function d_(s){const l=s.inputConfig,h={};for(const m in l)if(l.hasOwnProperty(m)){const _=l[m];Array.isArray(_)&&_[2]&&(h[m]=_[2])}s.inputTransforms=h}function Gh(s){return!!h_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function h_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ar(s,l,h){return!Object.is(s[l],h)&&(s[l]=h,!0)}function f_(s,l,h,m){const _=ut();return Ar(_,fr(),l)&&(Gn(),el(Er(),_,s,l,h,m)),f_}function Mc(s,l,h,m){return Ar(s,fr(),h)?l+Ue(h)+m:An}function Ci(s,l,h,m,_,x){const V=function na(s,l,h,m){const _=Ar(s,l,h);return Ar(s,l+1,m)||_}(s,function Ws(){return dn.lFrame.bindingIndex}(),h,_);return Qo(2),V?l+Ue(h)+m+Ue(_)+x:An}function bw(s,l,h,m,_,x,D,V){const H=ut(),J=Gn(),ie=s+Vn,fe=J.firstCreatePass?function yE(s,l,h,m,_,x,D,V,H){const J=l.consts,ie=Nu(l,s,4,D||null,Bo(J,V));Zg(l,h,ie,Bo(J,H)),cu(l,ie);const fe=ie.tView=Wg(2,ie,m,_,x,l.directiveRegistry,l.pipeRegistry,null,l.schemas,J,null);return null!==l.queries&&(l.queries.template(l,ie),fe.queries=l.queries.embeddedTView(ie)),ie}(ie,J,H,l,h,m,_,x,D):J.data[ie];Li(fe,!1);const Ae=tb(J,H,fe,s);ya()&&jf(J,H,Ae,fe),Cr(Ae,H),wm(H,H[ie]=bm(Ae,H,Ae,fe)),Ri(fe)&&pm(J,H,fe),null!=D&&Ev(H,fe,V)}let tb=function nb(s,l,h,m){return va(!0),l[Jt].createComment("")};function ww(s){return function ha(s,l){return s[l]}(function tc(){return dn.lFrame.contextLView}(),Vn+s)}function rb(s,l,h){const m=ut();return Ar(m,fr(),l)&&Wo(Gn(),Er(),m,s,l,m[Jt],h,!1),rb}function ib(s,l,h,m,_){const D=_?"class":"style";$h(s,h,l.inputs[D],D,m)}function v_(s,l,h,m){const _=ut(),x=Gn(),D=Vn+s,V=_[Jt],H=x.firstCreatePass?function wE(s,l,h,m,_,x){const D=l.consts,H=Nu(l,s,2,m,Bo(D,_));return Zg(l,h,H,Bo(D,x)),null!==H.attrs&&af(H,H.attrs,!1),null!==H.mergedAttrs&&af(H,H.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,H),H}(D,x,_,l,h,m):x.data[D],J=xw(x,_,H,V,l,s);_[D]=J;const ie=Ri(H);return Li(H,!0),Ay(V,J,H),32!=(32&H.flags)&&ya()&&jf(x,_,J,H),0===function hp(){return dn.lFrame.elementDepthCount}()&&Cr(J,_),function au(){dn.lFrame.elementDepthCount++}(),ie&&(pm(x,_,H),ss(x,H,_)),null!==m&&Ev(_,H),v_}function b_(){let s=wi();Cl()?mp():(s=s.parent,Li(s,!1));const l=s;(function Ju(s){return dn.skipHydrationRootTNode===s})(l)&&function Ga(){dn.skipHydrationRootTNode=null}(),function pp(){dn.lFrame.elementDepthCount--}();const h=Gn();return h.firstCreatePass&&(cu(h,s),Ku(s)&&h.queries.elementEnd(s)),null!=l.classesWithoutHost&&function Ys(s){return 0!=(8&s.flags)}(l)&&ib(h,l,ut(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function rd(s){return 0!=(16&s.flags)}(l)&&ib(h,l,ut(),l.stylesWithoutHost,!1),b_}function w_(s,l,h,m){return v_(s,l,h,m),b_(),w_}let xw=(s,l,h,m,_,x)=>(va(!0),wh(m,_,function uu(){return dn.lFrame.currentNamespace}()));function x_(s,l,h){const m=ut(),_=Gn(),x=s+Vn,D=_.firstCreatePass?function Ew(s,l,h,m,_){const x=l.consts,D=Bo(x,m),V=Nu(l,s,8,"ng-container",D);return null!==D&&af(V,D,!0),Zg(l,h,V,Bo(x,_)),null!==l.queries&&l.queries.elementStart(l,V),V}(x,_,m,l,h):_.data[x];Li(D,!0);const V=Sw(_,m,D,s);return m[x]=V,ya()&&jf(_,m,V,D),Cr(V,m),Ri(D)&&(pm(_,m,D),ss(_,D,m)),null!=h&&Ev(m,D),x_}function E_(){let s=wi();const l=Gn();return Cl()?mp():(s=s.parent,Li(s,!1)),l.firstCreatePass&&(cu(l,s),Ku(s)&&l.queries.elementEnd(s)),E_}let Sw=(s,l,h,m)=>(va(!0),bh(l[Jt],""));function C_(){return ut()}function Sm(s){return!!s&&"function"==typeof s.then}function S_(s){return!!s&&"function"==typeof s.subscribe}function Dm(s,l,h,m){const _=ut(),x=Gn(),D=wi();return D_(x,_,_[Jt],D,s,l,m),Dm}function mf(s,l){const h=wi(),m=ut(),_=Gn();return D_(_,m,t_(qa(_.data),h,m),h,s,l),mf}function D_(s,l,h,m,_,x,D){const V=Ri(m),J=s.firstCreatePass&&Av(s),ie=l[fi],fe=Tv(l);let Ae=!0;if(3&m.type||D){const bt=eo(m,l),Bt=D?D(bt):bt,sn=fe.length,ct=D?hr=>D(br(hr[m.index])):m.index;let $n=null;if(!D&&V&&($n=function ob(s,l,h,m){const _=s.cleanup;if(null!=_)for(let x=0;x<_.length-1;x+=2){const D=_[x];if(D===h&&_[x+1]===m){const V=l[Fa],H=_[x+2];return V.length>H?V[H]:null}"string"==typeof D&&(x+=2)}return null}(s,l,_,m.index)),null!==$n)($n.__ngLastListenerFn__||$n).__ngNextListenerFn__=x,$n.__ngLastListenerFn__=x,Ae=!1;else{x=Dw(m,l,ie,x,!1);const hr=h.listen(Bt,_,x);fe.push(x,hr),J&&J.push(_,ct,sn,sn+1)}}else x=Dw(m,l,ie,x,!1);const Be=m.outputs;let ot;if(Ae&&null!==Be&&(ot=Be[_])){const bt=ot.length;if(bt)for(let Bt=0;Bt<bt;Bt+=2){const mr=l[ot[Bt]][ot[Bt+1]].subscribe(x),aa=fe.length;fe.push(x,mr),J&&J.push(_,m.index,aa,-(aa+1))}}}function Oc(s,l,h,m){try{return _s(6,l,h),!1!==h(m)}catch(_){return Hh(s,_),!1}finally{_s(7,l,h)}}function Dw(s,l,h,m,_){return function x(D){if(D===Function)return m;Fh(s.componentOffset>-1?Fi(s.index,l):l);let H=Oc(l,h,m,D),J=x.__ngNextListenerFn__;for(;J;)H=Oc(l,h,J,D)&&H,J=J.__ngNextListenerFn__;return _&&!1===H&&D.preventDefault(),H}}function Iw(s=1){return function yp(s){return(dn.lFrame.contextLView=function oc(s,l){for(;s>0;)l=l[vr],s--;return l}(s,dn.lFrame.contextLView))[fi]}(s)}function SE(s,l){let h=null;const m=function ul(s){const l=s.attrs;if(null!=l){const h=l.indexOf(5);if(!(1&h))return l[h+1]}return null}(s);for(let _=0;_<l.length;_++){const x=l[_];if("*"!==x){if(null===m?Po(s,x,!0):Vc(m,x))return _}else h=_}return h}function Tw(s){const l=ut()[st][Kn];if(!l.projection){const m=l.projection=gc(s?s.length:1,null),_=m.slice();let x=l.child;for(;null!==x;){const D=s?SE(x,s):0;null!==D&&(_[D]?_[D].projectionNext=x:m[D]=x,_[D]=x),x=x.next}}}function Aw(s,l=0,h){const m=ut(),_=Gn(),x=Nu(_,Vn+s,16,null,h||null);null===x.projection&&(x.projection=l),mp(),(!m[Mr]||$s())&&32!=(32&x.flags)&&function Iy(s,l,h){Pp(l[Jt],0,l,h,xc(s,h,l),vd(h.parent||l[Kn],h,l))}(_,m,x)}function u(s,l,h){return i(s,"",l,"",h),u}function i(s,l,h,m,_){const x=ut(),D=Mc(x,l,h,m);return D!==An&&Wo(Gn(),Er(),x,s,D,x[Jt],_,!1),i}function j(s,l){return s<<17|l<<2}function q(s){return s>>17&32767}function se(s){return 2|s}function oe(s){return(131068&s)>>2}function de(s,l){return-131069&s|l<<2}function Se(s){return 1|s}function ht(s,l,h,m,_){const x=s[h+1],D=null===l;let V=m?q(x):oe(x),H=!1;for(;0!==V&&(!1===H||D);){const ie=s[V+1];At(s[V],l)&&(H=!0,s[V+1]=m?Se(ie):se(ie)),V=m?q(ie):oe(ie)}H&&(s[h+1]=m?se(x):Se(x))}function At(s,l){return null===s||null==l||(Array.isArray(s)?s[1]:s)===l||!(!Array.isArray(s)||"string"!=typeof l)&&ee(s,l)>=0}function Go(s,l,h){return ci(s,l,h,!1),Go}function As(s,l){return ci(s,l,null,!0),As}function ci(s,l,h,m){const _=ut(),x=Gn(),D=Qo(2);x.firstUpdatePass&&function Pc(s,l,h,m){const _=s.data;if(null===_[h+1]){const x=_[Ei()],D=function Zh(s,l){return l>=s.expandoStartIndex}(s,h);(function Mw(s,l){return 0!=(s.flags&(l?8:16))})(x,m)&&null===l&&!D&&(l=!1),l=function Ld(s,l,h,m){const _=qa(s);let x=m?l.residualClasses:l.residualStyles;if(null===_)0===(m?l.classBindings:l.styleBindings)&&(h=Yh(h=Ui(null,s,l,h,m),l.attrs,m),x=null);else{const D=l.directiveStylingLast;if(-1===D||s[D]!==_)if(h=Ui(_,s,l,h,m),null===x){let H=function JS(s,l,h){const m=h?l.classBindings:l.styleBindings;if(0!==oe(m))return s[q(m)]}(s,l,m);void 0!==H&&Array.isArray(H)&&(H=Ui(null,s,l,H[1],m),H=Yh(H,l.attrs,m),function eD(s,l,h,m){s[q(h?l.classBindings:l.styleBindings)]=m}(s,l,m,H))}else x=function ql(s,l,h){let m;const _=l.directiveEnd;for(let x=1+l.directiveStylingLast;x<_;x++)m=Yh(m,s[x].hostAttrs,h);return Yh(m,l.attrs,h)}(s,l,m)}return void 0!==x&&(m?l.residualClasses=x:l.residualStyles=x),h}(_,x,l,m),function Ge(s,l,h,m,_,x){let D=x?l.classBindings:l.styleBindings,V=q(D),H=oe(D);s[m]=h;let ie,J=!1;if(Array.isArray(h)?(ie=h[1],(null===ie||ee(h,ie)>0)&&(J=!0)):ie=h,_)if(0!==H){const Ae=q(s[V+1]);s[m+1]=j(Ae,V),0!==Ae&&(s[Ae+1]=de(s[Ae+1],m)),s[V+1]=function re(s,l){return 131071&s|l<<17}(s[V+1],m)}else s[m+1]=j(V,0),0!==V&&(s[V+1]=de(s[V+1],m)),V=m;else s[m+1]=j(H,0),0===V?V=m:s[H+1]=de(s[H+1],m),H=m;J&&(s[m+1]=se(s[m+1])),ht(s,ie,m,!0),ht(s,ie,m,!1),function rt(s,l,h,m,_){const x=_?s.residualClasses:s.residualStyles;null!=x&&"string"==typeof l&&ee(x,l)>=0&&(h[m+1]=Se(h[m+1]))}(l,ie,s,m,x),D=j(V,H),x?l.classBindings=D:l.styleBindings=D}(_,x,l,h,D,m)}}(x,s,D,m),l!==An&&Ar(_,D,l)&&function nD(s,l,h,m,_,x,D,V){if(!(3&l.type))return;const H=s.data,J=H[V+1],ie=function xe(s){return 1==(1&s)}(J)?I_(H,l,h,_,oe(J),D):void 0;sb(ie)||(sb(x)||function K(s){return 2==(2&s)}(J)&&(x=I_(H,null,h,_,V,D)),function a0(s,l,h,m,_){if(l)_?s.addClass(h,m):s.removeClass(h,m);else{let x=-1===m.indexOf("-")?void 0:no.DashCase;null==_?s.removeStyle(h,m,x):("string"==typeof _&&_.endsWith("!important")&&(_=_.slice(0,-10),x|=no.Important),s.setStyle(h,m,_,x))}}(m,D,Xo(Ei(),h),_,x))}(x,x.data[Ei()],_,_[Jt],s,_[D+1]=function s1(s,l){return null==s||""===s||("string"==typeof l?s+=l:"object"==typeof s&&(s=Ne(Cu(s)))),s}(l,h),m,D)}function Ui(s,l,h,m,_){let x=null;const D=h.directiveEnd;let V=h.directiveStylingLast;for(-1===V?V=h.directiveStart:V++;V<D&&(x=l[V],m=Yh(m,x.hostAttrs,_),x!==s);)V++;return null!==s&&(h.directiveStylingLast=V),m}function Yh(s,l,h){const m=h?1:2;let _=-1;if(null!==l)for(let x=0;x<l.length;x++){const D=l[x];"number"==typeof D?_=D:_===m&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),L(s,D,!!h||l[++x]))}return void 0===s?null:s}function I_(s,l,h,m,_,x){const D=null===l;let V;for(;_>0;){const H=s[_],J=Array.isArray(H),ie=J?H[1]:H,fe=null===ie;let Ae=h[_+1];Ae===An&&(Ae=fe?mn:void 0);let Be=fe?$(Ae,m):ie===m?Ae:void 0;if(J&&!sb(Be)&&(Be=$(H,m)),sb(Be)&&(V=Be,D))return V;const ot=s[_+1];_=D?q(ot):oe(ot)}if(null!==l){let H=x?l.residualClasses:l.residualStyles;null!=H&&(V=$(H,m))}return V}function sb(s){return void 0!==s}function Xh(s,l=""){const h=ut(),m=Gn(),_=s+Vn,x=m.firstCreatePass?Nu(m,_,1,l,null):m.data[_],D=DE(m,h,x,l,s);h[_]=D,ya()&&jf(m,h,D,x),Li(x,!1)}let DE=(s,l,h,m,_)=>(va(!0),function lr(s,l){return s.createText(l)}(l[Jt],m));function T_(s){return A_("",s,""),T_}function A_(s,l,h){const m=ut(),_=Mc(m,s,l,h);return _!==An&&$l(m,Ei(),_),A_}function Nw(s,l,h,m,_){const x=ut(),D=Ci(x,s,l,h,m,_);return D!==An&&$l(x,Ei(),D),Nw}function AE(s,l,h){const m=ut();return Ar(m,fr(),l)&&Wo(Gn(),Er(),m,s,l,m[Jt],h,!0),AE}function ME(s,l,h){const m=ut();if(Ar(m,fr(),l)){const x=Gn(),D=Er();Wo(x,D,m,s,l,t_(qa(x.data),D,m),h,!0)}return ME}const Bd=void 0;var CD=["en",[["a","p"],["AM","PM"],Bd],[["AM","PM"],Bd,Bd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bd,"{1} 'at' {0}",Bd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Rw(s){const h=Math.floor(Math.abs(s)),m=s.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===m?1:5}];let Tm={};function Qh(s){const l=function PE(s){return s.toLowerCase().replace(/_/g,"-")}(s);let h=OE(l);if(h)return h;const m=l.split("-")[0];if(h=OE(m),h)return h;if("en"===m)return CD;throw new Ie(701,!1)}function NE(s){return Qh(s)[Cn.PluralCase]}function OE(s){return s in Tm||(Tm[s]=jn.ng&&jn.ng.common&&jn.ng.common.locales&&jn.ng.common.locales[s]),Tm[s]}var Cn=(()=>((Cn=Cn||{})[Cn.LocaleId=0]="LocaleId",Cn[Cn.DayPeriodsFormat=1]="DayPeriodsFormat",Cn[Cn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Cn[Cn.DaysFormat=3]="DaysFormat",Cn[Cn.DaysStandalone=4]="DaysStandalone",Cn[Cn.MonthsFormat=5]="MonthsFormat",Cn[Cn.MonthsStandalone=6]="MonthsStandalone",Cn[Cn.Eras=7]="Eras",Cn[Cn.FirstDayOfWeek=8]="FirstDayOfWeek",Cn[Cn.WeekendRange=9]="WeekendRange",Cn[Cn.DateFormat=10]="DateFormat",Cn[Cn.TimeFormat=11]="TimeFormat",Cn[Cn.DateTimeFormat=12]="DateTimeFormat",Cn[Cn.NumberSymbols=13]="NumberSymbols",Cn[Cn.NumberFormats=14]="NumberFormats",Cn[Cn.CurrencyCode=15]="CurrencyCode",Cn[Cn.CurrencySymbol=16]="CurrencySymbol",Cn[Cn.CurrencyName=17]="CurrencyName",Cn[Cn.Currencies=18]="Currencies",Cn[Cn.Directionality=19]="Directionality",Cn[Cn.PluralCase=20]="PluralCase",Cn[Cn.ExtraData=21]="ExtraData",Cn))();const Vd="en-US";let FE=Vd;function Om(s,l,h,m,_){if(s=lt(s),Array.isArray(s))for(let x=0;x<s.length;x++)Om(s[x],l,h,m,_);else{const x=Gn(),D=ut();let V=xd(s)?s:lt(s.provide),H=ev(s);const J=wi(),ie=1048575&J.providerIndexes,fe=J.directiveStart,Ae=J.providerIndexes>>20;if(xd(s)||!s.multi){const Be=new Tr(H,_,Ac),ot=hb(V,l,_?ie:ie+Ae,fe);-1===ot?(Pl(uc(J,D),x,V),Pm(x,s,l.length),l.push(V),J.directiveStart++,J.directiveEnd++,_&&(J.providerIndexes+=1048576),h.push(Be),D.push(Be)):(h[ot]=Be,D[ot]=Be)}else{const Be=hb(V,l,ie+Ae,fe),ot=hb(V,l,ie,ie+Ae),Bt=ot>=0&&h[ot];if(_&&!Bt||!_&&!(Be>=0&&h[Be])){Pl(uc(J,D),x,V);const sn=function q1(s,l,h,m,_){const x=new Tr(s,h,Ac);return x.multi=[],x.index=l,x.componentProviders=0,Rm(x,_,m&&!h),x}(_?R_:YD,h.length,_,m,H);!_&&Bt&&(h[ot].providerFactory=sn),Pm(x,s,l.length,0),l.push(V),J.directiveStart++,J.directiveEnd++,_&&(J.providerIndexes+=1048576),h.push(sn),D.push(sn)}else Pm(x,s,Be>-1?Be:ot,Rm(h[_?ot:Be],H,!_&&m));!_&&m&&Bt&&h[ot].componentProviders++}}}function Pm(s,l,h,m){const _=xd(l),x=function Xx(s){return!!s.useClass}(l);if(_||x){const H=(x?lt(l.useClass):l).prototype.ngOnDestroy;if(H){const J=s.destroyHooks||(s.destroyHooks=[]);if(!_&&l.multi){const ie=J.indexOf(h);-1===ie?J.push(h,[m,H]):J[ie+1].push(m,H)}else J.push(h,H)}}}function Rm(s,l,h){return h&&s.componentProviders++,s.multi.push(l)-1}function hb(s,l,h,m){for(let _=h;_<m;_++)if(l[_]===s)return _;return-1}function YD(s,l,h,m){return k_(this.multi,[])}function R_(s,l,h,m){const _=this.multi;let x;if(this.providerFactory){const D=this.providerFactory.componentProviders,V=bs(h,h[ae],this.providerFactory.index,m);x=V.slice(0,D),k_(_,x);for(let H=D;H<V.length;H++)x.push(V[H])}else x=[],k_(_,x);return x}function k_(s,l){for(let h=0;h<s.length;h++)l.push((0,s[h])());return l}function XD(s,l=[]){return h=>{h.providersResolver=(m,_)=>function P_(s,l,h){const m=Gn();if(m.firstCreatePass){const _=ki(s);Om(h,m.data,m.blueprint,_,!0),Om(l,m.data,m.blueprint,_,!1)}}(m,_?_(s):s,l)}}class F_{}class QD{}function K1(s,l){return new KE(s,l??null,[])}class KE extends F_{constructor(l,h,m){super(),this._parent=h,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Lv(this);const _=Qi(l);this._bootstrapComponents=Tu(_.bootstrap),this._r3Injector=$g(l,h,[{provide:F_,useValue:this},{provide:Gp,useValue:this.componentFactoryResolver},...m],Ne(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(h=>h()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class $w extends QD{constructor(l){super(),this.moduleType=l}create(l){return new KE(this.moduleType,l,[])}}class L_ extends F_{constructor(l){super(),this.componentFactoryResolver=new Lv(this),this.instance=null;const h=new Ng([...l.providers,{provide:F_,useValue:this},{provide:Gp,useValue:this.componentFactoryResolver}],l.parent||Rh(),l.debugName,new Set(["environment"]));this.injector=h,l.runEnvironmentInitializers&&h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function Lu(s,l,h=null){return new L_({providers:s,parent:l,debugName:h,runEnvironmentInitializers:!0}).injector}let Z1=(()=>{class s{constructor(h){this._injector=h,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(h){if(!h.standalone)return null;if(!this.cachedInjectors.has(h.id)){const m=Xy(0,h.type),_=m.length>0?Lu([m],this._injector,`Standalone[${h.type.name}]`):null;this.cachedInjectors.set(h.id,_)}return this.cachedInjectors.get(h.id)}ngOnDestroy(){try{for(const h of this.cachedInjectors.values())null!==h&&h.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=_r({token:s,providedIn:"environment",factory:()=>new s(Ur(Sc))}),s})();function ZE(s){s.getStandaloneInjector=l=>l.get(Z1).getOrCreateStandaloneInjector(s)}function ex(s){return l=>{setTimeout(s,void 0,l)}}const Bu=class sI extends P.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,h,m){let _=l,x=h||(()=>null),D=m;if(l&&"object"==typeof l){const H=l;_=H.next?.bind(H),x=H.error?.bind(H),D=H.complete?.bind(H)}this.__isAsync&&(x=ex(x),_&&(_=ex(_)),D&&(D=ex(D)));const V=super.subscribe({next:_,error:x,complete:D});return l instanceof c.w0&&l.add(V),V}};function aI(){return this._results[Symbol.iterator]()}class iC{get changes(){return this._changes||(this._changes=new Bu)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const h=iC.prototype;h[Symbol.iterator]||(h[Symbol.iterator]=aI)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,h){return this._results.reduce(l,h)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,h){const m=this;m.dirty=!1;const _=function ui(s){return s.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function dh(s,l,h){if(s.length!==l.length)return!1;for(let m=0;m<s.length;m++){let _=s[m],x=l[m];if(h&&(_=h(_),x=h(x)),x!==_)return!1}return!0}(m._results,_,h))&&(m._results=_,m.length=_.length,m.last=_[this.length-1],m.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let z_=(()=>{class s{}return s.__NG_ELEMENT_ID__=tx,s})();const lI=z_,oC=class extends lI{constructor(l,h,m){super(),this._declarationLView=l,this._declarationTContainer=h,this.elementRef=m}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(l,h){return this.createEmbeddedViewImpl(l,h,null)}createEmbeddedViewImpl(l,h,m){const D=this._declarationTContainer.tView,V=ef(this._declarationLView,D,l,4096&this._declarationLView[ln]?4096:16,null,D.declTNode,null,null,null,h||null,m||null);V[ko]=this._declarationLView[this._declarationTContainer.index];const J=this._declarationLView[po];return null!==J&&(V[po]=J.createEmbeddedView(D)),n_(D,V,l),new Pu(V)}};function tx(){return gb(wi(),ut())}function gb(s,l){return 4&s.type?new oC(l,s,kh(s,l)):null}let rx=(()=>{class s{}return s.__NG_ELEMENT_ID__=lC,s})();function lC(){return gI(wi(),ut())}const pI=rx,fI=class extends pI{constructor(l,h,m){super(),this._lContainer=l,this._hostTNode=h,this._hostLView=m}get element(){return kh(this._hostTNode,this._hostLView)}get injector(){return new Yr(this._hostTNode,this._hostLView)}get parentInjector(){const l=Ol(this._hostTNode,this._hostLView);if(Al(l)){const h=Ml(l,this._hostLView),m=en(l);return new Yr(h[ae].data[m+8],h)}return new Yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const h=mI(this._lContainer);return null!==h&&h[l]||null}get length(){return this._lContainer.length-mi}createEmbeddedView(l,h,m){let _,x;"number"==typeof m?_=m:null!=m&&(_=m.index,x=m.injector);const V=l.createEmbeddedViewImpl(h||{},x,null);return this.insertImpl(V,_,false),V}createComponent(l,h,m,_,x){const D=l&&!function vo(s){return"function"==typeof s}(l);let V;if(D)V=h;else{const bt=h||{};V=bt.index,m=bt.injector,_=bt.projectableNodes,x=bt.environmentInjector||bt.ngModuleRef}const H=D?l:new uf(ir(l)),J=m||this.parentInjector;if(!x&&null==H.ngModule){const Bt=(D?J:this.parentInjector).get(Sc,null);Bt&&(x=Bt)}ir(H.componentType??{});const Be=H.create(J,_,null,x);return this.insertImpl(Be.hostView,V,false),Be}insert(l,h){return this.insertImpl(l,h,!1)}insertImpl(l,h,m){const _=l._lView,x=_[ae];if(function dp(s){return Nn(s[Te])}(_)){const H=this.indexOf(l);if(-1!==H)this.detach(H);else{const J=_[Te],ie=new fI(J,J[Kn],J[Te]);ie.detach(ie.indexOf(l))}}const D=this._adjustIndex(h),V=this._lContainer;if(function vy(s,l,h,m){const _=mi+m,x=h.length;m>0&&(h[_-1][ho]=l),m<x-mi?(l[ho]=h[_],ws(h,mi+m,l)):(h.push(l),l[ho]=null),l[Te]=h;const D=l[ko];null!==D&&h!==D&&function by(s,l){const h=s[Zo];l[st]!==l[Te][Te][st]&&(s[tu]=!0),null===h?s[Zo]=[l]:h.push(l)}(D,l);const V=l[po];null!==V&&V.insertView(s),l[ln]|=128}(x,_,V,D),!m){const H=fg(D,V),J=_[Jt],ie=xu(J,V[Fo]);null!==ie&&function o0(s,l,h,m,_,x){m[ii]=_,m[Kn]=l,Np(s,m,h,1,_,x)}(x,V[Kn],J,_,ie,H)}return l.attachToViewContainerRef(),ws(uC(V),D,l),l}move(l,h){return this.insert(l,h)}indexOf(l){const h=mI(this._lContainer);return null!==h?h.indexOf(l):-1}remove(l){const h=this._adjustIndex(l,-1),m=xh(this._lContainer,h);m&&(mc(uC(this._lContainer),h),yd(m[ae],m))}detach(l){const h=this._adjustIndex(l,-1),m=xh(this._lContainer,h);return m&&null!=mc(uC(this._lContainer),h)?new Pu(m):null}_adjustIndex(l,h=0){return l??this.length+h}};function mI(s){return s[8]}function uC(s){return s[8]||(s[8]=[])}function gI(s,l){let h;const m=l[s.index];return Nn(m)?h=m:(h=bm(m,l,null,s),l[s.index]=h,wm(l,h)),_I(h,l,s,m),new fI(h,s,l)}let _I=function cC(s,l,h,m){if(s[Fo])return;let _;_=8&h.type?br(m):function oM(s,l){const h=s[Jt],m=h.createComment(""),_=eo(l,s);return Ec(h,xu(h,_),m,function Xa(s,l){return s.nextSibling(l)}(h,_),!1),m}(l,h),s[Fo]=_};class ix{constructor(l){this.queryList=l,this.matches=null}clone(){return new ix(this.queryList)}setDirty(){this.queryList.setDirty()}}class ox{constructor(l=[]){this.queries=l}createEmbeddedView(l){const h=l.queries;if(null!==h){const m=null!==l.contentQueries?l.contentQueries[0]:h.length,_=[];for(let x=0;x<m;x++){const D=h.getByIndex(x);_.push(this.queries[D.indexInDeclarationView].clone())}return new ox(_)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let h=0;h<this.queries.length;h++)null!==Lm(l,h).matches&&this.queries[h].setDirty()}}class dC{constructor(l,h,m=null){this.predicate=l,this.flags=h,this.read=m}}class sx{constructor(l=[]){this.queries=l}elementStart(l,h){for(let m=0;m<this.queries.length;m++)this.queries[m].elementStart(l,h)}elementEnd(l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementEnd(l)}embeddedTView(l){let h=null;for(let m=0;m<this.length;m++){const _=null!==h?h.length:0,x=this.getByIndex(m).embeddedTView(l,_);x&&(x.indexInDeclarationView=m,null!==h?h.push(x):h=[x])}return null!==h?new sx(h):null}template(l,h){for(let m=0;m<this.queries.length;m++)this.queries[m].template(l,h)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class ax{constructor(l,h=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=h}elementStart(l,h){this.isApplyingToNode(h)&&this.matchTNode(l,h)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,h){this.elementStart(l,h)}embeddedTView(l,h){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,h),new ax(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const h=this._declarationNodeIndex;let m=l.parent;for(;null!==m&&8&m.type&&m.index!==h;)m=m.parent;return h===(null!==m?m.index:-1)}return this._appliesToNextNode}matchTNode(l,h){const m=this.metadata.predicate;if(Array.isArray(m))for(let _=0;_<m.length;_++){const x=m[_];this.matchTNodeWithReadOption(l,h,aM(h,x)),this.matchTNodeWithReadOption(l,h,Ai(h,l,x,!1,!1))}else m===z_?4&h.type&&this.matchTNodeWithReadOption(l,h,-1):this.matchTNodeWithReadOption(l,h,Ai(h,l,m,!1,!1))}matchTNodeWithReadOption(l,h,m){if(null!==m){const _=this.metadata.read;if(null!==_)if(_===qp||_===rx||_===z_&&4&h.type)this.addMatch(h.index,-2);else{const x=Ai(h,l,_,!1,!1);null!==x&&this.addMatch(h.index,x)}else this.addMatch(h.index,m)}}addMatch(l,h){null===this.matches?this.matches=[l,h]:this.matches.push(l,h)}}function aM(s,l){const h=s.localNames;if(null!==h)for(let m=0;m<h.length;m+=2)if(h[m]===l)return h[m+1];return null}function vI(s,l,h,m){return-1===h?function yI(s,l){return 11&s.type?kh(s,l):4&s.type?gb(s,l):null}(l,s):-2===h?function bI(s,l,h){return h===qp?kh(l,s):h===z_?gb(l,s):h===rx?gI(l,s):void 0}(s,l,m):bs(s,s[ae],h,l)}function wI(s,l,h,m){const _=l[po].queries[m];if(null===_.matches){const x=s.data,D=h.matches,V=[];for(let H=0;H<D.length;H+=2){const J=D[H];V.push(J<0?null:vI(l,x[J],D[H+1],h.metadata.read))}_.matches=V}return _.matches}function lx(s,l,h,m){const _=s.queries.getByIndex(h),x=_.matches;if(null!==x){const D=wI(s,l,_,h);for(let V=0;V<x.length;V+=2){const H=x[V];if(H>0)m.push(D[V/2]);else{const J=x[V+1],ie=l[-H];for(let fe=mi;fe<ie.length;fe++){const Ae=ie[fe];Ae[ko]===Ae[Te]&&lx(Ae[ae],Ae,J,m)}if(null!==ie[Zo]){const fe=ie[Zo];for(let Ae=0;Ae<fe.length;Ae++){const Be=fe[Ae];lx(Be[ae],Be,J,m)}}}}}return m}function xI(s){const l=ut(),h=Gn(),m=nc();_a(m+1);const _=Lm(h,m);if(s.dirty&&function cp(s){return 4==(4&s[ln])}(l)===(2==(2&_.metadata.flags))){if(null===_.matches)s.reset([]);else{const x=_.crossesNgTemplate?lx(h,l,m,[]):wI(h,l,_,m);s.reset(x,R0),s.notifyOnChanges()}return!0}return!1}function EI(s,l,h){const m=Gn();m.firstCreatePass&&(ux(m,new dC(s,l,h),-1),2==(2&l)&&(m.staticViewQueries=!0)),DI(m,ut(),l)}function CI(s,l,h,m){const _=Gn();if(_.firstCreatePass){const x=wi();ux(_,new dC(l,h,m),x.index),function pC(s,l){const h=s.contentQueries||(s.contentQueries=[]);l!==(h.length?h[h.length-1]:-1)&&h.push(s.queries.length-1,l)}(_,s),2==(2&h)&&(_.staticContentQueries=!0)}DI(_,ut(),h)}function hC(){return function SI(s,l){return s[po].queries[l].queryList}(ut(),nc())}function DI(s,l,h){const m=new iC(4==(4&h));(function G0(s,l,h,m){const _=Tv(l);_.push(h),s.firstCreatePass&&Av(s).push(m,_.length-1)})(s,l,m,m.destroy),null===l[po]&&(l[po]=new ox),l[po].queries.push(new ix(m))}function ux(s,l,h){null===s.queries&&(s.queries=new sx),s.queries.track(new ax(l,h))}function Lm(s,l){return s.queries.getByIndex(l)}function fC(s,l){return gb(s,l)}function gC(s){return!!Qi(s)}const UI=new dr("Application Initializer");let CC=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,m)=>{this.resolve=h,this.reject=m}),this.appInits=nr(UI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const h=[];for(const _ of this.appInits){const x=_();if(Sm(x))h.push(x);else if(S_(x)){const D=new Promise((V,H)=>{x.subscribe({complete:V,error:H})});h.push(D)}}const m=()=>{this.done=!0,this.resolve()};Promise.all(h).then(()=>{m()}).catch(_=>{this.reject(_)}),0===h.length&&m(),this.initialized=!0}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=_r({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),zI=(()=>{class s{log(h){console.log(h)}warn(h){console.warn(h)}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=_r({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const px=new dr("LocaleId",{providedIn:"root",factory:()=>nr(px,Ft.Optional|Ft.SkipSelf)||function EM(){return typeof $localize<"u"&&$localize.locale||Vd}()}),CM=new dr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let jI=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new B.X(!1)}add(){this.hasPendingTasks.next(!0);const h=this.taskId++;return this.pendingTasks.add(h),h}remove(h){this.pendingTasks.delete(h),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=_r({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class SM{constructor(l,h){this.ngModuleFactory=l,this.componentFactories=h}}let DM=(()=>{class s{compileModuleSync(h){return new $w(h)}compileModuleAsync(h){return Promise.resolve(this.compileModuleSync(h))}compileModuleAndAllComponentsSync(h){const m=this.compileModuleSync(h),x=Tu(Qi(h).declarations).reduce((D,V)=>{const H=ir(V);return H&&D.push(new uf(H)),D},[]);return new SM(m,x)}compileModuleAndAllComponentsAsync(h){return Promise.resolve(this.compileModuleAndAllComponentsSync(h))}clearCache(){}clearCacheFor(h){}getModuleId(h){}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=_r({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function WI(...s){}class Aa{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:h=!1,shouldCoalesceRunChangeDetection:m=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bu(!1),this.onMicrotaskEmpty=new Bu(!1),this.onStable=new Bu(!1),this.onError=new Bu(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const _=this;_._nesting=0,_._outer=_._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!m&&h,_.shouldCoalesceRunChangeDetection=m,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function AM(){let s=jn.requestAnimationFrame,l=jn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&l){const h=s[Zone.__symbol__("OriginalDelegate")];h&&(s=h);const m=l[Zone.__symbol__("OriginalDelegate")];m&&(l=m)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function OM(s){const l=()=>{!function NM(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(jn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,DC(s),s.isCheckStableRunning=!0,SC(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),DC(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(h,m,_,x,D,V)=>{try{return GI(s),h.invokeTask(_,x,D,V)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||s.shouldCoalesceRunChangeDetection)&&l(),qI(s)}},onInvoke:(h,m,_,x,D,V,H)=>{try{return GI(s),h.invoke(_,x,D,V,H)}finally{s.shouldCoalesceRunChangeDetection&&l(),qI(s)}},onHasTask:(h,m,_,x)=>{h.hasTask(_,x),m===_&&("microTask"==x.change?(s._hasPendingMicrotasks=x.microTask,DC(s),SC(s)):"macroTask"==x.change&&(s.hasPendingMacrotasks=x.macroTask))},onHandleError:(h,m,_,x)=>(h.handleError(_,x),s.runOutsideAngular(()=>s.onError.emit(x)),!1)})}(_)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Aa.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Aa.isInAngularZone())throw new Ie(909,!1)}run(l,h,m){return this._inner.run(l,h,m)}runTask(l,h,m,_){const x=this._inner,D=x.scheduleEventTask("NgZoneEvent: "+_,l,MM,WI,WI);try{return x.runTask(D,h,m)}finally{x.cancelTask(D)}}runGuarded(l,h,m){return this._inner.runGuarded(l,h,m)}runOutsideAngular(l){return this._outer.run(l)}}const MM={};function SC(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function DC(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function GI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function qI(s){s._nesting--,SC(s)}class PM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bu,this.onMicrotaskEmpty=new Bu,this.onStable=new Bu,this.onError=new Bu}run(l,h,m){return l.apply(h,m)}runGuarded(l,h,m){return l.apply(h,m)}runOutsideAngular(l){return l()}runTask(l,h,m,_){return l.apply(h,m)}}const KI=new dr("",{providedIn:"root",factory:ZI});function ZI(){const s=nr(Aa);let l=!0;const h=new R.y(_=>{l=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{_.next(l),_.complete()})}),m=new R.y(_=>{let x;s.runOutsideAngular(()=>{x=s.onStable.subscribe(()=>{Aa.assertNotInAngularZone(),queueMicrotask(()=>{!l&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(l=!0,_.next(!0))})})});const D=s.onUnstable.subscribe(()=>{Aa.assertInAngularZone(),l&&(l=!1,s.runOutsideAngular(()=>{_.next(!1)}))});return()=>{x.unsubscribe(),D.unsubscribe()}});return(0,W.T)(h,m.pipe((0,Q.B)()))}const YI=new dr(""),XI=new dr("");let IC,RM=(()=>{class s{constructor(h,m,_){this._ngZone=h,this.registry=m,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,IC||(function kM(s){IC=s}(_),_.addToWindow(m)),this._watchAngularEvents(),h.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Aa.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let h=this._callbacks.pop();clearTimeout(h.timeoutId),h.doneCb(this._didWork)}this._didWork=!1});else{let h=this.getPendingTasks();this._callbacks=this._callbacks.filter(m=>!m.updateCb||!m.updateCb(h)||(clearTimeout(m.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(h=>({source:h.source,creationLocation:h.creationLocation,data:h.data})):[]}addCallback(h,m,_){let x=-1;m&&m>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==x),h(this._didWork,this.getPendingTasks())},m)),this._callbacks.push({doneCb:h,timeoutId:x,updateCb:_})}whenStable(h,m,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(h,m,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(h){this.registry.registerApplication(h,this)}unregisterApplication(h){this.registry.unregisterApplication(h)}findProviders(h,m,_){return[]}}return s.\u0275fac=function(h){return new(h||s)(Ur(Aa),Ur(QI),Ur(XI))},s.\u0275prov=_r({token:s,factory:s.\u0275fac}),s})(),QI=(()=>{class s{constructor(){this._applications=new Map}registerApplication(h,m){this._applications.set(h,m)}unregisterApplication(h){this._applications.delete(h)}unregisterAllApplications(){this._applications.clear()}getTestability(h){return this._applications.get(h)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(h,m=!0){return IC?.findTestabilityInTree(this,h,m)??null}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=_r({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),bf=null;const JI=new dr("AllowMultipleToken"),TC=new dr("PlatformDestroyListeners"),AC=new dr("appBootstrapListener");class BM{constructor(l,h){this.name=l,this.token=h}}function xb(s,l,h=[]){const m=`Platform: ${l}`,_=new dr(m);return(x=[])=>{let D=fx();if(!D||D.injector.get(JI,!1)){const V=[...h,...x,{provide:_,useValue:!0}];s?s(V):function VM(s){if(bf&&!bf.get(JI,!1))throw new Ie(400,!1);(function eT(){!function ru(s){eh=s}(()=>{throw new Ie(600,!1)})})(),bf=s;const l=s.get(G_);(function tT(s){s.get(iv,null)?.forEach(h=>h())})(s)}(function NC(s=[],l){return Da.create({name:l,providers:[{provide:Ag,useValue:"platform"},{provide:TC,useValue:new Set([()=>bf=null])},...s]})}(V,m))}return function MC(s){const l=fx();if(!l)throw new Ie(401,!1);return l}()}}function fx(){return bf?.get(G_)??null}let G_=(()=>{class s{constructor(h){this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(h,m){const _=function nT(s="zone.js",l){return"noop"===s?new PM:"zone.js"===s?new Aa(l):s}(m?.ngZone,function Eb(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:m?.ngZoneEventCoalescing,runCoalescing:m?.ngZoneRunCoalescing}));return _.run(()=>{const x=function pb(s,l,h){return new KE(s,l,h)}(h.moduleType,this.injector,function Sb(s){return[{provide:Aa,useFactory:s},{provide:Su,multi:!0,useFactory:()=>{const l=nr(us,{optional:!0});return()=>l.initialize()}},{provide:kC,useFactory:rT},{provide:KI,useFactory:ZI}]}(()=>_)),D=x.injector.get(Cs,null);return _.runOutsideAngular(()=>{const V=_.onError.subscribe({next:H=>{D.handleError(H)}});x.onDestroy(()=>{Cb(this._modules,x),V.unsubscribe()})}),function OC(s,l,h){try{const m=h();return Sm(m)?m.catch(_=>{throw l.runOutsideAngular(()=>s.handleError(_)),_}):m}catch(m){throw l.runOutsideAngular(()=>s.handleError(m)),m}}(D,_,()=>{const V=x.injector.get(CC);return V.runInitializers(),V.donePromise.then(()=>(function ID(s){fn(s,"Expected localeId to be defined"),"string"==typeof s&&(FE=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(px,Vd)||Vd),this._moduleDoBootstrap(x),x))})})}bootstrapModule(h,m=[]){const _=PC({},m);return function FM(s,l,h){const m=new $w(h);return Promise.resolve(m)}(0,0,h).then(x=>this.bootstrapModuleFactory(x,_))}_moduleDoBootstrap(h){const m=h.injector.get(wf);if(h._bootstrapComponents.length>0)h._bootstrapComponents.forEach(_=>m.bootstrap(_));else{if(!h.instance.ngDoBootstrap)throw new Ie(-403,!1);h.instance.ngDoBootstrap(m)}this._modules.push(h)}onDestroy(h){this._destroyListeners.push(h)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(m=>m.destroy()),this._destroyListeners.forEach(m=>m());const h=this._injector.get(TC,null);h&&(h.forEach(m=>m()),h.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(h){return new(h||s)(Ur(Da))},s.\u0275prov=_r({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function PC(s,l){return Array.isArray(l)?l.reduce(PC,s):{...s,...l}}let wf=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=nr(kC),this.zoneIsStable=nr(KI),this.componentTypes=[],this.components=[],this.isStable=nr(jI).hasPendingTasks.pipe((0,pe.w)(h=>h?(0,Y.of)(!1):this.zoneIsStable),(0,Ce.x)(),(0,Q.B)()),this._injector=nr(Sc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(h,m){const _=h instanceof Lg;if(!this._injector.get(CC).done)throw!_&&Ra(h),new Ie(405,!1);let D;D=_?h:this._injector.get(Gp).resolveComponentFactory(h),this.componentTypes.push(D.componentType);const V=function LM(s){return s.isBoundToModule}(D)?void 0:this._injector.get(F_),J=D.create(Da.NULL,[],m||D.selector,V),ie=J.location.nativeElement,fe=J.injector.get(YI,null);return fe?.registerApplication(ie),J.onDestroy(()=>{this.detachView(J.hostView),Cb(this.components,J),fe?.unregisterApplication(ie)}),this._loadComponent(J),J}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let h of this._views)h.detectChanges()}catch(h){this.internalErrorHandler(h)}finally{this._runningTick=!1}}attachView(h){const m=h;this._views.push(m),m.attachToAppRef(this)}detachView(h){const m=h;Cb(this._views,m),m.detachFromAppRef()}_loadComponent(h){this.attachView(h.hostView),this.tick(),this.components.push(h);const m=this._injector.get(AC,[]);m.push(...this._bootstrapListeners),m.forEach(_=>_(h))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(h=>h()),this._views.slice().forEach(h=>h.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(h){return this._destroyListeners.push(h),()=>Cb(this._destroyListeners,h)}destroy(){if(this._destroyed)throw new Ie(406,!1);const h=this._injector;h.destroy&&!h.destroyed&&h.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=_r({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Cb(s,l){const h=s.indexOf(l);h>-1&&s.splice(h,1)}const kC=new dr("",{providedIn:"root",factory:()=>nr(Cs).handleError.bind(void 0)});function rT(){const s=nr(Aa),l=nr(Cs);return h=>s.runOutsideAngular(()=>l.handleError(h))}let us=(()=>{class s{constructor(){this.zone=nr(Aa),this.applicationRef=nr(wf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(h){return new(h||s)},s.\u0275prov=_r({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Db(){return!1}function Ib(){}let BC=(()=>{class s{}return s.__NG_ELEMENT_ID__=iT,s})();function iT(s){return function oT(s,l,h){if(Ir(s)&&!h){const m=Fi(s.index,l);return new Pu(m,m)}return 47&s.type?new Pu(l[st],l):null}(wi(),ut(),16==(16&s))}class Rb{constructor(){}supports(l){return Gh(l)}create(l){return new hT(l)}}const dT=(s,l)=>l;class hT{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||dT}forEachItem(l){let h;for(h=this._itHead;null!==h;h=h._next)l(h)}forEachOperation(l){let h=this._itHead,m=this._removalsHead,_=0,x=null;for(;h||m;){const D=!m||h&&h.currentIndex<yx(m,_,x)?h:m,V=yx(D,_,x),H=D.currentIndex;if(D===m)_--,m=m._nextRemoved;else if(h=h._next,null==D.previousIndex)_++;else{x||(x=[]);const J=V-_,ie=H-_;if(J!=ie){for(let Ae=0;Ae<J;Ae++){const Be=Ae<x.length?x[Ae]:x[Ae]=0,ot=Be+Ae;ie<=ot&&ot<J&&(x[Ae]=Be+1)}x[D.previousIndex]=ie-J}}V!==H&&l(D,V,H)}}forEachPreviousItem(l){let h;for(h=this._previousItHead;null!==h;h=h._nextPrevious)l(h)}forEachAddedItem(l){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)l(h)}forEachMovedItem(l){let h;for(h=this._movesHead;null!==h;h=h._nextMoved)l(h)}forEachRemovedItem(l){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)l(h)}forEachIdentityChange(l){let h;for(h=this._identityChangesHead;null!==h;h=h._nextIdentityChange)l(h)}diff(l){if(null==l&&(l=[]),!Gh(l))throw new Ie(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let _,x,D,h=this._itHead,m=!1;if(Array.isArray(l)){this.length=l.length;for(let V=0;V<this.length;V++)x=l[V],D=this._trackByFn(V,x),null!==h&&Object.is(h.trackById,D)?(m&&(h=this._verifyReinsertion(h,x,D,V)),Object.is(h.item,x)||this._addIdentityChange(h,x)):(h=this._mismatch(h,x,D,V),m=!0),h=h._next}else _=0,function hw(s,l){if(Array.isArray(s))for(let h=0;h<s.length;h++)l(s[h]);else{const h=s[Symbol.iterator]();let m;for(;!(m=h.next()).done;)l(m.value)}}(l,V=>{D=this._trackByFn(_,V),null!==h&&Object.is(h.trackById,D)?(m&&(h=this._verifyReinsertion(h,V,D,_)),Object.is(h.item,V)||this._addIdentityChange(h,V)):(h=this._mismatch(h,V,D,_),m=!0),h=h._next,_++}),this.length=_;return this._truncate(h),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,h,m,_){let x;return null===l?x=this._itTail:(x=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(m,null))?(Object.is(l.item,h)||this._addIdentityChange(l,h),this._reinsertAfter(l,x,_)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(m,_))?(Object.is(l.item,h)||this._addIdentityChange(l,h),this._moveAfter(l,x,_)):l=this._addAfter(new pT(h,m),x,_),l}_verifyReinsertion(l,h,m,_){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(m,null);return null!==x?l=this._reinsertAfter(x,l._prev,_):l.currentIndex!=_&&(l.currentIndex=_,this._addToMoves(l,_)),l}_truncate(l){for(;null!==l;){const h=l._next;this._addToRemovals(this._unlink(l)),l=h}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,h,m){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const _=l._prevRemoved,x=l._nextRemoved;return null===_?this._removalsHead=x:_._nextRemoved=x,null===x?this._removalsTail=_:x._prevRemoved=_,this._insertAfter(l,h,m),this._addToMoves(l,m),l}_moveAfter(l,h,m){return this._unlink(l),this._insertAfter(l,h,m),this._addToMoves(l,m),l}_addAfter(l,h,m){return this._insertAfter(l,h,m),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,h,m){const _=null===h?this._itHead:h._next;return l._next=_,l._prev=h,null===_?this._itTail=l:_._prev=l,null===h?this._itHead=l:h._next=l,null===this._linkedRecords&&(this._linkedRecords=new Fb),this._linkedRecords.put(l),l.currentIndex=m,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const h=l._prev,m=l._next;return null===h?this._itHead=m:h._next=m,null===m?this._itTail=h:m._prev=h,l}_addToMoves(l,h){return l.previousIndex===h||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fb),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,h){return l.item=h,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class pT{constructor(l,h){this.item=l,this.trackById=h,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kb{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,h){let m;for(m=this._head;null!==m;m=m._nextDup)if((null===h||h<=m.currentIndex)&&Object.is(m.trackById,l))return m;return null}remove(l){const h=l._prevDup,m=l._nextDup;return null===h?this._head=m:h._nextDup=m,null===m?this._tail=h:m._prevDup=h,null===this._head}}class Fb{constructor(){this.map=new Map}put(l){const h=l.trackById;let m=this.map.get(h);m||(m=new kb,this.map.set(h,m)),m.add(l)}get(l,h){const _=this.map.get(l);return _?_.get(l,h):null}remove(l){const h=l.trackById;return this.map.get(h).remove(l)&&this.map.delete(h),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yx(s,l,h){const m=s.previousIndex;if(null===m)return m;let _=0;return h&&m<h.length&&(_=h[m]),m+l+_}class Lb{constructor(){}supports(l){return l instanceof Map||h_(l)}create(){return new vx}}class vx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let h;for(h=this._mapHead;null!==h;h=h._next)l(h)}forEachPreviousItem(l){let h;for(h=this._previousMapHead;null!==h;h=h._nextPrevious)l(h)}forEachChangedItem(l){let h;for(h=this._changesHead;null!==h;h=h._nextChanged)l(h)}forEachAddedItem(l){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)l(h)}forEachRemovedItem(l){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)l(h)}diff(l){if(l){if(!(l instanceof Map||h_(l)))throw new Ie(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let h=this._mapHead;if(this._appendAfter=null,this._forEach(l,(m,_)=>{if(h&&h.key===_)this._maybeAddToChanges(h,m),this._appendAfter=h,h=h._next;else{const x=this._getOrCreateRecordForKey(_,m);h=this._insertBeforeOrAppend(h,x)}}),h){h._prev&&(h._prev._next=null),this._removalsHead=h;for(let m=h;null!==m;m=m._nextRemoved)m===this._mapHead&&(this._mapHead=null),this._records.delete(m.key),m._nextRemoved=m._next,m.previousValue=m.currentValue,m.currentValue=null,m._prev=null,m._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,h){if(l){const m=l._prev;return h._next=l,h._prev=m,l._prev=h,m&&(m._next=h),l===this._mapHead&&(this._mapHead=h),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=h,h._prev=this._appendAfter):this._mapHead=h,this._appendAfter=h,null}_getOrCreateRecordForKey(l,h){if(this._records.has(l)){const _=this._records.get(l);this._maybeAddToChanges(_,h);const x=_._prev,D=_._next;return x&&(x._next=D),D&&(D._prev=x),_._next=null,_._prev=null,_}const m=new bx(l);return this._records.set(l,m),m.currentValue=h,this._addToAdditions(m),m}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,h){Object.is(h,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=h,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,h){l instanceof Map?l.forEach(h):Object.keys(l).forEach(m=>h(l[m],m))}}class bx{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wx(){return new xx([new Rb])}let xx=(()=>{class s{constructor(h){this.factories=h}static create(h,m){if(null!=m){const _=m.factories.slice();h=h.concat(_)}return new s(h)}static extend(h){return{provide:s,useFactory:m=>s.create(h,m||wx()),deps:[[s,new ns,new xs]]}}find(h){const m=this.factories.find(_=>_.supports(h));if(null!=m)return m;throw new Ie(901,!1)}}return s.\u0275prov=_r({token:s,providedIn:"root",factory:wx}),s})();function Ef(){return new Bb([new Lb])}let Bb=(()=>{class s{constructor(h){this.factories=h}static create(h,m){if(m){const _=m.factories.slice();h=h.concat(_)}return new s(h)}static extend(h){return{provide:s,useFactory:m=>s.create(h,m||Ef()),deps:[[s,new ns,new xs]]}}find(h){const m=this.factories.find(_=>_.supports(h));if(m)return m;throw new Ie(901,!1)}}return s.\u0275prov=_r({token:s,providedIn:"root",factory:Ef}),s})();const _T=xb(null,"core",[]);let yT=(()=>{class s{constructor(h){}}return s.\u0275fac=function(h){return new(h||s)(Ur(wf))},s.\u0275mod=Uc({type:s}),s.\u0275inj=Do({}),s})();function CT(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function IT(s){const l=ir(s);if(!l)return null;const h=new uf(l);return{get selector(){return h.selector},get type(){return h.componentType},get inputs(){return h.inputs},get outputs(){return h.outputs},get ngContentSelectors(){return h.ngContentSelectors},get isStandalone(){return l.standalone},get isSignal(){return l.signals}}}},3106:(N,M,S)=>{"use strict";S.d(M,{Z:()=>wt});var P=S(9058),c=S(4537),B=S(534),R=S(7879);class W{constructor(le,$e){this._delegate=le,this.firebase=$e,(0,B._addComponent)(le,new c.wA("app-compat",()=>this,"PUBLIC")),this.container=le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this._delegate.automaticDataCollectionEnabled=le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(le=>{this._delegate.checkDestroyed(),le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(le,$e=B._DEFAULT_ENTRY_NAME){var xt;this._delegate.checkDestroyed();const It=this._delegate.container.getProvider(le);return!It.isInitialized()&&"EXPLICIT"===(null===(xt=It.getComponent())||void 0===xt?void 0:xt.instantiationMode)&&It.initialize(),It.getImmediate({identifier:$e})}_removeServiceInstance(le,$e=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(le).clearInstance($e)}_addComponent(le){(0,B._addComponent)(this._delegate,le)}_addOrOverwriteComponent(le){(0,B._addOrOverwriteComponent)(this._delegate,le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Q=new P.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function Ce(){const lt=function pe(lt){const le={},$e={__esModule:!0,initializeApp:function Ie(pt,kt={}){const Oe=B.initializeApp(pt,kt);if((0,P.r3)(le,Oe.name))return le[Oe.name];const We=new lt(Oe,$e);return le[Oe.name]=We,We},app:It,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function Ue(pt){const kt=pt.name,Oe=kt.replace("-compat","");if(B._registerComponent(pt)&&"PUBLIC"===pt.type){const We=(Fe=It())=>{if("function"!=typeof Fe[Oe])throw Q.create("invalid-app-argument",{appName:kt});return Fe[Oe]()};void 0!==pt.serviceProps&&(0,P.ZB)(We,pt.serviceProps),$e[Oe]=We,lt.prototype[Oe]=function(...Fe){return this._getService.bind(this,kt).apply(this,pt.multipleInstances?Fe:[])}}return"PUBLIC"===pt.type?$e[Oe]:null},removeApp:function xt(pt){delete le[pt]},useAsService:function Ye(pt,kt){return"serverAuth"===kt?null:kt},modularAPIs:B}};function It(pt){if(!(0,P.r3)(le,pt=pt||B._DEFAULT_ENTRY_NAME))throw Q.create("no-app",{appName:pt});return le[pt]}return $e.default=$e,Object.defineProperty($e,"apps",{get:function Vt(){return Object.keys(le).map(pt=>le[pt])}}),It.App=lt,$e}(W);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function le($e){(0,P.ZB)(lt,$e)},createSubscribe:P.ne,ErrorFactory:P.LL,deepExtend:P.ZB}),lt}(),me=new R.Yd("@firebase/app-compat");if((0,P.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const wt=ce;!function tt(lt){(0,B.registerVersion)("@firebase/app-compat","0.2.13",lt)}()},534:(N,M,S)=>{"use strict";S.r(M),S.d(M,{FirebaseError:()=>R.ZR,SDK_VERSION:()=>ll,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>Tt,_addOrOverwriteComponent:()=>Io,_apps:()=>Gt,_clearComponents:()=>Wr,_components:()=>Ut,_getProvider:()=>To,_registerComponent:()=>jn,_removeServiceInstance:()=>ji,deleteApp:()=>Oi,getApp:()=>Ao,getApps:()=>pi,initializeApp:()=>tr,onLog:()=>Xi,registerVersion:()=>ri,setLogLevel:()=>Ur});var P=S(5861),c=S(4537),B=S(7879),R=S(9058);const W=(Ze,He)=>He.some(mt=>Ze instanceof mt);let Y,Q;const ce=new WeakMap,me=new WeakMap,Ne=new WeakMap,at=new WeakMap,tt=new WeakMap;let le={get(Ze,He,mt){if(Ze instanceof IDBTransaction){if("done"===He)return me.get(Ze);if("objectStoreNames"===He)return Ze.objectStoreNames||Ne.get(Ze);if("store"===He)return mt.objectStoreNames[1]?void 0:mt.objectStore(mt.objectStoreNames[0])}return Ie(Ze[He])},set:(Ze,He,mt)=>(Ze[He]=mt,!0),has:(Ze,He)=>Ze instanceof IDBTransaction&&("done"===He||"store"===He)||He in Ze};function It(Ze){return"function"==typeof Ze?function xt(Ze){return Ze!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ze)?function(...He){return Ze.apply(Vt(this),He),Ie(ce.get(this))}:function(...He){return Ie(Ze.apply(Vt(this),He))}:function(He,...mt){const Qt=Ze.call(Vt(this),He,...mt);return Ne.set(Qt,He.sort?He.sort():[He]),Ie(Qt)}}(Ze):(Ze instanceof IDBTransaction&&function lt(Ze){if(me.has(Ze))return;const He=new Promise((mt,Qt)=>{const wn=()=>{Ze.removeEventListener("complete",Ln),Ze.removeEventListener("error",Rn),Ze.removeEventListener("abort",Rn)},Ln=()=>{mt(),wn()},Rn=()=>{Qt(Ze.error||new DOMException("AbortError","AbortError")),wn()};Ze.addEventListener("complete",Ln),Ze.addEventListener("error",Rn),Ze.addEventListener("abort",Rn)});me.set(Ze,He)}(Ze),W(Ze,function pe(){return Y||(Y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ze,le):Ze)}function Ie(Ze){if(Ze instanceof IDBRequest)return function wt(Ze){const He=new Promise((mt,Qt)=>{const wn=()=>{Ze.removeEventListener("success",Ln),Ze.removeEventListener("error",Rn)},Ln=()=>{mt(Ie(Ze.result)),wn()},Rn=()=>{Qt(Ze.error),wn()};Ze.addEventListener("success",Ln),Ze.addEventListener("error",Rn)});return He.then(mt=>{mt instanceof IDBCursor&&ce.set(mt,Ze)}).catch(()=>{}),tt.set(He,Ze),He}(Ze);if(at.has(Ze))return at.get(Ze);const He=It(Ze);return He!==Ze&&(at.set(Ze,He),tt.set(He,Ze)),He}const Vt=Ze=>tt.get(Ze),pt=["get","getKey","getAll","getAllKeys","count"],kt=["put","add","delete","clear"],Oe=new Map;function We(Ze,He){if(!(Ze instanceof IDBDatabase)||He in Ze||"string"!=typeof He)return;if(Oe.get(He))return Oe.get(He);const mt=He.replace(/FromIndex$/,""),Qt=He!==mt,wn=kt.includes(mt);if(!(mt in(Qt?IDBIndex:IDBObjectStore).prototype)||!wn&&!pt.includes(mt))return;const Ln=function(){var Rn=(0,P.Z)(function*(Dr,...Sn){const Bn=this.transaction(Dr,wn?"readwrite":"readonly");let Pa=Bn.store;return Qt&&(Pa=Pa.index(Sn.shift())),(yield Promise.all([Pa[mt](...Sn),wn&&Bn.done]))[0]});return function(Sn){return Rn.apply(this,arguments)}}();return Oe.set(He,Ln),Ln}!function $e(Ze){le=Ze(le)}(Ze=>({...Ze,get:(He,mt,Qt)=>We(He,mt)||Ze.get(He,mt,Qt),has:(He,mt)=>!!We(He,mt)||Ze.has(He,mt)}));class Fe{constructor(He){this.container=He}getPlatformInfoString(){return this.container.getProviders().map(mt=>{if(function Mt(Ze){const He=Ze.getComponent();return"VERSION"===He?.type}(mt)){const Qt=mt.getImmediate();return`${Qt.library}/${Qt.version}`}return null}).filter(mt=>mt).join(" ")}}const Pt="@firebase/app",Yt=new B.Yd("@firebase/app"),Ft="[DEFAULT]",ze={[Pt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,Ut=new Map;function Tt(Ze,He){try{Ze.container.addComponent(He)}catch(mt){Yt.debug(`Component ${He.name} failed to register with FirebaseApp ${Ze.name}`,mt)}}function Io(Ze,He){Ze.container.addOrOverwriteComponent(He)}function jn(Ze){const He=Ze.name;if(Ut.has(He))return Yt.debug(`There were multiple attempts to register component ${He}.`),!1;Ut.set(He,Ze);for(const mt of Gt.values())Tt(mt,Ze);return!0}function To(Ze,He){const mt=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return mt&&mt.triggerHeartbeat(),Ze.container.getProvider(He)}function ji(Ze,He,mt=Ft){To(Ze,He).clearInstance(mt)}function Wr(){Ut.clear()}const Wn=new R.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rn{constructor(He,mt,Qt){this._isDeleted=!1,this._options=Object.assign({},He),this._config=Object.assign({},mt),this._name=mt.name,this._automaticDataCollectionEnabled=mt.automaticDataCollectionEnabled,this._container=Qt,this.container.addComponent(new c.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(He){this.checkDestroyed(),this._automaticDataCollectionEnabled=He}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(He){this._isDeleted=He}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}const ll="9.23.0";function tr(Ze,He={}){let mt=Ze;"object"!=typeof He&&(He={name:He});const Qt=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},He),wn=Qt.name;if("string"!=typeof wn||!wn)throw Wn.create("bad-app-name",{appName:String(wn)});if(mt||(mt=(0,R.aH)()),!mt)throw Wn.create("no-options");const Ln=Gt.get(wn);if(Ln){if((0,R.vZ)(mt,Ln.options)&&(0,R.vZ)(Qt,Ln.config))return Ln;throw Wn.create("duplicate-app",{appName:wn})}const Rn=new c.H0(wn);for(const Sn of Ut.values())Rn.addComponent(Sn);const Dr=new rn(mt,Qt,Rn);return Gt.set(wn,Dr),Dr}function Ao(Ze=Ft){const He=Gt.get(Ze);if(!He&&Ze===Ft&&(0,R.aH)())return tr();if(!He)throw Wn.create("no-app",{appName:Ze});return He}function pi(){return Array.from(Gt.values())}function Oi(Ze){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,P.Z)(function*(Ze){const He=Ze.name;Gt.has(He)&&(Gt.delete(He),yield Promise.all(Ze.container.getProviders().map(mt=>mt.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function ri(Ze,He,mt){var Qt;let wn=null!==(Qt=ze[Ze])&&void 0!==Qt?Qt:Ze;mt&&(wn+=`-${mt}`);const Ln=wn.match(/\s|\//),Rn=He.match(/\s|\//);if(Ln||Rn){const Dr=[`Unable to register library "${wn}" with version "${He}":`];return Ln&&Dr.push(`library name "${wn}" contains illegal characters (whitespace or "/")`),Ln&&Rn&&Dr.push("and"),Rn&&Dr.push(`version name "${He}" contains illegal characters (whitespace or "/")`),void Yt.warn(Dr.join(" "))}jn(new c.wA(`${wn}-version`,()=>({library:wn,version:He}),"VERSION"))}function Xi(Ze,He){if(null!==Ze&&"function"!=typeof Ze)throw Wn.create("invalid-log-argument");(0,B.Am)(Ze,He)}function Ur(Ze){(0,B.Ub)(Ze)}const No="firebase-heartbeat-database",nr=1,Ee="firebase-heartbeat-store";let be=null;function Me(){return be||(be=function Ue(Ze,He,{blocked:mt,upgrade:Qt,blocking:wn,terminated:Ln}={}){const Rn=indexedDB.open(Ze,He),Dr=Ie(Rn);return Qt&&Rn.addEventListener("upgradeneeded",Sn=>{Qt(Ie(Rn.result),Sn.oldVersion,Sn.newVersion,Ie(Rn.transaction),Sn)}),mt&&Rn.addEventListener("blocked",Sn=>mt(Sn.oldVersion,Sn.newVersion,Sn)),Dr.then(Sn=>{Ln&&Sn.addEventListener("close",()=>Ln()),wn&&Sn.addEventListener("versionchange",Bn=>wn(Bn.oldVersion,Bn.newVersion,Bn))}).catch(()=>{}),Dr}(No,nr,{upgrade:(Ze,He)=>{0===He&&Ze.createObjectStore(Ee)}}).catch(Ze=>{throw Wn.create("idb-open",{originalErrorMessage:Ze.message})})),be}function je(){return(je=(0,P.Z)(function*(Ze){try{return yield(yield Me()).transaction(Ee).objectStore(Ee).get(Mn(Ze))}catch(He){if(He instanceof R.ZR)Yt.warn(He.message);else{const mt=Wn.create("idb-get",{originalErrorMessage:He?.message});Yt.warn(mt.message)}}})).apply(this,arguments)}function Ht(Ze,He){return on.apply(this,arguments)}function on(){return(on=(0,P.Z)(function*(Ze,He){try{const Qt=(yield Me()).transaction(Ee,"readwrite");yield Qt.objectStore(Ee).put(He,Mn(Ze)),yield Qt.done}catch(mt){if(mt instanceof R.ZR)Yt.warn(mt.message);else{const Qt=Wn.create("idb-set",{originalErrorMessage:mt?.message});Yt.warn(Qt.message)}}})).apply(this,arguments)}function Mn(Ze){return`${Ze.name}!${Ze.options.appId}`}class mn{constructor(He){this.container=He,this._heartbeatsCache=null;const mt=this.container.getProvider("app").getImmediate();this._storage=new hs(mt),this._heartbeatsCachePromise=this._storage.read().then(Qt=>(this._heartbeatsCache=Qt,Qt))}triggerHeartbeat(){var He=this;return(0,P.Z)(function*(){const Qt=He.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wn=Fn();if(null===He._heartbeatsCache&&(He._heartbeatsCache=yield He._heartbeatsCachePromise),He._heartbeatsCache.lastSentHeartbeatDate!==wn&&!He._heartbeatsCache.heartbeats.some(Ln=>Ln.date===wn))return He._heartbeatsCache.heartbeats.push({date:wn,agent:Qt}),He._heartbeatsCache.heartbeats=He._heartbeatsCache.heartbeats.filter(Ln=>{const Rn=new Date(Ln.date).valueOf();return Date.now()-Rn<=2592e6}),He._storage.overwrite(He._heartbeatsCache)})()}getHeartbeatsHeader(){var He=this;return(0,P.Z)(function*(){if(null===He._heartbeatsCache&&(yield He._heartbeatsCachePromise),null===He._heartbeatsCache||0===He._heartbeatsCache.heartbeats.length)return"";const mt=Fn(),{heartbeatsToSend:Qt,unsentEntries:wn}=function pr(Ze,He=1024){const mt=[];let Qt=Ze.slice();for(const wn of Ze){const Ln=mt.find(Rn=>Rn.agent===wn.agent);if(Ln){if(Ln.dates.push(wn.date),Oo(mt)>He){Ln.dates.pop();break}}else if(mt.push({agent:wn.agent,dates:[wn.date]}),Oo(mt)>He){mt.pop();break}Qt=Qt.slice(1)}return{heartbeatsToSend:mt,unsentEntries:Qt}}(He._heartbeatsCache.heartbeats),Ln=(0,R.L)(JSON.stringify({version:2,heartbeats:Qt}));return He._heartbeatsCache.lastSentHeartbeatDate=mt,wn.length>0?(He._heartbeatsCache.heartbeats=wn,yield He._storage.overwrite(He._heartbeatsCache)):(He._heartbeatsCache.heartbeats=[],He._storage.overwrite(He._heartbeatsCache)),Ln})()}}function Fn(){return(new Date).toISOString().substring(0,10)}class hs{constructor(He){this.app=He,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,P.Z)(function*(){return!!(0,R.hl)()&&(0,R.eu)().then(()=>!0).catch(()=>!1)})()}read(){var He=this;return(0,P.Z)(function*(){return(yield He._canUseIndexedDBPromise)&&(yield function nt(Ze){return je.apply(this,arguments)}(He.app))||{heartbeats:[]}})()}overwrite(He){var mt=this;return(0,P.Z)(function*(){var Qt;if(yield mt._canUseIndexedDBPromise){const Ln=yield mt.read();return Ht(mt.app,{lastSentHeartbeatDate:null!==(Qt=He.lastSentHeartbeatDate)&&void 0!==Qt?Qt:Ln.lastSentHeartbeatDate,heartbeats:He.heartbeats})}})()}add(He){var mt=this;return(0,P.Z)(function*(){var Qt;if(yield mt._canUseIndexedDBPromise){const Ln=yield mt.read();return Ht(mt.app,{lastSentHeartbeatDate:null!==(Qt=He.lastSentHeartbeatDate)&&void 0!==Qt?Qt:Ln.lastSentHeartbeatDate,heartbeats:[...Ln.heartbeats,...He.heartbeats]})}})()}}function Oo(Ze){return(0,R.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function ve(Ze){jn(new c.wA("platform-logger",He=>new Fe(He),"PRIVATE")),jn(new c.wA("heartbeat",He=>new mn(He),"PRIVATE")),ri(Pt,"0.9.13",Ze),ri(Pt,"0.9.13","esm2017"),ri("fire-js","")}("")},4537:(N,M,S)=>{"use strict";S.d(M,{H0:()=>pe,wA:()=>B});var P=S(5861),c=S(9058);class B{constructor(ce,me,Ne){this.name=ce,this.instanceFactory=me,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const R="[DEFAULT]";class W{constructor(ce,me){this.name=ce,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const me=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(me)){const Ne=new c.BH;if(this.instancesDeferred.set(me,Ne),this.isInitialized(me)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:me});at&&Ne.resolve(at)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(ce){var me;const Ne=this.normalizeInstanceIdentifier(ce?.identifier),at=null!==(me=ce?.optional)&&void 0!==me&&me;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(tt){if(at)return null;throw tt}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function Q(Ce){return"EAGER"===Ce.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:R})}catch{}for(const[me,Ne]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(me);try{const tt=this.getOrInitializeService({instanceIdentifier:at});Ne.resolve(tt)}catch{}}}}clearInstance(ce=R){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,P.Z)(function*(){const me=Array.from(ce.instances.values());yield Promise.all([...me.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...me.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=R){return this.instances.has(ce)}getOptions(ce=R){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:me={}}=ce,Ne=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:Ne,options:me});for(const[tt,wt]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(tt)&&wt.resolve(at);return at}onInit(ce,me){var Ne;const at=this.normalizeInstanceIdentifier(me),tt=null!==(Ne=this.onInitCallbacks.get(at))&&void 0!==Ne?Ne:new Set;tt.add(ce),this.onInitCallbacks.set(at,tt);const wt=this.instances.get(at);return wt&&ce(wt,at),()=>{tt.delete(ce)}}invokeOnInitCallbacks(ce,me){const Ne=this.onInitCallbacks.get(me);if(Ne)for(const at of Ne)try{at(ce,me)}catch{}}getOrInitializeService({instanceIdentifier:ce,options:me={}}){let Ne=this.instances.get(ce);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=ce,Ce===R?void 0:Ce),options:me}),this.instances.set(ce,Ne),this.instancesOptions.set(ce,me),this.invokeOnInitCallbacks(Ne,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,Ne)}catch{}var Ce;return Ne||null}normalizeInstanceIdentifier(ce=R){return this.component?this.component.multipleInstances?ce:R:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const me=this.getProvider(ce.name);if(me.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);me.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const me=new W(ce,this);return this.providers.set(ce,me),me}getProviders(){return Array.from(this.providers.values())}}},7879:(N,M,S)=>{"use strict";S.d(M,{Am:()=>Ce,Ub:()=>pe,Yd:()=>Q,in:()=>c});const P=[];var c=(()=>((c=c||{})[c.DEBUG=0]="DEBUG",c[c.VERBOSE=1]="VERBOSE",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.SILENT=5]="SILENT",c))();const B={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},R=c.INFO,W={[c.DEBUG]:"log",[c.VERBOSE]:"log",[c.INFO]:"info",[c.WARN]:"warn",[c.ERROR]:"error"},Y=(ce,me,...Ne)=>{if(me<ce.logLevel)return;const at=(new Date).toISOString(),tt=W[me];if(!tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[tt](`[${at}]  ${ce.name}:`,...Ne)};class Q{constructor(me){this.name=me,this._logLevel=R,this._logHandler=Y,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in c))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?B[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,c.DEBUG,...me),this._logHandler(this,c.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,c.VERBOSE,...me),this._logHandler(this,c.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,c.INFO,...me),this._logHandler(this,c.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,c.WARN,...me),this._logHandler(this,c.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,c.ERROR,...me),this._logHandler(this,c.ERROR,...me)}}function pe(ce){P.forEach(me=>{me.setLogLevel(ce)})}function Ce(ce,me){for(const Ne of P){let at=null;me&&me.level&&(at=B[me.level]),Ne.userLogHandler=null===ce?null:(tt,wt,...lt)=>{const le=lt.map($e=>{if(null==$e)return null;if("string"==typeof $e)return $e;if("number"==typeof $e||"boolean"==typeof $e)return $e.toString();if($e instanceof Error)return $e.message;try{return JSON.stringify($e)}catch{return null}}).filter($e=>$e).join(" ");wt>=(at??tt.logLevel)&&ce({level:c[wt].toLowerCase(),message:le,args:lt,type:tt.name})}}}},3182:(N,M,S)=>{"use strict";S.d(M,{C6:()=>P.getApps,KN:()=>P.registerVersion,Mq:()=>P.getApp,ZF:()=>P.initializeApp});var P=S(534);(0,P.registerVersion)("firebase","9.23.0","app")},7142:(N,M,S)=>{"use strict";S.d(M,{Z:()=>P.Z});var P=S(3106);P.Z.registerVersion("firebase","9.23.0","app-compat")},5861:(N,M,S)=>{"use strict";function P(B,R,W,Y,Q,pe,Ce){try{var ce=B[pe](Ce),me=ce.value}catch(Ne){return void W(Ne)}ce.done?R(me):Promise.resolve(me).then(Y,Q)}function c(B){return function(){var R=this,W=arguments;return new Promise(function(Y,Q){var pe=B.apply(R,W);function Ce(me){P(pe,Y,Q,Ce,ce,"next",me)}function ce(me){P(pe,Y,Q,Ce,ce,"throw",me)}Ce(void 0)})}}S.d(M,{Z:()=>c})}},N=>{N(N.s=2137)}]);